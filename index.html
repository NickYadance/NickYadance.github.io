<!DOCTYPE html>
<head><meta charset="utf-8" /><meta content="minimum-scale=1, initial-scale=1, width=device-width, shrink-to-fit=no" name="viewport" /><link href="static/css/style.css" rel="stylesheet" type="text/css" /><link href="static/css/custom.css" rel="stylesheet" type="text/css" /><link href="static/img/logo.png" rel="shortcut icon" type="image/png" /><link href="static/img/logo.png" rel="shortcut icon" sizes="192x192" /><link href="static/img/logo.png" rel="apple-touch-icon" /><meta name="apple-mobile-web-app-title" /><meta content="yes" name="apple-mobile-web-app-capable" /><meta content="yes" name="apple-touch-fullscreen" /><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style" /><meta content="yes" name="mobile-web-app-capable" /><meta property="og:title" /><meta content="site" property="og:type" /><meta content="static/img/logo.png" property="og:image" /><meta property="og:description" /><title></title><meta property="og:site_name" /><meta /></head><body><div id="root"></div><script>window.logseq_db="[&quot;~#datascript/DB&quot;,[&quot;^ &quot;,&quot;~:schema&quot;,[&quot;^ &quot;,&quot;~:ast/version&quot;,[&quot;^ &quot;],&quot;~:db/encryption-keys&quot;,[&quot;^ &quot;],&quot;~:file/content&quot;,[&quot;^ &quot;],&quot;~:git/status&quot;,[&quot;^ &quot;],&quot;~:repo/cloned?&quot;,[&quot;^ &quot;],&quot;~:block/alias&quot;,[&quot;^ &quot;,&quot;~:db/valueType&quot;,&quot;~:db.type/ref&quot;,&quot;~:db/cardinality&quot;,&quot;~:db.cardinality/many&quot;],&quot;~:git/error&quot;,[&quot;^ &quot;],&quot;~:block/pre-block?&quot;,[&quot;^ &quot;],&quot;~:git/last-pulled-at&quot;,[&quot;^ &quot;],&quot;~:block/uuid&quot;,[&quot;^ &quot;,&quot;~:db/unique&quot;,&quot;~:db.unique/identity&quot;],&quot;~:repo/url&quot;,[&quot;^ &quot;,&quot;^@&quot;,&quot;^A&quot;],&quot;~:block/priority&quot;,[&quot;^ &quot;],&quot;~:block/properties&quot;,[&quot;^ &quot;],&quot;~:block/journal?&quot;,[&quot;^ &quot;],&quot;~:block/namespace&quot;,[&quot;^ &quot;,&quot;^8&quot;,&quot;^9&quot;],&quot;~:block/updated-at&quot;,[&quot;^ &quot;],&quot;~:block/repeated?&quot;,[&quot;^ &quot;],&quot;~:db/type&quot;,[&quot;^ &quot;],&quot;~:file/handle&quot;,[&quot;^ &quot;],&quot;~:block/left&quot;,[&quot;^ &quot;,&quot;^8&quot;,&quot;^9&quot;],&quot;~:block/refs&quot;,[&quot;^ &quot;,&quot;^8&quot;,&quot;^9&quot;,&quot;^:&quot;,&quot;^;&quot;],&quot;~:block/scheduled&quot;,[&quot;^ &quot;],&quot;~:me/avatar&quot;,[&quot;^ &quot;],&quot;~:db/encrypted?&quot;,[&quot;^ &quot;],&quot;~:block/properties-order&quot;,[&quot;^ &quot;],&quot;~:block/created-at&quot;,[&quot;^ &quot;],&quot;~:block/deadline&quot;,[&quot;^ &quot;],&quot;~:block/body&quot;,[&quot;^ &quot;],&quot;~:me/name&quot;,[&quot;^ &quot;],&quot;~:block/meta&quot;,[&quot;^ &quot;],&quot;~:block/journal-day&quot;,[&quot;^ &quot;],&quot;~:block/format&quot;,[&quot;^ &quot;],&quot;~:block/level&quot;,[&quot;^ &quot;],&quot;~:block/tags&quot;,[&quot;^ &quot;,&quot;^8&quot;,&quot;^9&quot;,&quot;^:&quot;,&quot;^;&quot;],&quot;~:block/title&quot;,[&quot;^ &quot;],&quot;~:block/content&quot;,[&quot;^ &quot;],&quot;~:recent/pages&quot;,[&quot;^ &quot;],&quot;~:db/ident&quot;,[&quot;^ &quot;,&quot;^@&quot;,&quot;^A&quot;],&quot;~:block/path-refs&quot;,[&quot;^ &quot;,&quot;^8&quot;,&quot;^9&quot;,&quot;^:&quot;,&quot;^;&quot;],&quot;~:block/parent&quot;,[&quot;^ &quot;,&quot;^8&quot;,&quot;^9&quot;],&quot;~:block/heading-level&quot;,[&quot;^ &quot;],&quot;~:block/type&quot;,[&quot;^ &quot;],&quot;~:me/email&quot;,[&quot;^ &quot;],&quot;~:block/page&quot;,[&quot;^ &quot;,&quot;^8&quot;,&quot;^9&quot;,&quot;~:db/index&quot;,true],&quot;~:block/name&quot;,[&quot;^ &quot;,&quot;^@&quot;,&quot;^A&quot;],&quot;~:file/path&quot;,[&quot;^ &quot;,&quot;^@&quot;,&quot;^A&quot;],&quot;~:block/file&quot;,[&quot;^ &quot;,&quot;^8&quot;,&quot;^9&quot;],&quot;~:block/marker&quot;,[&quot;^ &quot;],&quot;~:block/original-name&quot;,[&quot;^ &quot;,&quot;^@&quot;,&quot;^A&quot;],&quot;~:schema/version&quot;,[&quot;^ &quot;]],&quot;~:datoms&quot;,[&quot;~#list&quot;,[[&quot;~#datascript/Datom&quot;,[1,&quot;^I&quot;,&quot;~:local-native-fs&quot;,536870913]],[&quot;^1A&quot;,[1,&quot;^1&gt;&quot;,&quot;0.0.2&quot;,536870913]],[&quot;^1A&quot;,[2,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[2,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[2,&quot;^19&quot;,&quot;todo&quot;,536870914]],[&quot;^1A&quot;,[2,&quot;^1=&quot;,&quot;TODO&quot;,536870914]],[&quot;^1A&quot;,[2,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[2,&quot;^?&quot;,&quot;~u966a8223-d63b-495a-b641-4a37acaf7ff6&quot;,536881169]],[&quot;^1A&quot;,[3,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[3,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[3,&quot;^19&quot;,&quot;now&quot;,536870914]],[&quot;^1A&quot;,[3,&quot;^1=&quot;,&quot;NOW&quot;,536870914]],[&quot;^1A&quot;,[3,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[3,&quot;^?&quot;,&quot;~u9758edcf-0137-47fd-9b39-c9b1d9324dd4&quot;,536881169]],[&quot;^1A&quot;,[4,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[4,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[4,&quot;^19&quot;,&quot;later&quot;,536870914]],[&quot;^1A&quot;,[4,&quot;^1=&quot;,&quot;LATER&quot;,536870914]],[&quot;^1A&quot;,[4,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[4,&quot;^?&quot;,&quot;~ub746f94b-fa37-4077-91df-ce5d885df76c&quot;,536881169]],[&quot;^1A&quot;,[5,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[5,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[5,&quot;^19&quot;,&quot;done&quot;,536870914]],[&quot;^1A&quot;,[5,&quot;^1=&quot;,&quot;DONE&quot;,536870914]],[&quot;^1A&quot;,[5,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[5,&quot;^?&quot;,&quot;~ucb517bde-47c5-4604-82f1-9db9900a42d6&quot;,536881169]],[&quot;^1A&quot;,[6,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[6,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[6,&quot;^19&quot;,&quot;doing&quot;,536870914]],[&quot;^1A&quot;,[6,&quot;^1=&quot;,&quot;DOING&quot;,536870914]],[&quot;^1A&quot;,[6,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[6,&quot;^?&quot;,&quot;~u1c36f239-fb78-4751-9857-09eb50721667&quot;,536881169]],[&quot;^1A&quot;,[7,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[7,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[7,&quot;^19&quot;,&quot;in-progress&quot;,536870914]],[&quot;^1A&quot;,[7,&quot;^1=&quot;,&quot;IN-PROGRESS&quot;,536870914]],[&quot;^1A&quot;,[7,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[7,&quot;^?&quot;,&quot;~ufdf7a6fe-3e3e-46c4-88da-f6bcd6e6ced5&quot;,536881169]],[&quot;^1A&quot;,[8,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[8,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[8,&quot;^19&quot;,&quot;c&quot;,536870914]],[&quot;^1A&quot;,[8,&quot;^1=&quot;,&quot;C&quot;,536870914]],[&quot;^1A&quot;,[8,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[8,&quot;^?&quot;,&quot;~uccd34d32-3bc7-45b1-86b3-5f2d3ee5d5de&quot;,536881169]],[&quot;^1A&quot;,[9,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[9,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[9,&quot;^19&quot;,&quot;b&quot;,536870914]],[&quot;^1A&quot;,[9,&quot;^1=&quot;,&quot;B&quot;,536870914]],[&quot;^1A&quot;,[9,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[9,&quot;^?&quot;,&quot;~ue9fe458c-b7a2-4b64-9bfd-20686815f5d7&quot;,536881169]],[&quot;^1A&quot;,[10,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[10,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[10,&quot;^19&quot;,&quot;waiting&quot;,536870914]],[&quot;^1A&quot;,[10,&quot;^1=&quot;,&quot;WAITING&quot;,536870914]],[&quot;^1A&quot;,[10,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[10,&quot;^?&quot;,&quot;~ud5edbaf7-9282-4778-857e-2d1630a70df8&quot;,536881169]],[&quot;^1A&quot;,[11,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[11,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[11,&quot;^19&quot;,&quot;a&quot;,536870914]],[&quot;^1A&quot;,[11,&quot;^1=&quot;,&quot;A&quot;,536870914]],[&quot;^1A&quot;,[11,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[11,&quot;^?&quot;,&quot;~u8e20c5fb-cbf7-4742-8840-c0faa7f2eabb&quot;,536881169]],[&quot;^1A&quot;,[12,&quot;^Q&quot;,1627703658941,536870917]],[&quot;^1A&quot;,[12,&quot;^E&quot;,false,536870914]],[&quot;^1A&quot;,[12,&quot;^19&quot;,&quot;wait&quot;,536870914]],[&quot;^1A&quot;,[12,&quot;^1=&quot;,&quot;WAIT&quot;,536870914]],[&quot;^1A&quot;,[12,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[12,&quot;^?&quot;,&quot;~u4872ac60-bd47-4a54-8d0a-3b3f00d1f4a1&quot;,536881169]],[&quot;^1A&quot;,[52,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[52,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[52,&quot;^19&quot;,&quot;csp&quot;,536870916]],[&quot;^1A&quot;,[52,&quot;^1=&quot;,&quot;csp&quot;,536870916]],[&quot;^1A&quot;,[52,&quot;^G&quot;,1632815042710,536873287]],[&quot;^1A&quot;,[52,&quot;^?&quot;,&quot;~u611b87e6-33b9-4978-8720-00fe8d35ac4d&quot;,536870916]],[&quot;^1A&quot;,[54,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[54,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[54,&quot;^19&quot;,&quot;rdbms&quot;,536883489]],[&quot;^1A&quot;,[54,&quot;^1=&quot;,&quot;rdbms&quot;,536883489]],[&quot;^1A&quot;,[54,&quot;^G&quot;,1634023259502,536884468]],[&quot;^1A&quot;,[54,&quot;^?&quot;,&quot;~u611b87e6-5739-4966-9c97-ab8884b3b2d1&quot;,536870916]],[&quot;^1A&quot;,[55,&quot;^Q&quot;,1629194186509,536870917]],[&quot;^1A&quot;,[55,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[55,&quot;^19&quot;,&quot;../assets/cv_1628152243920_0.pdf&quot;,536870916]],[&quot;^1A&quot;,[55,&quot;^1=&quot;,&quot;../assets/cv_1628152243920_0.pdf&quot;,536870916]],[&quot;^1A&quot;,[55,&quot;^G&quot;,1629194186509,536870917]],[&quot;^1A&quot;,[55,&quot;^?&quot;,&quot;~u611b87e6-5ec8-4aa3-87e3-67419d0203f8&quot;,536870916]],[&quot;^1A&quot;,[56,&quot;^Q&quot;,1628152203525,536878014]],[&quot;^1A&quot;,[56,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[56,&quot;^19&quot;,&quot;nicky&quot;,536870916]],[&quot;^1A&quot;,[56,&quot;^1=&quot;,&quot;Nicky&quot;,536870916]],[&quot;^1A&quot;,[56,&quot;^D&quot;,[&quot;^ &quot;,&quot;~:public&quot;,true],536884625]],[&quot;^1A&quot;,[56,&quot;~:block/unordered&quot;,true,536877799]],[&quot;^1A&quot;,[56,&quot;^G&quot;,1634024373417,536884628]],[&quot;^1A&quot;,[56,&quot;^?&quot;,&quot;~u611b87e6-112f-4ffe-9ad6-e654c3af4026&quot;,536870916]],[&quot;^1A&quot;,[57,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[57,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[57,&quot;^19&quot;,&quot;aqs&quot;,536870916]],[&quot;^1A&quot;,[57,&quot;^1=&quot;,&quot;AQS&quot;,536870916]],[&quot;^1A&quot;,[57,&quot;^G&quot;,1628406887911,536870917]],[&quot;^1A&quot;,[57,&quot;^?&quot;,&quot;~u611b87e6-697a-406d-926f-f258eb0ee166&quot;,536870916]],[&quot;^1A&quot;,[58,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[58,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[58,&quot;^19&quot;,&quot;case study&quot;,536870916]],[&quot;^1A&quot;,[58,&quot;^1=&quot;,&quot;case study&quot;,536870916]],[&quot;^1A&quot;,[58,&quot;^G&quot;,1632637900238,536871628]],[&quot;^1A&quot;,[58,&quot;^?&quot;,&quot;~u611b87e6-5df4-465f-9fc1-b15a90acddb0&quot;,536870916]],[&quot;^1A&quot;,[59,&quot;^Q&quot;,1627100585351,536870917]],[&quot;^1A&quot;,[59,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[59,&quot;^19&quot;,&quot;mongodb&quot;,536870916]],[&quot;^1A&quot;,[59,&quot;^1=&quot;,&quot;mongodb&quot;,536870916]],[&quot;^1A&quot;,[59,&quot;^G&quot;,1634010966346,536883341]],[&quot;^1A&quot;,[59,&quot;^?&quot;,&quot;~u611b87e6-3692-420f-b7ee-d9e0ea46060b&quot;,536870916]],[&quot;^1A&quot;,[60,&quot;^Q&quot;,1628243475251,536870917]],[&quot;^1A&quot;,[60,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[60,&quot;^19&quot;,&quot;关键字&quot;,536870916]],[&quot;^1A&quot;,[60,&quot;^1=&quot;,&quot;关键字&quot;,536870916]],[&quot;^1A&quot;,[60,&quot;^G&quot;,1628509629728,536870917]],[&quot;^1A&quot;,[60,&quot;^?&quot;,&quot;~u611b87e6-a79b-4853-9cc6-4f4d3dee85b9&quot;,536870916]],[&quot;^1A&quot;,[61,&quot;^Q&quot;,1627101317466,536870917]],[&quot;^1A&quot;,[61,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[61,&quot;^19&quot;,&quot;分片&quot;,536870916]],[&quot;^1A&quot;,[61,&quot;^1=&quot;,&quot;分片&quot;,536870916]],[&quot;^1A&quot;,[61,&quot;^G&quot;,1628156429986,536870917]],[&quot;^1A&quot;,[61,&quot;^?&quot;,&quot;~u611b87e6-d129-4205-b3ba-7ae1b48e6eb1&quot;,536870916]],[&quot;^1A&quot;,[63,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[63,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[63,&quot;^19&quot;,&quot;批量短信任务bug&quot;,536870916]],[&quot;^1A&quot;,[63,&quot;^1=&quot;,&quot;批量短信任务Bug&quot;,536870916]],[&quot;^1A&quot;,[63,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[63,&quot;^?&quot;,&quot;~u611b87e6-1338-41d4-ab8e-7d78202384b0&quot;,536870916]],[&quot;^1A&quot;,[64,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[64,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[64,&quot;^19&quot;,&quot;java&quot;,536870916]],[&quot;^1A&quot;,[64,&quot;^1=&quot;,&quot;java&quot;,536870916]],[&quot;^1A&quot;,[64,&quot;^G&quot;,1628486016164,536870917]],[&quot;^1A&quot;,[64,&quot;^?&quot;,&quot;~u611b87e6-bfa6-4540-a89c-ff5d45efba62&quot;,536870916]],[&quot;^1A&quot;,[65,&quot;^Q&quot;,1627891389590,536870917]],[&quot;^1A&quot;,[65,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[65,&quot;^19&quot;,&quot;索引组织&quot;,536870916]],[&quot;^1A&quot;,[65,&quot;^1=&quot;,&quot;索引组织&quot;,536870916]],[&quot;^1A&quot;,[65,&quot;^G&quot;,1634010860292,536883292]],[&quot;^1A&quot;,[65,&quot;^?&quot;,&quot;~u611b87e6-7d03-49cb-bf89-a222748e84c5&quot;,536870916]],[&quot;^1A&quot;,[66,&quot;^Q&quot;,1628044245024,536870917]],[&quot;^1A&quot;,[66,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[66,&quot;^19&quot;,&quot;page cache&quot;,536870916]],[&quot;^1A&quot;,[66,&quot;^1=&quot;,&quot;page cache&quot;,536870916]],[&quot;^1A&quot;,[66,&quot;^G&quot;,1628044264014,536870917]],[&quot;^1A&quot;,[66,&quot;^?&quot;,&quot;~u611b87e6-98b1-4469-a02f-37e8107040ea&quot;,536870916]],[&quot;^1A&quot;,[67,&quot;^Q&quot;,1627186053270,536870917]],[&quot;^1A&quot;,[67,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[67,&quot;^19&quot;,&quot;数据类型&quot;,536870916]],[&quot;^1A&quot;,[67,&quot;^1=&quot;,&quot;数据类型&quot;,536870916]],[&quot;^1A&quot;,[67,&quot;^G&quot;,1628156563497,536870917]],[&quot;^1A&quot;,[67,&quot;^?&quot;,&quot;~u611b87e6-c6a7-44e9-86aa-dff2f9ce9c5c&quot;,536870916]],[&quot;^1A&quot;,[68,&quot;^Q&quot;,1627101113100,536870917]],[&quot;^1A&quot;,[68,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[68,&quot;^19&quot;,&quot;副本集&quot;,536870916]],[&quot;^1A&quot;,[68,&quot;^1=&quot;,&quot;副本集&quot;,536870916]],[&quot;^1A&quot;,[68,&quot;^G&quot;,1632896435605,536873392]],[&quot;^1A&quot;,[68,&quot;^?&quot;,&quot;~u611b87e6-d6b0-47e6-9219-6e856a773c95&quot;,536870916]],[&quot;^1A&quot;,[69,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[69,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[69,&quot;^19&quot;,&quot;blog&quot;,536870916]],[&quot;^1A&quot;,[69,&quot;^1=&quot;,&quot;blog&quot;,536870916]],[&quot;^1A&quot;,[69,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[69,&quot;^?&quot;,&quot;~u611b87e6-fe3d-4c95-8488-63dac3fc051f&quot;,536870916]],[&quot;^1A&quot;,[70,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[70,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[70,&quot;^19&quot;,&quot;nio&quot;,536870916]],[&quot;^1A&quot;,[70,&quot;^1=&quot;,&quot;nio&quot;,536870916]],[&quot;^1A&quot;,[70,&quot;^G&quot;,1628134394248,536870917]],[&quot;^1A&quot;,[70,&quot;^?&quot;,&quot;~u611b87e6-557d-401b-acd6-73e6d4b0a2f1&quot;,536870916]],[&quot;^1A&quot;,[71,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[71,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[71,&quot;^19&quot;,&quot;contents&quot;,536870916]],[&quot;^1A&quot;,[71,&quot;^1=&quot;,&quot;Contents&quot;,536870916]],[&quot;^1A&quot;,[71,&quot;^G&quot;,1633773725624,536878901]],[&quot;^1A&quot;,[71,&quot;^?&quot;,&quot;~u611b87e6-2cb7-43cb-9175-4b17c268e6d7&quot;,536870916]],[&quot;^1A&quot;,[72,&quot;^Q&quot;,1629014409475,536870917]],[&quot;^1A&quot;,[72,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[72,&quot;^19&quot;,&quot;raft&quot;,536870916]],[&quot;^1A&quot;,[72,&quot;^1=&quot;,&quot;raft&quot;,536870916]],[&quot;^1A&quot;,[72,&quot;^G&quot;,1629014694330,536870917]],[&quot;^1A&quot;,[72,&quot;^?&quot;,&quot;~u611b87e6-10e3-478c-ae17-b3747a0351cd&quot;,536870916]],[&quot;^1A&quot;,[73,&quot;^Q&quot;,1629194186509,536870917]],[&quot;^1A&quot;,[73,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[73,&quot;^19&quot;,&quot;pm&quot;,536870916]],[&quot;^1A&quot;,[73,&quot;^1=&quot;,&quot;pm&quot;,536870916]],[&quot;^1A&quot;,[73,&quot;^G&quot;,1629194186509,536870917]],[&quot;^1A&quot;,[73,&quot;^?&quot;,&quot;~u611b87e6-f770-4ab5-bfa0-4d20d9d45a29&quot;,536870916]],[&quot;^1A&quot;,[74,&quot;^Q&quot;,1628245375581,536870917]],[&quot;^1A&quot;,[74,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[74,&quot;^19&quot;,&quot;soa&quot;,536870916]],[&quot;^1A&quot;,[74,&quot;^1=&quot;,&quot;soa&quot;,536870916]],[&quot;^1A&quot;,[74,&quot;^G&quot;,1629019081580,536870917]],[&quot;^1A&quot;,[74,&quot;^?&quot;,&quot;~u611b87e6-ffaa-4d65-8162-fcbc7de05758&quot;,536870916]],[&quot;^1A&quot;,[75,&quot;^Q&quot;,1628157215146,536870917]],[&quot;^1A&quot;,[75,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[75,&quot;^19&quot;,&quot;kafka&quot;,536870916]],[&quot;^1A&quot;,[75,&quot;^1=&quot;,&quot;kafka&quot;,536870916]],[&quot;^1A&quot;,[75,&quot;^G&quot;,1632798557482,536873254]],[&quot;^1A&quot;,[75,&quot;^?&quot;,&quot;~u611b87e6-a20d-470a-b862-21c9d4dcd6a9&quot;,536870916]],[&quot;^1A&quot;,[77,&quot;^Q&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[77,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[77,&quot;^19&quot;,&quot;spring&quot;,536870916]],[&quot;^1A&quot;,[77,&quot;^1=&quot;,&quot;spring&quot;,536870916]],[&quot;^1A&quot;,[77,&quot;^G&quot;,1627703658942,536870917]],[&quot;^1A&quot;,[77,&quot;^?&quot;,&quot;~u611b87e6-1394-4926-8b6e-885ceb8298cc&quot;,536870916]],[&quot;^1A&quot;,[78,&quot;^Q&quot;,1629194186508,536870917]],[&quot;^1A&quot;,[78,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[78,&quot;^19&quot;,&quot;nio demo&quot;,536870916]],[&quot;^1A&quot;,[78,&quot;^1=&quot;,&quot;nio demo&quot;,536870916]],[&quot;^1A&quot;,[78,&quot;^G&quot;,1629194186508,536870917]],[&quot;^1A&quot;,[78,&quot;^?&quot;,&quot;~u611b87e6-fd6e-4ba4-adf2-d809a1d50738&quot;,536870916]],[&quot;^1A&quot;,[79,&quot;^Q&quot;,1627185926916,536870917]],[&quot;^1A&quot;,[79,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[79,&quot;^19&quot;,&quot;redis&quot;,536870916]],[&quot;^1A&quot;,[79,&quot;^1=&quot;,&quot;redis&quot;,536870916]],[&quot;^1A&quot;,[79,&quot;^G&quot;,1628156742548,536870917]],[&quot;^1A&quot;,[79,&quot;^?&quot;,&quot;~u611b87e6-bac3-4997-b327-d9372621ca20&quot;,536870916]],[&quot;^1A&quot;,[80,&quot;^Q&quot;,1628486047146,536870917]],[&quot;^1A&quot;,[80,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[80,&quot;^19&quot;,&quot;jvm&quot;,536870916]],[&quot;^1A&quot;,[80,&quot;^1=&quot;,&quot;jvm&quot;,536870916]],[&quot;^1A&quot;,[80,&quot;^G&quot;,1628493754856,536870917]],[&quot;^1A&quot;,[80,&quot;^?&quot;,&quot;~u611b87e6-f932-4304-ad43-1e2b475e4d25&quot;,536870916]],[&quot;^1A&quot;,[81,&quot;^Q&quot;,1629194186508,536870917]],[&quot;^1A&quot;,[81,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[81,&quot;^19&quot;,&quot;对象编码描述&quot;,536870916]],[&quot;^1A&quot;,[81,&quot;^1=&quot;,&quot;对象编码描述&quot;,536870916]],[&quot;^1A&quot;,[81,&quot;^G&quot;,1629194186508,536870917]],[&quot;^1A&quot;,[81,&quot;^?&quot;,&quot;~u611b87e6-2d2b-4958-8e58-18910c5ae2e0&quot;,536870916]],[&quot;^1A&quot;,[82,&quot;^Q&quot;,1627100829865,536870917]],[&quot;^1A&quot;,[82,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[82,&quot;^19&quot;,&quot;索引&quot;,536870916]],[&quot;^1A&quot;,[82,&quot;^1=&quot;,&quot;索引&quot;,536870916]],[&quot;^1A&quot;,[82,&quot;^G&quot;,1634022896794,536884447]],[&quot;^1A&quot;,[82,&quot;^?&quot;,&quot;~u611b87e6-bdca-4bbe-909e-4997de42b843&quot;,536870916]],[&quot;^1A&quot;,[84,&quot;^Q&quot;,1628241920209,536870917]],[&quot;^1A&quot;,[84,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[84,&quot;^19&quot;,&quot;container&quot;,536870916]],[&quot;^1A&quot;,[84,&quot;^1=&quot;,&quot;container&quot;,536870916]],[&quot;^1A&quot;,[84,&quot;^G&quot;,1628478353890,536870917]],[&quot;^1A&quot;,[84,&quot;^?&quot;,&quot;~u611b87e6-251e-4b75-82d2-c2fbfaf3970c&quot;,536870916]],[&quot;^1A&quot;,[85,&quot;^Q&quot;,1627882826810,536870917]],[&quot;^1A&quot;,[85,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[85,&quot;^19&quot;,&quot;锁&quot;,536870916]],[&quot;^1A&quot;,[85,&quot;^1=&quot;,&quot;锁&quot;,536870916]],[&quot;^1A&quot;,[85,&quot;^G&quot;,1627883444115,536870917]],[&quot;^1A&quot;,[85,&quot;^?&quot;,&quot;~u611b87e6-b7b9-49c7-ad1e-759a51ad753c&quot;,536870916]],[&quot;^1A&quot;,[86,&quot;^Q&quot;,1628152214101,536870917]],[&quot;^1A&quot;,[86,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[86,&quot;^19&quot;,&quot;resume&quot;,536870916]],[&quot;^1A&quot;,[86,&quot;^1=&quot;,&quot;resume&quot;,536870916]],[&quot;^1A&quot;,[86,&quot;^G&quot;,1633760825148,536877556]],[&quot;^1A&quot;,[86,&quot;^?&quot;,&quot;~u611b87e6-9d93-4081-a884-5ad8e0ccbee3&quot;,536870916]],[&quot;^1A&quot;,[87,&quot;^Q&quot;,1628842122111,536870917]],[&quot;^1A&quot;,[87,&quot;^E&quot;,false,536870916]],[&quot;^1A&quot;,[87,&quot;^19&quot;,&quot;idea&quot;,536870916]],[&quot;^1A&quot;,[87,&quot;^1=&quot;,&quot;idea&quot;,536870916]],[&quot;^1A&quot;,[87,&quot;^G&quot;,1632895734890,536873335]],[&quot;^1A&quot;,[87,&quot;^?&quot;,&quot;~u611b87e6-23df-4b7f-860b-bcf034d34f29&quot;,536870916]],[&quot;^1A&quot;,[88,&quot;~:block/anchor&quot;,&quot;Why&quot;,536870916]],[&quot;^1A&quot;,[88,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;the usual JVM strategy of optimizing locks primarily for the &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;zero-contention case&quot;]]]],[&quot;Plain&quot;,&quot;, leaving other cases to less predictable \\&quot;slow paths\\&quot; [12] is not the right tactic for typical multithreaded server applications that rely heavily on java.util.concurrent.&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Instead, the primary performance goal here is &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;scalability&quot;]]]],[&quot;Plain&quot;,&quot;: to predictably maintain efficiency even, or especially, when synchronizers are contended. Ideally, the overhead required to pass a synchronization point should be constant no matter how many threads are trying to do so&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[88,&quot;~:block/children&quot;,[&quot;~#set&quot;,[]],536870916]],[&quot;^1A&quot;,[88,&quot;^[&quot;,&quot;## Why `Lock-Free`\\nthe usual JVM strategy of optimizing locks primarily for the **zero-contention case**, leaving other cases to less predictable \\&quot;slow paths\\&quot; [12] is not the right tactic for typical multithreaded server applications that rely heavily on java.util.concurrent.\\n\\nInstead, the primary performance goal here is **`scalability`**: to predictably maintain efficiency even, or especially, when synchronizers are contended. Ideally, the overhead required to pass a synchronization point should be constant no matter how many threads are trying to do so&quot;,536870916]],[&quot;^1A&quot;,[88,&quot;^W&quot;,&quot;~:markdown&quot;,536870916]],[&quot;^1A&quot;,[88,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[88,&quot;^K&quot;,57,536870916]],[&quot;^1A&quot;,[88,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[88,&quot;^U&quot;,[&quot;^ &quot;,&quot;~:timestamps&quot;,[],&quot;~:properties&quot;,[],&quot;~:start-pos&quot;,0,&quot;~:end-pos&quot;,562],536870916]],[&quot;^1A&quot;,[88,&quot;^17&quot;,57,536870916]],[&quot;^1A&quot;,[88,&quot;^13&quot;,57,536870916]],[&quot;^1A&quot;,[88,&quot;~:block/size&quot;,2,536870916]],[&quot;^1A&quot;,[88,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Why &quot;],[&quot;Code&quot;,&quot;Lock-Free&quot;]],536870916]],[&quot;^1A&quot;,[88,&quot;^15&quot;,&quot;~:heading&quot;,536870916]],[&quot;^1A&quot;,[88,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[88,&quot;^?&quot;,&quot;~u611b87e5-ccc0-4427-b4a8-083a3e567f25&quot;,536870916]],[&quot;^1A&quot;,[89,&quot;^1E&quot;,&quot;Design&quot;,536870916]],[&quot;^1A&quot;,[89,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;basic acquire operation&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;~:lines&quot;,[&quot;while (synchronization state does not allow acquire) {&quot;,&quot;\\n&quot;,&quot;enqueue current thread if not already queued;&quot;,&quot;\\n&quot;,&quot;possibly block current thread;&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;,&quot;dequeue current thread if it was queued;&quot;,&quot;\\n&quot;],&quot;~:language&quot;,&quot;java&quot;,&quot;~:pos_meta&quot;,[&quot;^ &quot;,&quot;~:start_pos&quot;,604,&quot;~:end_pos&quot;,779],&quot;~:full_content&quot;,&quot;~```java\\nwhile (synchronization state does not allow acquire) {\\nenqueue current thread if not already queued;\\npossibly block current thread;\\n}\\ndequeue current thread if it was queued;\\n```\\n\\n&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;basic release operation&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;update synchronization state;&quot;,&quot;\\n&quot;,&quot;if (state may permit a blocked thread to acquire)&quot;,&quot;\\n&quot;,&quot;unblock one or more queued threads;&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,816,&quot;^1S&quot;,932],&quot;^1T&quot;,&quot;~```java\\nupdate synchronization state;\\nif (state may permit a blocked thread to acquire)\\nunblock one or more queued threads;\\n```\\n&quot;]]],536870916]],[&quot;^1A&quot;,[89,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[89,&quot;^[&quot;,&quot;## Design\\nbasic acquire operation\\n```java\\nwhile (synchronization state does not allow acquire) {\\nenqueue current thread if not already queued;\\npossibly block current thread;\\n}\\ndequeue current thread if it was queued;\\n```\\n\\nbasic release operation\\n```java\\nupdate synchronization state;\\nif (state may permit a blocked thread to acquire)\\nunblock one or more queued threads;\\n```&quot;,536870916]],[&quot;^1A&quot;,[89,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[89,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[89,&quot;^K&quot;,88,536870916]],[&quot;^1A&quot;,[89,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[89,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,562,&quot;^1L&quot;,936],536870916]],[&quot;^1A&quot;,[89,&quot;^17&quot;,57,536870916]],[&quot;^1A&quot;,[89,&quot;^13&quot;,57,536870916]],[&quot;^1A&quot;,[89,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[89,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Design&quot;]],536870916]],[&quot;^1A&quot;,[89,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[89,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[89,&quot;^?&quot;,&quot;~u611b87e5-f98f-4ffb-bf4d-39ddd1b00847&quot;,536870916]],[&quot;^1A&quot;,[90,&quot;^1E&quot;,&quot;CLH_queue&quot;,536870916]],[&quot;^1A&quot;,[90,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;~:url&quot;,[&quot;Search&quot;,&quot;../assets/image_1628403755105_0.png&quot;],&quot;~:label&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;~:full_text&quot;,&quot;![image.png](../assets/image_1628403755105_0.png)&quot;,&quot;~:metadata&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;enqueue operation persuade code&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;do { pred = tail;&quot;,&quot;\\n&quot;,&quot;} while(!tail.compareAndSet(pred, node));&quot;,&quot;\\n&quot;],&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,1036,&quot;^1S&quot;,1096],&quot;^1T&quot;,&quot;~```\\ndo { pred = tail;\\n} while(!tail.compareAndSet(pred, node));\\n```\\n&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;CLH queue acquire operation&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;// 1. 尝试获取资源&quot;,&quot;\\n&quot;,&quot;// @see barging FIFO&quot;,&quot;\\n&quot;,&quot;if (!tryAcquire(arg)) {&quot;,&quot;\\n&quot;,&quot;// 2. 获取不到，初始化队列（首次）并入队&quot;,&quot;\\n&quot;,&quot;node = create and enqueue new node;&quot;,&quot;\\n&quot;,&quot;pred = node effective predecessor;&quot;,&quot;\\n&quot;,&quot;/*&quot;,&quot;\\n&quot;,&quot;1. 开始自旋，当节点满足&quot;,&quot;\\n&quot;,&quot;    a. 是头节点&quot;,&quot;\\n&quot;,&quot;    b. 可获取到锁&quot;,&quot;\\n&quot;,&quot;则出队，否则&quot;,&quot;\\n&quot;,&quot;    a. CAS设置节点状态为中断&quot;,&quot;\\n&quot;,&quot;    b. 然后 park()&quot;,&quot;\\n&quot;,&quot;当节点被唤醒(unpark)时，如果&quot;,&quot;\\n&quot;,&quot;    a. 节点为头节点&quot;,&quot;\\n&quot;,&quot;    b. 可获取到资源&quot;,&quot;\\n&quot;,&quot;则出队(head = node)&quot;,&quot;\\n&quot;,&quot;*/&quot;,&quot;\\n&quot;,&quot;while (pred is not head node || !tryAcquire(arg)){&quot;,&quot;\\n&quot;,&quot;    if (pred signal bit is set)&quot;,&quot;\\n&quot;,&quot;        park();&quot;,&quot;\\n&quot;,&quot;    else&quot;,&quot;\\n&quot;,&quot;        compareAndSet preds signal bit to true;&quot;,&quot;\\n&quot;,&quot;    pred = node effective predecessor;&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;,&quot;head = node;&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,1136,&quot;^1S&quot;,1822],&quot;^1T&quot;,&quot;~```java\\n// 1. 尝试获取资源\\n// @see barging FIFO\\nif (!tryAcquire(arg)) {\\n// 2. 获取不到，初始化队列（首次）并入队\\nnode = create and enqueue new node;\\npred = node effective predecessor;\\n/*\\n1. 开始自旋，当节点满足\\n    a. 是头节点\\n    b. 可获取到锁\\n则出队，否则\\n    a. CAS设置节点状态为中断\\n    b. 然后 park()\\n当节点被唤醒(unpark)时，如果\\n    a. 节点为头节点\\n    b. 可获取到资源\\n则出队(head = node)\\n*/\\nwhile (pred is not head node || !tryAcquire(arg)){\\n    if (pred signal bit is set)\\n        park();\\n    else\\n        compareAndSet preds signal bit to true;\\n    pred = node effective predecessor;\\n}\\nhead = node;\\n}\\n```\\n&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;CLH queue release operation&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;// 1. 变更状态为release后，唤醒队头元素（FIFO）&quot;,&quot;\\n&quot;,&quot;if (tryRelease(arg) &amp;&amp; head node signal bit is set) {&quot;,&quot;\\n&quot;,&quot;// 2. CAS队头信号为false&quot;,&quot;\\n&quot;,&quot;compareAndSet head signal bit to false;&quot;,&quot;\\n&quot;,&quot;unpark head successor, if one exists;&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,1862,&quot;^1S&quot;,2089],&quot;^1T&quot;,&quot;~```java\\n// 1. 变更状态为release后，唤醒队头元素（FIFO）\\nif (tryRelease(arg) &amp;&amp; head node signal bit is set) {\\n// 2. CAS队头信号为false\\ncompareAndSet head signal bit to false;\\nunpark head successor, if one exists;\\n}\\n```\\n&quot;]]],536870916]],[&quot;^1A&quot;,[90,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[90,&quot;^[&quot;,&quot;## CLH queue\\n![image.png](../assets/image_1628403755105_0.png) \\nenqueue operation persuade code\\n```\\ndo { pred = tail;\\n} while(!tail.compareAndSet(pred, node));\\n```\\nCLH queue acquire operation\\n```java\\n// 1. 尝试获取资源\\n// @see barging FIFO\\nif (!tryAcquire(arg)) {\\n// 2. 获取不到，初始化队列（首次）并入队\\nnode = create and enqueue new node;\\npred = node effective predecessor;\\n/*\\n1. 开始自旋，当节点满足\\n  a. 是头节点\\n  b. 可获取到锁\\n则出队，否则\\n  a. CAS设置节点状态为中断\\n  b. 然后 park()\\n当节点被唤醒(unpark)时，如果\\n  a. 节点为头节点\\n  b. 可获取到资源\\n则出队(head = node)\\n*/\\nwhile (pred is not head node || !tryAcquire(arg)){\\n  if (pred signal bit is set)\\n      park();\\n  else\\n      compareAndSet preds signal bit to true;\\n  pred = node effective predecessor;\\n}\\nhead = node;\\n}\\n```\\nCLH queue release operation\\n```java\\n// 1. 变更状态为release后，唤醒队头元素（FIFO）\\nif (tryRelease(arg) &amp;&amp; head node signal bit is set) {\\n// 2. CAS队头信号为false\\ncompareAndSet head signal bit to false;\\nunpark head successor, if one exists;\\n}\\n```&quot;,536870916]],[&quot;^1A&quot;,[90,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[90,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[90,&quot;^K&quot;,89,536870916]],[&quot;^1A&quot;,[90,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[90,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,936,&quot;^1L&quot;,2093],536870916]],[&quot;^1A&quot;,[90,&quot;^17&quot;,57,536870916]],[&quot;^1A&quot;,[90,&quot;^13&quot;,57,536870916]],[&quot;^1A&quot;,[90,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[90,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;CLH queue&quot;]],536870916]],[&quot;^1A&quot;,[90,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[90,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[90,&quot;^?&quot;,&quot;~u611b87e5-7963-433d-8961-1bfc9d5b4dee&quot;,536870916]],[&quot;^1A&quot;,[91,&quot;^1E&quot;,&quot;Condition_queues(-e6--9d--a1--e4--bb--b6--e9--98--9f--e5--88--97-)&quot;,536870916]],[&quot;^1A&quot;,[91,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Condition 内部维护一个条件队列，在获取锁的情况下，线程调用 await，线程会被放置在条件队列中并被阻塞。直到调用 signal、signalAll 唤醒线程，此后线程唤醒，会放入到 AQS 的同步队列，参与争抢锁资源。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;A ConditionObject uses the &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;same internal queue *&quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;nodes as synchronizers, but maintains them on a &quot;]]]],[&quot;Plain&quot;,&quot;*&quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;separate condition queue&quot;]]]]]]],[&quot;Plain&quot;,&quot;. The signal operation is implemented as a queue transfer from the condition queue to the lock queue, without necessarily waking up the signalled thread before it has re-acquired its lock.&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;condition queue basic await&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;create and add new node to condition queue; release lock;&quot;,&quot;\\n&quot;,&quot;block (by invoking `park` method) until node is on lock queue;&quot;,&quot;\\n&quot;,&quot;re-acquire lock;&quot;,&quot;\\n&quot;],&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,2749,&quot;^1S&quot;,2887],&quot;^1T&quot;,&quot;~```\\ncreate and add new node to condition queue; release lock;\\nblock (by invoking `park` method) until node is on lock queue;\\nre-acquire lock;\\n```\\n&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;condition queue basic signal&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;transfer the first node from condition queue to lock queue;&quot;,&quot;\\n&quot;],&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,2924,&quot;^1S&quot;,2984],&quot;^1T&quot;,&quot;~```\\ntransfer the first node from condition queue to lock queue;\\n```\\n&quot;]]],536870916]],[&quot;^1A&quot;,[91,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[91,&quot;^[&quot;,&quot;## Condition queues(条件队列)\\nCondition 内部维护一个条件队列，在获取锁的情况下，线程调用 await，线程会被放置在条件队列中并被阻塞。直到调用 signal、signalAll 唤醒线程，此后线程唤醒，会放入到 AQS 的同步队列，参与争抢锁资源。\\n\\nA ConditionObject uses the **same internal queue **nodes as synchronizers, but maintains them on a **_separate condition queue_**. The signal operation is implemented as a queue transfer from the condition queue to the lock queue, without necessarily waking up the signalled thread before it has re-acquired its lock.\\n\\ncondition queue basic await\\n```\\ncreate and add new node to condition queue; release lock;\\nblock (by invoking `park` method) until node is on lock queue;\\nre-acquire lock;\\n```\\ncondition queue basic signal\\n```\\ntransfer the first node from condition queue to lock queue;\\n```&quot;,536870916]],[&quot;^1A&quot;,[91,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[91,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[91,&quot;^K&quot;,90,536870916]],[&quot;^1A&quot;,[91,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[91,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2093,&quot;^1L&quot;,2988],536870916]],[&quot;^1A&quot;,[91,&quot;^17&quot;,57,536870916]],[&quot;^1A&quot;,[91,&quot;^13&quot;,57,536870916]],[&quot;^1A&quot;,[91,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[91,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Condition queues(条件队列)&quot;]],536870916]],[&quot;^1A&quot;,[91,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[91,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[91,&quot;^?&quot;,&quot;~u611b87e5-b577-4603-9744-9fcdb3f7b710&quot;,536870916]],[&quot;^1A&quot;,[92,&quot;^1E&quot;,&quot;-e5--9f--ba--e4--ba--8e-AQS-e7--9a--84--e7--ae--80--e5--8d--95--e4--ba--92--e6--96--a5--e9--94--81-&quot;,536870916]],[&quot;^1A&quot;,[92,&quot;^S&quot;,[[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;class Worker {&quot;,&quot;\\n&quot;,&quot;    protected boolean tryAcquire(int unused) {&quot;,&quot;\\n&quot;,&quot;        return compareAndSetState(0, 1);&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;\\n&quot;,&quot;    protected boolean tryRelease(int unused) {&quot;,&quot;\\n&quot;,&quot;        setState(0);&quot;,&quot;\\n&quot;,&quot;        return true;&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;\\n&quot;,&quot;    // 获取锁，否则阻塞等待&quot;,&quot;\\n&quot;,&quot;    public void lock()        { acquire(1); }&quot;,&quot;\\n&quot;,&quot;    // 尝试获取锁&quot;,&quot;\\n&quot;,&quot;    public boolean tryLock()  { return tryAcquire(1); }&quot;,&quot;\\n&quot;,&quot;    public void unlock()      { release(1); }&quot;,&quot;\\n&quot;,&quot;    public boolean isLocked() { return isHeldExclusively(); }&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,3027,&quot;^1S&quot;,3507],&quot;^1T&quot;,&quot;~```java\\nclass Worker {\\n    protected boolean tryAcquire(int unused) {\\n        return compareAndSetState(0, 1);\\n    }\\n\\n    protected boolean tryRelease(int unused) {\\n        setState(0);\\n        return true;\\n    }\\n\\n    // 获取锁，否则阻塞等待\\n    public void lock()        { acquire(1); }\\n    // 尝试获取锁\\n    public boolean tryLock()  { return tryAcquire(1); }\\n    public void unlock()      { release(1); }\\n    public boolean isLocked() { return isHeldExclusively(); }\\n}\\n\\n```\\n&quot;]]],536870916]],[&quot;^1A&quot;,[92,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[92,&quot;^[&quot;,&quot;## 基于AQS的简单互斥锁\\n```java\\nclass Worker {\\n  protected boolean tryAcquire(int unused) {\\n      return compareAndSetState(0, 1);\\n  }\\n\\n  protected boolean tryRelease(int unused) {\\n      setState(0);\\n      return true;\\n  }\\n\\n  // 获取锁，否则阻塞等待\\n  public void lock()        { acquire(1); }\\n  // 尝试获取锁\\n  public boolean tryLock()  { return tryAcquire(1); }\\n  public void unlock()      { release(1); }\\n  public boolean isLocked() { return isHeldExclusively(); }\\n}\\n\\n```&quot;,536870916]],[&quot;^1A&quot;,[92,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[92,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[92,&quot;^K&quot;,91,536870916]],[&quot;^1A&quot;,[92,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[92,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2988,&quot;^1L&quot;,3511],536870916]],[&quot;^1A&quot;,[92,&quot;^17&quot;,57,536870916]],[&quot;^1A&quot;,[92,&quot;^13&quot;,57,536870916]],[&quot;^1A&quot;,[92,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[92,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;基于AQS的简单互斥锁&quot;]],536870916]],[&quot;^1A&quot;,[92,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[92,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[92,&quot;^?&quot;,&quot;~u611b87e5-515a-4f01-b841-acf4d40212da&quot;,536870916]],[&quot;^1A&quot;,[93,&quot;^1E&quot;,&quot;Barging_FIFO&quot;,536870916]],[&quot;^1A&quot;,[93,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;由于 AQS 中，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;tryAcquire()&quot;]]]],[&quot;Plain&quot;,&quot; 方法并没有互斥，因此 AQS 不是严格遵守FIFO的顺序。因此可能出现&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;新acquire到资源的线程，抢占当前队头的线程&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;~:protocol&quot;,&quot;https&quot;,&quot;~:link&quot;,&quot;tva1.sinaimg.cn/large/0081Kckwgy1gkmm8obh7lj30yo0aut9s.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;barging&quot;]],&quot;^1W&quot;,&quot;![barging](https://tva1.sinaimg.cn/large/0081Kckwgy1gkmm8obh7lj30yo0aut9s.jpg )&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;有两种方式可解决AQS的‘不公平性’问题：&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;~:content&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;限制获取资源的节点为队列头节点&quot;]]]],&quot;~:items&quot;,[],&quot;~:number&quot;,1,&quot;~:name&quot;,[],&quot;~:indent&quot;,0,&quot;~:ordered&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;在队列为空时，允许进入&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;In this case,multiple threads encountering an empty queue may race to be thefirst to acquire, normally without enqueuing at least one of them.&quot;,&quot;\\n&quot;,&quot;在这种情况下，遇到空队列的多个线程可能会竞争第一个获得，通常情况下，至少有一个线程不需要排队&quot;,&quot;\\n&quot;],&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,3942,&quot;^1S&quot;,4224],&quot;^1T&quot;,&quot;~```\\nIn this case,multiple threads encountering an empty queue may race to be thefirst to acquire, normally without enqueuing at least one of them.\\n在这种情况下，遇到空队列的多个线程可能会竞争第一个获得，通常情况下，至少有一个线程不需要排队\\n```\\n&quot;]]],536870916]],[&quot;^1A&quot;,[93,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[93,&quot;^[&quot;,&quot;## Barging FIFO\\n由于 AQS 中，**tryAcquire()** 方法并没有互斥，因此 AQS 不是严格遵守FIFO的顺序。因此可能出现**新acquire到资源的线程，抢占当前队头的线程**。\\n![barging](https://tva1.sinaimg.cn/large/0081Kckwgy1gkmm8obh7lj30yo0aut9s.jpg )\\n有两种方式可解决AQS的‘不公平性’问题：\\n1. 限制获取资源的节点为队列头节点\\n2. 在队列为空时，允许进入\\n```\\nIn this case,multiple threads encountering an empty queue may race to be thefirst to acquire, normally without enqueuing at least one of them.\\n在这种情况下，遇到空队列的多个线程可能会竞争第一个获得，通常情况下，至少有一个线程不需要排队\\n```&quot;,536870916]],[&quot;^1A&quot;,[93,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[93,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[93,&quot;^K&quot;,92,536870916]],[&quot;^1A&quot;,[93,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[93,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3511,&quot;^1L&quot;,4228],536870916]],[&quot;^1A&quot;,[93,&quot;^17&quot;,57,536870916]],[&quot;^1A&quot;,[93,&quot;^13&quot;,57,536870916]],[&quot;^1A&quot;,[93,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[93,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Barging FIFO&quot;]],536870916]],[&quot;^1A&quot;,[93,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[93,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[93,&quot;^?&quot;,&quot;~u611b87e5-fcf3-4970-ba8d-4be80273ae54&quot;,536870916]],[&quot;^1A&quot;,[94,&quot;^1E&quot;,&quot;Reentrant_Lock&quot;,536870916]],[&quot;^1A&quot;,[94,&quot;^S&quot;,[[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;final boolean nonfairTryAcquire(int acquires) {&quot;,&quot;\\n&quot;,&quot;        final Thread current = Thread.currentThread();&quot;,&quot;\\n&quot;,&quot;        int c = getState();&quot;,&quot;\\n&quot;,&quot;        if (c == 0) {&quot;,&quot;\\n&quot;,&quot;            // 1. 线程首次获取资源，直接获取，并设置资源持有者为当前线程&quot;,&quot;\\n&quot;,&quot;            if (compareAndSetState(0, acquires)) {&quot;,&quot;\\n&quot;,&quot;                setExclusiveOwnerThread(current);&quot;,&quot;\\n&quot;,&quot;                return true;&quot;,&quot;\\n&quot;,&quot;            }&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;        // 2. 线程非首次获取资源，变更资源状态&quot;,&quot;\\n&quot;,&quot;        else if (current == getExclusiveOwnerThread()) {&quot;,&quot;\\n&quot;,&quot;            int nextc = c + acquires;&quot;,&quot;\\n&quot;,&quot;            if (nextc &lt; 0) // overflow&quot;,&quot;\\n&quot;,&quot;                throw new Error(\\&quot;Maximum lock count exceeded\\&quot;);&quot;,&quot;\\n&quot;,&quot;            setState(nextc);&quot;,&quot;\\n&quot;,&quot;            return true;&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;        return false;&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,4254,&quot;^1S&quot;,5014],&quot;^1T&quot;,&quot;~```java\\nfinal boolean nonfairTryAcquire(int acquires) {\\n        final Thread current = Thread.currentThread();\\n        int c = getState();\\n        if (c == 0) {\\n            // 1. 线程首次获取资源，直接获取，并设置资源持有者为当前线程\\n            if (compareAndSetState(0, acquires)) {\\n                setExclusiveOwnerThread(current);\\n                return true;\\n            }\\n        }\\n        // 2. 线程非首次获取资源，变更资源状态\\n        else if (current == getExclusiveOwnerThread()) {\\n            int nextc = c + acquires;\\n            if (nextc &lt; 0) // overflow\\n                throw new Error(\\&quot;Maximum lock count exceeded\\&quot;);\\n            setState(nextc);\\n            return true;\\n        }\\n        return false;\\n    }\\n```\\n&quot;]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;protected final boolean tryRelease(int releases) {&quot;,&quot;\\n&quot;,&quot;        int c = getState() - releases;&quot;,&quot;\\n&quot;,&quot;        // 1. 校验当前线程是否为资源持有者&quot;,&quot;\\n&quot;,&quot;        if (Thread.currentThread() != getExclusiveOwnerThread())&quot;,&quot;\\n&quot;,&quot;            throw new IllegalMonitorStateException();&quot;,&quot;\\n&quot;,&quot;        boolean free = false;&quot;,&quot;\\n&quot;,&quot;        // 2. 所有资源持有者都被释放时，才可以释放该线程&quot;,&quot;\\n&quot;,&quot;        if (c == 0) {&quot;,&quot;\\n&quot;,&quot;            free = true;&quot;,&quot;\\n&quot;,&quot;            setExclusiveOwnerThread(null);&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;        setState(c);&quot;,&quot;\\n&quot;,&quot;        return free;&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,5026,&quot;^1S&quot;,5548],&quot;^1T&quot;,&quot;~```java\\nprotected final boolean tryRelease(int releases) {\\n        int c = getState() - releases;\\n        // 1. 校验当前线程是否为资源持有者\\n        if (Thread.currentThread() != getExclusiveOwnerThread())\\n            throw new IllegalMonitorStateException();\\n        boolean free = false;\\n        // 2. 所有资源持有者都被释放时，才可以释放该线程\\n        if (c == 0) {\\n            free = true;\\n            setExclusiveOwnerThread(null);\\n        }\\n        setState(c);\\n        return free;\\n    }\\n```\\n&quot;]]],536870916]],[&quot;^1A&quot;,[94,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[94,&quot;^[&quot;,&quot;## Reentrant Lock\\n```java\\nfinal boolean nonfairTryAcquire(int acquires) {\\n      final Thread current = Thread.currentThread();\\n      int c = getState();\\n      if (c == 0) {\\n          // 1. 线程首次获取资源，直接获取，并设置资源持有者为当前线程\\n          if (compareAndSetState(0, acquires)) {\\n              setExclusiveOwnerThread(current);\\n              return true;\\n          }\\n      }\\n      // 2. 线程非首次获取资源，变更资源状态\\n      else if (current == getExclusiveOwnerThread()) {\\n          int nextc = c + acquires;\\n          if (nextc &lt; 0) // overflow\\n              throw new Error(\\&quot;Maximum lock count exceeded\\&quot;);\\n          setState(nextc);\\n          return true;\\n      }\\n      return false;\\n  }\\n```\\n```java\\nprotected final boolean tryRelease(int releases) {\\n      int c = getState() - releases;\\n      // 1. 校验当前线程是否为资源持有者\\n      if (Thread.currentThread() != getExclusiveOwnerThread())\\n          throw new IllegalMonitorStateException();\\n      boolean free = false;\\n      // 2. 所有资源持有者都被释放时，才可以释放该线程\\n      if (c == 0) {\\n          free = true;\\n          setExclusiveOwnerThread(null);\\n      }\\n      setState(c);\\n      return free;\\n  }\\n```&quot;,536870916]],[&quot;^1A&quot;,[94,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[94,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[94,&quot;^K&quot;,93,536870916]],[&quot;^1A&quot;,[94,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[94,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,4228,&quot;^1L&quot;,5552],536870916]],[&quot;^1A&quot;,[94,&quot;^17&quot;,57,536870916]],[&quot;^1A&quot;,[94,&quot;^13&quot;,57,536870916]],[&quot;^1A&quot;,[94,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[94,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Reentrant Lock&quot;]],536870916]],[&quot;^1A&quot;,[94,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[94,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[94,&quot;^?&quot;,&quot;~u611b87e5-a3d7-46a3-a3bd-20f06af1490b&quot;,536870916]],[&quot;^1A&quot;,[95,&quot;^1E&quot;,&quot;ConuntDownLatch&quot;,536870916]],[&quot;^1A&quot;,[95,&quot;^S&quot;,[[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;// 1. getState() 代表当前计数器的值&quot;,&quot;\\n&quot;,&quot;// 2. 当计数器的值 &gt; 0 时，会阻塞等待资源，即 CountDownLatch 的等待原理&quot;,&quot;\\n&quot;,&quot;protected int tryAcquireShared(int acquires) {&quot;,&quot;\\n&quot;,&quot;        return (getState() == 0) ? 1 : -1;&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,5579,&quot;^1S&quot;,5810],&quot;^1T&quot;,&quot;~```java\\n// 1. getState() 代表当前计数器的值\\n// 2. 当计数器的值 &gt; 0 时，会阻塞等待资源，即 CountDownLatch 的等待原理\\nprotected int tryAcquireShared(int acquires) {\\n        return (getState() == 0) ? 1 : -1;\\n}\\n```\\n&quot;]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;// 1. 当 state == 0 时，即计数器归零时，资源（虚拟）才能释放，等待计数器的线程会被唤醒&quot;,&quot;\\n&quot;,&quot;protected boolean tryReleaseShared(int releases) {&quot;,&quot;\\n&quot;,&quot;        // Decrement count; signal when transition to zero&quot;,&quot;\\n&quot;,&quot;        for (;;) {&quot;,&quot;\\n&quot;,&quot;            int c = getState();&quot;,&quot;\\n&quot;,&quot;            if (c == 0)&quot;,&quot;\\n&quot;,&quot;                return false;&quot;,&quot;\\n&quot;,&quot;            int nextc = c-1;&quot;,&quot;\\n&quot;,&quot;            if (compareAndSetState(c, nextc))&quot;,&quot;\\n&quot;,&quot;                return nextc == 0;&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,5822,&quot;^1S&quot;,6284],&quot;^1T&quot;,&quot;~```java\\n// 1. 当 state == 0 时，即计数器归零时，资源（虚拟）才能释放，等待计数器的线程会被唤醒\\nprotected boolean tryReleaseShared(int releases) {\\n        // Decrement count; signal when transition to zero\\n        for (;;) {\\n            int c = getState();\\n            if (c == 0)\\n                return false;\\n            int nextc = c-1;\\n            if (compareAndSetState(c, nextc))\\n                return nextc == 0;\\n        }\\n    }\\n```\\n&quot;]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;// 1. 递减计数器&quot;,&quot;\\n&quot;,&quot;public void countDown() {&quot;,&quot;\\n&quot;,&quot;    sync.releaseShared(1);&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,6296,&quot;^1S&quot;,6373],&quot;^1T&quot;,&quot;~```java\\n// 1. 递减计数器\\npublic void countDown() {\\n    sync.releaseShared(1);\\n}\\n```\\n&quot;]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;// 1. CountDownLatch 理论上只有一个排队的线程&quot;,&quot;\\n&quot;,&quot;public boolean await(long timeout, TimeUnit unit)&quot;,&quot;\\n&quot;,&quot;    throws InterruptedException {&quot;,&quot;\\n&quot;,&quot;    return sync.tryAcquireSharedNanos(1, unit.toNanos(timeout));&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,6385,&quot;^1S&quot;,6594],&quot;^1T&quot;,&quot;~```java\\n// 1. CountDownLatch 理论上只有一个排队的线程\\npublic boolean await(long timeout, TimeUnit unit)\\n    throws InterruptedException {\\n    return sync.tryAcquireSharedNanos(1, unit.toNanos(timeout));\\n}\\n```&quot;]]],536870916]],[&quot;^1A&quot;,[95,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[95,&quot;^[&quot;,&quot;## ConuntDownLatch\\n```java\\n// 1. getState() 代表当前计数器的值\\n// 2. 当计数器的值 &gt; 0 时，会阻塞等待资源，即 CountDownLatch 的等待原理\\nprotected int tryAcquireShared(int acquires) {\\n      return (getState() == 0) ? 1 : -1;\\n}\\n```\\n```java\\n// 1. 当 state == 0 时，即计数器归零时，资源（虚拟）才能释放，等待计数器的线程会被唤醒\\nprotected boolean tryReleaseShared(int releases) {\\n      // Decrement count; signal when transition to zero\\n      for (;;) {\\n          int c = getState();\\n          if (c == 0)\\n              return false;\\n          int nextc = c-1;\\n          if (compareAndSetState(c, nextc))\\n              return nextc == 0;\\n      }\\n  }\\n```\\n```java\\n// 1. 递减计数器\\npublic void countDown() {\\n  sync.releaseShared(1);\\n}\\n```\\n```java\\n// 1. CountDownLatch 理论上只有一个排队的线程\\npublic boolean await(long timeout, TimeUnit unit)\\n  throws InterruptedException {\\n  return sync.tryAcquireSharedNanos(1, unit.toNanos(timeout));\\n}\\n```&quot;,536870916]],[&quot;^1A&quot;,[95,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[95,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[95,&quot;^K&quot;,94,536870916]],[&quot;^1A&quot;,[95,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[95,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5552,&quot;^1L&quot;,6597],536870916]],[&quot;^1A&quot;,[95,&quot;^17&quot;,57,536870916]],[&quot;^1A&quot;,[95,&quot;^13&quot;,57,536870916]],[&quot;^1A&quot;,[95,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[95,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;ConuntDownLatch&quot;]],536870916]],[&quot;^1A&quot;,[95,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[95,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[95,&quot;^?&quot;,&quot;~u611b87e5-d88f-4798-9f85-3c4e39e1da1a&quot;,536870916]],[&quot;^1A&quot;,[98,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[98,&quot;^S&quot;,[],536878539]],[&quot;^1A&quot;,[98,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[98,&quot;^[&quot;,&quot;[[http]]&quot;,536870916]],[&quot;^1A&quot;,[98,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[98,&quot;^K&quot;,588,536878393]],[&quot;^1A&quot;,[98,&quot;^X&quot;,1,536878539]],[&quot;^1A&quot;,[98,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,91,&quot;^1L&quot;,102],536870916]],[&quot;^1A&quot;,[98,&quot;^17&quot;,56,536870916]],[&quot;^1A&quot;,[98,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[98,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;http&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[http]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878539]],[&quot;^1A&quot;,[98,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[98,&quot;^?&quot;,&quot;~u611b87e5-8340-433b-842f-53b1aef0893d&quot;,536870916]],[&quot;^1A&quot;,[104,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[104,&quot;^S&quot;,[],536878539]],[&quot;^1A&quot;,[104,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[104,&quot;^[&quot;,&quot;[[spring]]&quot;,536870916]],[&quot;^1A&quot;,[104,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[104,&quot;^K&quot;,98,536878473]],[&quot;^1A&quot;,[104,&quot;^X&quot;,1,536878539]],[&quot;^1A&quot;,[104,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,163,&quot;^1L&quot;,176],536870916]],[&quot;^1A&quot;,[104,&quot;^17&quot;,56,536870916]],[&quot;^1A&quot;,[104,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[104,&quot;^12&quot;,77,536878539]],[&quot;^1A&quot;,[104,&quot;^L&quot;,77,536878539]],[&quot;^1A&quot;,[104,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;spring&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[spring]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878539]],[&quot;^1A&quot;,[104,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[104,&quot;^?&quot;,&quot;~u611b87e5-5da0-4715-b3ab-daa715bacad4&quot;,536870916]],[&quot;^1A&quot;,[105,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[105,&quot;^S&quot;,[],536878539]],[&quot;^1A&quot;,[105,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[105,&quot;^[&quot;,&quot;[[blog]]&quot;,536870916]],[&quot;^1A&quot;,[105,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[105,&quot;^K&quot;,104,536870916]],[&quot;^1A&quot;,[105,&quot;^X&quot;,1,536878539]],[&quot;^1A&quot;,[105,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,176,&quot;^1L&quot;,187],536870916]],[&quot;^1A&quot;,[105,&quot;^17&quot;,56,536870916]],[&quot;^1A&quot;,[105,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[105,&quot;^12&quot;,69,536878539]],[&quot;^1A&quot;,[105,&quot;^L&quot;,69,536878539]],[&quot;^1A&quot;,[105,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;blog&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[blog]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878539]],[&quot;^1A&quot;,[105,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[105,&quot;^?&quot;,&quot;~u611b87e5-2162-4045-aac8-2859cc5b01e3&quot;,536870916]],[&quot;^1A&quot;,[106,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[106,&quot;^S&quot;,[],536878539]],[&quot;^1A&quot;,[106,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[106,&quot;^[&quot;,&quot;[[projects]]&quot;,536870916]],[&quot;^1A&quot;,[106,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[106,&quot;^K&quot;,105,536870916]],[&quot;^1A&quot;,[106,&quot;^X&quot;,1,536878539]],[&quot;^1A&quot;,[106,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,187,&quot;^1L&quot;,202],536870916]],[&quot;^1A&quot;,[106,&quot;^17&quot;,56,536870916]],[&quot;^1A&quot;,[106,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[106,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;projects&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[projects]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878539]],[&quot;^1A&quot;,[106,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[106,&quot;^?&quot;,&quot;~u611b87e5-6961-40e4-a5f1-ab0f2e9d41b4&quot;,536870916]],[&quot;^1A&quot;,[107,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[107,&quot;^S&quot;,[],536878539]],[&quot;^1A&quot;,[107,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[107,&quot;^[&quot;,&quot;[[case study]]&quot;,536870916]],[&quot;^1A&quot;,[107,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[107,&quot;^K&quot;,106,536870916]],[&quot;^1A&quot;,[107,&quot;^X&quot;,1,536878539]],[&quot;^1A&quot;,[107,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,202,&quot;^1L&quot;,219],536870916]],[&quot;^1A&quot;,[107,&quot;^17&quot;,56,536870916]],[&quot;^1A&quot;,[107,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[107,&quot;^12&quot;,58,536878539]],[&quot;^1A&quot;,[107,&quot;^L&quot;,58,536878539]],[&quot;^1A&quot;,[107,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;case study&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[case study]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878539]],[&quot;^1A&quot;,[107,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[107,&quot;^?&quot;,&quot;~u611b87e5-4a93-47a1-b397-45a9b96c733d&quot;,536870916]],[&quot;^1A&quot;,[108,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[108,&quot;^S&quot;,[],536878539]],[&quot;^1A&quot;,[108,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[108,&quot;^[&quot;,&quot;[[nio]]\\nid:: 60fa96d3-c7f6-430d-82b0-086571499568&quot;,536870916]],[&quot;^1A&quot;,[108,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[108,&quot;^K&quot;,107,536870916]],[&quot;^1A&quot;,[108,&quot;^X&quot;,1,536878539]],[&quot;^1A&quot;,[108,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,219,&quot;^1L&quot;,273],536870916]],[&quot;^1A&quot;,[108,&quot;^17&quot;,56,536870916]],[&quot;^1A&quot;,[108,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[108,&quot;^12&quot;,70,536878539]],[&quot;^1A&quot;,[108,&quot;^D&quot;,[&quot;^ &quot;,&quot;~:id&quot;,&quot;60fa96d3-c7f6-430d-82b0-086571499568&quot;],536878539]],[&quot;^1A&quot;,[108,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[108,&quot;^L&quot;,70,536878539]],[&quot;^1A&quot;,[108,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;nio&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[nio]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878539]],[&quot;^1A&quot;,[108,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[108,&quot;^?&quot;,&quot;~u60fa96d3-c7f6-430d-82b0-086571499568&quot;,536870916]],[&quot;^1A&quot;,[109,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[109,&quot;^S&quot;,[],536878539]],[&quot;^1A&quot;,[109,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[109,&quot;^[&quot;,&quot;[[pm]]&quot;,536870916]],[&quot;^1A&quot;,[109,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[109,&quot;^K&quot;,108,536870916]],[&quot;^1A&quot;,[109,&quot;^X&quot;,1,536878539]],[&quot;^1A&quot;,[109,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,273,&quot;^1L&quot;,282],536870916]],[&quot;^1A&quot;,[109,&quot;^17&quot;,56,536870916]],[&quot;^1A&quot;,[109,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[109,&quot;^12&quot;,73,536878539]],[&quot;^1A&quot;,[109,&quot;^L&quot;,73,536878539]],[&quot;^1A&quot;,[109,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;pm&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[pm]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878539]],[&quot;^1A&quot;,[109,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[109,&quot;^?&quot;,&quot;~u611b87e5-5b20-442c-9723-404e0f09e5f4&quot;,536870916]],[&quot;^1A&quot;,[112,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[112,&quot;^S&quot;,[],536883345]],[&quot;^1A&quot;,[112,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[112,&quot;^[&quot;,&quot;[[soa]]&quot;,536870916]],[&quot;^1A&quot;,[112,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[112,&quot;^K&quot;,109,536883345]],[&quot;^1A&quot;,[112,&quot;^X&quot;,1,536883345]],[&quot;^1A&quot;,[112,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,308,&quot;^1L&quot;,318],536870916]],[&quot;^1A&quot;,[112,&quot;^17&quot;,56,536870916]],[&quot;^1A&quot;,[112,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[112,&quot;^12&quot;,74,536883345]],[&quot;^1A&quot;,[112,&quot;^L&quot;,74,536883345]],[&quot;^1A&quot;,[112,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;soa&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[soa]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536883345]],[&quot;^1A&quot;,[112,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[112,&quot;^?&quot;,&quot;~u611b87e5-7679-4cf6-9816-c33a0da1906d&quot;,536870916]],[&quot;^1A&quot;,[113,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[113,&quot;^S&quot;,[],536878539]],[&quot;^1A&quot;,[113,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[113,&quot;^[&quot;,&quot;[[idea]]&quot;,536870916]],[&quot;^1A&quot;,[113,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[113,&quot;^K&quot;,112,536870916]],[&quot;^1A&quot;,[113,&quot;^X&quot;,1,536878539]],[&quot;^1A&quot;,[113,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,318,&quot;^1L&quot;,328],536870916]],[&quot;^1A&quot;,[113,&quot;^17&quot;,56,536870916]],[&quot;^1A&quot;,[113,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[113,&quot;^12&quot;,56,536878539]],[&quot;^1A&quot;,[113,&quot;^12&quot;,87,536878539]],[&quot;^1A&quot;,[113,&quot;^D&quot;,[&quot;^ &quot;],536878539]],[&quot;^1A&quot;,[113,&quot;^L&quot;,87,536878539]],[&quot;^1A&quot;,[113,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;idea&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[idea]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878539]],[&quot;^1A&quot;,[113,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[113,&quot;^?&quot;,&quot;~u611b87e5-91ef-4352-92d5-b12abdee0d44&quot;,536870916]],[&quot;^1A&quot;,[114,&quot;^1E&quot;,&quot;danlebrero&quot;,536870916]],[&quot;^1A&quot;,[114,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Code&quot;,&quot;Clojure&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;CTO&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;TDD&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Daniel Lebrero is a baby CTO, a teen remote worker, a mature Clojurian, an elder Architect, an ancient TDDer and an antediluvian Java dev.&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;With more than 20 years of software development experience, he has worked on monolithic websites, embedded applications, low latency systems, micro services, &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;streaming applications and big data. He now creates open source software at Akvo.&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[114,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[114,&quot;^[&quot;,&quot;## [danlebrero](https://danlebrero.com/) \\n\\n`Clojure` `CTO` `TDD`\\n\\n&gt; Daniel Lebrero is a baby CTO, a teen remote worker, a mature Clojurian, an elder Architect, an ancient TDDer and an antediluvian Java dev.\\nWith more than 20 years of software development experience, he has worked on monolithic websites, embedded applications, low latency systems, micro services, \\nstreaming applications and big data. He now creates open source software at Akvo.&quot;,536870916]],[&quot;^1A&quot;,[114,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[114,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[114,&quot;^K&quot;,69,536870916]],[&quot;^1A&quot;,[114,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[114,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,448],536870916]],[&quot;^1A&quot;,[114,&quot;^17&quot;,69,536870916]],[&quot;^1A&quot;,[114,&quot;^13&quot;,69,536870916]],[&quot;^1A&quot;,[114,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[114,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;danlebrero.com/&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;danlebrero&quot;]],&quot;^1W&quot;,&quot;[danlebrero](https://danlebrero.com/)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;]],536870916]],[&quot;^1A&quot;,[114,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[114,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[114,&quot;^?&quot;,&quot;~u611b87e5-3acd-4584-affa-ae48f5247c06&quot;,536870916]],[&quot;^1A&quot;,[115,&quot;^1E&quot;,&quot;secret_club&quot;,536870916]],[&quot;^1A&quot;,[115,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;reverse engineering&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;hacking&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Secret Club was created originally as a gag between friends who are passionate about technical subjects, later evolving into a group of like-minded people. The group&apos;s skillset ranges from exploit hunting to game hacking to system emulation, and many members want to share their knowledge with others. We hold a strong belief that learning and discovery are important and seek to provide novel research on various subjects, recruiting some of the most creative and brightest minds from all over the internet to share their passion with the world. We enjoy finding new things to break, new technologies to leverage, and pushing the envelope with collaborations from members in contending professions. We are not a hacking group and do not condone the application of information on this site for malicious purposes. All publications are intended to be educational, fun, interesting, and inspiring - to new or experienced professionals.&quot;],[&quot;Break_Line&quot;]]]]]],536870916]],[&quot;^1A&quot;,[115,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[115,&quot;^[&quot;,&quot;## [secret club](https://secret.club/)\\n\\n`reverse engineering` `hacking`\\n\\n&gt; Secret Club was created originally as a gag between friends who are passionate about technical subjects, later evolving into a group of like-minded people. The group&apos;s skillset ranges from exploit hunting to game hacking to system emulation, and many members want to share their knowledge with others. We hold a strong belief that learning and discovery are important and seek to provide novel research on various subjects, recruiting some of the most creative and brightest minds from all over the internet to share their passion with the world. We enjoy finding new things to break, new technologies to leverage, and pushing the envelope with collaborations from members in contending professions. We are not a hacking group and do not condone the application of information on this site for malicious purposes. All publications are intended to be educational, fun, interesting, and inspiring - to new or experienced professionals.&quot;,536870916]],[&quot;^1A&quot;,[115,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[115,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[115,&quot;^K&quot;,114,536870916]],[&quot;^1A&quot;,[115,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[115,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,448,&quot;^1L&quot;,1467],536870916]],[&quot;^1A&quot;,[115,&quot;^17&quot;,69,536870916]],[&quot;^1A&quot;,[115,&quot;^13&quot;,69,536870916]],[&quot;^1A&quot;,[115,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[115,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;secret.club/&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;secret club&quot;]],&quot;^1W&quot;,&quot;[secret club](https://secret.club/)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[115,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[115,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[115,&quot;^?&quot;,&quot;~u611b87e5-9010-4e85-b3c7-a6110dfcd012&quot;,536870916]],[&quot;^1A&quot;,[116,&quot;^1E&quot;,&quot;-e5--8d--a1--e6--8b--89--e6--90--9c--e7--b4--a2--e5--8d--9a--e5--ae--a2-&quot;,536870916]],[&quot;^1A&quot;,[116,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Code&quot;,&quot;independent dev&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;「卡拉搜索」可以让你实现网站、 app 内或小程序内搜索功能的API。就像 Elastic Search 一样，但比 ES 配置简单且速度快 10 倍。&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;但有时候我为一些想要开奶茶店的程序员感到惋惜（虽然我自己也不是没有过）—— 我们掌握着这个世界上最炙手可热的技能，我们熟悉一个分发渠道（互联网）可以把你的 app、课程甚至视频零成本分发到全世界，你可以在大理的一个山脚触及全世界 30 亿潜在用户，但你想的却是如何在街角用重资产（店租、请人）来服务每天路过的 2000 个人。&quot;],[&quot;Break_Line&quot;]]]]]],536870916]],[&quot;^1A&quot;,[116,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[116,&quot;^[&quot;,&quot;## [卡拉搜索博客](https://kalasearch.cn/blog/story-of-indiehackers/)\\n\\n`independent dev`\\n\\n&gt; 「卡拉搜索」可以让你实现网站、 app 内或小程序内搜索功能的API。就像 Elastic Search 一样，但比 ES 配置简单且速度快 10 倍。\\n\\n&gt; 但有时候我为一些想要开奶茶店的程序员感到惋惜（虽然我自己也不是没有过）—— 我们掌握着这个世界上最炙手可热的技能，我们熟悉一个分发渠道（互联网）可以把你的 app、课程甚至视频零成本分发到全世界，你可以在大理的一个山脚触及全世界 30 亿潜在用户，但你想的却是如何在街角用重资产（店租、请人）来服务每天路过的 2000 个人。&quot;,536870916]],[&quot;^1A&quot;,[116,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[116,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[116,&quot;^K&quot;,115,536870916]],[&quot;^1A&quot;,[116,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[116,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1467,&quot;^1L&quot;,2192],536870916]],[&quot;^1A&quot;,[116,&quot;^17&quot;,69,536870916]],[&quot;^1A&quot;,[116,&quot;^13&quot;,69,536870916]],[&quot;^1A&quot;,[116,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[116,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;kalasearch.cn/blog/story-of-indiehackers/&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;卡拉搜索博客&quot;]],&quot;^1W&quot;,&quot;[卡拉搜索博客](https://kalasearch.cn/blog/story-of-indiehackers/)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[116,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[116,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[116,&quot;^?&quot;,&quot;~u611b87e5-8b08-4f3e-9a92-9a49e5558d8b&quot;,536870916]],[&quot;^1A&quot;,[117,&quot;^1E&quot;,&quot;w2solo-e7--8b--ac--e7--ab--8b--e5--bc--80--e5--8f--91--e8--80--85--e7--a4--be--e5--8c--ba-&quot;,536870916]],[&quot;^1A&quot;,[117,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;independent dev&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;「w2solo.com」独立开发者社区，由众多独立开发者维护，致力于搭建和维护好国内独立开发者圈子和氛围。&quot;],[&quot;Break_Line&quot;]]]]]],536870916]],[&quot;^1A&quot;,[117,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[117,&quot;^[&quot;,&quot;## [w2solo独立开发者社区](https://w2solo.com/topics/excellent)\\n\\n`independent dev`\\n\\n&gt; 「w2solo.com」独立开发者社区，由众多独立开发者维护，致力于搭建和维护好国内独立开发者圈子和氛围。&quot;,536870916]],[&quot;^1A&quot;,[117,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[117,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[117,&quot;^K&quot;,116,536870916]],[&quot;^1A&quot;,[117,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[117,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2192,&quot;^1L&quot;,2434],536870916]],[&quot;^1A&quot;,[117,&quot;^17&quot;,69,536870916]],[&quot;^1A&quot;,[117,&quot;^13&quot;,69,536870916]],[&quot;^1A&quot;,[117,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[117,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;w2solo.com/topics/excellent&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;w2solo独立开发者社区&quot;]],&quot;^1W&quot;,&quot;[w2solo独立开发者社区](https://w2solo.com/topics/excellent)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[117,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[117,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[117,&quot;^?&quot;,&quot;~u611b87e5-ce7f-4020-8aa5-9e0f808df914&quot;,536870916]],[&quot;^1A&quot;,[118,&quot;^1E&quot;,&quot;indiehacker&quot;,536870916]],[&quot;^1A&quot;,[118,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;independent dev&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Learn from the founders behind hundreds of profitable online businesses, and connect with others who are starting and growing their own companies.&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 国外的独立开发者网站&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[118,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[118,&quot;^[&quot;,&quot;## [indiehacker](https://www.indiehackers.com/)\\n\\n`independent dev`\\n\\n&gt; Learn from the founders behind hundreds of profitable online businesses, and connect with others who are starting and growing their own companies.\\n\\n国外的独立开发者网站&quot;,536870916]],[&quot;^1A&quot;,[118,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[118,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[118,&quot;^K&quot;,117,536870916]],[&quot;^1A&quot;,[118,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[118,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2434,&quot;^1L&quot;,2697],536870916]],[&quot;^1A&quot;,[118,&quot;^17&quot;,69,536870916]],[&quot;^1A&quot;,[118,&quot;^13&quot;,69,536870916]],[&quot;^1A&quot;,[118,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[118,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;www.indiehackers.com/&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;indiehacker&quot;]],&quot;^1W&quot;,&quot;[indiehacker](https://www.indiehackers.com/)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[118,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[118,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[118,&quot;^?&quot;,&quot;~u611b87e5-056f-41d9-85ab-f23a847f7d2e&quot;,536870916]],[&quot;^1A&quot;,[119,&quot;^1E&quot;,&quot;Kafka&quot;,536870916]],[&quot;^1A&quot;,[119,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;kafka&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 技术世界，有一些不错的Kafka、大数据相关文章&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[119,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[119,&quot;^[&quot;,&quot;## [Kafka](http://www.jasongj.com/tags/Kafka/)\\n\\n`kafka`\\n\\n技术世界，有一些不错的Kafka、大数据相关文章&quot;,536870916]],[&quot;^1A&quot;,[119,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[119,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[119,&quot;^K&quot;,118,536870916]],[&quot;^1A&quot;,[119,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[119,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2697,&quot;^1L&quot;,2827],536870916]],[&quot;^1A&quot;,[119,&quot;^17&quot;,69,536870916]],[&quot;^1A&quot;,[119,&quot;^13&quot;,69,536870916]],[&quot;^1A&quot;,[119,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[119,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;http&quot;,&quot;^1Z&quot;,&quot;www.jasongj.com/tags/Kafka/&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;Kafka&quot;]],&quot;^1W&quot;,&quot;[Kafka](http://www.jasongj.com/tags/Kafka/)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[119,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[119,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[119,&quot;^?&quot;,&quot;~u611b87e5-7c81-499e-a327-54a802504db2&quot;,536870916]],[&quot;^1A&quot;,[120,&quot;^1E&quot;,&quot;MQ&quot;,536870916]],[&quot;^1A&quot;,[120,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;mq&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 比较多MQ相关的文章&quot;],[&quot;Break_Line&quot;]]]],[&quot;Raw_Html&quot;,&quot;&lt;!-- #endregion --&gt;&quot;]],536870916]],[&quot;^1A&quot;,[120,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[120,&quot;^[&quot;,&quot;## [MQ](https://jack-vanlightly.com/)\\n\\n`mq`\\n\\n比较多MQ相关的文章\\n&lt;!-- #endregion --&gt;&quot;,536870916]],[&quot;^1A&quot;,[120,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[120,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[120,&quot;^K&quot;,119,536870916]],[&quot;^1A&quot;,[120,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[120,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2827,&quot;^1L&quot;,2930],536870916]],[&quot;^1A&quot;,[120,&quot;^17&quot;,69,536870916]],[&quot;^1A&quot;,[120,&quot;^13&quot;,69,536870916]],[&quot;^1A&quot;,[120,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[120,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;jack-vanlightly.com/&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;MQ&quot;]],&quot;^1W&quot;,&quot;[MQ](https://jack-vanlightly.com/)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[120,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[120,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[120,&quot;^?&quot;,&quot;~u611b87e5-a3da-4fb9-9531-8679679a8c2f&quot;,536870916]],[&quot;^1A&quot;,[121,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[121,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[121,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[121,&quot;^[&quot;,&quot;[[批量短信任务Bug]]&quot;,536870916]],[&quot;^1A&quot;,[121,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[121,&quot;^K&quot;,58,536870916]],[&quot;^1A&quot;,[121,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[121,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,28],536870916]],[&quot;^1A&quot;,[121,&quot;^17&quot;,58,536870916]],[&quot;^1A&quot;,[121,&quot;^13&quot;,58,536870916]],[&quot;^1A&quot;,[121,&quot;^12&quot;,63,536870916]],[&quot;^1A&quot;,[121,&quot;^L&quot;,63,536870916]],[&quot;^1A&quot;,[121,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;批量短信任务Bug&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[批量短信任务Bug]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[121,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[121,&quot;^?&quot;,&quot;~u611b87e5-b211-4eae-89ce-f1df676a3395&quot;,536870916]],[&quot;^1A&quot;,[122,&quot;^1E&quot;,&quot;&quot;,536871579]],[&quot;^1A&quot;,[122,&quot;^S&quot;,[],536871622]],[&quot;^1A&quot;,[122,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[122,&quot;^[&quot;,&quot;[[RocketMq负载失衡]]&quot;,536871599]],[&quot;^1A&quot;,[122,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[122,&quot;^K&quot;,121,536870916]],[&quot;^1A&quot;,[122,&quot;^X&quot;,1,536871622]],[&quot;^1A&quot;,[122,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,28,&quot;^1L&quot;,1139],536870916]],[&quot;^1A&quot;,[122,&quot;^17&quot;,58,536870916]],[&quot;^1A&quot;,[122,&quot;^13&quot;,58,536870916]],[&quot;^1A&quot;,[122,&quot;^12&quot;,58,536871622]],[&quot;^1A&quot;,[122,&quot;^12&quot;,444,536871622]],[&quot;^1A&quot;,[122,&quot;^D&quot;,[&quot;^ &quot;],536871622]],[&quot;^1A&quot;,[122,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;~:reference&quot;]],536870916]],[&quot;^1A&quot;,[122,&quot;^L&quot;,444,536871622]],[&quot;^1A&quot;,[122,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[122,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;RocketMq负载失衡&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[RocketMq负载失衡]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536871622]],[&quot;^1A&quot;,[122,&quot;^1D&quot;,true,536871571]],[&quot;^1A&quot;,[122,&quot;^?&quot;,&quot;~u611b87e5-b7cb-4028-b40a-14da8e4bfaed&quot;,536870916]],[&quot;^1A&quot;,[123,&quot;^1E&quot;,&quot;HashMap-2b-&quot;,536870916]],[&quot;^1A&quot;,[123,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[123,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-f201-4ac0-9c8d-9c311929e4c1&quot;],[&quot;^?&quot;,&quot;~u611b87e5-de08-4372-958f-b5cc57f42d31&quot;]]],536870916]],[&quot;^1A&quot;,[123,&quot;^[&quot;,&quot;## HashMap+&quot;,536870916]],[&quot;^1A&quot;,[123,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[123,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[123,&quot;^K&quot;,84,536870916]],[&quot;^1A&quot;,[123,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[123,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,14],536870916]],[&quot;^1A&quot;,[123,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[123,&quot;^13&quot;,84,536870916]],[&quot;^1A&quot;,[123,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[123,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;HashMap+&quot;]],536870916]],[&quot;^1A&quot;,[123,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[123,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[123,&quot;^?&quot;,&quot;~u611b87e5-584f-4344-b26e-3aa6cd88e0c3&quot;,536870916]],[&quot;^1A&quot;,[124,&quot;^1E&quot;,&quot;-e7--ba--bf--e7--a8--8b--e5--ae--89--e5--85--a8-&quot;,536870916]],[&quot;^1A&quot;,[124,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;HashMap 扩容的时候会调用 resize() 方法，这里的并发操作容易在一个桶上形成环形链表。resize方法是一个&quot;],[&quot;Code&quot;,&quot;头插法&quot;],[&quot;Plain&quot;,&quot;的过程，因此新的分桶链表的顺序是与原链表顺序相反的，并发下可能出现线程B已经完后全部节点的头插，而线程A仍持有原顺序，此时线程A继续头插就会将链表的头尾节点连接从而形成死循环。如下图所示：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628399573064_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628399573064_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628399603693_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628399603693_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[124,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[124,&quot;^[&quot;,&quot;## 线程安全\\nreference:: [hashmap resize](https://coolshell.cn/articles/9606.html)\\nHashMap 扩容的时候会调用 resize() 方法，这里的并发操作容易在一个桶上形成环形链表。resize方法是一个`头插法`的过程，因此新的分桶链表的顺序是与原链表顺序相反的，并发下可能出现线程B已经完后全部节点的头插，而线程A仍持有原顺序，此时线程A继续头插就会将链表的头尾节点连接从而形成死循环。如下图所示：\\n![image.png](../assets/image_1628399573064_0.png)\\n![image.png](../assets/image_1628399603693_0.png)&quot;,536870916]],[&quot;^1A&quot;,[124,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[124,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[124,&quot;^K&quot;,123,536870916]],[&quot;^1A&quot;,[124,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[124,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,14,&quot;^1L&quot;,638],536870916]],[&quot;^1A&quot;,[124,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[124,&quot;^13&quot;,123,536870916]],[&quot;^1A&quot;,[124,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;[hashmap resize](https://coolshell.cn/articles/9606.html)&quot;],536870916]],[&quot;^1A&quot;,[124,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^26&quot;]],536870916]],[&quot;^1A&quot;,[124,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[124,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;线程安全&quot;]],536870916]],[&quot;^1A&quot;,[124,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[124,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[124,&quot;^?&quot;,&quot;~u611b87e5-de08-4372-958f-b5cc57f42d31&quot;,536870916]],[&quot;^1A&quot;,[125,&quot;^1E&quot;,&quot;ConcurrentHashMap&quot;,536870916]],[&quot;^1A&quot;,[125,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[125,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-4a25-4aec-b7a6-8a62c082a3fb&quot;],[&quot;^?&quot;,&quot;~u611b87e5-c949-41ba-b513-a3ff2a28f25e&quot;]]],536870916]],[&quot;^1A&quot;,[125,&quot;^[&quot;,&quot;## ConcurrentHashMap\\nreference:: [pdai.tech](https://www.pdai.tech/md/java/thread/java-thread-x-juc-collection-ConcurrentHashMap.html)&quot;,536870916]],[&quot;^1A&quot;,[125,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[125,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[125,&quot;^K&quot;,124,536870916]],[&quot;^1A&quot;,[125,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[125,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,638,&quot;^1L&quot;,779],536870916]],[&quot;^1A&quot;,[125,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[125,&quot;^13&quot;,123,536870916]],[&quot;^1A&quot;,[125,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;[pdai.tech](https://www.pdai.tech/md/java/thread/java-thread-x-juc-collection-ConcurrentHashMap.html)&quot;],536870916]],[&quot;^1A&quot;,[125,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^26&quot;]],536870916]],[&quot;^1A&quot;,[125,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[125,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;ConcurrentHashMap&quot;]],536870916]],[&quot;^1A&quot;,[125,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[125,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[125,&quot;^?&quot;,&quot;~u611b87e5-f201-4ac0-9c8d-9c311929e4c1&quot;,536870916]],[&quot;^1A&quot;,[126,&quot;^1E&quot;,&quot;Base_JDK1-2e-7&quot;,536870916]],[&quot;^1A&quot;,[126,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;整个 ConcurrentHashMap 由一个个 Segment 组成，Segment 代表”部分“或”一段“的意思，所以很多地方都会将其描述为分段锁。简单理解就是，ConcurrentHashMap 是一个 Segment 数组，Segment 通过继承 ReentrantLock 来进行加锁，所以每次需要加锁的操作锁住的是一个 segment，这样只要保证每个 Segment 是线程安全的，也就实现了全局的线程安全。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;每个Segment包含一段哈希数组，由于Segment是线程安全的，因此在此段哈希数组上的操作都是线程安全的，包括&quot;],[&quot;Code&quot;,&quot;put&quot;],[&quot;Plain&quot;,&quot;、&quot;],[&quot;Code&quot;,&quot;rehash&quot;],[&quot;Plain&quot;,&quot;，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;只需要抢占到Segment的独占锁&quot;]]]],[&quot;Plain&quot;,&quot;就可以，而不需要对整个哈希表加锁。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;由于Segment中间层的存在，对单个key需要进行&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;两次hash&quot;]]]],[&quot;Plain&quot;,&quot;。一次hash定位Segment，第二次定位数组位置。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Segment个数默认为16，不可扩容，也意味着最大并发度为16。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628401703903_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628401703903_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[126,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[126,&quot;^[&quot;,&quot;## Base JDK1.7\\n整个 ConcurrentHashMap 由一个个 Segment 组成，Segment 代表”部分“或”一段“的意思，所以很多地方都会将其描述为分段锁。简单理解就是，ConcurrentHashMap 是一个 Segment 数组，Segment 通过继承 ReentrantLock 来进行加锁，所以每次需要加锁的操作锁住的是一个 segment，这样只要保证每个 Segment 是线程安全的，也就实现了全局的线程安全。\\n\\n每个Segment包含一段哈希数组，由于Segment是线程安全的，因此在此段哈希数组上的操作都是线程安全的，包括`put`、`rehash`，**只需要抢占到Segment的独占锁**就可以，而不需要对整个哈希表加锁。\\n\\n由于Segment中间层的存在，对单个key需要进行**两次hash**。一次hash定位Segment，第二次定位数组位置。\\n\\nSegment个数默认为16，不可扩容，也意味着最大并发度为16。\\n\\n![image.png](../assets/image_1628401703903_0.png)&quot;,536870916]],[&quot;^1A&quot;,[126,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[126,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[126,&quot;^K&quot;,125,536870916]],[&quot;^1A&quot;,[126,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[126,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,779,&quot;^1L&quot;,1787],536870916]],[&quot;^1A&quot;,[126,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[126,&quot;^13&quot;,125,536870916]],[&quot;^1A&quot;,[126,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[126,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Base JDK1.7&quot;]],536870916]],[&quot;^1A&quot;,[126,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[126,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[126,&quot;^?&quot;,&quot;~u611b87e5-c949-41ba-b513-a3ff2a28f25e&quot;,536870916]],[&quot;^1A&quot;,[127,&quot;^1E&quot;,&quot;Base_JDK1-2e-8&quot;,536870916]],[&quot;^1A&quot;,[127,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;在JDK1.7之前，ConcurrentHashMap是通过分段锁机制来实现的，所以其&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;最大并发度受Segment的个数限制&quot;]]]],[&quot;Plain&quot;,&quot;。因此，在JDK1.8中，ConcurrentHashMap的实现原理摒弃了这种设计，而是选择了与HashMap类似的数组+链表+红黑树的方式实现，而加锁则采用CAS和synchronized实现。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628402635018_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628402635018_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[127,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-d68b-4b30-b2b7-7f8809f26472&quot;],[&quot;^?&quot;,&quot;~u611b87e5-2946-442e-b71e-3d897a3d75c8&quot;],[&quot;^?&quot;,&quot;~u611b87e5-073e-4f18-8bed-6abcabdbbc06&quot;]]],536870916]],[&quot;^1A&quot;,[127,&quot;^[&quot;,&quot;## Base JDK1.8\\n在JDK1.7之前，ConcurrentHashMap是通过分段锁机制来实现的，所以其**最大并发度受Segment的个数限制**。因此，在JDK1.8中，ConcurrentHashMap的实现原理摒弃了这种设计，而是选择了与HashMap类似的数组+链表+红黑树的方式实现，而加锁则采用CAS和synchronized实现。\\n![image.png](../assets/image_1628402635018_0.png)&quot;,536870916]],[&quot;^1A&quot;,[127,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[127,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[127,&quot;^K&quot;,126,536870916]],[&quot;^1A&quot;,[127,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[127,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1787,&quot;^1L&quot;,2195],536870916]],[&quot;^1A&quot;,[127,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[127,&quot;^13&quot;,125,536870916]],[&quot;^1A&quot;,[127,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[127,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Base JDK1.8&quot;]],536870916]],[&quot;^1A&quot;,[127,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[127,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[127,&quot;^?&quot;,&quot;~u611b87e5-4a25-4aec-b7a6-8a62c082a3fb&quot;,536870916]],[&quot;^1A&quot;,[128,&quot;^1E&quot;,&quot;CAS&quot;,536870916]],[&quot;^1A&quot;,[128,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;CAS 属于原子操作的一种，能够保证一次读写操作是原子的。CAS 通过将内存中的值与期望值进行比较，只有在两者相等时才会对内存中的值进行修改。ConcurrentHashMap 主要定义了 3 个工具方法：tabAt、casTabAt 和 setTabAt。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;tabAt ：用于获取 table 上下标为 i 的头结点，实现上依赖 Unsafe 类。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;static final &lt;K, V&gt; Node&lt;K, V&gt; tabAt(Node&lt;K, V&gt;[] tab, int i) {&quot;,&quot;\\n&quot;,&quot;    return (Node&lt;K, V&gt;) U.getObjectVolatile(tab, ((long) i &lt;&lt; ASHIFT) + ABASE);&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,2605,&quot;^1S&quot;,2771],&quot;^1T&quot;,&quot;~```java\\nstatic final &lt;K, V&gt; Node&lt;K, V&gt; tabAt(Node&lt;K, V&gt;[] tab, int i) {\\n    return (Node&lt;K, V&gt;) U.getObjectVolatile(tab, ((long) i &lt;&lt; ASHIFT) + ABASE);\\n}\\n```&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;casTabAt ：基于 CAS 尝试更新 table 上下标为 i 的结点的值为 v。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;static final &lt;K, V&gt; boolean casTabAt(Node&lt;K, V&gt;[] tab, int i, Node&lt;K, V&gt; c, Node&lt;K, V&gt; v) {&quot;,&quot;\\n&quot;,&quot;    return U.compareAndSwapObject(tab, ((long) i &lt;&lt; ASHIFT) + ABASE, c, v);&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,2874,&quot;^1S&quot;,3064],&quot;^1T&quot;,&quot;~```java\\nstatic final &lt;K, V&gt; boolean casTabAt(Node&lt;K, V&gt;[] tab, int i, Node&lt;K, V&gt; c, Node&lt;K, V&gt; v) {\\n    return U.compareAndSwapObject(tab, ((long) i &lt;&lt; ASHIFT) + ABASE, c, v);\\n}\\n```&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;setTabAt ：用于设置 table 上下标为 i 的结点为 v，相对于 casTabAt 方法的区别在于不关注历史值。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;static final &lt;K, V&gt; void setTabAt(Node&lt;K, V&gt;[] tab, int i, Node&lt;K, V&gt; v) {&quot;,&quot;\\n&quot;,&quot;    U.putObjectVolatile(tab, ((long) i &lt;&lt; ASHIFT) + ABASE, v);&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,3211,&quot;^1S&quot;,3371],&quot;^1T&quot;,&quot;~```java\\nstatic final &lt;K, V&gt; void setTabAt(Node&lt;K, V&gt;[] tab, int i, Node&lt;K, V&gt; v) {\\n    U.putObjectVolatile(tab, ((long) i &lt;&lt; ASHIFT) + ABASE, v);\\n}\\n```&quot;]]],536870916]],[&quot;^1A&quot;,[128,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[128,&quot;^[&quot;,&quot;CAS\\nCAS 属于原子操作的一种，能够保证一次读写操作是原子的。CAS 通过将内存中的值与期望值进行比较，只有在两者相等时才会对内存中的值进行修改。ConcurrentHashMap 主要定义了 3 个工具方法：tabAt、casTabAt 和 setTabAt。\\n\\ntabAt ：用于获取 table 上下标为 i 的头结点，实现上依赖 Unsafe 类。\\n```java\\nstatic final &lt;K, V&gt; Node&lt;K, V&gt; tabAt(Node&lt;K, V&gt;[] tab, int i) {\\n    return (Node&lt;K, V&gt;) U.getObjectVolatile(tab, ((long) i &lt;&lt; ASHIFT) + ABASE);\\n}\\n```\\ncasTabAt ：基于 CAS 尝试更新 table 上下标为 i 的结点的值为 v。\\n```java\\nstatic final &lt;K, V&gt; boolean casTabAt(Node&lt;K, V&gt;[] tab, int i, Node&lt;K, V&gt; c, Node&lt;K, V&gt; v) {\\n    return U.compareAndSwapObject(tab, ((long) i &lt;&lt; ASHIFT) + ABASE, c, v);\\n}\\n```\\nsetTabAt ：用于设置 table 上下标为 i 的结点为 v，相对于 casTabAt 方法的区别在于不关注历史值。\\n```java\\nstatic final &lt;K, V&gt; void setTabAt(Node&lt;K, V&gt;[] tab, int i, Node&lt;K, V&gt; v) {\\n    U.putObjectVolatile(tab, ((long) i &lt;&lt; ASHIFT) + ABASE, v);\\n}\\n```&quot;,536870916]],[&quot;^1A&quot;,[128,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[128,&quot;^K&quot;,127,536870916]],[&quot;^1A&quot;,[128,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[128,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2195,&quot;^1L&quot;,3375],536870916]],[&quot;^1A&quot;,[128,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[128,&quot;^13&quot;,127,536870916]],[&quot;^1A&quot;,[128,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;CAS&quot;]],536870916]],[&quot;^1A&quot;,[128,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[128,&quot;^?&quot;,&quot;~u611b87e5-073e-4f18-8bed-6abcabdbbc06&quot;,536870916]],[&quot;^1A&quot;,[129,&quot;^1E&quot;,&quot;PUT&quot;,536870916]],[&quot;^1A&quot;,[129,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;PUT操作对链表头结点加synchronized锁。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[129,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[129,&quot;^[&quot;,&quot;PUT\\nPUT操作对链表头结点加synchronized锁。&quot;,536870916]],[&quot;^1A&quot;,[129,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[129,&quot;^K&quot;,128,536870916]],[&quot;^1A&quot;,[129,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[129,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3375,&quot;^1L&quot;,3438],536870916]],[&quot;^1A&quot;,[129,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[129,&quot;^13&quot;,127,536870916]],[&quot;^1A&quot;,[129,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;PUT&quot;]],536870916]],[&quot;^1A&quot;,[129,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[129,&quot;^?&quot;,&quot;~u611b87e5-2946-442e-b71e-3d897a3d75c8&quot;,536870916]],[&quot;^1A&quot;,[130,&quot;^1E&quot;,&quot;-e6--89--a9--e5--ae--b9-&quot;,536870916]],[&quot;^1A&quot;,[130,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;扩容过程中有一个&quot;],[&quot;Code&quot;,&quot;协助扩容&quot;],[&quot;Plain&quot;,&quot;的特殊概念，在并发过程中可以由不同的线程来协助扩容，类似于&quot;],[&quot;Code&quot;,&quot;渐进式hash&quot;],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[130,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[130,&quot;^[&quot;,&quot;扩容\\n扩容过程中有一个`协助扩容`的特殊概念，在并发过程中可以由不同的线程来协助扩容，类似于`渐进式hash`。&quot;,536870916]],[&quot;^1A&quot;,[130,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[130,&quot;^K&quot;,129,536870916]],[&quot;^1A&quot;,[130,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[130,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3438,&quot;^1L&quot;,3599],536870916]],[&quot;^1A&quot;,[130,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[130,&quot;^13&quot;,127,536870916]],[&quot;^1A&quot;,[130,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;扩容&quot;]],536870916]],[&quot;^1A&quot;,[130,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[130,&quot;^?&quot;,&quot;~u611b87e5-d68b-4b30-b2b7-7f8809f26472&quot;,536870916]],[&quot;^1A&quot;,[131,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[131,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[131,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-5522-4a78-b824-32b29844eb54&quot;]]],536870916]],[&quot;^1A&quot;,[131,&quot;^[&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[131,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[131,&quot;^K&quot;,123,536870916]],[&quot;^1A&quot;,[131,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[131,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3599,&quot;^1L&quot;,3601],536870916]],[&quot;^1A&quot;,[131,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[131,&quot;^13&quot;,84,536870916]],[&quot;^1A&quot;,[131,&quot;^Z&quot;,[],536870916]],[&quot;^1A&quot;,[131,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[131,&quot;^?&quot;,&quot;~u611b87e5-54eb-4acf-9b7c-ce9dd8a84b4b&quot;,536870916]],[&quot;^1A&quot;,[132,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[132,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[132,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[132,&quot;^[&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[132,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[132,&quot;^K&quot;,131,536870916]],[&quot;^1A&quot;,[132,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[132,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3601,&quot;^1L&quot;,3603],536870916]],[&quot;^1A&quot;,[132,&quot;^17&quot;,84,536870916]],[&quot;^1A&quot;,[132,&quot;^13&quot;,131,536870916]],[&quot;^1A&quot;,[132,&quot;^Z&quot;,[],536870916]],[&quot;^1A&quot;,[132,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[132,&quot;^?&quot;,&quot;~u611b87e5-5522-4a78-b824-32b29844eb54&quot;,536870916]],[&quot;^1A&quot;,[133,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[133,&quot;^S&quot;,[],536878811]],[&quot;^1A&quot;,[133,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[133,&quot;^[&quot;,&quot;((2038de82-8f44-4b1b-baff-e16cb9e5f794)) &quot;,536878811]],[&quot;^1A&quot;,[133,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[133,&quot;^K&quot;,71,536870916]],[&quot;^1A&quot;,[133,&quot;^X&quot;,1,536878811]],[&quot;^1A&quot;,[133,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,2],536870916]],[&quot;^1A&quot;,[133,&quot;^17&quot;,71,536870916]],[&quot;^1A&quot;,[133,&quot;^13&quot;,71,536870916]],[&quot;^1A&quot;,[133,&quot;^12&quot;,71,536878811]],[&quot;^1A&quot;,[133,&quot;^D&quot;,[&quot;^ &quot;],536878811]],[&quot;^1A&quot;,[133,&quot;^L&quot;,622,536878811]],[&quot;^1A&quot;,[133,&quot;^1M&quot;,1,536877764]],[&quot;^1A&quot;,[133,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;2038de82-8f44-4b1b-baff-e16cb9e5f794&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((2038de82-8f44-4b1b-baff-e16cb9e5f794))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;]],536878811]],[&quot;^1A&quot;,[133,&quot;^1D&quot;,true,536877767]],[&quot;^1A&quot;,[133,&quot;^?&quot;,&quot;~u611b87e5-5b4a-4e54-9821-ba4924f10095&quot;,536870916]],[&quot;^1A&quot;,[137,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[137,&quot;^S&quot;,[],536873287]],[&quot;^1A&quot;,[137,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[137,&quot;^[&quot;,&quot;&quot;,536873287]],[&quot;^1A&quot;,[137,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[137,&quot;^K&quot;,52,536873283]],[&quot;^1A&quot;,[137,&quot;^X&quot;,1,536873287]],[&quot;^1A&quot;,[137,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,898,&quot;^1L&quot;,1083],536870916]],[&quot;^1A&quot;,[137,&quot;^17&quot;,52,536870916]],[&quot;^1A&quot;,[137,&quot;^13&quot;,52,536870916]],[&quot;^1A&quot;,[137,&quot;^12&quot;,52,536873287]],[&quot;^1A&quot;,[137,&quot;^D&quot;,[&quot;^ &quot;],536873287]],[&quot;^1A&quot;,[137,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[137,&quot;^Z&quot;,[],536873287]],[&quot;^1A&quot;,[137,&quot;^1D&quot;,true,536873287]],[&quot;^1A&quot;,[137,&quot;^?&quot;,&quot;~u611b87e5-d98d-453c-87bd-e73d21964821&quot;,536870916]],[&quot;^1A&quot;,[150,&quot;^1E&quot;,&quot;-23--23-_macos_toolkit_for_developer&quot;,536873319]],[&quot;^1A&quot;,[150,&quot;^S&quot;,[[&quot;Drawer&quot;,&quot;logbook&quot;,[&quot;CLOCK: [2021-09-29 Wed 14:08]--[2021-09-29 Wed 14:08] =&gt;  00:00&quot;,&quot;\\n&quot;,&quot;CLOCK: [2021-09-29 Wed 14:08]--[2021-09-29 Wed 14:08] =&gt;  00:00&quot;]]],536873335]],[&quot;^1A&quot;,[150,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[150,&quot;^[&quot;,&quot;DONE ## macos toolkit for developer\\n:LOGBOOK:\\nCLOCK: [2021-09-29 Wed 14:08]--[2021-09-29 Wed 14:08] =&gt;  00:00\\nCLOCK: [2021-09-29 Wed 14:08]--[2021-09-29 Wed 14:08] =&gt;  00:00\\n:END:&quot;,536873335]],[&quot;^1A&quot;,[150,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[150,&quot;^K&quot;,87,536870916]],[&quot;^1A&quot;,[150,&quot;^X&quot;,1,536873335]],[&quot;^1A&quot;,[150,&quot;^1&lt;&quot;,&quot;DONE&quot;,536873335]],[&quot;^1A&quot;,[150,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,30],536870916]],[&quot;^1A&quot;,[150,&quot;^17&quot;,87,536870916]],[&quot;^1A&quot;,[150,&quot;^13&quot;,87,536870916]],[&quot;^1A&quot;,[150,&quot;^12&quot;,5,536873335]],[&quot;^1A&quot;,[150,&quot;^12&quot;,87,536873335]],[&quot;^1A&quot;,[150,&quot;^D&quot;,[&quot;^ &quot;],536873335]],[&quot;^1A&quot;,[150,&quot;^L&quot;,5,536873335]],[&quot;^1A&quot;,[150,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[150,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;## macos toolkit for developer&quot;]],536873335]],[&quot;^1A&quot;,[150,&quot;^1D&quot;,true,536873319]],[&quot;^1A&quot;,[150,&quot;^?&quot;,&quot;~u611b87e5-a0ff-465f-b954-c80bbf1f6490&quot;,536870916]],[&quot;^1A&quot;,[151,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[151,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[151,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[151,&quot;^[&quot;,&quot;## [[container]]&quot;,536870916]],[&quot;^1A&quot;,[151,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[151,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[151,&quot;^K&quot;,64,536870916]],[&quot;^1A&quot;,[151,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[151,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,17],536870916]],[&quot;^1A&quot;,[151,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[151,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[151,&quot;^12&quot;,84,536870916]],[&quot;^1A&quot;,[151,&quot;^L&quot;,84,536870916]],[&quot;^1A&quot;,[151,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[151,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;container&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[container]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[151,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[151,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[151,&quot;^?&quot;,&quot;~u611b87e5-f2ee-4f9e-9e25-f2ba1b04ffc4&quot;,536870916]],[&quot;^1A&quot;,[152,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[152,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[152,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[152,&quot;^[&quot;,&quot;## [[关键字]]&quot;,536870916]],[&quot;^1A&quot;,[152,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[152,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[152,&quot;^K&quot;,151,536870916]],[&quot;^1A&quot;,[152,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[152,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,17,&quot;^1L&quot;,34],536870916]],[&quot;^1A&quot;,[152,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[152,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[152,&quot;^12&quot;,60,536870916]],[&quot;^1A&quot;,[152,&quot;^L&quot;,60,536870916]],[&quot;^1A&quot;,[152,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[152,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;关键字&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[关键字]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[152,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[152,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[152,&quot;^?&quot;,&quot;~u611b87e5-36c6-441b-94ef-df62081658d6&quot;,536870916]],[&quot;^1A&quot;,[153,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[153,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[153,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[153,&quot;^[&quot;,&quot;## [[AQS]]&quot;,536870916]],[&quot;^1A&quot;,[153,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[153,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[153,&quot;^K&quot;,152,536870916]],[&quot;^1A&quot;,[153,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[153,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,34,&quot;^1L&quot;,45],536870916]],[&quot;^1A&quot;,[153,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[153,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[153,&quot;^12&quot;,57,536870916]],[&quot;^1A&quot;,[153,&quot;^L&quot;,57,536870916]],[&quot;^1A&quot;,[153,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[153,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;AQS&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[AQS]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[153,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[153,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[153,&quot;^?&quot;,&quot;~u611b87e5-0223-421b-a20c-d0f06f7f782f&quot;,536870916]],[&quot;^1A&quot;,[154,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[154,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[154,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[154,&quot;^[&quot;,&quot;## [[jvm]]&quot;,536870916]],[&quot;^1A&quot;,[154,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[154,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[154,&quot;^K&quot;,153,536870916]],[&quot;^1A&quot;,[154,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[154,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,45,&quot;^1L&quot;,56],536870916]],[&quot;^1A&quot;,[154,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[154,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[154,&quot;^12&quot;,80,536870916]],[&quot;^1A&quot;,[154,&quot;^L&quot;,80,536870916]],[&quot;^1A&quot;,[154,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[154,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;jvm&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[jvm]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[154,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[154,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[154,&quot;^?&quot;,&quot;~u611b87e5-ef48-4406-9553-e3e23193939e&quot;,536870916]],[&quot;^1A&quot;,[155,&quot;^1E&quot;,&quot;equals&quot;,536870916]],[&quot;^1A&quot;,[155,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;The implementaion of &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;Object.equals&quot;]]]],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;public boolean equals(Object obj) {&quot;,&quot;\\n&quot;,&quot;    return (this == obj);&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,114,&quot;^1S&quot;,178],&quot;^1T&quot;,&quot;~```java\\npublic boolean equals(Object obj) {\\n    return (this == obj);\\n}\\n```\\n&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;equals&quot;]]]],[&quot;Plain&quot;,&quot; 方法是对 == ， 即语义上的相等的实现，而 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;hashcode&quot;]]]],[&quot;Plain&quot;,&quot; 默认调用native方法，是分桶算法的实现依据，因此一般约定是 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;对象相等 = 分桶相等&quot;]]]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[155,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[155,&quot;^[&quot;,&quot;## equals\\n\\nThe implementaion of **Object.equals**\\n```java\\npublic boolean equals(Object obj) {\\n  return (this == obj);\\n}\\n```\\n**equals** 方法是对 == ， 即语义上的相等的实现，而 **hashcode** 默认调用native方法，是分桶算法的实现依据，因此一般约定是 **对象相等 = 分桶相等**&quot;,536870916]],[&quot;^1A&quot;,[155,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[155,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[155,&quot;^K&quot;,154,536870916]],[&quot;^1A&quot;,[155,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[155,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,56,&quot;^1L&quot;,377],536870916]],[&quot;^1A&quot;,[155,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[155,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[155,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[155,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;equals&quot;]],536870916]],[&quot;^1A&quot;,[155,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[155,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[155,&quot;^?&quot;,&quot;~u611b87e5-6f6c-4f92-aa2f-064a878de394&quot;,536870916]],[&quot;^1A&quot;,[156,&quot;^1E&quot;,&quot;-e7--bc--96--e8--af--91--e4--b8--8e--e8--a7--a3--e9--87--8a--e5--85--b1--e5--ad--98-&quot;,536870916]],[&quot;^1A&quot;,[156,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;缓存机器码&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;developer.ibm.com/developer/default/articles/j-lo-just-in-time/images/img001.png&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;jit&quot;]],&quot;^1W&quot;,&quot;![jit](https://developer.ibm.com/developer/default/articles/j-lo-just-in-time/images/img001.png )&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[156,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[156,&quot;^[&quot;,&quot;## 编译与解释共存\\n\\n缓存机器码\\n\\n![jit](https://developer.ibm.com/developer/default/articles/j-lo-just-in-time/images/img001.png )&quot;,536870916]],[&quot;^1A&quot;,[156,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[156,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[156,&quot;^K&quot;,155,536870916]],[&quot;^1A&quot;,[156,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[156,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,377,&quot;^1L&quot;,518],536870916]],[&quot;^1A&quot;,[156,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[156,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[156,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[156,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;编译与解释共存&quot;]],536870916]],[&quot;^1A&quot;,[156,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[156,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[156,&quot;^?&quot;,&quot;~u611b87e5-31ee-438a-9d62-0d76e81c0a2f&quot;,536870916]],[&quot;^1A&quot;,[157,&quot;^1E&quot;,&quot;-e5--86--85--e5--ad--98--e5--88--86--e5--b8--83-&quot;,536870916]],[&quot;^1A&quot;,[157,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;JVM 1.8 内存区域分成三个部分&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;线程共享内存&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;堆栈&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;方法区：用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;运行时常量池（隶属于方法区）&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;线程私有内存，即 stack&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;本地方法栈&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;程序计数器&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;虚拟机栈&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;直接内存&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true]]]],536870916]],[&quot;^1A&quot;,[157,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[157,&quot;^[&quot;,&quot;## 内存分布\\n\\nJVM 1.8 内存区域分成三个部分\\n\\n1. 线程共享内存\\n* 堆栈\\n* 方法区：用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据\\n* 运行时常量池（隶属于方法区）\\n\\n2. 线程私有内存，即 stack\\n* 本地方法栈\\n* 程序计数器\\n* 虚拟机栈\\n\\n3. 直接内存&quot;,536870916]],[&quot;^1A&quot;,[157,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[157,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[157,&quot;^K&quot;,156,536870916]],[&quot;^1A&quot;,[157,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[157,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,518,&quot;^1L&quot;,883],536870916]],[&quot;^1A&quot;,[157,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[157,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[157,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[157,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内存分布&quot;]],536870916]],[&quot;^1A&quot;,[157,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[157,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[157,&quot;^?&quot;,&quot;~u611b87e5-284d-4a48-a0a7-dccc3cb38500&quot;,536870916]],[&quot;^1A&quot;,[158,&quot;^1E&quot;,&quot;IO&quot;,536870916]],[&quot;^1A&quot;,[158,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;同步阻塞(recvfrom阻塞调用)&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;同步非阻塞(recvfrom, 立即返回。轮询)&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;IO多路复用(监听多个socket)&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;异步IO(callback，数据准备好时内核发出通知)&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;static.oschina.net/uploads/img/201604/21095604_vhHX.png&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;IO&quot;]],&quot;^1W&quot;,&quot;![IO](https://static.oschina.net/uploads/img/201604/21095604_vhHX.png )&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[158,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[158,&quot;^[&quot;,&quot;## IO\\n\\n* 同步阻塞(recvfrom阻塞调用)\\n* 同步非阻塞(recvfrom, 立即返回。轮询)\\n* IO多路复用(监听多个socket)\\n* 异步IO(callback，数据准备好时内核发出通知)\\n\\n![IO](https://static.oschina.net/uploads/img/201604/21095604_vhHX.png )&quot;,536870916]],[&quot;^1A&quot;,[158,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[158,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[158,&quot;^K&quot;,157,536870916]],[&quot;^1A&quot;,[158,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[158,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,883,&quot;^1L&quot;,1148],536870916]],[&quot;^1A&quot;,[158,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[158,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[158,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[158,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;IO&quot;]],536870916]],[&quot;^1A&quot;,[158,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[158,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[158,&quot;^?&quot;,&quot;~u611b87e5-c0d8-4f7a-9c06-616708e46abe&quot;,536870916]],[&quot;^1A&quot;,[159,&quot;^1E&quot;,&quot;TLAB&quot;,536870916]],[&quot;^1A&quot;,[159,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;为每一个线程预先在Eden区分配一块儿内存，JVM在给线程中的对象分配内存时，首先在TLAB分配，当对象大于TLAB中的剩余内存或TLAB的内存已用尽时，再采用上述的CAS进行内存分配&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[159,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[159,&quot;^[&quot;,&quot;## TLAB\\n为每一个线程预先在Eden区分配一块儿内存，JVM在给线程中的对象分配内存时，首先在TLAB分配，当对象大于TLAB中的剩余内存或TLAB的内存已用尽时，再采用上述的CAS进行内存分配&quot;,536870916]],[&quot;^1A&quot;,[159,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[159,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[159,&quot;^K&quot;,158,536870916]],[&quot;^1A&quot;,[159,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[159,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1148,&quot;^1L&quot;,1389],536870916]],[&quot;^1A&quot;,[159,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[159,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[159,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[159,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;TLAB&quot;]],536870916]],[&quot;^1A&quot;,[159,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[159,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[159,&quot;^?&quot;,&quot;~u611b87e5-f50b-458f-920b-dc2846097893&quot;,536870916]],[&quot;^1A&quot;,[160,&quot;^1E&quot;,&quot;CAS&quot;,536870916]],[&quot;^1A&quot;,[160,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;CAS 是乐观锁的一种实现方式。所谓乐观锁就是，每次不加锁而是假设没有冲突而去完成某项操作，如果因为冲突失败就重试，直到成功为止。虚拟机采用 CAS 配上失败重试的方式保证更新操作的原子性。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[160,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[160,&quot;^[&quot;,&quot;## CAS\\nCAS 是乐观锁的一种实现方式。所谓乐观锁就是，每次不加锁而是假设没有冲突而去完成某项操作，如果因为冲突失败就重试，直到成功为止。虚拟机采用 CAS 配上失败重试的方式保证更新操作的原子性。&quot;,536870916]],[&quot;^1A&quot;,[160,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[160,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[160,&quot;^K&quot;,159,536870916]],[&quot;^1A&quot;,[160,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[160,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1389,&quot;^1L&quot;,1664],536870916]],[&quot;^1A&quot;,[160,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[160,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[160,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[160,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;CAS&quot;]],536870916]],[&quot;^1A&quot;,[160,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[160,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[160,&quot;^?&quot;,&quot;~u611b87e5-795f-4500-926a-640e8194fb52&quot;,536870916]],[&quot;^1A&quot;,[161,&quot;^1E&quot;,&quot;JRebel&quot;,536870916]],[&quot;^1A&quot;,[161,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;插入 .class 文件(Java Instruments API)&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;版本化实时编译的 .class 文件&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true]]]],536870916]],[&quot;^1A&quot;,[161,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[161,&quot;^[&quot;,&quot;## JRebel\\n\\n1. 插入 .class 文件(Java Instruments API)\\n2. 版本化实时编译的 .class 文件&quot;,536870916]],[&quot;^1A&quot;,[161,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[161,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[161,&quot;^K&quot;,160,536870916]],[&quot;^1A&quot;,[161,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[161,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1664,&quot;^1L&quot;,1763],536870916]],[&quot;^1A&quot;,[161,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[161,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[161,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[161,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;JRebel&quot;]],536870916]],[&quot;^1A&quot;,[161,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[161,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[161,&quot;^?&quot;,&quot;~u611b87e5-b953-47c2-9911-84e4faa7748d&quot;,536870916]],[&quot;^1A&quot;,[162,&quot;^1E&quot;,&quot;-e9--9d--99--e6--80--81--e4--bb--a3--e7--90--86-&quot;,536870916]],[&quot;^1A&quot;,[162,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;ListenerSupport 的核心就是 Proxy.newInstance()，使用JDK静态代理接口，来实现与被代理方法相同签名和编译器支持的代理类&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[162,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[162,&quot;^[&quot;,&quot;## 静态代理\\nListenerSupport 的核心就是 Proxy.newInstance()，使用JDK静态代理接口，来实现与被代理方法相同签名和编译器支持的代理类&quot;,536870916]],[&quot;^1A&quot;,[162,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[162,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[162,&quot;^K&quot;,161,536870916]],[&quot;^1A&quot;,[162,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[162,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1763,&quot;^1L&quot;,1933],536870916]],[&quot;^1A&quot;,[162,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[162,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[162,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[162,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;静态代理&quot;]],536870916]],[&quot;^1A&quot;,[162,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[162,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[162,&quot;^?&quot;,&quot;~u611b87e5-a071-4d09-8be1-6d5550e7285f&quot;,536870916]],[&quot;^1A&quot;,[163,&quot;^1E&quot;,&quot;-e5--8a--a8--e6--80--81--e4--bb--a3--e7--90--86-&quot;,536870916]],[&quot;^1A&quot;,[163,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;第三方库 cglib 支持，依靠字节流做基于继承的动态代理&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[163,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[163,&quot;^[&quot;,&quot;## 动态代理\\n第三方库 cglib 支持，依靠字节流做基于继承的动态代理&quot;,536870916]],[&quot;^1A&quot;,[163,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[163,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[163,&quot;^K&quot;,162,536870916]],[&quot;^1A&quot;,[163,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[163,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1933,&quot;^1L&quot;,2023],536870916]],[&quot;^1A&quot;,[163,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[163,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[163,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[163,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;动态代理&quot;]],536870916]],[&quot;^1A&quot;,[163,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[163,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[163,&quot;^?&quot;,&quot;~u611b87e5-660e-4cf8-814f-882b3b38357d&quot;,536870916]],[&quot;^1A&quot;,[164,&quot;^1E&quot;,&quot;thread&quot;,536870916]],[&quot;^1A&quot;,[164,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;线程只是一个与其他进程&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;共享某些资源&quot;]]]],[&quot;Plain&quot;,&quot;的进程。每一个线程拥有一个唯一的task_struct结构，Linux内核它仅仅把线程当做一个正常的进程，或者说是轻量级进程LWP(Lightweight processes) &quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;ps 命令描述的线程状态(header \\&quot;STAT\\&quot; or \\&quot;S\\&quot;)&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;D    uninterruptible sleep (usually IO)&quot;,&quot;\\n&quot;,&quot;R    running or runnable (on run queue)&quot;,&quot;\\n&quot;,&quot;S    interruptible sleep (waiting for an event to complete)&quot;,&quot;\\n&quot;,&quot;T    stopped by job control signal&quot;,&quot;\\n&quot;,&quot;t    stopped by debugger during the tracing&quot;,&quot;\\n&quot;,&quot;W    paging (not valid since the 2.6.xx kernel)&quot;,&quot;\\n&quot;,&quot;X    dead (should never be seen)&quot;,&quot;\\n&quot;,&quot;Z    defunct (\\&quot;zombie\\&quot;) process, terminated but not reaped by its parent&quot;,&quot;\\n&quot;],&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,2329,&quot;^1S&quot;,2790],&quot;^1T&quot;,&quot;~```\\n           D    uninterruptible sleep (usually IO)\\n           R    running or runnable (on run queue)\\n           S    interruptible sleep (waiting for an event to complete)\\n           T    stopped by job control signal\\n           t    stopped by debugger during the tracing\\n           W    paging (not valid since the 2.6.xx kernel)\\n           X    dead (should never be seen)\\n           Z    defunct (\\&quot;zombie\\&quot;) process, terminated but not reaped by its parent\\n```\\n\\n&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;idea.popcount.org/2012-12-11-linux-process-states/76a49594323247f21c9b3a69945445ee.svg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;Thread stat&quot;]],&quot;^1W&quot;,&quot;![Thread stat](https://idea.popcount.org/2012-12-11-linux-process-states/76a49594323247f21c9b3a69945445ee.svg )&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;JVM 的线程状态&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;NEW：初始状态，线程被构建，待调用 start() 方法&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;(R)RUNNABLE: 运行中&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;(S/D)WAITING: 需要被显示唤醒&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;TIME_WAITING: sleep(long t), wait(long t), join(long t)&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;BLOCKED: synchorizned&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;(T)TERMINATED: 终止状态&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[164,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[164,&quot;^[&quot;,&quot;## thread\\n线程只是一个与其他进程**共享某些资源**的进程。每一个线程拥有一个唯一的task_struct结构，Linux内核它仅仅把线程当做一个正常的进程，或者说是轻量级进程LWP(Lightweight processes) \\n&gt; ps 命令描述的线程状态(header \\&quot;STAT\\&quot; or \\&quot;S\\&quot;)\\n```\\n         D    uninterruptible sleep (usually IO)\\n         R    running or runnable (on run queue)\\n         S    interruptible sleep (waiting for an event to complete)\\n         T    stopped by job control signal\\n         t    stopped by debugger during the tracing\\n         W    paging (not valid since the 2.6.xx kernel)\\n         X    dead (should never be seen)\\n         Z    defunct (\\&quot;zombie\\&quot;) process, terminated but not reaped by its parent\\n```\\n\\n![Thread stat](https://idea.popcount.org/2012-12-11-linux-process-states/76a49594323247f21c9b3a69945445ee.svg )\\n\\n&gt; JVM 的线程状态\\n\\nNEW：初始状态，线程被构建，待调用 start() 方法\\n(R)RUNNABLE: 运行中\\n(S/D)WAITING: 需要被显示唤醒\\nTIME_WAITING: sleep(long t), wait(long t), join(long t)\\nBLOCKED: synchorizned\\n(T)TERMINATED: 终止状态&quot;,536870916]],[&quot;^1A&quot;,[164,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[164,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[164,&quot;^K&quot;,163,536870916]],[&quot;^1A&quot;,[164,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[164,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2023,&quot;^1L&quot;,3160],536870916]],[&quot;^1A&quot;,[164,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[164,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[164,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[164,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;thread&quot;]],536870916]],[&quot;^1A&quot;,[164,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[164,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[164,&quot;^?&quot;,&quot;~u611b87e5-067b-4499-8dcc-eba233384146&quot;,536870916]],[&quot;^1A&quot;,[165,&quot;^1E&quot;,&quot;deadlock&quot;,536870916]],[&quot;^1A&quot;,[165,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;线程死锁描述的是这样一种情况：多个线程同时被阻塞，它们中的一个或者全部都在等待某个资源被释放。由于线程被无限期地阻塞，因此程序不可能正常终止。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;如下图所示，线程 A 持有资源 2，线程 B 持有资源 1，他们同时都想申请对方的资源，所以这两个线程就会互相等待而进入死锁状态。&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gs77pf24rjj309r05y0sz.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;deadlock&quot;]],&quot;^1W&quot;,&quot;![deadlock](https://tva1.sinaimg.cn/large/008i3skNgy1gs77pf24rjj309r05y0sz.jpg )&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[165,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[165,&quot;^[&quot;,&quot;## deadlock\\n线程死锁描述的是这样一种情况：多个线程同时被阻塞，它们中的一个或者全部都在等待某个资源被释放。由于线程被无限期地阻塞，因此程序不可能正常终止。\\n\\n如下图所示，线程 A 持有资源 2，线程 B 持有资源 1，他们同时都想申请对方的资源，所以这两个线程就会互相等待而进入死锁状态。\\n![deadlock](https://tva1.sinaimg.cn/large/008i3skNgy1gs77pf24rjj309r05y0sz.jpg )&quot;,536870916]],[&quot;^1A&quot;,[165,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[165,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[165,&quot;^K&quot;,164,536870916]],[&quot;^1A&quot;,[165,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[165,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3160,&quot;^1L&quot;,3644],536870916]],[&quot;^1A&quot;,[165,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[165,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[165,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[165,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;deadlock&quot;]],536870916]],[&quot;^1A&quot;,[165,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[165,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[165,&quot;^?&quot;,&quot;~u611b87e5-fd8a-42c8-b4ba-bf9189dd8836&quot;,536870916]],[&quot;^1A&quot;,[166,&quot;^1E&quot;,&quot;synchronize&quot;,536870916]],[&quot;^1A&quot;,[166,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;double checking singleton&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;public class Singleton{&quot;,&quot;\\n&quot;,&quot;\\n&quot;,&quot;private static volatile Singleton _instance;&quot;,&quot;\\n&quot;,&quot;\\n&quot;,&quot;public static Singleton getInstance(){&quot;,&quot;\\n&quot;,&quot; if(_instance == null){&quot;,&quot;\\n&quot;,&quot;        synchronized(Singleton.class){&quot;,&quot;\\n&quot;,&quot;          if(_instance == null)&quot;,&quot;\\n&quot;,&quot;          _instance = new Singleton();&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot; }&quot;,&quot;\\n&quot;,&quot; return _instance;&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;,&quot;\\n&quot;,&quot;插曲&quot;,&quot;\\n&quot;,&quot;破窗效应&quot;,&quot;\\n&quot;,&quot;系统的结构与人类社会类似，熵值使系统趋于混乱。社会治安需要在犯罪的苗头出现时需要及时掐断其发展，否则混乱程度只会自然生长直至最终的犯罪发生。&quot;,&quot;\\n&quot;,&quot;在以代码为基础的系统结构里，一个不好的设计、临时的假定、悬而不决的方案，都是破窗效应的起点。然而与社会治安的必要性不同，开发者会趋于保护系统而不去解决这些看似简单，实则棘手的问题，即使他们很清楚这些棱角对系统的伤害。他们有时候甚至会抱怨这些不合理的设计带来的问题，却不下手解决，因为解决的成本已经远远超过一个人能承担的分量。到一定阶段，系统内一面面的破窗如击鼓传花般破碎，损害所有人的工作，同时所有人都无能为力。&quot;,&quot;\\n&quot;,&quot;JLGL的工作经历是一次破窗效应的最佳实践。开发者都在为混乱的代码结构愁眉苦脸，同时自己也在作为破窗人捅破更多的窗户。终于有些人尝试解决，提出了如微服务等重建系统的想法，然而建立在破窗基础上的新系统，很难逃出与原系统相同的命运，很快每个子系统都被破窗效应所腐蚀。&quot;,&quot;\\n&quot;,&quot;在这样的趋势下，从根基做起，自下而上构建新的生态，可能是一个出路。这些措施必须具有以下属性：&quot;,&quot;\\n&quot;,&quot;1. 自动化。不依赖任何人，系统能自动的实行这些措施&quot;,&quot;\\n&quot;,&quot;2. 强制性。系统需要遵守这些规则，任何情况下不允许妥协&quot;,&quot;\\n&quot;,&quot;上述属性在字面上显得理想化，但与人类社会的纷繁复杂不同，开发者都喜欢遵守已有的规则，因为他们已经具备了可用性。如果系统的规则如此，保持规则与健康并不是一厢情愿。针对常见的API系统，我的一些想法是：&quot;,&quot;\\n&quot;,&quot;1. schema first: 针对项目结构、api或者是db&quot;,&quot;\\n&quot;,&quot;2. unit test：保持单测覆盖率&quot;,&quot;\\n&quot;,&quot;3. static compile test：提示并同步开发者的开发习惯&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,3697,&quot;^1S&quot;,5950],&quot;^1T&quot;,&quot;~```java\\npublic class Singleton{\\n\\nprivate static volatile Singleton _instance;\\n\\npublic static Singleton getInstance(){\\n if(_instance == null){\\n        synchronized(Singleton.class){\\n          if(_instance == null)\\n          _instance = new Singleton();\\n        }\\n }\\n return _instance;\\n}\\n\\n插曲\\n破窗效应\\n系统的结构与人类社会类似，熵值使系统趋于混乱。社会治安需要在犯罪的苗头出现时需要及时掐断其发展，否则混乱程度只会自然生长直至最终的犯罪发生。\\n在以代码为基础的系统结构里，一个不好的设计、临时的假定、悬而不决的方案，都是破窗效应的起点。然而与社会治安的必要性不同，开发者会趋于保护系统而不去解决这些看似简单，实则棘手的问题，即使他们很清楚这些棱角对系统的伤害。他们有时候甚至会抱怨这些不合理的设计带来的问题，却不下手解决，因为解决的成本已经远远超过一个人能承担的分量。到一定阶段，系统内一面面的破窗如击鼓传花般破碎，损害所有人的工作，同时所有人都无能为力。\\nJLGL的工作经历是一次破窗效应的最佳实践。开发者都在为混乱的代码结构愁眉苦脸，同时自己也在作为破窗人捅破更多的窗户。终于有些人尝试解决，提出了如微服务等重建系统的想法，然而建立在破窗基础上的新系统，很难逃出与原系统相同的命运，很快每个子系统都被破窗效应所腐蚀。\\n在这样的趋势下，从根基做起，自下而上构建新的生态，可能是一个出路。这些措施必须具有以下属性：\\n1. 自动化。不依赖任何人，系统能自动的实行这些措施\\n2. 强制性。系统需要遵守这些规则，任何情况下不允许妥协\\n上述属性在字面上显得理想化，但与人类社会的纷繁复杂不同，开发者都喜欢遵守已有的规则，因为他们已经具备了可用性。如果系统的规则如此，保持规则与健康并不是一厢情愿。针对常见的API系统，我的一些想法是：\\n1. schema first: 针对项目结构、api或者是db\\n2. unit test：保持单测覆盖率\\n3. static compile test：提示并同步开发者的开发习惯\\n```\\n&quot;]]],536870916]],[&quot;^1A&quot;,[166,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[166,&quot;^[&quot;,&quot;## synchronize\\n\\n&gt; double checking singleton\\n\\n```java\\npublic class Singleton{\\n\\nprivate static volatile Singleton _instance;\\n\\npublic static Singleton getInstance(){\\n if(_instance == null){\\n      synchronized(Singleton.class){\\n        if(_instance == null)\\n        _instance = new Singleton();\\n      }\\n }\\n return _instance;\\n}\\n\\n插曲\\n破窗效应\\n系统的结构与人类社会类似，熵值使系统趋于混乱。社会治安需要在犯罪的苗头出现时需要及时掐断其发展，否则混乱程度只会自然生长直至最终的犯罪发生。\\n在以代码为基础的系统结构里，一个不好的设计、临时的假定、悬而不决的方案，都是破窗效应的起点。然而与社会治安的必要性不同，开发者会趋于保护系统而不去解决这些看似简单，实则棘手的问题，即使他们很清楚这些棱角对系统的伤害。他们有时候甚至会抱怨这些不合理的设计带来的问题，却不下手解决，因为解决的成本已经远远超过一个人能承担的分量。到一定阶段，系统内一面面的破窗如击鼓传花般破碎，损害所有人的工作，同时所有人都无能为力。\\nJLGL的工作经历是一次破窗效应的最佳实践。开发者都在为混乱的代码结构愁眉苦脸，同时自己也在作为破窗人捅破更多的窗户。终于有些人尝试解决，提出了如微服务等重建系统的想法，然而建立在破窗基础上的新系统，很难逃出与原系统相同的命运，很快每个子系统都被破窗效应所腐蚀。\\n在这样的趋势下，从根基做起，自下而上构建新的生态，可能是一个出路。这些措施必须具有以下属性：\\n1. 自动化。不依赖任何人，系统能自动的实行这些措施\\n2. 强制性。系统需要遵守这些规则，任何情况下不允许妥协\\n上述属性在字面上显得理想化，但与人类社会的纷繁复杂不同，开发者都喜欢遵守已有的规则，因为他们已经具备了可用性。如果系统的规则如此，保持规则与健康并不是一厢情愿。针对常见的API系统，我的一些想法是：\\n1. schema first: 针对项目结构、api或者是db\\n2. unit test：保持单测覆盖率\\n3. static compile test：提示并同步开发者的开发习惯\\n```&quot;,536870916]],[&quot;^1A&quot;,[166,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[166,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[166,&quot;^K&quot;,165,536870916]],[&quot;^1A&quot;,[166,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[166,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3644,&quot;^1L&quot;,5954],536870916]],[&quot;^1A&quot;,[166,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[166,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[166,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[166,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;synchronize&quot;]],536870916]],[&quot;^1A&quot;,[166,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[166,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[166,&quot;^?&quot;,&quot;~u611b87e5-f98b-49dd-8756-fee022fe4b85&quot;,536870916]],[&quot;^1A&quot;,[167,&quot;^1E&quot;,&quot;voliate&quot;,536870916]],[&quot;^1A&quot;,[167,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;防止JVM的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;指令重排&quot;]]]],[&quot;Plain&quot;,&quot;，以及保证变量的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;可见性&quot;]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;是对OOP下并发模型的缺陷补充&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gs77t79atgj30is0cpdgi.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;voliate&quot;]],&quot;^1W&quot;,&quot;![voliate](https://tva1.sinaimg.cn/large/008i3skNgy1gs77t79atgj30is0cpdgi.jpg )&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[167,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[167,&quot;^[&quot;,&quot;## voliate\\n防止JVM的**指令重排**，以及保证变量的**可见性**\\n是对OOP下并发模型的缺陷补充\\n![voliate](https://tva1.sinaimg.cn/large/008i3skNgy1gs77t79atgj30is0cpdgi.jpg )&quot;,536870916]],[&quot;^1A&quot;,[167,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[167,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[167,&quot;^K&quot;,166,536870916]],[&quot;^1A&quot;,[167,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[167,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5954,&quot;^1L&quot;,6151],536870916]],[&quot;^1A&quot;,[167,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[167,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[167,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[167,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;voliate&quot;]],536870916]],[&quot;^1A&quot;,[167,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[167,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[167,&quot;^?&quot;,&quot;~u611b87e5-121c-4bac-a958-98fbbc4728ee&quot;,536870916]],[&quot;^1A&quot;,[168,&quot;^1E&quot;,&quot;ThreadLocal&quot;,536870916]],[&quot;^1A&quot;,[168,&quot;^S&quot;,[[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;ThreadLocal as keys, stored in ThreadLocalMap per thread&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;Weak Refreance&quot;]]]],[&quot;Plain&quot;,&quot; keys, &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;Strong Refreance&quot;]]]],[&quot;Plain&quot;,&quot; values&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Inline getEntry() method which returns to getEntryAfterMiss()&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Consetive ThreadLocal.localHashCode method to range the ThreadLocal keys&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;内存泄漏问题：JDK在 get(), set() 时会尝试清理 entry.key == null 的 Entry，即手动进行垃圾回收，能减少内存泄漏，但不能避免。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;弱引用导致内存泄漏，那为什么key不设置为强引用&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;如果key设置为强引用， 当threadLocal实例释放后， threadLocal=null， 但是threadLocal会有强引用指向threadLocalMap，threadLocalMap.Entry又强引用threadLocal， 这样会导致threadLocal不能正常被GC回收。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;弱引用虽然会引起内存泄漏， 但是也有set、get、remove方法操作对null key进行擦除的补救措施，方案上略胜一筹。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;snailclimb.gitee.io/javaguide/docs/java/multi-thread/images/threadlocal%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.png&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;JavaGuide&quot;]],&quot;^1W&quot;,&quot;![JavaGuide](https://snailclimb.gitee.io/javaguide/docs/java/multi-thread/images/threadlocal%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.png )&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[168,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[168,&quot;^[&quot;,&quot;## ThreadLocal\\n* ThreadLocal as keys, stored in ThreadLocalMap per thread\\n* **Weak Refreance** keys, **Strong Refreance** values\\n* Inline getEntry() method which returns to getEntryAfterMiss() \\n* Consetive ThreadLocal.localHashCode method to range the ThreadLocal keys\\n* 内存泄漏问题：JDK在 get(), set() 时会尝试清理 entry.key == null 的 Entry，即手动进行垃圾回收，能减少内存泄漏，但不能避免。\\n* 弱引用导致内存泄漏，那为什么key不设置为强引用\\n\\n如果key设置为强引用， 当threadLocal实例释放后， threadLocal=null， 但是threadLocal会有强引用指向threadLocalMap，threadLocalMap.Entry又强引用threadLocal， 这样会导致threadLocal不能正常被GC回收。\\n\\n弱引用虽然会引起内存泄漏， 但是也有set、get、remove方法操作对null key进行擦除的补救措施，方案上略胜一筹。\\n\\n![JavaGuide](https://snailclimb.gitee.io/javaguide/docs/java/multi-thread/images/threadlocal%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.png )&quot;,536870916]],[&quot;^1A&quot;,[168,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[168,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[168,&quot;^K&quot;,167,536870916]],[&quot;^1A&quot;,[168,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[168,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,6151,&quot;^1L&quot;,7179],536870916]],[&quot;^1A&quot;,[168,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[168,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[168,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[168,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;ThreadLocal&quot;]],536870916]],[&quot;^1A&quot;,[168,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[168,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[168,&quot;^?&quot;,&quot;~u611b87e5-deb9-408d-a63e-9237980f8b44&quot;,536870916]],[&quot;^1A&quot;,[169,&quot;^1E&quot;,&quot;ThreadPoolExecutor&quot;,536870916]],[&quot;^1A&quot;,[169,&quot;^S&quot;,[[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;结构&quot;],[&quot;Break_Line&quot;]]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;控制线程池状态的Int变量&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;传输Task的阻塞队列&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;封装线程的 Worker 结构，本身是 Runable ，消费阻塞队列&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;流程&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;size &lt; corePoolSize&quot;]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;AbstractExecutorService.submit() -&gt; ThreadPoolExecutor.execute() -&gt;ThreadPoolExecutor.addWorker()&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;size &gt; corePoolSize &amp;&amp; size &lt; maxQueueSize&quot;]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;AbstractExecutorService.submit() -&gt; ThreadPoolExecutor.execute() -&gt; queue.offer()&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;size &gt; maxQueueSize &amp;&amp; size &lt; maxCorePoolSize&quot;]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;AbstractExecutorService.submit() -&gt; ThreadPoolExecutor.execute() -&gt; ThreadPoolExecutor.addWorker()&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;else&quot;]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;AbstractExecutorService.submit() -&gt; ThreadPoolExecutor.execute() -&gt; ThreadPoolExecutor.reject()&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[169,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[169,&quot;^[&quot;,&quot;## ThreadPoolExecutor\\n&gt; 结构\\n1. 控制线程池状态的Int变量\\n2. 传输Task的阻塞队列\\n3. 封装线程的 Worker 结构，本身是 Runable ，消费阻塞队列\\n\\n&gt; 流程\\n*size &lt; corePoolSize*\\nAbstractExecutorService.submit() -&gt; ThreadPoolExecutor.execute() -&gt;ThreadPoolExecutor.addWorker()\\n\\n*size &gt; corePoolSize &amp;&amp; size &lt; maxQueueSize*\\nAbstractExecutorService.submit() -&gt; ThreadPoolExecutor.execute() -&gt; queue.offer()\\n\\n*size &gt; maxQueueSize &amp;&amp; size &lt; maxCorePoolSize*\\nAbstractExecutorService.submit() -&gt; ThreadPoolExecutor.execute() -&gt; ThreadPoolExecutor.addWorker()\\n\\n*else*\\nAbstractExecutorService.submit() -&gt; ThreadPoolExecutor.execute() -&gt; ThreadPoolExecutor.reject()&quot;,536870916]],[&quot;^1A&quot;,[169,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[169,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[169,&quot;^K&quot;,168,536870916]],[&quot;^1A&quot;,[169,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[169,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,7179,&quot;^1L&quot;,7861],536870916]],[&quot;^1A&quot;,[169,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[169,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[169,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[169,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;ThreadPoolExecutor&quot;]],536870916]],[&quot;^1A&quot;,[169,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[169,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[169,&quot;^?&quot;,&quot;~u611b87e5-7f75-484c-8a1b-32a934c04c40&quot;,536870916]],[&quot;^1A&quot;,[170,&quot;^1E&quot;,&quot;AtomicXxx&quot;,536870916]],[&quot;^1A&quot;,[170,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Unsafe&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;直接操控堆外内存的，类似C指针的类&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;AtomicXxx 依赖 Unsafe、 voliate 关键字，实现高效的无锁CAS操作&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[170,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[170,&quot;^[&quot;,&quot;## AtomicXxx\\n\\n&gt; Unsafe\\n\\n直接操控堆外内存的，类似C指针的类\\n\\nAtomicXxx 依赖 Unsafe、 voliate 关键字，实现高效的无锁CAS操作&quot;,536870916]],[&quot;^1A&quot;,[170,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[170,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[170,&quot;^K&quot;,169,536870916]],[&quot;^1A&quot;,[170,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[170,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,7861,&quot;^1L&quot;,8014],536870916]],[&quot;^1A&quot;,[170,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[170,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[170,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[170,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;AtomicXxx&quot;]],536870916]],[&quot;^1A&quot;,[170,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[170,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[170,&quot;^?&quot;,&quot;~u611b87e5-2e65-475a-b10e-053e2b765426&quot;,536870916]],[&quot;^1A&quot;,[171,&quot;^1E&quot;,&quot;synchorizned&quot;,536870916]],[&quot;^1A&quot;,[171,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;ObjectMonitor中有两个队列（EntryList、WaitSet）以及锁持有者Owner标记，其中WaitSet是哪些调用wait方法之后被阻塞等待的线程队列，EntryList是ContentionList中能有资格获取锁的线程队列。当多个线程并发访问同一个同步代码时候，首先会进入EntryList，当线程获得锁之后monitor中的Owner标记会记录此线程，并在该monitor中的计数器执行递增计算代表当前锁被持有锁定，而没有获取到的线程继续在EntryList中阻塞等待。如果线程调用了wait方法，则monitor中的计数器执行赋0运算，并且将Owner标记赋值为null，代表当前没有线程持有锁，同时调用wait方法的线程进入WaitSet队列中阻塞等待，直到持有锁的执行线程调用notify/notifyAll方法唤醒WaitSet中的线程，唤醒的线程进入EntryList中等待锁的获取。除了使用wait方法可以将修改monitor的状态之外，显然持有锁的线程的同步代码块执行结束也会释放锁标记，monitor中的Owner会被赋值为null，计数器赋值为0&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[171,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[171,&quot;^[&quot;,&quot;## synchorizned\\n\\nObjectMonitor中有两个队列（EntryList、WaitSet）以及锁持有者Owner标记，其中WaitSet是哪些调用wait方法之后被阻塞等待的线程队列，EntryList是ContentionList中能有资格获取锁的线程队列。当多个线程并发访问同一个同步代码时候，首先会进入EntryList，当线程获得锁之后monitor中的Owner标记会记录此线程，并在该monitor中的计数器执行递增计算代表当前锁被持有锁定，而没有获取到的线程继续在EntryList中阻塞等待。如果线程调用了wait方法，则monitor中的计数器执行赋0运算，并且将Owner标记赋值为null，代表当前没有线程持有锁，同时调用wait方法的线程进入WaitSet队列中阻塞等待，直到持有锁的执行线程调用notify/notifyAll方法唤醒WaitSet中的线程，唤醒的线程进入EntryList中等待锁的获取。除了使用wait方法可以将修改monitor的状态之外，显然持有锁的线程的同步代码块执行结束也会释放锁标记，monitor中的Owner会被赋值为null，计数器赋值为0&quot;,536870916]],[&quot;^1A&quot;,[171,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[171,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[171,&quot;^K&quot;,170,536870916]],[&quot;^1A&quot;,[171,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[171,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,8014,&quot;^1L&quot;,9120],536870916]],[&quot;^1A&quot;,[171,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[171,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[171,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[171,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;synchorizned&quot;]],536870916]],[&quot;^1A&quot;,[171,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[171,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[171,&quot;^?&quot;,&quot;~u611b87e5-23ae-4ecd-8349-224e1a32dd09&quot;,536870916]],[&quot;^1A&quot;,[172,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[172,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[172,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[172,&quot;^[&quot;,&quot;[[AQS]]&quot;,536870916]],[&quot;^1A&quot;,[172,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[172,&quot;^K&quot;,171,536870916]],[&quot;^1A&quot;,[172,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[172,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9120,&quot;^1L&quot;,9130],536870916]],[&quot;^1A&quot;,[172,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[172,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[172,&quot;^12&quot;,57,536870916]],[&quot;^1A&quot;,[172,&quot;^L&quot;,57,536870916]],[&quot;^1A&quot;,[172,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;AQS&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[AQS]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[172,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[172,&quot;^?&quot;,&quot;~u611b87e5-b242-47d6-a8d3-9e11cdc572fb&quot;,536870916]],[&quot;^1A&quot;,[173,&quot;^1E&quot;,&quot;Collection&quot;,536870916]],[&quot;^1A&quot;,[173,&quot;^S&quot;,[[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;thread-safe&quot;],[&quot;Break_Line&quot;]]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;在 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;rehash&quot;]]]],[&quot;Plain&quot;,&quot; 的过程中，队列节点可能发生移动&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;在 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;rehash&quot;]]]],[&quot;Plain&quot;,&quot; 的过程中，由于数组不包括所有的元素，因此 .get() 可能返回空，即数据不一致&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true]]]],536870916]],[&quot;^1A&quot;,[173,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[173,&quot;^[&quot;,&quot;## Collection\\n&gt; thread-safe\\n1. 在 **rehash** 的过程中，队列节点可能发生移动\\n2. 在 **rehash** 的过程中，由于数组不包括所有的元素，因此 .get() 可能返回空，即数据不一致&quot;,536870916]],[&quot;^1A&quot;,[173,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[173,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[173,&quot;^K&quot;,172,536870916]],[&quot;^1A&quot;,[173,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[173,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9130,&quot;^1L&quot;,9344],536870916]],[&quot;^1A&quot;,[173,&quot;^17&quot;,64,536870916]],[&quot;^1A&quot;,[173,&quot;^13&quot;,64,536870916]],[&quot;^1A&quot;,[173,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[173,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Collection&quot;]],536870916]],[&quot;^1A&quot;,[173,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[173,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[173,&quot;^?&quot;,&quot;~u611b87e5-e10c-46c5-a573-bebf666c818d&quot;,536870916]],[&quot;^1A&quot;,[174,&quot;^1E&quot;,&quot;-e5--86--85--e5--ad--98--e7--bb--93--e6--9e--84-&quot;,536870916]],[&quot;^1A&quot;,[174,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628486083876_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628486083876_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;线程私有：程序计数器、虚拟机栈、本地方法栈&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;线程共享：堆、方法区, 堆外内存&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false]]]],536870916]],[&quot;^1A&quot;,[174,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-8819-4c8e-8b7f-6d60c672f328&quot;],[&quot;^?&quot;,&quot;~u611b87e5-f55a-4fd7-b49a-9e1608a376fd&quot;]]],536870916]],[&quot;^1A&quot;,[174,&quot;^[&quot;,&quot;## 内存结构\\nreference:: [pdai tech](https://www.pdai.tech/md/java/jvm/java-jvm-struct.html)\\n![image.png](../assets/image_1628486083876_0.png) \\n+ 线程私有：程序计数器、虚拟机栈、本地方法栈\\n+ 线程共享：堆、方法区, 堆外内存&quot;,536870916]],[&quot;^1A&quot;,[174,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[174,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[174,&quot;^K&quot;,80,536870916]],[&quot;^1A&quot;,[174,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[174,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,270],536870916]],[&quot;^1A&quot;,[174,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[174,&quot;^13&quot;,80,536870916]],[&quot;^1A&quot;,[174,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;[pdai tech](https://www.pdai.tech/md/java/jvm/java-jvm-struct.html)&quot;],536870916]],[&quot;^1A&quot;,[174,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^26&quot;]],536870916]],[&quot;^1A&quot;,[174,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[174,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内存结构&quot;]],536870916]],[&quot;^1A&quot;,[174,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[174,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[174,&quot;^?&quot;,&quot;~u611b87e5-5f91-4a26-b084-1209c64b6ec8&quot;,536870916]],[&quot;^1A&quot;,[175,&quot;^1E&quot;,&quot;-e5--a0--86--e5--86--85--e5--ad--98-&quot;,536870916]],[&quot;^1A&quot;,[175,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;虚拟机把堆内存逻辑上划分成三块区域（分代的唯一理由就是优化 GC 性能）：&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;新生带（年轻代）：新对象和没达到一定年龄的对象都在新生代&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;老年代（养老区）：被长时间使用的对象，老年代的内存空间应该要比年轻代更大&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;元空间（JDK1.8 之前叫永久代）：像一些方法中的操作临时对象等，JDK1.8 之前是占用 JVM 内存，JDK1.8 之后直接使用物理内存&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628486796531_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628486796531_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,false]]]],536870916]],[&quot;^1A&quot;,[175,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-ce6f-4b4d-b7ff-e829a95de083&quot;],[&quot;^?&quot;,&quot;~u611b87e5-e5e2-4e55-aefb-1a4f1a3e30b5&quot;],[&quot;^?&quot;,&quot;~u611b87e5-ef8c-4883-bdfd-587b53a386b4&quot;]]],536870916]],[&quot;^1A&quot;,[175,&quot;^[&quot;,&quot;## 堆内存\\n虚拟机把堆内存逻辑上划分成三块区域（分代的唯一理由就是优化 GC 性能）：\\n+ 新生带（年轻代）：新对象和没达到一定年龄的对象都在新生代 \\n+ 老年代（养老区）：被长时间使用的对象，老年代的内存空间应该要比年轻代更大 \\n+ 元空间（JDK1.8 之前叫永久代）：像一些方法中的操作临时对象等，JDK1.8 之前是占用 JVM 内存，JDK1.8 之后直接使用物理内存\\n![image.png](../assets/image_1628486796531_0.png)&quot;,536870916]],[&quot;^1A&quot;,[175,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[175,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[175,&quot;^K&quot;,174,536870916]],[&quot;^1A&quot;,[175,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[175,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,270,&quot;^1L&quot;,819],536870916]],[&quot;^1A&quot;,[175,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[175,&quot;^13&quot;,174,536870916]],[&quot;^1A&quot;,[175,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[175,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;堆内存&quot;]],536870916]],[&quot;^1A&quot;,[175,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[175,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[175,&quot;^?&quot;,&quot;~u611b87e5-f55a-4fd7-b49a-9e1608a376fd&quot;,536870916]],[&quot;^1A&quot;,[176,&quot;^1E&quot;,&quot;-e5--a0--86--e5--86--85--e5--ad--98--e5--88--86--e9--85--8d--e8--bf--87--e7--a8--8b-&quot;,536870916]],[&quot;^1A&quot;,[176,&quot;^S&quot;,[[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;new 的对象先放在伊甸园区，此区有大小限制。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;当伊甸园的空间填满时，程序又需要创建对象，JVM 的垃圾回收器将对伊甸园区进行垃圾回收（Minor GC），将伊甸园区中的不再被其他对象所引用的对象进行销毁。再加载新的对象放到伊甸园区。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;然后将伊甸园中的剩余对象移动到幸存者 0 区 。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;如果再次触发垃圾回收，此时上次幸存下来的放到幸存者 0 区，如果没有回收，就会放到幸存者 1 区。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,4,&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;如果再次经历垃圾回收，此时会重新放回幸存者 0 区，接着再去幸存者 1 区。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,5,&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;什么时候才会去养老区呢？ 默认是 15 次回收标记 在养老区，相对悠闲。当养老区内存不足时，再次触发 Major GC，进行养老区的内存清理。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,6,&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;若养老区执行了 Major GC  之后发现依然无法进行对象的保存，就会产生 OOM 异常。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,7,&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,true]]]],536870916]],[&quot;^1A&quot;,[176,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[176,&quot;^[&quot;,&quot;## 堆内存分配过程\\n1. new 的对象先放在伊甸园区，此区有大小限制。\\n2. 当伊甸园的空间填满时，程序又需要创建对象，JVM 的垃圾回收器将对伊甸园区进行垃圾回收（Minor GC），将伊甸园区中的不再被其他对象所引用的对象进行销毁。再加载新的对象放到伊甸园区。\\n3. 然后将伊甸园中的剩余对象移动到幸存者 0 区 。\\n4. 如果再次触发垃圾回收，此时上次幸存下来的放到幸存者 0 区，如果没有回收，就会放到幸存者 1 区。\\n5. 如果再次经历垃圾回收，此时会重新放回幸存者 0 区，接着再去幸存者 1 区。\\n6. 什么时候才会去养老区呢？ 默认是 15 次回收标记 在养老区，相对悠闲。当养老区内存不足时，再次触发 Major GC，进行养老区的内存清理。\\n7. 若养老区执行了 Major GC  之后发现依然无法进行对象的保存，就会产生 OOM 异常。&quot;,536870916]],[&quot;^1A&quot;,[176,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[176,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[176,&quot;^K&quot;,175,536870916]],[&quot;^1A&quot;,[176,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[176,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,819,&quot;^1L&quot;,1810],536870916]],[&quot;^1A&quot;,[176,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[176,&quot;^13&quot;,175,536870916]],[&quot;^1A&quot;,[176,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[176,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;堆内存分配过程&quot;]],536870916]],[&quot;^1A&quot;,[176,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[176,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[176,&quot;^?&quot;,&quot;~u611b87e5-ef8c-4883-bdfd-587b53a386b4&quot;,536870916]],[&quot;^1A&quot;,[177,&quot;^1E&quot;,&quot;-e5--88--86--e4--bb--a3--e4--b8--8e--e5--a4--8d--e5--88--b6--e7--ae--97--e6--b3--95-&quot;,536870916]],[&quot;^1A&quot;,[177,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;复制算法将内存划分为两个区间，在&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;任意时间点，所有动态分配的对象都只能分配在其中一个区间&quot;]]]],[&quot;Plain&quot;,&quot;（称为&quot;],[&quot;Code&quot;,&quot;活动区间&quot;],[&quot;Plain&quot;,&quot;），而另外一个区间（称为&quot;],[&quot;Code&quot;,&quot;空闲区间&quot;],[&quot;Plain&quot;,&quot;）则是空闲的。 当有效内存空间耗尽时，JVM将暂停程序运行，开启复制算法GC线程。接下来GC线程会将活动区间内的存活对象，全部复制到空闲区间，且严格按照内存地址依次排列，与此同时，GC线程将更新存活对象的内存引用地址指向新的内存地址。此时，空闲区间已经与活动区间交换，而垃圾对象现在已经全部留在了原来的活动区间，也就是现在的空闲区间。事实上，在活动区间转换为空间区间的同时，垃圾对象已经被一次性全部回收。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[177,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[177,&quot;^[&quot;,&quot;## 分代与复制算法\\nreference:: [知乎](https://www.zhihu.com/question/44929481/answer/1102356343)\\n复制算法将内存划分为两个区间，在**任意时间点，所有动态分配的对象都只能分配在其中一个区间**（称为`活动区间`），而另外一个区间（称为`空闲区间`）则是空闲的。 当有效内存空间耗尽时，JVM将暂停程序运行，开启复制算法GC线程。接下来GC线程会将活动区间内的存活对象，全部复制到空闲区间，且严格按照内存地址依次排列，与此同时，GC线程将更新存活对象的内存引用地址指向新的内存地址。此时，空闲区间已经与活动区间交换，而垃圾对象现在已经全部留在了原来的活动区间，也就是现在的空闲区间。事实上，在活动区间转换为空间区间的同时，垃圾对象已经被一次性全部回收。&quot;,536870916]],[&quot;^1A&quot;,[177,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[177,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[177,&quot;^K&quot;,176,536870916]],[&quot;^1A&quot;,[177,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[177,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1810,&quot;^1L&quot;,2720],536870916]],[&quot;^1A&quot;,[177,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[177,&quot;^13&quot;,175,536870916]],[&quot;^1A&quot;,[177,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;[知乎](https://www.zhihu.com/question/44929481/answer/1102356343)&quot;],536870916]],[&quot;^1A&quot;,[177,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^26&quot;]],536870916]],[&quot;^1A&quot;,[177,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[177,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;分代与复制算法&quot;]],536870916]],[&quot;^1A&quot;,[177,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[177,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[177,&quot;^?&quot;,&quot;~u611b87e5-e5e2-4e55-aefb-1a4f1a3e30b5&quot;,536870916]],[&quot;^1A&quot;,[178,&quot;^1E&quot;,&quot;TLAB(Thread_Local_Allocation_Buffer)&quot;,536870916]],[&quot;^1A&quot;,[178,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;如名字所示，TLAB是JVM为每个线程分配的私有缓存区域。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[178,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[178,&quot;^[&quot;,&quot;## TLAB(Thread Local Allocation Buffer)\\n如名字所示，TLAB是JVM为每个线程分配的私有缓存区域。&quot;,536870916]],[&quot;^1A&quot;,[178,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[178,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[178,&quot;^K&quot;,177,536870916]],[&quot;^1A&quot;,[178,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[178,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2720,&quot;^1L&quot;,2842],536870916]],[&quot;^1A&quot;,[178,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[178,&quot;^13&quot;,175,536870916]],[&quot;^1A&quot;,[178,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[178,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;TLAB(Thread Local Allocation Buffer)&quot;]],536870916]],[&quot;^1A&quot;,[178,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[178,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[178,&quot;^?&quot;,&quot;~u611b87e5-ce6f-4b4d-b7ff-e829a95de083&quot;,536870916]],[&quot;^1A&quot;,[179,&quot;^1E&quot;,&quot;-e6--96--b9--e6--b3--95--e5--8c--ba-&quot;,536870916]],[&quot;^1A&quot;,[179,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;方法区用于存储已被虚拟机加载的类型信息、常量、运行时常量、静态变量、即时编译器编译后的代码缓存等。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[179,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[179,&quot;^[&quot;,&quot;## 方法区\\n方法区用于存储已被虚拟机加载的类型信息、常量、运行时常量、静态变量、即时编译器编译后的代码缓存等。&quot;,536870916]],[&quot;^1A&quot;,[179,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[179,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[179,&quot;^K&quot;,175,536870916]],[&quot;^1A&quot;,[179,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[179,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2842,&quot;^1L&quot;,3009],536870916]],[&quot;^1A&quot;,[179,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[179,&quot;^13&quot;,174,536870916]],[&quot;^1A&quot;,[179,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[179,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;方法区&quot;]],536870916]],[&quot;^1A&quot;,[179,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[179,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[179,&quot;^?&quot;,&quot;~u611b87e5-8819-4c8e-8b7f-6d60c672f328&quot;,536870916]],[&quot;^1A&quot;,[180,&quot;^1E&quot;,&quot;GC&quot;,536870916]],[&quot;^1A&quot;,[180,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[180,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-1ba2-4d85-90d4-d4990d035504&quot;],[&quot;^?&quot;,&quot;~u611b87e5-b6aa-427c-985b-057cc2ddcd8a&quot;],[&quot;^?&quot;,&quot;~u611b87e5-ff48-40b1-ac31-79090c97413e&quot;]]],536870916]],[&quot;^1A&quot;,[180,&quot;^[&quot;,&quot;## GC&quot;,536870916]],[&quot;^1A&quot;,[180,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[180,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[180,&quot;^K&quot;,174,536870916]],[&quot;^1A&quot;,[180,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[180,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3009,&quot;^1L&quot;,3015],536870916]],[&quot;^1A&quot;,[180,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[180,&quot;^13&quot;,80,536870916]],[&quot;^1A&quot;,[180,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[180,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;GC&quot;]],536870916]],[&quot;^1A&quot;,[180,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[180,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[180,&quot;^?&quot;,&quot;~u611b87e5-b263-4d53-afc7-fdfc7b19cec5&quot;,536870916]],[&quot;^1A&quot;,[181,&quot;^1E&quot;,&quot;-e5--9e--83--e5--9c--be--e5--9b--9e--e6--94--b6--e7--ae--97--e6--b3--95-&quot;,536870916]],[&quot;^1A&quot;,[181,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[181,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-70f1-4655-ad73-bee871aa82eb&quot;],[&quot;^?&quot;,&quot;~u611b87e5-c018-4485-abab-9cea972ae720&quot;],[&quot;^?&quot;,&quot;~u611b87e5-c170-4bcd-8cdb-a2b5b9c3d57b&quot;],[&quot;^?&quot;,&quot;~u611b87e5-614c-4572-a6a8-08ed85b9ff5d&quot;]]],536870916]],[&quot;^1A&quot;,[181,&quot;^[&quot;,&quot;## 垃圾回收算法&quot;,536870916]],[&quot;^1A&quot;,[181,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[181,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[181,&quot;^K&quot;,180,536870916]],[&quot;^1A&quot;,[181,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[181,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3015,&quot;^1L&quot;,3040],536870916]],[&quot;^1A&quot;,[181,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[181,&quot;^13&quot;,180,536870916]],[&quot;^1A&quot;,[181,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[181,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;垃圾回收算法&quot;]],536870916]],[&quot;^1A&quot;,[181,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[181,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[181,&quot;^?&quot;,&quot;~u611b87e5-ff48-40b1-ac31-79090c97413e&quot;,536870916]],[&quot;^1A&quot;,[182,&quot;^1E&quot;,&quot;-e6--a0--87--e8--ae--b0-_-e6--b8--85--e9--99--a4-&quot;,536870916]],[&quot;^1A&quot;,[182,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628489095674_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628489095674_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;将存活的对象进行标记，然后清理掉未被标记的对象。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[182,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[182,&quot;^[&quot;,&quot;标记-清除\\n![image.png](../assets/image_1628489095674_0.png)\\n将存活的对象进行标记，然后清理掉未被标记的对象。&quot;,536870916]],[&quot;^1A&quot;,[182,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[182,&quot;^K&quot;,181,536870916]],[&quot;^1A&quot;,[182,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[182,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3040,&quot;^1L&quot;,3189],536870916]],[&quot;^1A&quot;,[182,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[182,&quot;^13&quot;,181,536870916]],[&quot;^1A&quot;,[182,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;标记-清除&quot;]],536870916]],[&quot;^1A&quot;,[182,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[182,&quot;^?&quot;,&quot;~u611b87e5-614c-4572-a6a8-08ed85b9ff5d&quot;,536870916]],[&quot;^1A&quot;,[183,&quot;^1E&quot;,&quot;-e6--a0--87--e8--ae--b0-_-e6--95--b4--e7--90--86-&quot;,536870916]],[&quot;^1A&quot;,[183,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628489163925_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628489163925_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;让所有存活的对象都向一端移动，然后直接清理掉端边界以外的内存。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[183,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[183,&quot;^[&quot;,&quot;标记-整理\\n![image.png](../assets/image_1628489163925_0.png) \\n让所有存活的对象都向一端移动，然后直接清理掉端边界以外的内存。&quot;,536870916]],[&quot;^1A&quot;,[183,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[183,&quot;^K&quot;,182,536870916]],[&quot;^1A&quot;,[183,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[183,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3189,&quot;^1L&quot;,3360],536870916]],[&quot;^1A&quot;,[183,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[183,&quot;^13&quot;,181,536870916]],[&quot;^1A&quot;,[183,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;标记-整理&quot;]],536870916]],[&quot;^1A&quot;,[183,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[183,&quot;^?&quot;,&quot;~u611b87e5-c170-4bcd-8cdb-a2b5b9c3d57b&quot;,536870916]],[&quot;^1A&quot;,[184,&quot;^1E&quot;,&quot;-e5--a4--8d--e5--88--b6-&quot;,536870916]],[&quot;^1A&quot;,[184,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628489210517_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628489210517_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;将内存划分为大小相等的两块，每次只使用其中一块，当这一块内存用完了就将还存活的对象复制到另一块上面，然后再把使用过的内存空间进行一次清理。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;现在的商业虚拟机都采用这种收集算法来回收新生代，但是并不是将新生代划分为大小相等的两块，而是分为一块较大的 Eden 空间和两块较小的 Survivor 空间，每次使用 Eden 空间和其中一块 Survivor。在回收时，将 Eden 和 Survivor 中还存活着的对象一次性复制到另一块 Survivor 空间上，最后清理 Eden 和使用过的那一块 Survivor。 &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;HotSpot 虚拟机的 Eden 和 Survivor 的大小比例默认为 8:1，保证了内存的利用率达到 90%。如果每次回收有多于 10% 的对象存活，那么一块 Survivor 空间就不够用了，此时需要依赖于老年代进行分配担保，也就是借用老年代的空间存储放不下的对象。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;为什么要有两个Survivor区域：From 和 To。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;这个问题不应该是这样的，而是为什么HotSpot虚拟机为什么要增加Eden区域。在复制算法中，有一个很大的缺点就在于堆的使用效率问题，如果是按照五五分成，总有一半是不能用的。那为什么不干脆八二分？那么问题来了，某次触发YGC，需要把From(8分)中的存活对象(假设占据1分)复制到To空间，这个时候，交换指针之后，From空间还剩(1分)可以使用，相信很快就会再次触发Ygc，STW发生频次提高&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;矛盾点：五五分成，堆利用率实在不高。不五五分成，由于复制算法的特性，STW的频次变高。为了解决内存分配空间它的capacity并不是恒定的这个问题，HotSpot引入了Eden区作为对复制算法的优化，其实eden区域可以看作是From和To区域的缓冲和共享区域。&quot;],[&quot;Break_Line&quot;]]]]]],536870916]],[&quot;^1A&quot;,[184,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[184,&quot;^[&quot;,&quot;复制\\n![image.png](../assets/image_1628489210517_0.png) \\n将内存划分为大小相等的两块，每次只使用其中一块，当这一块内存用完了就将还存活的对象复制到另一块上面，然后再把使用过的内存空间进行一次清理。\\n\\n现在的商业虚拟机都采用这种收集算法来回收新生代，但是并不是将新生代划分为大小相等的两块，而是分为一块较大的 Eden 空间和两块较小的 Survivor 空间，每次使用 Eden 空间和其中一块 Survivor。在回收时，将 Eden 和 Survivor 中还存活着的对象一次性复制到另一块 Survivor 空间上，最后清理 Eden 和使用过的那一块 Survivor。 \\n\\nHotSpot 虚拟机的 Eden 和 Survivor 的大小比例默认为 8:1，保证了内存的利用率达到 90%。如果每次回收有多于 10% 的对象存活，那么一块 Survivor 空间就不够用了，此时需要依赖于老年代进行分配担保，也就是借用老年代的空间存储放不下的对象。\\n&gt; 为什么要有两个Survivor区域：From 和 To。\\n&gt; 这个问题不应该是这样的，而是为什么HotSpot虚拟机为什么要增加Eden区域。在复制算法中，有一个很大的缺点就在于堆的使用效率问题，如果是按照五五分成，总有一半是不能用的。那为什么不干脆八二分？那么问题来了，某次触发YGC，需要把From(8分)中的存活对象(假设占据1分)复制到To空间，这个时候，交换指针之后，From空间还剩(1分)可以使用，相信很快就会再次触发Ygc，STW发生频次提高\\n&gt; 矛盾点：五五分成，堆利用率实在不高。不五五分成，由于复制算法的特性，STW的频次变高。为了解决内存分配空间它的capacity并不是恒定的这个问题，HotSpot引入了Eden区作为对复制算法的优化，其实eden区域可以看作是From和To区域的缓冲和共享区域。&quot;,536870916]],[&quot;^1A&quot;,[184,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[184,&quot;^K&quot;,183,536870916]],[&quot;^1A&quot;,[184,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[184,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3360,&quot;^1L&quot;,5317],536870916]],[&quot;^1A&quot;,[184,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[184,&quot;^13&quot;,181,536870916]],[&quot;^1A&quot;,[184,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;复制&quot;]],536870916]],[&quot;^1A&quot;,[184,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[184,&quot;^?&quot;,&quot;~u611b87e5-c018-4485-abab-9cea972ae720&quot;,536870916]],[&quot;^1A&quot;,[185,&quot;^1E&quot;,&quot;-e5--88--86--e4--bb--a3--e6--94--b6--e9--9b--86-&quot;,536870916]],[&quot;^1A&quot;,[185,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;现在的商业虚拟机采用分代收集算法，它根据对象存活周期将内存划分为几块，不同块采用适当的收集算法。 一般将堆分为新生代和老年代。 新生代使用: 复制算法 老年代使用: 标记 - 清除 或者 标记 - 整理 算法。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[185,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[185,&quot;^[&quot;,&quot;分代收集\\n现在的商业虚拟机采用分代收集算法，它根据对象存活周期将内存划分为几块，不同块采用适当的收集算法。 一般将堆分为新生代和老年代。 新生代使用: 复制算法 老年代使用: 标记 - 清除 或者 标记 - 整理 算法。&quot;,536870916]],[&quot;^1A&quot;,[185,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[185,&quot;^K&quot;,184,536870916]],[&quot;^1A&quot;,[185,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[185,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5317,&quot;^1L&quot;,5622],536870916]],[&quot;^1A&quot;,[185,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[185,&quot;^13&quot;,181,536870916]],[&quot;^1A&quot;,[185,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;分代收集&quot;]],536870916]],[&quot;^1A&quot;,[185,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[185,&quot;^?&quot;,&quot;~u611b87e5-70f1-4655-ad73-bee871aa82eb&quot;,536870916]],[&quot;^1A&quot;,[186,&quot;^1E&quot;,&quot;-e5--9e--83--e5--9c--be--e6--94--b6--e9--9b--86--e5--99--a8-&quot;,536870916]],[&quot;^1A&quot;,[186,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[186,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-451e-488e-aa76-dfb96063d565&quot;],[&quot;^?&quot;,&quot;~u611b87e5-2a18-4078-8f4f-d97d821748d1&quot;]]],536870916]],[&quot;^1A&quot;,[186,&quot;^[&quot;,&quot;## 垃圾收集器&quot;,536870916]],[&quot;^1A&quot;,[186,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[186,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[186,&quot;^K&quot;,181,536870916]],[&quot;^1A&quot;,[186,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[186,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5622,&quot;^1L&quot;,5644],536870916]],[&quot;^1A&quot;,[186,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[186,&quot;^13&quot;,180,536870916]],[&quot;^1A&quot;,[186,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[186,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;垃圾收集器&quot;]],536870916]],[&quot;^1A&quot;,[186,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[186,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[186,&quot;^?&quot;,&quot;~u611b87e5-b6aa-427c-985b-057cc2ddcd8a&quot;,536870916]],[&quot;^1A&quot;,[187,&quot;^1E&quot;,&quot;CMS(Concurrent_Mark_Sweep)_Collector&quot;,536870916]],[&quot;^1A&quot;,[187,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628489863265_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628489863265_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;CMS(Concurrent Mark Sweep)，Mark Sweep 指的是标记 - 清除算法。 分为以下四个流程: &quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;初始标记: 仅仅只是标记一下 GC Roots 能直接关联到的对象，速度很快，需要停顿。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;并发标记: 进行 GC Roots Tracing 的过程，它在整个回收过程中耗时最长，不需要停顿。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;重新标记: 为了修正并发标记期间因用户程序继续运作而导致标记产生变动的那一部分对象的标记记录，需要停顿。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;并发清除: 不需要停顿。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false]]]],536870916]],[&quot;^1A&quot;,[187,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[187,&quot;^[&quot;,&quot;CMS(Concurrent Mark Sweep) Collector\\n![image.png](../assets/image_1628489863265_0.png) \\nCMS(Concurrent Mark Sweep)，Mark Sweep 指的是标记 - 清除算法。 分为以下四个流程: \\n+ 初始标记: 仅仅只是标记一下 GC Roots 能直接关联到的对象，速度很快，需要停顿。 \\n+ 并发标记: 进行 GC Roots Tracing 的过程，它在整个回收过程中耗时最长，不需要停顿。 \\n+ 重新标记: 为了修正并发标记期间因用户程序继续运作而导致标记产生变动的那一部分对象的标记记录，需要停顿。 \\n+ 并发清除: 不需要停顿。&quot;,536870916]],[&quot;^1A&quot;,[187,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[187,&quot;^K&quot;,186,536870916]],[&quot;^1A&quot;,[187,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[187,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5644,&quot;^1L&quot;,6278],536870916]],[&quot;^1A&quot;,[187,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[187,&quot;^13&quot;,186,536870916]],[&quot;^1A&quot;,[187,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;CMS(Concurrent Mark Sweep) Collector&quot;]],536870916]],[&quot;^1A&quot;,[187,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[187,&quot;^?&quot;,&quot;~u611b87e5-2a18-4078-8f4f-d97d821748d1&quot;,536870916]],[&quot;^1A&quot;,[188,&quot;^1E&quot;,&quot;G1(Garbage_First)_Collector&quot;,536870916]],[&quot;^1A&quot;,[188,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628490004212_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628490004212_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;G1 把堆划分成多个大小相等的&quot;],[&quot;Code&quot;,&quot;独立区域(Region)&quot;],[&quot;Plain&quot;,&quot;，新生代和老年代不再物理隔离。通过引入 Region 的概念，从而将原来的一整块内存空间划分成多个的小空间，使得每个小空间可以&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;单独进行垃圾回收&quot;]]]],[&quot;Plain&quot;,&quot;。这种划分方法带来了很大的灵活性，使得可预测的停顿时间模型成为可能。通过记录每个 Region 垃圾回收时间以及回收所获得的空间(这两个值是通过过去回收的经验获得)，并维护一个优先列表，每次根据允许的收集时间，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;优先回收价值最大的 Region&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628490037687_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628490037687_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;具备如下特点: 空间整合: &quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;整体来看是基于“标记 - 整理”算法实现的收集器，从局部(两个 Region 之间)上来看是基于“复制”算法实现的，这意味着运行期间不会产生内存空间碎片。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;可预测的停顿: 能让使用者明确指定在一个长度为 M 毫秒的时间片段内，消耗在 GC 上的时间不得超过 N 毫秒。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false]]]],536870916]],[&quot;^1A&quot;,[188,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[188,&quot;^[&quot;,&quot;**G1(Garbage-First) Collector**\\n![image.png](../assets/image_1628490004212_0.png) \\nG1 把堆划分成多个大小相等的`独立区域(Region)`，新生代和老年代不再物理隔离。通过引入 Region 的概念，从而将原来的一整块内存空间划分成多个的小空间，使得每个小空间可以**单独进行垃圾回收**。这种划分方法带来了很大的灵活性，使得可预测的停顿时间模型成为可能。通过记录每个 Region 垃圾回收时间以及回收所获得的空间(这两个值是通过过去回收的经验获得)，并维护一个优先列表，每次根据允许的收集时间，**优先回收价值最大的 Region**。\\n![image.png](../assets/image_1628490037687_0.png)\\n\\n具备如下特点: 空间整合: \\n+ 整体来看是基于“标记 - 整理”算法实现的收集器，从局部(两个 Region 之间)上来看是基于“复制”算法实现的，这意味着运行期间不会产生内存空间碎片。\\n+ 可预测的停顿: 能让使用者明确指定在一个长度为 M 毫秒的时间片段内，消耗在 GC 上的时间不得超过 N 毫秒。&quot;,536870916]],[&quot;^1A&quot;,[188,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[188,&quot;^K&quot;,187,536870916]],[&quot;^1A&quot;,[188,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[188,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,6278,&quot;^1L&quot;,7433],536870916]],[&quot;^1A&quot;,[188,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[188,&quot;^13&quot;,186,536870916]],[&quot;^1A&quot;,[188,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;G1(Garbage-First) Collector&quot;]]]]],536870916]],[&quot;^1A&quot;,[188,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[188,&quot;^?&quot;,&quot;~u611b87e5-451e-488e-aa76-dfb96063d565&quot;,536870916]],[&quot;^1A&quot;,[189,&quot;^1E&quot;,&quot;-e4--b8--89--e8--89--b2--e6--a0--87--e8--ae--b0--e6--b3--95-&quot;,536870916]],[&quot;^1A&quot;,[189,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;CMS和G1在并发标记时使用的是同一个算法：三色标记法，使用白灰黑三种颜色标记对象。白色是未标记；灰色自身被标记，引用的对象未标记；黑色自身与引用对象都已标记。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628490512307_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628490512307_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;GC 开始前所有对象都是白色，GC 一开始所有根能够直达的对象被压到栈中，待搜索，此时颜色是灰色。然后灰色对象依次从栈中取出搜索子对象，子对象也会被涂为灰色，入栈。当其所有的子对象都涂为灰色之后该对象被涂为黑色。当 GC 结束之后灰色对象将全部没了，剩下黑色的为存活对象，白色的为垃圾。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[189,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-e327-48fa-a29c-9d817ed7e638&quot;]]],536870916]],[&quot;^1A&quot;,[189,&quot;^[&quot;,&quot;## 三色标记法\\nCMS和G1在并发标记时使用的是同一个算法：三色标记法，使用白灰黑三种颜色标记对象。白色是未标记；灰色自身被标记，引用的对象未标记；黑色自身与引用对象都已标记。\\n![image.png](../assets/image_1628490512307_0.png) \\nGC 开始前所有对象都是白色，GC 一开始所有根能够直达的对象被压到栈中，待搜索，此时颜色是灰色。然后灰色对象依次从栈中取出搜索子对象，子对象也会被涂为灰色，入栈。当其所有的子对象都涂为灰色之后该对象被涂为黑色。当 GC 结束之后灰色对象将全部没了，剩下黑色的为存活对象，白色的为垃圾。&quot;,536870916]],[&quot;^1A&quot;,[189,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[189,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[189,&quot;^K&quot;,186,536870916]],[&quot;^1A&quot;,[189,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[189,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,7433,&quot;^1L&quot;,8156],536870916]],[&quot;^1A&quot;,[189,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[189,&quot;^13&quot;,180,536870916]],[&quot;^1A&quot;,[189,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[189,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;三色标记法&quot;]],536870916]],[&quot;^1A&quot;,[189,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[189,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[189,&quot;^?&quot;,&quot;~u611b87e5-1ba2-4d85-90d4-d4990d035504&quot;,536870916]],[&quot;^1A&quot;,[190,&quot;^1E&quot;,&quot;remark-e6--bc--8f--e6--a0--87-&quot;,536870916]],[&quot;^1A&quot;,[190,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;在remark过程中，黑色指向了白色，如果不对黑色重新扫描，则会漏标。会把白色D对象当作没有新引用指向从而回收掉。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628490696932_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628490696932_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;所以要解决漏标问题，打破两个条件之一即可： &quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;跟踪黑指向白的增加 incremental update：增量更新，关注引用的增加，把黑色重新标记为灰色，下次重新扫描属性。CMS采用该方法。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;记录灰指向白的消失 SATB snapshot at the beginning：关注引用的删除，当灰–&gt;白消失时，要把这个 引用 推到GC的堆栈，保证白还能被GC扫描到。G1采用该方法。&quot;]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;为什么G1采用SATB而不用incremental update？&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;因为采用incremental update把黑色重新标记为灰色后，之前扫描过的还要再扫描一遍，效率太低。G1有RSet与SATB相配合。Card Table里记录了RSet，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;RSet里记录了其他对象指向自己的引用&quot;]]]],[&quot;Plain&quot;,&quot;，这样就不需要再扫描其他区域，只要扫描RSet就可以了。&quot;],[&quot;Break_Line&quot;]]]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false]]]],536870916]],[&quot;^1A&quot;,[190,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[190,&quot;^[&quot;,&quot;remark漏标\\n在remark过程中，黑色指向了白色，如果不对黑色重新扫描，则会漏标。会把白色D对象当作没有新引用指向从而回收掉。\\n![image.png](../assets/image_1628490696932_0.png)\\n所以要解决漏标问题，打破两个条件之一即可： \\n+ 跟踪黑指向白的增加 incremental update：增量更新，关注引用的增加，把黑色重新标记为灰色，下次重新扫描属性。CMS采用该方法。 \\n+ 记录灰指向白的消失 SATB snapshot at the beginning：关注引用的删除，当灰–&gt;白消失时，要把这个 引用 推到GC的堆栈，保证白还能被GC扫描到。G1采用该方法。\\n&gt; 为什么G1采用SATB而不用incremental update？ \\n&gt; 因为采用incremental update把黑色重新标记为灰色后，之前扫描过的还要再扫描一遍，效率太低。G1有RSet与SATB相配合。Card Table里记录了RSet，**RSet里记录了其他对象指向自己的引用**，这样就不需要再扫描其他区域，只要扫描RSet就可以了。&quot;,536870916]],[&quot;^1A&quot;,[190,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[190,&quot;^K&quot;,189,536870916]],[&quot;^1A&quot;,[190,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[190,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,8156,&quot;^1L&quot;,9219],536870916]],[&quot;^1A&quot;,[190,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[190,&quot;^13&quot;,189,536870916]],[&quot;^1A&quot;,[190,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;remark漏标&quot;]],536870916]],[&quot;^1A&quot;,[190,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[190,&quot;^?&quot;,&quot;~u611b87e5-e327-48fa-a29c-9d817ed7e638&quot;,536870916]],[&quot;^1A&quot;,[191,&quot;^1E&quot;,&quot;-e8--b0--83--e4--bc--98-&quot;,536870916]],[&quot;^1A&quot;,[191,&quot;^S&quot;,[[&quot;Table&quot;,[&quot;^ &quot;,&quot;~:header&quot;,[[[&quot;Plain&quot;,&quot;参数&quot;]],[[&quot;Plain&quot;,&quot;类型&quot;]],[[&quot;Plain&quot;,&quot;意义&quot;]],[[&quot;Plain&quot;,&quot;指导配置&quot;]]],&quot;~:groups&quot;,[[[[[&quot;Plain&quot;,&quot;-Xms&quot;]],[[&quot;Plain&quot;,&quot;基本参数&quot;]],[[&quot;Plain&quot;,&quot;堆最小值(初始化值)&quot;]],[[&quot;Plain&quot;,&quot;与 -Xmx 配置为相等，避免内存震荡&quot;]]],[[[&quot;Plain&quot;,&quot;-Xmx&quot;]],[[&quot;Plain&quot;,&quot;基本参数&quot;]],[[&quot;Plain&quot;,&quot;堆最大值&quot;]],[[&quot;Plain&quot;,&quot;与 -Xms 配置为相等，避免内存震荡&quot;]]],[[[&quot;Plain&quot;,&quot;-XX:NewRatio&quot;]],[[&quot;Plain&quot;,&quot;分代配置参数&quot;]],[[&quot;Plain&quot;,&quot;新生代与老年代比值&quot;]],[[&quot;Plain&quot;,&quot;如果young gc非常频繁，考虑调大&quot;]]],[[[&quot;Plain&quot;,&quot;-XX:MaxTenuringThreshold&quot;]],[[&quot;Plain&quot;,&quot;分代配置参数&quot;]],[[&quot;Plain&quot;,&quot;新生代晋升阈值&quot;]],[[&quot;Plain&quot;,&quot;如果young gc非常频繁，考虑调大&quot;]]],[[[&quot;Plain&quot;,&quot;-XX:SurvivorRatio&quot;]],[[&quot;Plain&quot;,&quot;新生代配置参数&quot;]],[[&quot;Plain&quot;,&quot;Eden比值&quot;]],[[&quot;Plain&quot;,&quot;如果Eden作为内存缓冲上涨过快，考虑调大&quot;]]],[[[&quot;Plain&quot;,&quot;-XX:+PrintGCDetails&quot;]],[[&quot;Plain&quot;,&quot;工具配置&quot;]],[[&quot;Plain&quot;,&quot;打印详细GC日志&quot;]],[[&quot;Plain&quot;,&quot;&quot;]]],[[[&quot;Plain&quot;,&quot;-XX:+PrintGCDateStamps&quot;]],[[&quot;Plain&quot;,&quot;工具配置&quot;]],[[&quot;Plain&quot;,&quot;打印详细GC日期和时间&quot;]],[[&quot;Plain&quot;,&quot;&quot;]]],[[[&quot;Plain&quot;,&quot;-XX:+UseG1GC&quot;]],[[&quot;Plain&quot;,&quot;G1配置&quot;]],[[&quot;Plain&quot;,&quot;启用G1收集器&quot;]],[[&quot;Plain&quot;,&quot;&quot;]]],[[[&quot;Plain&quot;,&quot;-XX:+MaxGCPauseMillis=200&quot;]],[[&quot;Plain&quot;,&quot;G1配置&quot;]],[[&quot;Plain&quot;,&quot;最大暂停时间&quot;]],[[&quot;Plain&quot;,&quot;&quot;]]]]],&quot;~:col_groups&quot;,[4]]]],536870916]],[&quot;^1A&quot;,[191,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[191,&quot;^[&quot;,&quot;## 调优\\n|参数|类型|意义|指导配置|\\n| --- | --- | --- | --- |\\n| -Xms | 基本参数 | 堆最小值(初始化值) | 与 -Xmx 配置为相等，避免内存震荡 |\\n| -Xmx | 基本参数 | 堆最大值 | 与 -Xms 配置为相等，避免内存震荡 |\\n| -XX:NewRatio | 分代配置参数 | 新生代与老年代比值 | 如果young gc非常频繁，考虑调大 |\\n| -XX:MaxTenuringThreshold | 分代配置参数 | 新生代晋升阈值 | 如果young gc非常频繁，考虑调大 |\\n| -XX:SurvivorRatio | 新生代配置参数 | Eden比值 | 如果Eden作为内存缓冲上涨过快，考虑调大 |\\n| -XX:+PrintGCDetails | 工具配置 | 打印详细GC日志 |  |\\n| -XX:+PrintGCDateStamps | 工具配置 | 打印详细GC日期和时间|  |\\n| -XX:+UseG1GC | G1配置 | 启用G1收集器|  |\\n| -XX:+MaxGCPauseMillis=200 | G1配置 | 最大暂停时间|  |&quot;,536870916]],[&quot;^1A&quot;,[191,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[191,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[191,&quot;^K&quot;,180,536870916]],[&quot;^1A&quot;,[191,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[191,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9219,&quot;^1L&quot;,10080],536870916]],[&quot;^1A&quot;,[191,&quot;^17&quot;,80,536870916]],[&quot;^1A&quot;,[191,&quot;^13&quot;,80,536870916]],[&quot;^1A&quot;,[191,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[191,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;调优&quot;]],536870916]],[&quot;^1A&quot;,[191,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[191,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[191,&quot;^?&quot;,&quot;~u611b87e5-1f65-44b6-8223-10d5b77d8493&quot;,536870916]],[&quot;^1A&quot;,[192,&quot;^1E&quot;,&quot;Design&quot;,536870916]],[&quot;^1A&quot;,[192,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[192,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-9f32-47f7-b758-9f2ef70c2b44&quot;],[&quot;^?&quot;,&quot;~u611b87e5-0ca5-4712-8f31-166f84af8c2f&quot;]]],536870916]],[&quot;^1A&quot;,[192,&quot;^[&quot;,&quot;## Design&quot;,536870916]],[&quot;^1A&quot;,[192,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[192,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[192,&quot;^K&quot;,75,536870916]],[&quot;^1A&quot;,[192,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[192,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,12],536870916]],[&quot;^1A&quot;,[192,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[192,&quot;^13&quot;,75,536870916]],[&quot;^1A&quot;,[192,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[192,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Design&quot;]],536870916]],[&quot;^1A&quot;,[192,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[192,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[192,&quot;^?&quot;,&quot;~u611b87e5-49d4-4fa0-adba-d2eff4e7d102&quot;,536870916]],[&quot;^1A&quot;,[193,&quot;^1E&quot;,&quot;Active&quot;,536870916]],[&quot;^1A&quot;,[193,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Kafka积极利用操作系统page cache来做高性能的IO读写，而不是依赖应用层缓存。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;顺序IO性能接近/高于内存&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Kafka文档引用了若干文献来说明，现代操作系统下磁盘并不一定是系统的瓶颈。合理的IO模型下，仅依靠磁盘读写性能也能非常高。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627400092758_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627400092758_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;操作系统缓存足够高效&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;作为唯一拥有操作硬件权利的软件，操作系统对硬件读写的缓存要比应用层缓存高效得多。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;不要以为现在是1975年，现代操作系统的黑客们已经帮你搞定很多事情了&quot;,&quot;\\n&quot;],&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,585,&quot;^1S&quot;,686],&quot;^1T&quot;,&quot;~```\\n不要以为现在是1975年，现代操作系统的黑客们已经帮你搞定很多事情了\\n```&quot;]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;管理过大的JVM内存是一门危险的艺术&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Kafka是跑在JVM上的，JVM对象系统对内存不太友好，会增加很多额外的负担。同时堆内存上升时，GC性能也容易下降。 &quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;依赖page cache协调producer&amp;consumer&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Kafka整体与page cache的关系图可表示如下：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627400958503_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627400958503_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;如果Kafka producer的生产速率与consumer的消费速率相差不大，那么就能几乎只靠对broker page cache的读写完成整个生产-消费过程，磁盘访问非常少。这个结论俗称为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;“读写空中接力”&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[193,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[193,&quot;^[&quot;,&quot;## Active [[page cache]]\\n\\nKafka积极利用操作系统page cache来做高性能的IO读写，而不是依赖应用层缓存。\\n&gt; 顺序IO性能接近/高于内存\\nKafka文档引用了若干文献来说明，现代操作系统下磁盘并不一定是系统的瓶颈。合理的IO模型下，仅依靠磁盘读写性能也能非常高。\\n![image.png](../assets/image_1627400092758_0.png) \\n&gt; 操作系统缓存足够高效\\n作为唯一拥有操作硬件权利的软件，操作系统对硬件读写的缓存要比应用层缓存高效得多。\\n```\\n不要以为现在是1975年，现代操作系统的黑客们已经帮你搞定很多事情了\\n```\\n&gt; 管理过大的JVM内存是一门危险的艺术\\nKafka是跑在JVM上的，JVM对象系统对内存不太友好，会增加很多额外的负担。同时堆内存上升时，GC性能也容易下降。 \\n&gt; 依赖page cache协调producer&amp;consumer\\nKafka整体与page cache的关系图可表示如下：\\n![image.png](../assets/image_1627400958503_0.png) \\n\\n如果Kafka producer的生产速率与consumer的消费速率相差不大，那么就能几乎只靠对broker page cache的读写完成整个生产-消费过程，磁盘访问非常少。这个结论俗称为**“读写空中接力”**。&quot;,536870916]],[&quot;^1A&quot;,[193,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[193,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[193,&quot;^K&quot;,192,536870916]],[&quot;^1A&quot;,[193,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[193,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,12,&quot;^1L&quot;,1304],536870916]],[&quot;^1A&quot;,[193,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[193,&quot;^13&quot;,192,536870916]],[&quot;^1A&quot;,[193,&quot;^12&quot;,66,536870916]],[&quot;^1A&quot;,[193,&quot;^L&quot;,66,536870916]],[&quot;^1A&quot;,[193,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[193,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Active &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;page cache&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[page cache]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[193,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[193,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[193,&quot;^?&quot;,&quot;~u611b87e5-0ca5-4712-8f31-166f84af8c2f&quot;,536870916]],[&quot;^1A&quot;,[194,&quot;^1E&quot;,&quot;Zero_copy-2c-_zero_overhead&quot;,536870916]],[&quot;^1A&quot;,[194,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;在 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;61001e50-e971-4d21-b419-70394317a708&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((61001e50-e971-4d21-b419-70394317a708))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 中，磁盘数据从应用程序读取到最终写入网卡要经历4次复制。&quot;],[&quot;Code&quot;,&quot;zero copy&quot;],[&quot;Plain&quot;,&quot;是指通过linux内核函数&quot;],[&quot;Code&quot;,&quot;sendfile&quot;],[&quot;Plain&quot;,&quot;，将数据直接从page cache复制到网卡，从而避免多余复制以提高IO效率的方式。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;sendfile() copies data between one file descriptor and another.&quot;,&quot;\\n&quot;,&quot;Because this copying is done within the kernel, sendfile() is&quot;,&quot;\\n&quot;,&quot;more efficient than the combination of read(2) and write(2),&quot;,&quot;\\n&quot;,&quot;which would require transferring data to and from user space.&quot;,&quot;\\n&quot;],&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,314,&quot;^1S&quot;,563],&quot;^1T&quot;,&quot;~```\\nsendfile() copies data between one file descriptor and another.\\nBecause this copying is done within the kernel, sendfile() is\\nmore efficient than the combination of read(2) and write(2),\\nwhich would require transferring data to and from user space.\\n```\\n&quot;]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Java NIO transferTo&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Code&quot;,&quot;transferTo&quot;],[&quot;Plain&quot;,&quot;方法是JAVA NIO对sendfile函数的本地调用(unix-like OS)，transferTo的数据复制流程图如下：&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627450616411_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627450616411_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]]]],536873239]],[&quot;^1A&quot;,[194,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[194,&quot;^[&quot;,&quot;## Zero copy, zero overhead\\n在 ((61001e50-e971-4d21-b419-70394317a708)) 中，磁盘数据从应用程序读取到最终写入网卡要经历4次复制。`zero copy`是指通过linux内核函数`sendfile`，将数据直接从page cache复制到网卡，从而避免多余复制以提高IO效率的方式。\\n```\\nsendfile() copies data between one file descriptor and another.\\nBecause this copying is done within the kernel, sendfile() is\\nmore efficient than the combination of read(2) and write(2),\\nwhich would require transferring data to and from user space.\\n```\\n&gt; Java NIO transferTo\\n`transferTo`方法是JAVA NIO对sendfile函数的本地调用(unix-like OS)，transferTo的数据复制流程图如下：\\n![image.png](../assets/image_1627450616411_0.png)&quot;,536873239]],[&quot;^1A&quot;,[194,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[194,&quot;^14&quot;,2,536873239]],[&quot;^1A&quot;,[194,&quot;^K&quot;,193,536870916]],[&quot;^1A&quot;,[194,&quot;^X&quot;,1,536873239]],[&quot;^1A&quot;,[194,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1304,&quot;^1L&quot;,2100],536870916]],[&quot;^1A&quot;,[194,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[194,&quot;^13&quot;,192,536870916]],[&quot;^1A&quot;,[194,&quot;^12&quot;,75,536873239]],[&quot;^1A&quot;,[194,&quot;^D&quot;,[&quot;^ &quot;],536873239]],[&quot;^1A&quot;,[194,&quot;^L&quot;,234,536873239]],[&quot;^1A&quot;,[194,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[194,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Zero copy, zero overhead&quot;]],536873239]],[&quot;^1A&quot;,[194,&quot;^15&quot;,&quot;^1N&quot;,536873239]],[&quot;^1A&quot;,[194,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[194,&quot;^?&quot;,&quot;~u611b87e5-9f32-47f7-b758-9f2ef70c2b44&quot;,536870916]],[&quot;^1A&quot;,[195,&quot;^1E&quot;,&quot;Efficient_storage&quot;,536870916]],[&quot;^1A&quot;,[195,&quot;^S&quot;,[],536873247]],[&quot;^1A&quot;,[195,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-213b-4a10-a5e0-b94db9c419e9&quot;],[&quot;^?&quot;,&quot;~u611b87e5-38aa-4e75-985a-d08c25cd6dbb&quot;],[&quot;^?&quot;,&quot;~u611b87e5-9a6e-4213-b7d4-90cbdf1f43ba&quot;],[&quot;^?&quot;,&quot;~u611b87e5-f885-4e13-ae59-2903c4988d79&quot;]]],536870916]],[&quot;^1A&quot;,[195,&quot;^[&quot;,&quot;## Efficient storage &quot;,536873247]],[&quot;^1A&quot;,[195,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[195,&quot;^14&quot;,2,536873247]],[&quot;^1A&quot;,[195,&quot;^K&quot;,192,536870916]],[&quot;^1A&quot;,[195,&quot;^X&quot;,1,536873247]],[&quot;^1A&quot;,[195,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2100,&quot;^1L&quot;,2123],536870916]],[&quot;^1A&quot;,[195,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[195,&quot;^13&quot;,75,536870916]],[&quot;^1A&quot;,[195,&quot;^12&quot;,75,536873247]],[&quot;^1A&quot;,[195,&quot;^D&quot;,[&quot;^ &quot;],536873247]],[&quot;^1A&quot;,[195,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[195,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Efficient storage &quot;]],536873247]],[&quot;^1A&quot;,[195,&quot;^15&quot;,&quot;^1N&quot;,536873247]],[&quot;^1A&quot;,[195,&quot;^1D&quot;,false,536873247]],[&quot;^1A&quot;,[195,&quot;^?&quot;,&quot;~u611b87e5-56a0-4ddb-9e09-5f112f89991b&quot;,536870916]],[&quot;^1A&quot;,[197,&quot;^1E&quot;,&quot;Efficient_message_storage&quot;,536870916]],[&quot;^1A&quot;,[197,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;每个分区由内部的每一条消息组成，如果消息格式设计得不够精炼，那么其功能和性能都会大打折扣。比如有冗余字段，势必会不必要地增加分区的占用空间，进而不仅使存储的开销变大、网络传输的开销变大，也会使 Kafka 的性能下降。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;与Redis &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fe1e1e-ca1d-446a-be3b-84bfd7489629&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fe1e1e-ca1d-446a-be3b-84bfd7489629))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 的思想类似，新版Kafka使用&quot;],[&quot;Code&quot;,&quot;批量存储&quot;],[&quot;Plain&quot;,&quot;和&quot;],[&quot;Code&quot;,&quot;变长字段&quot;],[&quot;Plain&quot;,&quot;来优化消息格式设计，即将多个消息(Record) 打包存放到单个RecordBatch中，和通过varints编码极大节省空间。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627456397288_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627456397288_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;在内存中，Kafka还为日志分段构建了 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fced9d-a7e4-4ba9-a112-22d456758c59&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fced9d-a7e4-4ba9-a112-22d456758c59))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; ，以快速根据偏移量定位分段。&quot;],[&quot;Break_Line&quot;]]]]],536873248]],[&quot;^1A&quot;,[197,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[197,&quot;^[&quot;,&quot;## Efficient message storage\\n\\n每个分区由内部的每一条消息组成，如果消息格式设计得不够精炼，那么其功能和性能都会大打折扣。比如有冗余字段，势必会不必要地增加分区的占用空间，进而不仅使存储的开销变大、网络传输的开销变大，也会使 Kafka 的性能下降。\\n\\n与Redis ((60fe1e1e-ca1d-446a-be3b-84bfd7489629)) 的思想类似，新版Kafka使用`批量存储`和`变长字段`来优化消息格式设计，即将多个消息(Record) 打包存放到单个RecordBatch中，和通过varints编码极大节省空间。\\n![image.png](../assets/image_1627456397288_0.png)\\n\\n在内存中，Kafka还为日志分段构建了 ((60fced9d-a7e4-4ba9-a112-22d456758c59)) ，以快速根据偏移量定位分段。&quot;,536870916]],[&quot;^1A&quot;,[197,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[197,&quot;^14&quot;,2,536873248]],[&quot;^1A&quot;,[197,&quot;^K&quot;,466,536873248]],[&quot;^1A&quot;,[197,&quot;^X&quot;,2,536873248]],[&quot;^1A&quot;,[197,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2195,&quot;^1L&quot;,3002],536870916]],[&quot;^1A&quot;,[197,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[197,&quot;^13&quot;,195,536870916]],[&quot;^1A&quot;,[197,&quot;^L&quot;,344,536873248]],[&quot;^1A&quot;,[197,&quot;^L&quot;,346,536873248]],[&quot;^1A&quot;,[197,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[197,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Efficient message storage&quot;]],536873248]],[&quot;^1A&quot;,[197,&quot;^15&quot;,&quot;^1N&quot;,536873248]],[&quot;^1A&quot;,[197,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[197,&quot;^?&quot;,&quot;~u611b87e5-9a6e-4213-b7d4-90cbdf1f43ba&quot;,536870916]],[&quot;^1A&quot;,[198,&quot;^1E&quot;,&quot;Eficient_index&quot;,536870916]],[&quot;^1A&quot;,[198,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;偏移量索引(.index文件)&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Kafka中的索引文件以稀疏索引(不同于MongoDB &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fa96d4-7ecf-4845-a5f1-e2e5ea9e5960&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fa96d4-7ecf-4845-a5f1-e2e5ea9e5960))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; )的方式构造消息的索引，它并不保证每个消息在索引文件中都有对应的索引页。由于操作系统会以块的形式读取磁盘文件，在消息队列顺序读取的特性下，即使本次读取未命中索引，下一次读取的数据很可能已经被系统加载到page cache中，因此稀疏索引不会导致过多的细小IO。偏移量索引示意图如下：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627457277497_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627457277497_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;时间戳索引(.timeindex文件)&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;与偏移量索引类似，时间戳索引也是稀疏索引，用于根据时间戳快速查找指定消息。查找流程如下：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627457623228_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627457623228_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[198,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[198,&quot;^[&quot;,&quot;## Eficient index\\n\\n**_偏移量索引(.index文件)_**\\n\\nKafka中的索引文件以稀疏索引(不同于MongoDB ((60fa96d4-7ecf-4845-a5f1-e2e5ea9e5960)) )的方式构造消息的索引，它并不保证每个消息在索引文件中都有对应的索引页。由于操作系统会以块的形式读取磁盘文件，在消息队列顺序读取的特性下，即使本次读取未命中索引，下一次读取的数据很可能已经被系统加载到page cache中，因此稀疏索引不会导致过多的细小IO。偏移量索引示意图如下：\\n![image.png](../assets/image_1627457277497_0.png)\\n\\n**_时间戳索引(.timeindex文件)_**\\n\\n与偏移量索引类似，时间戳索引也是稀疏索引，用于根据时间戳快速查找指定消息。查找流程如下：\\n![image.png](../assets/image_1627457623228_0.png)&quot;,536870916]],[&quot;^1A&quot;,[198,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[198,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[198,&quot;^K&quot;,197,536870916]],[&quot;^1A&quot;,[198,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[198,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3002,&quot;^1L&quot;,3861],536870916]],[&quot;^1A&quot;,[198,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[198,&quot;^13&quot;,195,536870916]],[&quot;^1A&quot;,[198,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[198,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Eficient index&quot;]],536870916]],[&quot;^1A&quot;,[198,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[198,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[198,&quot;^?&quot;,&quot;~u611b87e5-38aa-4e75-985a-d08c25cd6dbb&quot;,536870916]],[&quot;^1A&quot;,[199,&quot;^1E&quot;,&quot;Eficient_log_storage&quot;,536870916]],[&quot;^1A&quot;,[199,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;日志的高效存储主要包括过期日志清理和日志压缩。日志压缩类似 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fe5c3c-13b1-40ea-b8d5-70af1c3bdbc4&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fe5c3c-13b1-40ea-b8d5-70af1c3bdbc4))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 的重写过程，即清理中间态的数据，保留&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;数据最终态&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[199,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[199,&quot;^[&quot;,&quot;## Eficient log storage\\n\\n日志的高效存储主要包括过期日志清理和日志压缩。日志压缩类似 ((60fe5c3c-13b1-40ea-b8d5-70af1c3bdbc4)) 的重写过程，即清理中间态的数据，保留**数据最终态**。&quot;,536870916]],[&quot;^1A&quot;,[199,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[199,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[199,&quot;^K&quot;,198,536870916]],[&quot;^1A&quot;,[199,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[199,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3861,&quot;^1L&quot;,4101],536870916]],[&quot;^1A&quot;,[199,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[199,&quot;^13&quot;,195,536870916]],[&quot;^1A&quot;,[199,&quot;^L&quot;,263,536870916]],[&quot;^1A&quot;,[199,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[199,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Eficient log storage&quot;]],536870916]],[&quot;^1A&quot;,[199,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[199,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[199,&quot;^?&quot;,&quot;~u611b87e5-213b-4a10-a5e0-b94db9c419e9&quot;,536870916]],[&quot;^1A&quot;,[200,&quot;^1E&quot;,&quot;Consumer&quot;,536870916]],[&quot;^1A&quot;,[200,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[200,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-e07f-4dbb-b002-be1c6b6477ac&quot;],[&quot;^?&quot;,&quot;~u611b87e5-e8df-4b1f-b89d-84830dff0b93&quot;],[&quot;^?&quot;,&quot;~u611b87e5-8670-4877-aa04-009e89502afb&quot;]]],536870916]],[&quot;^1A&quot;,[200,&quot;^[&quot;,&quot;## Consumer&quot;,536870916]],[&quot;^1A&quot;,[200,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[200,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[200,&quot;^K&quot;,195,536870916]],[&quot;^1A&quot;,[200,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[200,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,4101,&quot;^1L&quot;,4115],536870916]],[&quot;^1A&quot;,[200,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[200,&quot;^13&quot;,75,536870916]],[&quot;^1A&quot;,[200,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[200,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Consumer&quot;]],536870916]],[&quot;^1A&quot;,[200,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[200,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[200,&quot;^?&quot;,&quot;~u611b87e5-c995-44a3-853a-5ca545b41b59&quot;,536870916]],[&quot;^1A&quot;,[201,&quot;^1E&quot;,&quot;-e6--b6--88--e8--b4--b9--e4--bd--8d--e7--a7--bb-(offset)&quot;,536870916]],[&quot;^1A&quot;,[201,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;对于 Kafka中的分区而言，它的每条消息都有唯一的 offset，用来表示消息在分区中对应的位置。对于消费者而言，它也有一个 offset的概念，消费者使用offset来表示消费到分区中某个消息所在的位置。单词offset可以翻译为偏移量，也可以翻译为位移P。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;在旧消费者客户端中，消费位移是存储在 ZooKeeper 中的 。而在新消费者客户端中，消费位移存储在 Kafka内部的主题 &quot;],[&quot;Code&quot;,&quot;__consumer_offsets&quot;],[&quot;Plain&quot;,&quot;中 。消费位移提交是一个相对频繁且重要的过程，依赖Zookeeper的话容易使其成为系统瓶颈。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[201,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[201,&quot;^[&quot;,&quot;## 消费位移(offset)\\n\\n对于 Kafka中的分区而言，它的每条消息都有唯一的 offset，用来表示消息在分区中对应的位置。对于消费者而言，它也有一个 offset的概念，消费者使用offset来表示消费到分区中某个消息所在的位置。单词offset可以翻译为偏移量，也可以翻译为位移P。\\n\\n在旧消费者客户端中，消费位移是存储在 ZooKeeper 中的 。而在新消费者客户端中，消费位移存储在 Kafka内部的主题 `__consumer_offsets`中 。消费位移提交是一个相对频繁且重要的过程，依赖Zookeeper的话容易使其成为系统瓶颈。&quot;,536870916]],[&quot;^1A&quot;,[201,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[201,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[201,&quot;^K&quot;,200,536870916]],[&quot;^1A&quot;,[201,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[201,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,4115,&quot;^1L&quot;,4777],536870916]],[&quot;^1A&quot;,[201,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[201,&quot;^13&quot;,200,536870916]],[&quot;^1A&quot;,[201,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[201,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;消费位移(offset)&quot;]],536870916]],[&quot;^1A&quot;,[201,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[201,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[201,&quot;^?&quot;,&quot;~u611b87e5-8670-4877-aa04-009e89502afb&quot;,536870916]],[&quot;^1A&quot;,[202,&quot;^1E&quot;,&quot;-e5--86--8d--e5--9d--87--e8--a1--a1-&quot;,536870916]],[&quot;^1A&quot;,[202,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;再均衡是指分区的所属权从一个消费者转移到另一消费者的行为，它为消费组具备高可用性和伸缩性提供保障，使我们可以既方便又安全地删除消费组内的消费者或往消费组内添加消费者。不过在再均衡发生期间，消费组内的消费者是无法读取消息的。也就是说，在再均衡发生期间的这一小段时间内，消费组会变得&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;不可用&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;静态成员&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;考虑消费者会经常安全的重启，例如部署、周期性重启等，这种情况下是不希望Kafka对消费者再均衡的，因此Kafka提供静态消费者成员的策略。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Static membership aims to improve the availability of stream applications, consumer groups and other applications built on top of the group rebalance protocol.&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;The rebalance protocol relies on the group coordinator to allocate entity ids to group members. These generated ids are ephemeral and will change when members restart and rejoin. For consumer based apps, this \\&quot;dynamic membership\\&quot; can cause a large percentage of tasks re-assigned to different instances during administrative operations such as code deploys, configuration updates and periodic restarts. For large state applications, shuffled tasks need a long time to recover their local states before processing and cause applications to be partially or entirely unavailable. &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Motivated by this observation, Kafka’s group management protocol allows group members to provide persistent entity ids. Group membership remains unchanged based on those ids, thus no rebalance will be triggered.&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[202,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[202,&quot;^[&quot;,&quot;## 再均衡\\n\\n再均衡是指分区的所属权从一个消费者转移到另一消费者的行为，它为消费组具备高可用性和伸缩性提供保障，使我们可以既方便又安全地删除消费组内的消费者或往消费组内添加消费者。不过在再均衡发生期间，消费组内的消费者是无法读取消息的。也就是说，在再均衡发生期间的这一小段时间内，消费组会变得**不可用**。\\n\\n**_静态成员_**\\n\\n考虑消费者会经常安全的重启，例如部署、周期性重启等，这种情况下是不希望Kafka对消费者再均衡的，因此Kafka提供静态消费者成员的策略。\\n\\nStatic membership aims to improve the availability of stream applications, consumer groups and other applications built on top of the group rebalance protocol.\\n\\nThe rebalance protocol relies on the group coordinator to allocate entity ids to group members. These generated ids are ephemeral and will change when members restart and rejoin. For consumer based apps, this \\&quot;dynamic membership\\&quot; can cause a large percentage of tasks re-assigned to different instances during administrative operations such as code deploys, configuration updates and periodic restarts. For large state applications, shuffled tasks need a long time to recover their local states before processing and cause applications to be partially or entirely unavailable. \\n\\nMotivated by this observation, Kafka’s group management protocol allows group members to provide persistent entity ids. Group membership remains unchanged based on those ids, thus no rebalance will be triggered.&quot;,536870916]],[&quot;^1A&quot;,[202,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[202,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[202,&quot;^K&quot;,201,536870916]],[&quot;^1A&quot;,[202,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[202,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,4777,&quot;^1L&quot;,6428],536870916]],[&quot;^1A&quot;,[202,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[202,&quot;^13&quot;,200,536870916]],[&quot;^1A&quot;,[202,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[202,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;再均衡&quot;]],536870916]],[&quot;^1A&quot;,[202,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[202,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[202,&quot;^?&quot;,&quot;~u611b87e5-e8df-4b1f-b89d-84830dff0b93&quot;,536870916]],[&quot;^1A&quot;,[203,&quot;^1E&quot;,&quot;-e5--a4--9a--e7--ba--bf--e7--a8--8b--e6--b6--88--e8--b4--b9--e8--80--85-&quot;,536870916]],[&quot;^1A&quot;,[203,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;一般来说，是不推荐消费者自己造轮子去实现多线程消费的，这里只是说明一种可实施的方法。不同于Kafka，有一些消息队列(如RocketMQ)的消费者是支持多线程消费的，虽然他们可能限制同一个进程上只能有一个消费者实例。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;如图所示，每一个方格代表一个批次的消息，一个滑动窗口包含若干方格，startOffset标注的是当前滑动窗口的起始位置，endOffset标注的是末尾位置。每当startOffset指向的方格中的消息被消费完成，就可以提交这部分的位移，与此同时，窗口向前滑动一格，删除原来startOffset所指方格中对应的消息，并且拉取新的消息进入窗口。滑动窗口的大小固定，所对应的用来暂存消息的缓存大小也就固定了，这部分内存开销可控。方格大小和滑动窗口的大小同时决定了消费线程的并发数:一个方格对应一个消费线程，对于窗口大小固定的情况，方格越小并行度越高:对于方格大小固定的情况，窗口越大并行度越高。不过，若窗口设置得过大，不仅会增大内存的开销，而且在发生异常(比如Crash)的情况下也会引起大量的重复消费，同时还考虑线程切换的开销，建议根据实际情况设置一个合理的值，不管是对于方格还是窗口而言，过大或过小都不合适。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;如果一个方格内的消息无法被标记为消费完成，那么就会造成startOffset的悬停。为了使窗口能够继续向前滑动，那么就需要设定一个闹值，当startOffset悬停一定的时间后就对这部分消息进行本地重试消费，如果重试失败就转入重试队列，如果还不奏效就转入死信队列。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627474040401_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627474040401_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[203,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[203,&quot;^[&quot;,&quot;## 多线程消费者\\n\\n一般来说，是不推荐消费者自己造轮子去实现多线程消费的，这里只是说明一种可实施的方法。不同于Kafka，有一些消息队列(如RocketMQ)的消费者是支持多线程消费的，虽然他们可能限制同一个进程上只能有一个消费者实例。\\n\\n如图所示，每一个方格代表一个批次的消息，一个滑动窗口包含若干方格，startOffset标注的是当前滑动窗口的起始位置，endOffset标注的是末尾位置。每当startOffset指向的方格中的消息被消费完成，就可以提交这部分的位移，与此同时，窗口向前滑动一格，删除原来startOffset所指方格中对应的消息，并且拉取新的消息进入窗口。滑动窗口的大小固定，所对应的用来暂存消息的缓存大小也就固定了，这部分内存开销可控。方格大小和滑动窗口的大小同时决定了消费线程的并发数:一个方格对应一个消费线程，对于窗口大小固定的情况，方格越小并行度越高:对于方格大小固定的情况，窗口越大并行度越高。不过，若窗口设置得过大，不仅会增大内存的开销，而且在发生异常(比如Crash)的情况下也会引起大量的重复消费，同时还考虑线程切换的开销，建议根据实际情况设置一个合理的值，不管是对于方格还是窗口而言，过大或过小都不合适。\\n\\n如果一个方格内的消息无法被标记为消费完成，那么就会造成startOffset的悬停。为了使窗口能够继续向前滑动，那么就需要设定一个闹值，当startOffset悬停一定的时间后就对这部分消息进行本地重试消费，如果重试失败就转入重试队列，如果还不奏效就转入死信队列。\\n![image.png](../assets/image_1627474040401_0.png)&quot;,536870916]],[&quot;^1A&quot;,[203,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[203,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[203,&quot;^K&quot;,202,536870916]],[&quot;^1A&quot;,[203,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[203,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,6428,&quot;^1L&quot;,8286],536870916]],[&quot;^1A&quot;,[203,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[203,&quot;^13&quot;,200,536870916]],[&quot;^1A&quot;,[203,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[203,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;多线程消费者&quot;]],536870916]],[&quot;^1A&quot;,[203,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[203,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[203,&quot;^?&quot;,&quot;~u611b87e5-e07f-4dbb-b002-be1c6b6477ac&quot;,536870916]],[&quot;^1A&quot;,[204,&quot;^1E&quot;,&quot;-e5--89--af--e6--9c--ac-&quot;,536870916]],[&quot;^1A&quot;,[204,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;副本&quot;],[&quot;Plain&quot;,&quot;(Replica)是分布式系统中常见的概念之一，指的是分布式系统对数据和服务提供的一种冗余方式。在常见的分布式系统中，为了对外提供可用的服务，我们往往会对数据和服务进行副本处理。数据副本是指在不同的节点上持久化同一份数据，当某一个节点上存储的数据丢失时，可以从副本上读取该数据，这是解决分布式系统数据丢失问题最有效的手段。&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 与MongoDB的 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;副本集&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[副本集]]&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 或者Redis的 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fe6525-11df-407a-98b3-d9f3c850f4fc&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fe6525-11df-407a-98b3-d9f3c850f4fc))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 不一样，Kafka的副本集不是针对节点(broker)，而是针对分区的。Kafka的副本集分两类。&quot;],[&quot;Code&quot;,&quot;AR&quot;],[&quot;Plain&quot;,&quot;(all replica)和&quot;],[&quot;Code&quot;,&quot;ISR&quot;],[&quot;Plain&quot;,&quot;(in-sync replica)，区别在于ISR是会与主分区同步的，而AR的部分成员不会实时同步。这有点类似MongoDB的 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fa96d4-9695-4227-aac0-02725d40db05&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fa96d4-9695-4227-aac0-02725d40db05))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; ，即在写入Kafka的分区时，只有写入被同步到大多数副本才会被认为成功并更新分区的&quot;],[&quot;Code&quot;,&quot;HW&quot;],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;LEO&quot;],[&quot;Plain&quot;,&quot; 标识每个分区中最后一条消息的下一个位置，分区的每个副本都有自己的 LEO, ISR 中最小的 LEO 即为 &quot;],[&quot;Code&quot;,&quot;HW&quot;],[&quot;Plain&quot;,&quot;，俗称高水位，消费者只能拉取到 HW 之前的消息。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[204,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[204,&quot;^[&quot;,&quot;##  副本\\nid:: 61014b1a-574d-4772-90b7-66ef105899d6\\n\\n`副本`(Replica)是分布式系统中常见的概念之一，指的是分布式系统对数据和服务提供的一种冗余方式。在常见的分布式系统中，为了对外提供可用的服务，我们往往会对数据和服务进行副本处理。数据副本是指在不同的节点上持久化同一份数据，当某一个节点上存储的数据丢失时，可以从副本上读取该数据，这是解决分布式系统数据丢失问题最有效的手段。\\n\\n与MongoDB的 [[副本集]] 或者Redis的 ((60fe6525-11df-407a-98b3-d9f3c850f4fc)) 不一样，Kafka的副本集不是针对节点(broker)，而是针对分区的。Kafka的副本集分两类。`AR`(all replica)和`ISR`(in-sync replica)，区别在于ISR是会与主分区同步的，而AR的部分成员不会实时同步。这有点类似MongoDB的 ((60fa96d4-9695-4227-aac0-02725d40db05)) ，即在写入Kafka的分区时，只有写入被同步到大多数副本才会被认为成功并更新分区的`HW`。\\n\\n`LEO` 标识每个分区中最后一条消息的下一个位置，分区的每个副本都有自己的 LEO, ISR 中最小的 LEO 即为 `HW`，俗称高水位，消费者只能拉取到 HW 之前的消息。&quot;,536870916]],[&quot;^1A&quot;,[204,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[204,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[204,&quot;^K&quot;,200,536870916]],[&quot;^1A&quot;,[204,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[204,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,8286,&quot;^1L&quot;,9554],536870916]],[&quot;^1A&quot;,[204,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[204,&quot;^13&quot;,75,536870916]],[&quot;^1A&quot;,[204,&quot;^12&quot;,68,536870916]],[&quot;^1A&quot;,[204,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;61014b1a-574d-4772-90b7-66ef105899d6&quot;],536870916]],[&quot;^1A&quot;,[204,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[204,&quot;^L&quot;,68,536870916]],[&quot;^1A&quot;,[204,&quot;^L&quot;,215,536870916]],[&quot;^1A&quot;,[204,&quot;^L&quot;,276,536870916]],[&quot;^1A&quot;,[204,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[204,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;副本&quot;]],536870916]],[&quot;^1A&quot;,[204,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[204,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[204,&quot;^?&quot;,&quot;~u61014b1a-574d-4772-90b7-66ef105899d6&quot;,536870916]],[&quot;^1A&quot;,[205,&quot;^1E&quot;,&quot;Kafka-e5--ba--94--e7--94--a8-&quot;,536870916]],[&quot;^1A&quot;,[205,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[205,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-4466-4ce9-91d3-d9f77bee776e&quot;],[&quot;^?&quot;,&quot;~u611b87e5-81b7-44ff-9278-3d77a41033e2&quot;],[&quot;^?&quot;,&quot;~u611b87e5-d20c-4bd0-911c-9094fee1e24f&quot;]]],536870916]],[&quot;^1A&quot;,[205,&quot;^[&quot;,&quot;## Kafka应用&quot;,536870916]],[&quot;^1A&quot;,[205,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[205,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[205,&quot;^K&quot;,204,536870916]],[&quot;^1A&quot;,[205,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[205,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9554,&quot;^1L&quot;,9569],536870916]],[&quot;^1A&quot;,[205,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[205,&quot;^13&quot;,75,536870916]],[&quot;^1A&quot;,[205,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[205,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Kafka应用&quot;]],536870916]],[&quot;^1A&quot;,[205,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[205,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[205,&quot;^?&quot;,&quot;~u611b87e5-a160-4db0-aaf7-185e64781054&quot;,536870916]],[&quot;^1A&quot;,[206,&quot;^1E&quot;,&quot;-e6--97--b6--e9--97--b4--e8--bd--ae-&quot;,536870916]],[&quot;^1A&quot;,[206,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Kafka中存在大量的延时操作，比如延时生产、延时拉取和延时删除等。Kafka并没有使用JDK自带的Timer或DelayQueue来实现延时的功能，而是基于时间轮的概念自定义实现了一个用于延时功能的定时器(SystemTimer)。JDK中Timer和DelayQueue的插入和删除操作的平均时间复杂度为O(nlogn)并不能满足Kafka的高性能要求，而基于时间轮可以将插入和删除操作的时间复杂度都降为0(1)。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;如图所示，时间轮分为两个部分：&quot;],[&quot;Code&quot;,&quot;轮盘&quot;],[&quot;Plain&quot;,&quot;和&quot;],[&quot;Code&quot;,&quot;指针&quot;],[&quot;Plain&quot;,&quot;。轮盘是一个列表数组，指针表示当前的时间戳在轮盘上的指向。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627527605806_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627527605806_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;时间轮算法也是分为两部分：任务加入与指针推进。任务加入即按照任务的延时时间计算任务在轮盘上的位置，有冲突的话则加入链表并将任务的圈数+1。指针推进是计算当前时间戳下指针的位置，对于指针位置上的链表中圈数为0的任务，则表示此任务已到期，可以直接执行。对于圈数非0的任务，需要再过一轮时间轮并将圈数-1。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;算法有个考量点是需要比较好的方式做指针推进，减少指针在空轮盘上的推进从而避免CPU空转，Kafka的应对方式是复用JDK &quot;],[&quot;Code&quot;,&quot;DelayQueue&quot;],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;具体做法是对于每个使用到的TimerTaskList都加入DelayQueue，“每个用到的TimerTaskList”特指非哨兵节点的定时任务项TimerTaskEntry对应的TimerTaskList。DelayQueue会根据TimerTaskList对应的超时时间expiration来排序，最短expiration的TimerTaskList会被排在DelayQueue的队头。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Kafka中会有一个线程来获取DelayQueue中到期的任务列表，有意思的是这个线程所对应的名称叫作“ExpiredOperationReaper”，可以直译为“过期操作收割机”。当“收割机”线程获取DelayQueue中超时的任务列表TimerTaskList之后，既可以根据TimerTaskList的expiration来推进时间轮的时间，也可以就获取的TimerTaskList执行相应的操作，对里面的TimerTaskEntry该执行过期操作的就执行过期操作，该降级时间轮的就降级时间轮。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[206,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[206,&quot;^[&quot;,&quot;## 时间轮\\n\\nKafka中存在大量的延时操作，比如延时生产、延时拉取和延时删除等。Kafka并没有使用JDK自带的Timer或DelayQueue来实现延时的功能，而是基于时间轮的概念自定义实现了一个用于延时功能的定时器(SystemTimer)。JDK中Timer和DelayQueue的插入和删除操作的平均时间复杂度为O(nlogn)并不能满足Kafka的高性能要求，而基于时间轮可以将插入和删除操作的时间复杂度都降为0(1)。\\n\\n如图所示，时间轮分为两个部分：`轮盘`和`指针`。轮盘是一个列表数组，指针表示当前的时间戳在轮盘上的指向。\\n![image.png](../assets/image_1627527605806_0.png)\\n\\n时间轮算法也是分为两部分：任务加入与指针推进。任务加入即按照任务的延时时间计算任务在轮盘上的位置，有冲突的话则加入链表并将任务的圈数+1。指针推进是计算当前时间戳下指针的位置，对于指针位置上的链表中圈数为0的任务，则表示此任务已到期，可以直接执行。对于圈数非0的任务，需要再过一轮时间轮并将圈数-1。\\n\\n算法有个考量点是需要比较好的方式做指针推进，减少指针在空轮盘上的推进从而避免CPU空转，Kafka的应对方式是复用JDK `DelayQueue`。\\n\\n具体做法是对于每个使用到的TimerTaskList都加入DelayQueue，“每个用到的TimerTaskList”特指非哨兵节点的定时任务项TimerTaskEntry对应的TimerTaskList。DelayQueue会根据TimerTaskList对应的超时时间expiration来排序，最短expiration的TimerTaskList会被排在DelayQueue的队头。\\n\\nKafka中会有一个线程来获取DelayQueue中到期的任务列表，有意思的是这个线程所对应的名称叫作“ExpiredOperationReaper”，可以直译为“过期操作收割机”。当“收割机”线程获取DelayQueue中超时的任务列表TimerTaskList之后，既可以根据TimerTaskList的expiration来推进时间轮的时间，也可以就获取的TimerTaskList执行相应的操作，对里面的TimerTaskEntry该执行过期操作的就执行过期操作，该降级时间轮的就降级时间轮。&quot;,536870916]],[&quot;^1A&quot;,[206,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[206,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[206,&quot;^K&quot;,205,536870916]],[&quot;^1A&quot;,[206,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[206,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9569,&quot;^1L&quot;,11781],536870916]],[&quot;^1A&quot;,[206,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[206,&quot;^13&quot;,205,536870916]],[&quot;^1A&quot;,[206,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[206,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;时间轮&quot;]],536870916]],[&quot;^1A&quot;,[206,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[206,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[206,&quot;^?&quot;,&quot;~u611b87e5-d20c-4bd0-911c-9094fee1e24f&quot;,536870916]],[&quot;^1A&quot;,[207,&quot;^1E&quot;,&quot;-e6--b6--88--e6--81--af--e8--bd--a8--e8--bf--b9-&quot;,536870916]],[&quot;^1A&quot;,[207,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;消息轨迹即消息的生命周期，这里介绍一种依赖Kafka内部主题的方案，主要是想提出在以消息队列为中心的系统里，消息轨迹是非常重要的数据支撑，在设计此类系统时，一般要考虑到消息轨迹的设计。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627529268679_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627529268679_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[207,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[207,&quot;^[&quot;,&quot;## 消息轨迹\\n\\n消息轨迹即消息的生命周期，这里介绍一种依赖Kafka内部主题的方案，主要是想提出在以消息队列为中心的系统里，消息轨迹是非常重要的数据支撑，在设计此类系统时，一般要考虑到消息轨迹的设计。\\n![image.png](../assets/image_1627529268679_0.png)&quot;,536870916]],[&quot;^1A&quot;,[207,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[207,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[207,&quot;^K&quot;,206,536870916]],[&quot;^1A&quot;,[207,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[207,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,11781,&quot;^1L&quot;,12127],536870916]],[&quot;^1A&quot;,[207,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[207,&quot;^13&quot;,205,536870916]],[&quot;^1A&quot;,[207,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[207,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;消息轨迹&quot;]],536870916]],[&quot;^1A&quot;,[207,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[207,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[207,&quot;^?&quot;,&quot;~u611b87e5-81b7-44ff-9278-3d77a41033e2&quot;,536870916]],[&quot;^1A&quot;,[208,&quot;^1E&quot;,&quot;-e6--b6--88--e6--81--af--e5--ae--a1--e8--ae--a1-&quot;,536870916]],[&quot;^1A&quot;,[208,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;与消息轨迹类似，消息审计是为了从消息个数、延迟方面来进行系统检测。一般做法是在消息体重内嵌消息的时间戳或者唯一标识ID， &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fa96d4-205e-40db-bc04-7cb0e0628600&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fa96d4-205e-40db-bc04-7cb0e0628600))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 就是一种非常适合做消息审计的ID方案。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[208,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[208,&quot;^[&quot;,&quot;## 消息审计\\n\\n与消息轨迹类似，消息审计是为了从消息个数、延迟方面来进行系统检测。一般做法是在消息体重内嵌消息的时间戳或者唯一标识ID， ((60fa96d4-205e-40db-bc04-7cb0e0628600)) 就是一种非常适合做消息审计的ID方案。&quot;,536870916]],[&quot;^1A&quot;,[208,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[208,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[208,&quot;^K&quot;,207,536870916]],[&quot;^1A&quot;,[208,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[208,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,12127,&quot;^1L&quot;,12425],536870916]],[&quot;^1A&quot;,[208,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[208,&quot;^13&quot;,205,536870916]],[&quot;^1A&quot;,[208,&quot;^L&quot;,212,536870916]],[&quot;^1A&quot;,[208,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[208,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;消息审计&quot;]],536870916]],[&quot;^1A&quot;,[208,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[208,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[208,&quot;^?&quot;,&quot;~u611b87e5-4466-4ce9-91d3-d9f77bee776e&quot;,536870916]],[&quot;^1A&quot;,[209,&quot;^1E&quot;,&quot;-e5--af--b9--e6--af--94-RocketMQ&quot;,536870916]],[&quot;^1A&quot;,[209,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[209,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-c1a1-4eb6-839b-72b9c4cb8c82&quot;],[&quot;^?&quot;,&quot;~u611b87e5-693f-42d7-98c1-c4d197f085be&quot;]]],536870916]],[&quot;^1A&quot;,[209,&quot;^[&quot;,&quot;## 对比RocketMQ&quot;,536870916]],[&quot;^1A&quot;,[209,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[209,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[209,&quot;^K&quot;,205,536870916]],[&quot;^1A&quot;,[209,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[209,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,12425,&quot;^1L&quot;,12443],536870916]],[&quot;^1A&quot;,[209,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[209,&quot;^13&quot;,75,536870916]],[&quot;^1A&quot;,[209,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[209,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;对比RocketMQ&quot;]],536870916]],[&quot;^1A&quot;,[209,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[209,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[209,&quot;^?&quot;,&quot;~u611b87e5-928f-40e6-aacf-201661349aef&quot;,536870916]],[&quot;^1A&quot;,[210,&quot;^1E&quot;,&quot;NameServer&quot;,536870916]],[&quot;^1A&quot;,[210,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Kafka使用zookeeper作为分布式协调器，而RocketMQ自带nameserver。NameServer是一个非常简单的Topic路由注册中心，其角色类似Dubbo中的zookeeper，支持Broker的动态注册与发现。主要包括两个功能：&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;Broker管理&quot;]]]],[&quot;Plain&quot;,&quot;，NameServer接受Broker集群的注册信息并且保存下来作为路由信息的基本数据。然后提供心跳检测机制，检查Broker是否还存活；&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;路由信息管理&quot;]]]],[&quot;Plain&quot;,&quot;，每个NameServer将保存关于Broker集群的整个路由信息和用于客户端查询的队列信息。然后Producer和Conumser通过NameServer就可以知道整个Broker集群的路由信息，从而进行消息的投递和消费。NameServer通常也是集群的方式部署，各实例间相互不进行信息通讯。Broker是向每一台NameServer注册自己的路由信息，所以每一个NameServer实例上面都保存一份完整的路由信息。当某个NameServer因某种原因下线了，Broker仍然可以向其它NameServer同步其路由信息，Producer,Consumer仍然可以动态感知Broker的路由的信息。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[210,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[210,&quot;^[&quot;,&quot;NameServer\\nKafka使用zookeeper作为分布式协调器，而RocketMQ自带nameserver。NameServer是一个非常简单的Topic路由注册中心，其角色类似Dubbo中的zookeeper，支持Broker的动态注册与发现。主要包括两个功能：**Broker管理**，NameServer接受Broker集群的注册信息并且保存下来作为路由信息的基本数据。然后提供心跳检测机制，检查Broker是否还存活；**路由信息管理**，每个NameServer将保存关于Broker集群的整个路由信息和用于客户端查询的队列信息。然后Producer和Conumser通过NameServer就可以知道整个Broker集群的路由信息，从而进行消息的投递和消费。NameServer通常也是集群的方式部署，各实例间相互不进行信息通讯。Broker是向每一台NameServer注册自己的路由信息，所以每一个NameServer实例上面都保存一份完整的路由信息。当某个NameServer因某种原因下线了，Broker仍然可以向其它NameServer同步其路由信息，Producer,Consumer仍然可以动态感知Broker的路由的信息。&quot;,536870916]],[&quot;^1A&quot;,[210,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[210,&quot;^K&quot;,209,536870916]],[&quot;^1A&quot;,[210,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[210,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,12443,&quot;^1L&quot;,13543],536870916]],[&quot;^1A&quot;,[210,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[210,&quot;^13&quot;,209,536870916]],[&quot;^1A&quot;,[210,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;NameServer&quot;]],536870916]],[&quot;^1A&quot;,[210,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[210,&quot;^?&quot;,&quot;~u611b87e5-693f-42d7-98c1-c4d197f085be&quot;,536870916]],[&quot;^1A&quot;,[211,&quot;^1E&quot;,&quot;-e6--b7--b7--e5--90--88--e5--9e--8b--e5--ad--98--e5--82--a8--e7--bb--93--e6--9e--84-&quot;,536870916]],[&quot;^1A&quot;,[211,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[211,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[211,&quot;^[&quot;,&quot;混合型存储结构&quot;,536870916]],[&quot;^1A&quot;,[211,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[211,&quot;^K&quot;,210,536870916]],[&quot;^1A&quot;,[211,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[211,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,13543,&quot;^1L&quot;,13567],536870916]],[&quot;^1A&quot;,[211,&quot;^17&quot;,75,536870916]],[&quot;^1A&quot;,[211,&quot;^13&quot;,209,536870916]],[&quot;^1A&quot;,[211,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;混合型存储结构&quot;]],536870916]],[&quot;^1A&quot;,[211,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[211,&quot;^?&quot;,&quot;~u611b87e5-c1a1-4eb6-839b-72b9c4cb8c82&quot;,536870916]],[&quot;^1A&quot;,[212,&quot;^1E&quot;,&quot;ObjectId&quot;,536870916]],[&quot;^1A&quot;,[212,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;ObjectId是\\&quot;_id\\&quot;的默认类型。它设计成轻量型的，不同的机器都能用全局唯一的同种方法方便地生成它。这是 MongoDB采用ObjectId，而不是其他比较常规的做法（比如自动增加的主键）的主要原因，因为在多个服务器上同步自动增加主键值既费力又费时。因为设计MongoDB的初衷就是用作分布式数据库，所以能够在分片环境中生成唯一的标示符非常重要。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;ObjectId使用12字节的存储空间，是一个由24个十六进制数字组成的字符串（每个字节可以存储两个十六进制数字）。由于看起来很长，不少人会觉得难以处理。但关键是要知道这个长长的ObjectId是实际存储数据的两倍长。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;如果快速连续创建多个ObjectId，会发现每次只有最后几位数字有变化。另外，中间的几位数字也会变化（要是在创建的过程中停顿几秒钟）。这是ObjectId的创建方式导致的。ObjectId的12字节按照如下方式： &quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8  | 9 | 10 | 11&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;时间戳         |     机器  |  PID  |    计数器&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;ObjectId 是雪花算法的一种形式，由 时间戳+机器ID+PID 的9字节保证了同一秒种不同机器不同进程产生的ObjectId是唯一的。&quot;]]]]],536873350]],[&quot;^1A&quot;,[212,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[212,&quot;^[&quot;,&quot;## ObjectId \\nid:: 60fa96d4-205e-40db-bc04-7cb0e0628600\\nObjectId是\\&quot;_id\\&quot;的默认类型。它设计成轻量型的，不同的机器都能用全局唯一的同种方法方便地生成它。这是 MongoDB采用ObjectId，而不是其他比较常规的做法（比如自动增加的主键）的主要原因，因为在多个服务器上同步自动增加主键值既费力又费时。因为设计MongoDB的初衷就是用作分布式数据库，所以能够在分片环境中生成唯一的标示符非常重要。\\n\\nObjectId使用12字节的存储空间，是一个由24个十六进制数字组成的字符串（每个字节可以存储两个十六进制数字）。由于看起来很长，不少人会觉得难以处理。但关键是要知道这个长长的ObjectId是实际存储数据的两倍长。\\n\\n如果快速连续创建多个ObjectId，会发现每次只有最后几位数字有变化。另外，中间的几位数字也会变化（要是在创建的过程中停顿几秒钟）。这是ObjectId的创建方式导致的。ObjectId的12字节按照如下方式： \\n\\n0 | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8  | 9 | 10 | 11\\n时间戳         |     机器  |  PID  |    计数器\\n\\nObjectId 是雪花算法的一种形式，由 时间戳+机器ID+PID 的9字节保证了同一秒种不同机器不同进程产生的ObjectId是唯一的。&quot;,536873350]],[&quot;^1A&quot;,[212,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[212,&quot;^14&quot;,2,536873350]],[&quot;^1A&quot;,[212,&quot;^K&quot;,59,536870916]],[&quot;^1A&quot;,[212,&quot;^X&quot;,1,536873350]],[&quot;^1A&quot;,[212,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,1373],536870916]],[&quot;^1A&quot;,[212,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[212,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[212,&quot;^12&quot;,59,536873350]],[&quot;^1A&quot;,[212,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fa96d4-205e-40db-bc04-7cb0e0628600&quot;],536873350]],[&quot;^1A&quot;,[212,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[212,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[212,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;ObjectId &quot;]],536873350]],[&quot;^1A&quot;,[212,&quot;^15&quot;,&quot;^1N&quot;,536873350]],[&quot;^1A&quot;,[212,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[212,&quot;^?&quot;,&quot;~u60fa96d4-205e-40db-bc04-7cb0e0628600&quot;,536870916]],[&quot;^1A&quot;,[213,&quot;^1E&quot;,&quot;WireTiger&quot;,536870916]],[&quot;^1A&quot;,[213,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;MongoDB存储模型&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1629104196369_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1629104196369_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[213,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[213,&quot;^[&quot;,&quot;## WireTiger\\nreference:: [mongodb vs redis](https://www.jianshu.com/p/ad8992223812)\\nMongoDB存储模型\\n![image.png](../assets/image_1629104196369_0.png)&quot;,536870916]],[&quot;^1A&quot;,[213,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[213,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[213,&quot;^K&quot;,212,536870916]],[&quot;^1A&quot;,[213,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[213,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1373,&quot;^1L&quot;,1527],536870916]],[&quot;^1A&quot;,[213,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[213,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[213,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;[mongodb vs redis](https://www.jianshu.com/p/ad8992223812)&quot;],536870916]],[&quot;^1A&quot;,[213,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^26&quot;]],536870916]],[&quot;^1A&quot;,[213,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[213,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;WireTiger&quot;]],536870916]],[&quot;^1A&quot;,[213,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[213,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[213,&quot;^?&quot;,&quot;~u611b87e5-ff79-437f-bed2-2078febce508&quot;,536870916]],[&quot;^1A&quot;,[214,&quot;^1E&quot;,&quot;-e5--a1--ab--e5--85--85--e5--9b--a0--e5--ad--90-&quot;,536870916]],[&quot;^1A&quot;,[214,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;将文档插入到MongoDB中时，依次插入的文档在磁盘上的位置是相邻的。因此，如果一个文档变大了，原先的位置就放不下这个文档了，这个文档就会被移动到集合中的另一个位置。MongoDB不得不移动一个文档时，它会修改集合的&quot;],[&quot;Code&quot;,&quot;填充因子（padding factor）&quot;],[&quot;Plain&quot;,&quot;。填充因子是MongoDB为每个新文档预留的增长空间。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[214,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[214,&quot;^[&quot;,&quot;## 填充因子\\nid:: 60fa96d4-647d-4634-83f3-9662466fd2d9\\n 将文档插入到MongoDB中时，依次插入的文档在磁盘上的位置是相邻的。因此，如果一个文档变大了，原先的位置就放不下这个文档了，这个文档就会被移动到集合中的另一个位置。MongoDB不得不移动一个文档时，它会修改集合的`填充因子（padding factor）`。填充因子是MongoDB为每个新文档预留的增长空间。&quot;,536870916]],[&quot;^1A&quot;,[214,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[214,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[214,&quot;^K&quot;,213,536870916]],[&quot;^1A&quot;,[214,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[214,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1527,&quot;^1L&quot;,1984],536870916]],[&quot;^1A&quot;,[214,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[214,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[214,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fa96d4-647d-4634-83f3-9662466fd2d9&quot;],536870916]],[&quot;^1A&quot;,[214,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[214,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[214,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;填充因子&quot;]],536870916]],[&quot;^1A&quot;,[214,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[214,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[214,&quot;^?&quot;,&quot;~u60fa96d4-647d-4634-83f3-9662466fd2d9&quot;,536870916]],[&quot;^1A&quot;,[215,&quot;^1E&quot;,&quot;-e5--86--99--e5--85--a5--e5--ae--89--e5--85--a8--e6--9c--ba--e5--88--b6-&quot;,536870916]],[&quot;^1A&quot;,[215,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;写入安全（Write Concern）是一种客户端设置，用于控制写入的安全级别。默认情况下，插入、删除和更新都会一直等待数据库响应（写入是否成功），然后才会继续执行。通常，遇到错误时，客户端会抛出一个异常（有些语言中可能不叫“异常”，不过实质上都是类似的东西）。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;有一些选项可以用于精确控制需要应用程序等待的内容。两种最基本的写入安全机制是&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;应答式写入&quot;]]]],[&quot;Plain&quot;,&quot;（acknowledged wirte）和&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;非应答式写入&quot;]]]],[&quot;Plain&quot;,&quot;（unacknowledged write）。应答式写入是默认的方式：数据库会给出响应，告诉你写入操作是否成功执行。非应答式写入不返回任何响应，所以无法知道写入是否成功。 &quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;如果希望不管发生什么都将写入操作保存到副本集中，那么必须要确保写入操作被同步到了副本集的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;“大多数”&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[215,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[215,&quot;^[&quot;,&quot;## 写入安全机制 \\nid:: 60fa96d4-9695-4227-aac0-02725d40db05\\n写入安全（Write Concern）是一种客户端设置，用于控制写入的安全级别。默认情况下，插入、删除和更新都会一直等待数据库响应（写入是否成功），然后才会继续执行。通常，遇到错误时，客户端会抛出一个异常（有些语言中可能不叫“异常”，不过实质上都是类似的东西）。\\n\\n有一些选项可以用于精确控制需要应用程序等待的内容。两种最基本的写入安全机制是**应答式写入**（acknowledged wirte）和**非应答式写入**（unacknowledged write）。应答式写入是默认的方式：数据库会给出响应，告诉你写入操作是否成功执行。非应答式写入不返回任何响应，所以无法知道写入是否成功。 \\n\\n如果希望不管发生什么都将写入操作保存到副本集中，那么必须要确保写入操作被同步到了副本集的**“大多数”**。&quot;,536870916]],[&quot;^1A&quot;,[215,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[215,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[215,&quot;^K&quot;,214,536870916]],[&quot;^1A&quot;,[215,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[215,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1984,&quot;^1L&quot;,2973],536870916]],[&quot;^1A&quot;,[215,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[215,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[215,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fa96d4-9695-4227-aac0-02725d40db05&quot;],536870916]],[&quot;^1A&quot;,[215,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[215,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[215,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;写入安全机制 &quot;]],536870916]],[&quot;^1A&quot;,[215,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[215,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[215,&quot;^?&quot;,&quot;~u60fa96d4-9695-4227-aac0-02725d40db05&quot;,536870916]],[&quot;^1A&quot;,[216,&quot;^1E&quot;,&quot;-e7--bb--93--e6--9e--9c--e4--b8--80--e8--87--b4--e6--80--a7-&quot;,536870916]],[&quot;^1A&quot;,[216,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;数据处理通常的做法就是先把数据从MongoDB中取出来，然后做一些变换，最后再存回去。结果比较少时，这样是没问题的，但是如果结果集比较大，MongoDB可能会多次返回同一个文档。因为当游标移动到集合末尾时，可能会返回因体积太大无法放回原位置而被移动到集合末尾的文档。 &quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;应对这个问题的方法就是对查询进行&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;快照（snapshot）&quot;]]]],[&quot;Plain&quot;,&quot;。如果使用了这个选项，查询就在\\&quot;_id\\&quot;索引上遍历执行，这样可以保证每个文档只被返回一次。对于客户端连接池发送的请求，服务器为每个数据库连接维护一个请求队列。新请求每次都会添加到队列的末尾，入队之后，这个连接上的请求会依次得到处理。一个连接拥有一个一致的数据库视图，总是能读取到这个连接最新写入的数据。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[216,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[216,&quot;^[&quot;,&quot;## 结果一致性 \\n数据处理通常的做法就是先把数据从MongoDB中取出来，然后做一些变换，最后再存回去。结果比较少时，这样是没问题的，但是如果结果集比较大，MongoDB可能会多次返回同一个文档。因为当游标移动到集合末尾时，可能会返回因体积太大无法放回原位置而被移动到集合末尾的文档。 \\n\\n应对这个问题的方法就是对查询进行**快照（snapshot）**。如果使用了这个选项，查询就在\\&quot;_id\\&quot;索引上遍历执行，这样可以保证每个文档只被返回一次。对于客户端连接池发送的请求，服务器为每个数据库连接维护一个请求队列。新请求每次都会添加到队列的末尾，入队之后，这个连接上的请求会依次得到处理。一个连接拥有一个一致的数据库视图，总是能读取到这个连接最新写入的数据。&quot;,536870916]],[&quot;^1A&quot;,[216,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[216,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[216,&quot;^K&quot;,215,536870916]],[&quot;^1A&quot;,[216,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[216,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2973,&quot;^1L&quot;,3883],536870916]],[&quot;^1A&quot;,[216,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[216,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[216,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[216,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;结果一致性 &quot;]],536870916]],[&quot;^1A&quot;,[216,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[216,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[216,&quot;^?&quot;,&quot;~u611b87e5-5d8c-4967-946f-faec14c20cce&quot;,536870916]],[&quot;^1A&quot;,[218,&quot;^1E&quot;,&quot;-e8--8c--83--e5--bc--8f--e4--b8--8e--e5--8f--8d--e8--8c--83--e5--bc--8f-&quot;,536870916]],[&quot;^1A&quot;,[218,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;范式化（normalization）是将&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;数据分散&quot;]]]],[&quot;Plain&quot;,&quot;到多个不同的集合，不同集合之间可以相互引用数据。虽然很多文档可以引用某一块数据，但是这块数据只存储在一个集合中。所以，如果要修改这块数据，只需修改保存这块数据的那一个文档就行了。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;反范式化（denormalization）与范式化相反：将每个文档所需的数据都嵌入在文档内部。每个文档都拥有自己的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;数据副本&quot;]]]],[&quot;Plain&quot;,&quot;，而不是所以文档共同引用同一个数据副本。这意味着，如果信息发生了变化，那么所有相关文档都需要进行更新，但是在执行查询时，只需要一次查询，就可以得到所有数据。 &quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;一般来说，数据生成越频繁，就越不应该将这些数据内嵌到其他文档中。如果内嵌字段或者内嵌字段数量是无限增长的，那么应该将这些内容保存在单独的集合中，使用引用的方式进行访问，而不是内嵌到其他文档中。以MongoDB为例，内嵌的文档如果变更频繁，可能导致比较差的读写性能，因为磁盘存储过于碎片化。评论列表或者活动列表等信息应该保存在单独的集合中，不应该内嵌到其他文档中。&quot;]]]]],536883341]],[&quot;^1A&quot;,[218,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[218,&quot;^[&quot;,&quot;## 范式与反范式 \\n范式化（normalization）是将**数据分散**到多个不同的集合，不同集合之间可以相互引用数据。虽然很多文档可以引用某一块数据，但是这块数据只存储在一个集合中。所以，如果要修改这块数据，只需修改保存这块数据的那一个文档就行了。\\n\\n反范式化（denormalization）与范式化相反：将每个文档所需的数据都嵌入在文档内部。每个文档都拥有自己的**数据副本**，而不是所以文档共同引用同一个数据副本。这意味着，如果信息发生了变化，那么所有相关文档都需要进行更新，但是在执行查询时，只需要一次查询，就可以得到所有数据。 \\n\\n一般来说，数据生成越频繁，就越不应该将这些数据内嵌到其他文档中。如果内嵌字段或者内嵌字段数量是无限增长的，那么应该将这些内容保存在单独的集合中，使用引用的方式进行访问，而不是内嵌到其他文档中。以MongoDB为例，内嵌的文档如果变更频繁，可能导致比较差的读写性能，因为磁盘存储过于碎片化。评论列表或者活动列表等信息应该保存在单独的集合中，不应该内嵌到其他文档中。&quot;,536873383]],[&quot;^1A&quot;,[218,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[218,&quot;^14&quot;,2,536883341]],[&quot;^1A&quot;,[218,&quot;^K&quot;,216,536883341]],[&quot;^1A&quot;,[218,&quot;^X&quot;,1,536883341]],[&quot;^1A&quot;,[218,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3897,&quot;^1L&quot;,5164],536870916]],[&quot;^1A&quot;,[218,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[218,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[218,&quot;^12&quot;,59,536883341]],[&quot;^1A&quot;,[218,&quot;^D&quot;,[&quot;^ &quot;],536883341]],[&quot;^1A&quot;,[218,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[218,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;范式与反范式 &quot;]],536883341]],[&quot;^1A&quot;,[218,&quot;^15&quot;,&quot;^1N&quot;,536883341]],[&quot;^1A&quot;,[218,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[218,&quot;^?&quot;,&quot;~u611b87e5-3b0a-424c-aac1-44dc52ba3642&quot;,536870916]],[&quot;^1A&quot;,[219,&quot;^1E&quot;,&quot;-e4--bc--98--e5--8c--96--e6--95--b0--e6--8d--ae--e6--93--8d--e4--bd--9c-&quot;,536870916]],[&quot;^1A&quot;,[219,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;检查填充因子，如果过大，可以考虑&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;手动填充&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;淘汰过期数据，使用TTL过期、固定集合或者手动删除/备份历史数据等方式。&quot;]]]]],536873387]],[&quot;^1A&quot;,[219,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[219,&quot;^[&quot;,&quot;## 优化数据操作\\n检查填充因子，如果过大，可以考虑**手动填充**。\\n\\n淘汰过期数据，使用TTL过期、固定集合或者手动删除/备份历史数据等方式。&quot;,536873387]],[&quot;^1A&quot;,[219,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[219,&quot;^14&quot;,2,536873387]],[&quot;^1A&quot;,[219,&quot;^K&quot;,218,536870916]],[&quot;^1A&quot;,[219,&quot;^X&quot;,1,536873387]],[&quot;^1A&quot;,[219,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5164,&quot;^1L&quot;,5357],536870916]],[&quot;^1A&quot;,[219,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[219,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[219,&quot;^12&quot;,59,536873387]],[&quot;^1A&quot;,[219,&quot;^D&quot;,[&quot;^ &quot;],536873387]],[&quot;^1A&quot;,[219,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[219,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;优化数据操作&quot;]],536873387]],[&quot;^1A&quot;,[219,&quot;^15&quot;,&quot;^1N&quot;,536873387]],[&quot;^1A&quot;,[219,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[219,&quot;^?&quot;,&quot;~u611b87e5-6891-4853-a7c4-3d032a5befe2&quot;,536870916]],[&quot;^1A&quot;,[220,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[220,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[220,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[220,&quot;^[&quot;,&quot;## [[副本集]]&quot;,536870916]],[&quot;^1A&quot;,[220,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[220,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[220,&quot;^K&quot;,219,536870916]],[&quot;^1A&quot;,[220,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[220,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5357,&quot;^1L&quot;,5374],536870916]],[&quot;^1A&quot;,[220,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[220,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[220,&quot;^12&quot;,68,536870916]],[&quot;^1A&quot;,[220,&quot;^L&quot;,68,536870916]],[&quot;^1A&quot;,[220,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[220,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;副本集&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[副本集]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[220,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[220,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[220,&quot;^?&quot;,&quot;~u611b87e5-8308-4282-b10c-aa1656a97256&quot;,536870916]],[&quot;^1A&quot;,[221,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[221,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[221,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[221,&quot;^[&quot;,&quot;## [[分片]]&quot;,536870916]],[&quot;^1A&quot;,[221,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[221,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[221,&quot;^K&quot;,220,536870916]],[&quot;^1A&quot;,[221,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[221,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5374,&quot;^1L&quot;,5388],536870916]],[&quot;^1A&quot;,[221,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[221,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[221,&quot;^12&quot;,61,536870916]],[&quot;^1A&quot;,[221,&quot;^L&quot;,61,536870916]],[&quot;^1A&quot;,[221,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[221,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;分片&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[分片]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[221,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[221,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[221,&quot;^?&quot;,&quot;~u611b87e5-22df-4494-b242-f3ef094a12c8&quot;,536870916]],[&quot;^1A&quot;,[222,&quot;^1E&quot;,&quot;-e6--8c--81--e4--b9--85--e6--80--a7-&quot;,536870916]],[&quot;^1A&quot;,[222,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;MongoDB会在进行写入时建立一条&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;日志（journal）&quot;]]]],[&quot;Plain&quot;,&quot;，日记中包含了此次写入操作具体更改的磁盘地址和字节。因此，一旦服务器突然停机，可在启动时对日记进行重放（replay），从而重新执行那些停机前没能够刷新（flush）到磁盘的写入操作。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;MongoDB默认每隔100毫秒，或是写入数据达到若干兆字节时，便会将这些操作写入日记。这意味着MongoDB会成批量地提交更改，即每次写入不会立即刷新到磁盘。不过在默认设置下，系统发生崩溃时，不可能丢失间隔超过100毫秒的写入数据。&quot;]]]]],536870916]],[&quot;^1A&quot;,[222,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[222,&quot;^[&quot;,&quot;##  持久性 \\n\\nMongoDB会在进行写入时建立一条**日志（journal）**，日记中包含了此次写入操作具体更改的磁盘地址和字节。因此，一旦服务器突然停机，可在启动时对日记进行重放（replay），从而重新执行那些停机前没能够刷新（flush）到磁盘的写入操作。\\n\\nMongoDB默认每隔100毫秒，或是写入数据达到若干兆字节时，便会将这些操作写入日记。这意味着MongoDB会成批量地提交更改，即每次写入不会立即刷新到磁盘。不过在默认设置下，系统发生崩溃时，不可能丢失间隔超过100毫秒的写入数据。&quot;,536870916]],[&quot;^1A&quot;,[222,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[222,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[222,&quot;^K&quot;,221,536870916]],[&quot;^1A&quot;,[222,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[222,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5388,&quot;^1L&quot;,6034],536870916]],[&quot;^1A&quot;,[222,&quot;^17&quot;,59,536870916]],[&quot;^1A&quot;,[222,&quot;^13&quot;,59,536870916]],[&quot;^1A&quot;,[222,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[222,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;持久性 &quot;]],536870916]],[&quot;^1A&quot;,[222,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[222,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[222,&quot;^?&quot;,&quot;~u611b87e5-dbbd-47de-897b-6d94781ad580&quot;,536870916]],[&quot;^1A&quot;,[223,&quot;^1E&quot;,&quot;-e6--95--b0--e6--8d--ae--e5--ba--93--e6--9c--af--e8--af--ad-&quot;,536874819]],[&quot;^1A&quot;,[223,&quot;^S&quot;,[],536884135]],[&quot;^1A&quot;,[223,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[223,&quot;^[&quot;,&quot;## [[数据库术语]]&quot;,536884135]],[&quot;^1A&quot;,[223,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[223,&quot;^14&quot;,2,536884135]],[&quot;^1A&quot;,[223,&quot;^K&quot;,54,536870916]],[&quot;^1A&quot;,[223,&quot;^X&quot;,1,536884135]],[&quot;^1A&quot;,[223,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,1806],536870916]],[&quot;^1A&quot;,[223,&quot;^17&quot;,54,536870916]],[&quot;^1A&quot;,[223,&quot;^13&quot;,54,536870916]],[&quot;^1A&quot;,[223,&quot;^12&quot;,54,536884135]],[&quot;^1A&quot;,[223,&quot;^12&quot;,889,536884135]],[&quot;^1A&quot;,[223,&quot;^D&quot;,[&quot;^ &quot;],536884135]],[&quot;^1A&quot;,[223,&quot;^L&quot;,889,536884135]],[&quot;^1A&quot;,[223,&quot;^1M&quot;,2,536873415]],[&quot;^1A&quot;,[223,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;数据库术语&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[数据库术语]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536884135]],[&quot;^1A&quot;,[223,&quot;^15&quot;,&quot;^1N&quot;,536884135]],[&quot;^1A&quot;,[223,&quot;^1D&quot;,false,536884132]],[&quot;^1A&quot;,[223,&quot;^?&quot;,&quot;~u611b87e5-362b-4fa6-b0d8-4d13b4022168&quot;,536870916]],[&quot;^1A&quot;,[224,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[224,&quot;^S&quot;,[[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;import java.io.*;&quot;,&quot;\\n&quot;,&quot;import java.net.InetSocketAddress;&quot;,&quot;\\n&quot;,&quot;import java.net.ServerSocket;&quot;,&quot;\\n&quot;,&quot;import java.nio.ByteBuffer;&quot;,&quot;\\n&quot;,&quot;import java.nio.CharBuffer;&quot;,&quot;\\n&quot;,&quot;import java.nio.MappedByteBuffer;&quot;,&quot;\\n&quot;,&quot;import java.nio.channels.*;&quot;,&quot;\\n&quot;,&quot;import java.nio.charset.Charset;&quot;,&quot;\\n&quot;,&quot;import java.nio.charset.CharsetDecoder;&quot;,&quot;\\n&quot;,&quot;import java.nio.charset.CharsetEncoder;&quot;,&quot;\\n&quot;,&quot;import java.util.Iterator;&quot;,&quot;\\n&quot;,&quot;import java.util.Set;&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;@SuppressWarnings(\\&quot;ALL\\&quot;)&quot;,&quot;\\n&quot;,&quot;class demo_nio {&quot;,&quot;\\n&quot;,&quot;    /**&quot;,&quot;\\n&quot;,&quot;     * NIO read from file and print String&quot;,&quot;\\n&quot;,&quot;     *&quot;,&quot;\\n&quot;,&quot;     * @throws IOException&quot;,&quot;\\n&quot;,&quot;     */&quot;,&quot;\\n&quot;,&quot;    public static void nioReadFromFileAndPrintString() throws IOException {&quot;,&quot;\\n&quot;,&quot;        FileInputStream inputStream = new FileInputStream(\\&quot;resources/nio_showcase_read\\&quot;);&quot;,&quot;\\n&quot;,&quot;        // 1. get Channel&quot;,&quot;\\n&quot;,&quot;        FileChannel channel = inputStream.getChannel();&quot;,&quot;\\n&quot;,&quot;        // 2. allocate buffer&quot;,&quot;\\n&quot;,&quot;        ByteBuffer buffer = ByteBuffer.allocate(1024);&quot;,&quot;\\n&quot;,&quot;        // 3. pretry C-like&quot;,&quot;\\n&quot;,&quot;        while (channel.read(buffer) != -1) {&quot;,&quot;\\n&quot;,&quot;            // 4. flip before read&quot;,&quot;\\n&quot;,&quot;            buffer.flip();&quot;,&quot;\\n&quot;,&quot;            System.out.println(new String(buffer.array()));&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;    /**&quot;,&quot;\\n&quot;,&quot;     * NIO write String to file&quot;,&quot;\\n&quot;,&quot;     *&quot;,&quot;\\n&quot;,&quot;     * @throws IOException&quot;,&quot;\\n&quot;,&quot;     */&quot;,&quot;\\n&quot;,&quot;    public static void nioWriteStringToFile() throws IOException {&quot;,&quot;\\n&quot;,&quot;        FileOutputStream outputStream = new FileOutputStream(\\&quot;resources/nio_showcase_write\\&quot;);&quot;,&quot;\\n&quot;,&quot;        String message = \\&quot;Hello NIO\\&quot;;&quot;,&quot;\\n&quot;,&quot;        // 1. get channel&quot;,&quot;\\n&quot;,&quot;        FileChannel channel = outputStream.getChannel();&quot;,&quot;\\n&quot;,&quot;        // 2. allocate buffer&quot;,&quot;\\n&quot;,&quot;        ByteBuffer buffer = ByteBuffer.allocate(1024);&quot;,&quot;\\n&quot;,&quot;        // 3. write buffer&quot;,&quot;\\n&quot;,&quot;        buffer.put(message.getBytes());&quot;,&quot;\\n&quot;,&quot;        // 4. flip buffer&quot;,&quot;\\n&quot;,&quot;        buffer.flip();&quot;,&quot;\\n&quot;,&quot;        // 5. write channel&quot;,&quot;\\n&quot;,&quot;        channel.write(buffer);&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        // or, use wrap method&quot;,&quot;\\n&quot;,&quot;        buffer = ByteBuffer.wrap(message.getBytes());&quot;,&quot;\\n&quot;,&quot;        channel.write(buffer);&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;    /**&quot;,&quot;\\n&quot;,&quot;     * NIO DirectBuffer&quot;,&quot;\\n&quot;,&quot;     * &lt;p&gt;&quot;,&quot;\\n&quot;,&quot;     * Given a direct byte buffer, the Java virtual machine will make a best effort to perform native I/O operations directly upon it.&quot;,&quot;\\n&quot;,&quot;     * That is, it will attempt to avoid copying the buffer’s content to (or from) an intermediate buffer before (or after)&quot;,&quot;\\n&quot;,&quot;     * each invocation of one of the underlying operating system’s native I/O operations.&quot;,&quot;\\n&quot;,&quot;     *&quot;,&quot;\\n&quot;,&quot;     * @throws IOException&quot;,&quot;\\n&quot;,&quot;     */&quot;,&quot;\\n&quot;,&quot;    public static void nioDirectBufferReadFromFileAndPrintString() throws IOException {&quot;,&quot;\\n&quot;,&quot;        FileInputStream inputStream = new FileInputStream(\\&quot;resources/nio_showcase_read\\&quot;);&quot;,&quot;\\n&quot;,&quot;        // 1. get Channel&quot;,&quot;\\n&quot;,&quot;        FileChannel channel = inputStream.getChannel();&quot;,&quot;\\n&quot;,&quot;        // 2. allocate buffer&quot;,&quot;\\n&quot;,&quot;        ByteBuffer buffer = ByteBuffer.allocateDirect(1024);&quot;,&quot;\\n&quot;,&quot;        // 3. pretry C-like&quot;,&quot;\\n&quot;,&quot;        while (channel.read(buffer) != -1) {&quot;,&quot;\\n&quot;,&quot;            try {&quot;,&quot;\\n&quot;,&quot;                // 4. flip before read&quot;,&quot;\\n&quot;,&quot;                buffer.flip();&quot;,&quot;\\n&quot;,&quot;                // DirectBuffer cannot read heap-buffer(hb)&quot;,&quot;\\n&quot;,&quot;                // UnsupportedOperationException&quot;,&quot;\\n&quot;,&quot;                // buffer.array();&quot;,&quot;\\n&quot;,&quot;                while (buffer.hasRemaining()) {&quot;,&quot;\\n&quot;,&quot;                    //  `(char)buffer.get()` can only handle char-encoding characters, not work for Chinese/double-char Unicode&quot;,&quot;\\n&quot;,&quot;                    System.out.print((char) buffer.get());&quot;,&quot;\\n&quot;,&quot;                }&quot;,&quot;\\n&quot;,&quot;            } finally {&quot;,&quot;\\n&quot;,&quot;                // 5. clean buffer&quot;,&quot;\\n&quot;,&quot;                buffer.clear();&quot;,&quot;\\n&quot;,&quot;            }&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;    /**&quot;,&quot;\\n&quot;,&quot;     * NIO memory-mapped buffer&quot;,&quot;\\n&quot;,&quot;     * &lt;p&gt;&quot;,&quot;\\n&quot;,&quot;     * Memory-mapped file I/O is accomplished by causing the data in a file to magically appear as the contents of a memory array.&quot;,&quot;\\n&quot;,&quot;     * At first, this sounds like it simply means reading the entire file into memory, but in fact it does not.&quot;,&quot;\\n&quot;,&quot;     * In general, only the parts of the file that you actually read or write are brought, or mapped, into memory.&quot;,&quot;\\n&quot;,&quot;     *&quot;,&quot;\\n&quot;,&quot;     * @throws IOException&quot;,&quot;\\n&quot;,&quot;     */&quot;,&quot;\\n&quot;,&quot;    public static void nioMemoryMappedBuffer() throws IOException {&quot;,&quot;\\n&quot;,&quot;        FileInputStream inputStream = new FileInputStream(\\&quot;resources/nio_showcase_read\\&quot;);&quot;,&quot;\\n&quot;,&quot;        // 1. get Channel&quot;,&quot;\\n&quot;,&quot;        FileChannel channel = inputStream.getChannel();&quot;,&quot;\\n&quot;,&quot;        // 2. allocate buffer&quot;,&quot;\\n&quot;,&quot;        MappedByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, 1024);&quot;,&quot;\\n&quot;,&quot;        // 3. MappedByteBuffer has no internal array&quot;,&quot;\\n&quot;,&quot;        while (buffer.hasRemaining()) {&quot;,&quot;\\n&quot;,&quot;            System.out.print((char) buffer.get());&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;    /**&quot;,&quot;\\n&quot;,&quot;     * NIO gather and scather&quot;,&quot;\\n&quot;,&quot;     * Useful for composing buffers&quot;,&quot;\\n&quot;,&quot;     *&quot;,&quot;\\n&quot;,&quot;     * @param port&quot;,&quot;\\n&quot;,&quot;     * @param firstHeaderLength&quot;,&quot;\\n&quot;,&quot;     * @param secondHeaderLength&quot;,&quot;\\n&quot;,&quot;     * @param bodyLength&quot;,&quot;\\n&quot;,&quot;     * @throws Exception&quot;,&quot;\\n&quot;,&quot;     */&quot;,&quot;\\n&quot;,&quot;    public static void nioGatherAndScather(int port, int firstHeaderLength, int secondHeaderLength, int bodyLength) throws Exception {&quot;,&quot;\\n&quot;,&quot;        ServerSocketChannel ssc = ServerSocketChannel.open();&quot;,&quot;\\n&quot;,&quot;        InetSocketAddress address = new InetSocketAddress(port);&quot;,&quot;\\n&quot;,&quot;        ssc.socket().bind(address);&quot;,&quot;\\n&quot;,&quot;        int messageLength = firstHeaderLength + secondHeaderLength + bodyLength;&quot;,&quot;\\n&quot;,&quot;        ByteBuffer buffers[] = new ByteBuffer[]{&quot;,&quot;\\n&quot;,&quot;                ByteBuffer.allocate(firstHeaderLength),&quot;,&quot;\\n&quot;,&quot;                ByteBuffer.allocate(secondHeaderLength),&quot;,&quot;\\n&quot;,&quot;                ByteBuffer.allocate(bodyLength)&quot;,&quot;\\n&quot;,&quot;        };&quot;,&quot;\\n&quot;,&quot;        SocketChannel sc = ssc.accept();&quot;,&quot;\\n&quot;,&quot;        // Scatter-read into buffers&quot;,&quot;\\n&quot;,&quot;        int bytesRead = 0;&quot;,&quot;\\n&quot;,&quot;        while (bytesRead &lt; messageLength) {&quot;,&quot;\\n&quot;,&quot;            long r = sc.read(buffers);&quot;,&quot;\\n&quot;,&quot;            bytesRead += r;&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;            System.out.println(\\&quot;r \\&quot; + r);&quot;,&quot;\\n&quot;,&quot;            for (int i = 0; i &lt; buffers.length; ++i) {&quot;,&quot;\\n&quot;,&quot;                ByteBuffer bb = buffers[i];&quot;,&quot;\\n&quot;,&quot;                System.out.println(\\&quot;b \\&quot; + i + \\&quot; \\&quot; + bb.position() + \\&quot; \\&quot; + bb.limit());&quot;,&quot;\\n&quot;,&quot;            }&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        // Process message here&quot;,&quot;\\n&quot;,&quot;        for (int i = 0; i &lt; buffers.length; i++) {&quot;,&quot;\\n&quot;,&quot;            System.out.println(\\&quot;m \\&quot; + new String(buffers[i].array()));&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        // Flip buffers&quot;,&quot;\\n&quot;,&quot;        for (int i = 0; i &lt; buffers.length; ++i) {&quot;,&quot;\\n&quot;,&quot;            ByteBuffer bb = buffers[i];&quot;,&quot;\\n&quot;,&quot;            bb.flip();&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        // Scatter-write back out&quot;,&quot;\\n&quot;,&quot;        long bytesWritten = 0;&quot;,&quot;\\n&quot;,&quot;        while (bytesWritten &lt; messageLength) {&quot;,&quot;\\n&quot;,&quot;            long r = sc.write(buffers);&quot;,&quot;\\n&quot;,&quot;            bytesWritten += r;&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        // Clear buffers&quot;,&quot;\\n&quot;,&quot;        for (int i = 0; i &lt; buffers.length; ++i) {&quot;,&quot;\\n&quot;,&quot;            ByteBuffer bb = buffers[i];&quot;,&quot;\\n&quot;,&quot;            bb.clear();&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        System.out.println(bytesRead + \\&quot; \\&quot; + bytesWritten + \\&quot; \\&quot; + messageLength);&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;    /**&quot;,&quot;\\n&quot;,&quot;     * You can lock an entire file or a portion of a file.&quot;,&quot;\\n&quot;,&quot;     * If you acquire an exclusive lock, then no one else can acquire a lock on that same file or portion of a file.&quot;,&quot;\\n&quot;,&quot;     * If you acquire a shared lock, then others can acquire shared locks, but not exclusive locks, on that same file or portion of a file.&quot;,&quot;\\n&quot;,&quot;     * File locking is not always done for the purpose of protecting data.&quot;,&quot;\\n&quot;,&quot;     * For example, you might temporarily lock a file to ensure that a particular write operation is made atomically, without interference from other programs.&quot;,&quot;\\n&quot;,&quot;     *&quot;,&quot;\\n&quot;,&quot;     * @throws Exception&quot;,&quot;\\n&quot;,&quot;     */&quot;,&quot;\\n&quot;,&quot;    public static void nioFileLock() throws Exception {&quot;,&quot;\\n&quot;,&quot;        int start = 0;&quot;,&quot;\\n&quot;,&quot;        int end = 1024;&quot;,&quot;\\n&quot;,&quot;        for (int i = 0; i &lt; 2; i++) {&quot;,&quot;\\n&quot;,&quot;            new Thread(() -&gt; {&quot;,&quot;\\n&quot;,&quot;                // Get file channel&quot;,&quot;\\n&quot;,&quot;                try (RandomAccessFile raf = new RandomAccessFile(\\&quot;resources/nio_showcase_read\\&quot;, \\&quot;rw\\&quot;);&quot;,&quot;\\n&quot;,&quot;                     FileChannel fc = raf.getChannel()) {&quot;,&quot;\\n&quot;,&quot;                    // Get lock&quot;,&quot;\\n&quot;,&quot;                    System.out.println(Thread.currentThread() + \\&quot; trying to get lock\\&quot;);&quot;,&quot;\\n&quot;,&quot;                    FileLock lock = fc.lock(start, end, false);&quot;,&quot;\\n&quot;,&quot;                    System.out.println(Thread.currentThread() + \\&quot;got lock!\\&quot;);&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                    // Pause&quot;,&quot;\\n&quot;,&quot;                    System.out.println(Thread.currentThread() + \\&quot;pausing\\&quot;);&quot;,&quot;\\n&quot;,&quot;                    try {&quot;,&quot;\\n&quot;,&quot;                        Thread.sleep(1000);&quot;,&quot;\\n&quot;,&quot;                    } catch (InterruptedException ie) {&quot;,&quot;\\n&quot;,&quot;                    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                    // Release lock&quot;,&quot;\\n&quot;,&quot;                    System.out.println(Thread.currentThread() + \\&quot;going to release lock\\&quot;);&quot;,&quot;\\n&quot;,&quot;                    lock.release();&quot;,&quot;\\n&quot;,&quot;                    System.out.println(Thread.currentThread() + \\&quot;released lock\\&quot;);&quot;,&quot;\\n&quot;,&quot;                } catch (Exception e) {&quot;,&quot;\\n&quot;,&quot;                    System.out.print(\\&quot;\\\\n\\&quot; + Thread.currentThread() + \\&quot; \\&quot;);&quot;,&quot;\\n&quot;,&quot;                    e.printStackTrace();&quot;,&quot;\\n&quot;,&quot;                }&quot;,&quot;\\n&quot;,&quot;            }).start();&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;    public static void nioSelector(int[] ports) throws IOException {&quot;,&quot;\\n&quot;,&quot;        // 1. Create a new selector&quot;,&quot;\\n&quot;,&quot;        Selector selector = Selector.open();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        // 2. Create a new Buffer for read&quot;,&quot;\\n&quot;,&quot;        ByteBuffer echoBuffer = ByteBuffer.allocate(1024);&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        // Open a listener on each port, and register each one&quot;,&quot;\\n&quot;,&quot;        // with the selector&quot;,&quot;\\n&quot;,&quot;        for (int i = 0; i &lt; ports.length; ++i) {&quot;,&quot;\\n&quot;,&quot;            ServerSocketChannel ssc = ServerSocketChannel.open();&quot;,&quot;\\n&quot;,&quot;            ssc.configureBlocking(false);&quot;,&quot;\\n&quot;,&quot;            ServerSocket ss = ssc.socket();&quot;,&quot;\\n&quot;,&quot;            InetSocketAddress address = new InetSocketAddress(ports[i]);&quot;,&quot;\\n&quot;,&quot;            ss.bind(address);&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;            SelectionKey key = ssc.register(selector, SelectionKey.OP_ACCEPT);&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;            System.out.println(\\&quot;Going to listen on \\&quot; + ports[i]);&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        while (true) {&quot;,&quot;\\n&quot;,&quot;            int num = selector.select();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;            Set selectedKeys = selector.selectedKeys();&quot;,&quot;\\n&quot;,&quot;            Iterator it = selectedKeys.iterator();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;            while (it.hasNext()) {&quot;,&quot;\\n&quot;,&quot;                SelectionKey key = (SelectionKey) it.next();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                if ((key.readyOps() &amp; SelectionKey.OP_ACCEPT)&quot;,&quot;\\n&quot;,&quot;                        == SelectionKey.OP_ACCEPT) {&quot;,&quot;\\n&quot;,&quot;                    // Accept the new connection&quot;,&quot;\\n&quot;,&quot;                    ServerSocketChannel ssc = (ServerSocketChannel) key.channel();&quot;,&quot;\\n&quot;,&quot;                    SocketChannel sc = ssc.accept();&quot;,&quot;\\n&quot;,&quot;                    sc.configureBlocking(false);&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                    // Add the new connection to the selector&quot;,&quot;\\n&quot;,&quot;                    SelectionKey newKey = sc.register(selector, SelectionKey.OP_READ);&quot;,&quot;\\n&quot;,&quot;                    // Must reove the key manually&quot;,&quot;\\n&quot;,&quot;                    it.remove();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                    System.out.println(\\&quot;Got connection from \\&quot; + sc);&quot;,&quot;\\n&quot;,&quot;                } else if ((key.readyOps() &amp; SelectionKey.OP_READ)&quot;,&quot;\\n&quot;,&quot;                        == SelectionKey.OP_READ) {&quot;,&quot;\\n&quot;,&quot;                    // Read the data&quot;,&quot;\\n&quot;,&quot;                    SocketChannel sc = (SocketChannel) key.channel();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                    // Echo data&quot;,&quot;\\n&quot;,&quot;                    int bytesEchoed = 0;&quot;,&quot;\\n&quot;,&quot;                    while (true) {&quot;,&quot;\\n&quot;,&quot;                        echoBuffer.clear();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                        int r = sc.read(echoBuffer);&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                        if (r &lt;= 0) {&quot;,&quot;\\n&quot;,&quot;                            break;&quot;,&quot;\\n&quot;,&quot;                        }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                        echoBuffer.flip();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                        sc.write(echoBuffer);&quot;,&quot;\\n&quot;,&quot;                        bytesEchoed += r;&quot;,&quot;\\n&quot;,&quot;                    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                    System.out.println(\\&quot;Echoed \\&quot; + bytesEchoed + \\&quot; from \\&quot; + sc);&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;                    it.remove();&quot;,&quot;\\n&quot;,&quot;                }&quot;,&quot;\\n&quot;,&quot;            }&quot;,&quot;\\n&quot;,&quot;        }&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;    public static void nioCharset() throws Exception {&quot;,&quot;\\n&quot;,&quot;        String inputFile = \\&quot;resources/nio_showcase_read\\&quot;;&quot;,&quot;\\n&quot;,&quot;        String outputFile = \\&quot;resources/nio_showcase_write\\&quot;;&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        RandomAccessFile inf = new RandomAccessFile( inputFile, \\&quot;r\\&quot; );&quot;,&quot;\\n&quot;,&quot;        RandomAccessFile outf = new RandomAccessFile( outputFile, \\&quot;rw\\&quot; );&quot;,&quot;\\n&quot;,&quot;        long inputLength = new File( inputFile ).length();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        FileChannel inc = inf.getChannel();&quot;,&quot;\\n&quot;,&quot;        FileChannel outc = outf.getChannel();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        MappedByteBuffer inputData =&quot;,&quot;\\n&quot;,&quot;                inc.map( FileChannel.MapMode.READ_ONLY, 0, inputLength );&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        Charset latin1 = Charset.forName( \\&quot;ISO-8859-1\\&quot; );&quot;,&quot;\\n&quot;,&quot;        CharsetDecoder decoder = latin1.newDecoder();&quot;,&quot;\\n&quot;,&quot;        CharsetEncoder encoder = latin1.newEncoder();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        CharBuffer cb = decoder.decode( inputData );&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        // Process char data here&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        ByteBuffer outputData = encoder.encode( cb );&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        outc.write( outputData );&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;        inf.close();&quot;,&quot;\\n&quot;,&quot;        outf.close();&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;    public static void main(String[] args) throws Exception {&quot;,&quot;\\n&quot;,&quot;        System.out.println(\\&quot;\\\\n****** nioReadFromFileAndPrintString\\&quot;);&quot;,&quot;\\n&quot;,&quot;        nioReadFromFileAndPrintString();&quot;,&quot;\\n&quot;,&quot;        System.out.println(\\&quot;\\\\n****** nioWriteStringToFile\\&quot;);&quot;,&quot;\\n&quot;,&quot;        nioWriteStringToFile();&quot;,&quot;\\n&quot;,&quot;        System.out.println(\\&quot;\\\\n****** nioDirectBufferReadFromFileAndPrintString\\&quot;);&quot;,&quot;\\n&quot;,&quot;        nioDirectBufferReadFromFileAndPrintString();&quot;,&quot;\\n&quot;,&quot;        System.out.println(\\&quot;\\\\n****** nioMemoryMappedBuffer\\&quot;);&quot;,&quot;\\n&quot;,&quot;        nioMemoryMappedBuffer();&quot;,&quot;\\n&quot;,&quot;//        System.out.println(\\&quot;\\\\n****** nioGatherAndScather (run `netcat localhost port` to connect)\\&quot;);&quot;,&quot;\\n&quot;,&quot;//        nioGatherAndScather(2021, 1, 1, 10);&quot;,&quot;\\n&quot;,&quot;//        System.out.println(\\&quot;\\\\n****** nioFileLock\\&quot;);&quot;,&quot;\\n&quot;,&quot;//        nioFileLock();&quot;,&quot;\\n&quot;,&quot;//        System.out.println(\\&quot;\\\\n****** nioSelector\\&quot;);&quot;,&quot;\\n&quot;,&quot;//        nioSelector(new int[]{2020, 2021});&quot;,&quot;\\n&quot;,&quot;        System.out.println(\\&quot;\\\\n****** nioCharset\\&quot;);&quot;,&quot;\\n&quot;,&quot;        nioCharset();&quot;,&quot;\\n&quot;,&quot;    }&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,12,&quot;^1S&quot;,13374],&quot;^1T&quot;,&quot;~```java\\nimport java.io.*;\\nimport java.net.InetSocketAddress;\\nimport java.net.ServerSocket;\\nimport java.nio.ByteBuffer;\\nimport java.nio.CharBuffer;\\nimport java.nio.MappedByteBuffer;\\nimport java.nio.channels.*;\\nimport java.nio.charset.Charset;\\nimport java.nio.charset.CharsetDecoder;\\nimport java.nio.charset.CharsetEncoder;\\nimport java.util.Iterator;\\nimport java.util.Set;\\n\\n\\n@SuppressWarnings(\\&quot;ALL\\&quot;)\\nclass demo_nio {\\n    /**\\n     * NIO read from file and print String\\n     *\\n     * @throws IOException\\n     */\\n    public static void nioReadFromFileAndPrintString() throws IOException {\\n        FileInputStream inputStream = new FileInputStream(\\&quot;resources/nio_showcase_read\\&quot;);\\n        // 1. get Channel\\n        FileChannel channel = inputStream.getChannel();\\n        // 2. allocate buffer\\n        ByteBuffer buffer = ByteBuffer.allocate(1024);\\n        // 3. pretry C-like\\n        while (channel.read(buffer) != -1) {\\n            // 4. flip before read\\n            buffer.flip();\\n            System.out.println(new String(buffer.array()));\\n        }\\n    }\\n\\n    /**\\n     * NIO write String to file\\n     *\\n     * @throws IOException\\n     */\\n    public static void nioWriteStringToFile() throws IOException {\\n        FileOutputStream outputStream = new FileOutputStream(\\&quot;resources/nio_showcase_write\\&quot;);\\n        String message = \\&quot;Hello NIO\\&quot;;\\n        // 1. get channel\\n        FileChannel channel = outputStream.getChannel();\\n        // 2. allocate buffer\\n        ByteBuffer buffer = ByteBuffer.allocate(1024);\\n        // 3. write buffer\\n        buffer.put(message.getBytes());\\n        // 4. flip buffer\\n        buffer.flip();\\n        // 5. write channel\\n        channel.write(buffer);\\n\\n        // or, use wrap method\\n        buffer = ByteBuffer.wrap(message.getBytes());\\n        channel.write(buffer);\\n    }\\n\\n    /**\\n     * NIO DirectBuffer\\n     * &lt;p&gt;\\n     * Given a direct byte buffer, the Java virtual machine will make a best effort to perform native I/O operations directly upon it.\\n     * That is, it will attempt to avoid copying the buffer’s content to (or from) an intermediate buffer before (or after)\\n     * each invocation of one of the underlying operating system’s native I/O operations.\\n     *\\n     * @throws IOException\\n     */\\n    public static void nioDirectBufferReadFromFileAndPrintString() throws IOException {\\n        FileInputStream inputStream = new FileInputStream(\\&quot;resources/nio_showcase_read\\&quot;);\\n        // 1. get Channel\\n        FileChannel channel = inputStream.getChannel();\\n        // 2. allocate buffer\\n        ByteBuffer buffer = ByteBuffer.allocateDirect(1024);\\n        // 3. pretry C-like\\n        while (channel.read(buffer) != -1) {\\n            try {\\n                // 4. flip before read\\n                buffer.flip();\\n                // DirectBuffer cannot read heap-buffer(hb)\\n                // UnsupportedOperationException\\n                // buffer.array();\\n                while (buffer.hasRemaining()) {\\n                    //  `(char)buffer.get()` can only handle char-encoding characters, not work for Chinese/double-char Unicode\\n                    System.out.print((char) buffer.get());\\n                }\\n            } finally {\\n                // 5. clean buffer\\n                buffer.clear();\\n            }\\n        }\\n    }\\n\\n    /**\\n     * NIO memory-mapped buffer\\n     * &lt;p&gt;\\n     * Memory-mapped file I/O is accomplished by causing the data in a file to magically appear as the contents of a memory array.\\n     * At first, this sounds like it simply means reading the entire file into memory, but in fact it does not.\\n     * In general, only the parts of the file that you actually read or write are brought, or mapped, into memory.\\n     *\\n     * @throws IOException\\n     */\\n    public static void nioMemoryMappedBuffer() throws IOException {\\n        FileInputStream inputStream = new FileInputStream(\\&quot;resources/nio_showcase_read\\&quot;);\\n        // 1. get Channel\\n        FileChannel channel = inputStream.getChannel();\\n        // 2. allocate buffer\\n        MappedByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, 1024);\\n        // 3. MappedByteBuffer has no internal array\\n        while (buffer.hasRemaining()) {\\n            System.out.print((char) buffer.get());\\n        }\\n    }\\n\\n    /**\\n     * NIO gather and scather\\n     * Useful for composing buffers\\n     *\\n     * @param port\\n     * @param firstHeaderLength\\n     * @param secondHeaderLength\\n     * @param bodyLength\\n     * @throws Exception\\n     */\\n    public static void nioGatherAndScather(int port, int firstHeaderLength, int secondHeaderLength, int bodyLength) throws Exception {\\n        ServerSocketChannel ssc = ServerSocketChannel.open();\\n        InetSocketAddress address = new InetSocketAddress(port);\\n        ssc.socket().bind(address);\\n        int messageLength = firstHeaderLength + secondHeaderLength + bodyLength;\\n        ByteBuffer buffers[] = new ByteBuffer[]{\\n                ByteBuffer.allocate(firstHeaderLength),\\n                ByteBuffer.allocate(secondHeaderLength),\\n                ByteBuffer.allocate(bodyLength)\\n        };\\n        SocketChannel sc = ssc.accept();\\n        // Scatter-read into buffers\\n        int bytesRead = 0;\\n        while (bytesRead &lt; messageLength) {\\n            long r = sc.read(buffers);\\n            bytesRead += r;\\n\\n            System.out.println(\\&quot;r \\&quot; + r);\\n            for (int i = 0; i &lt; buffers.length; ++i) {\\n                ByteBuffer bb = buffers[i];\\n                System.out.println(\\&quot;b \\&quot; + i + \\&quot; \\&quot; + bb.position() + \\&quot; \\&quot; + bb.limit());\\n            }\\n        }\\n\\n        // Process message here\\n        for (int i = 0; i &lt; buffers.length; i++) {\\n            System.out.println(\\&quot;m \\&quot; + new String(buffers[i].array()));\\n        }\\n\\n        // Flip buffers\\n        for (int i = 0; i &lt; buffers.length; ++i) {\\n            ByteBuffer bb = buffers[i];\\n            bb.flip();\\n        }\\n\\n        // Scatter-write back out\\n        long bytesWritten = 0;\\n        while (bytesWritten &lt; messageLength) {\\n            long r = sc.write(buffers);\\n            bytesWritten += r;\\n        }\\n\\n        // Clear buffers\\n        for (int i = 0; i &lt; buffers.length; ++i) {\\n            ByteBuffer bb = buffers[i];\\n            bb.clear();\\n        }\\n\\n        System.out.println(bytesRead + \\&quot; \\&quot; + bytesWritten + \\&quot; \\&quot; + messageLength);\\n    }\\n\\n    /**\\n     * You can lock an entire file or a portion of a file.\\n     * If you acquire an exclusive lock, then no one else can acquire a lock on that same file or portion of a file.\\n     * If you acquire a shared lock, then others can acquire shared locks, but not exclusive locks, on that same file or portion of a file.\\n     * File locking is not always done for the purpose of protecting data.\\n     * For example, you might temporarily lock a file to ensure that a particular write operation is made atomically, without interference from other programs.\\n     *\\n     * @throws Exception\\n     */\\n    public static void nioFileLock() throws Exception {\\n        int start = 0;\\n        int end = 1024;\\n        for (int i = 0; i &lt; 2; i++) {\\n            new Thread(() -&gt; {\\n                // Get file channel\\n                try (RandomAccessFile raf = new RandomAccessFile(\\&quot;resources/nio_showcase_read\\&quot;, \\&quot;rw\\&quot;);\\n                     FileChannel fc = raf.getChannel()) {\\n                    // Get lock\\n                    System.out.println(Thread.currentThread() + \\&quot; trying to get lock\\&quot;);\\n                    FileLock lock = fc.lock(start, end, false);\\n                    System.out.println(Thread.currentThread() + \\&quot;got lock!\\&quot;);\\n\\n                    // Pause\\n                    System.out.println(Thread.currentThread() + \\&quot;pausing\\&quot;);\\n                    try {\\n                        Thread.sleep(1000);\\n                    } catch (InterruptedException ie) {\\n                    }\\n\\n                    // Release lock\\n                    System.out.println(Thread.currentThread() + \\&quot;going to release lock\\&quot;);\\n                    lock.release();\\n                    System.out.println(Thread.currentThread() + \\&quot;released lock\\&quot;);\\n                } catch (Exception e) {\\n                    System.out.print(\\&quot;\\\\n\\&quot; + Thread.currentThread() + \\&quot; \\&quot;);\\n                    e.printStackTrace();\\n                }\\n            }).start();\\n        }\\n    }\\n\\n    public static void nioSelector(int[] ports) throws IOException {\\n        // 1. Create a new selector\\n        Selector selector = Selector.open();\\n\\n        // 2. Create a new Buffer for read\\n        ByteBuffer echoBuffer = ByteBuffer.allocate(1024);\\n\\n        // Open a listener on each port, and register each one\\n        // with the selector\\n        for (int i = 0; i &lt; ports.length; ++i) {\\n            ServerSocketChannel ssc = ServerSocketChannel.open();\\n            ssc.configureBlocking(false);\\n            ServerSocket ss = ssc.socket();\\n            InetSocketAddress address = new InetSocketAddress(ports[i]);\\n            ss.bind(address);\\n\\n            SelectionKey key = ssc.register(selector, SelectionKey.OP_ACCEPT);\\n\\n            System.out.println(\\&quot;Going to listen on \\&quot; + ports[i]);\\n        }\\n\\n        while (true) {\\n            int num = selector.select();\\n\\n            Set selectedKeys = selector.selectedKeys();\\n            Iterator it = selectedKeys.iterator();\\n\\n            while (it.hasNext()) {\\n                SelectionKey key = (SelectionKey) it.next();\\n\\n                if ((key.readyOps() &amp; SelectionKey.OP_ACCEPT)\\n                        == SelectionKey.OP_ACCEPT) {\\n                    // Accept the new connection\\n                    ServerSocketChannel ssc = (ServerSocketChannel) key.channel();\\n                    SocketChannel sc = ssc.accept();\\n                    sc.configureBlocking(false);\\n\\n                    // Add the new connection to the selector\\n                    SelectionKey newKey = sc.register(selector, SelectionKey.OP_READ);\\n                    // Must reove the key manually\\n                    it.remove();\\n\\n                    System.out.println(\\&quot;Got connection from \\&quot; + sc);\\n                } else if ((key.readyOps() &amp; SelectionKey.OP_READ)\\n                        == SelectionKey.OP_READ) {\\n                    // Read the data\\n                    SocketChannel sc = (SocketChannel) key.channel();\\n\\n                    // Echo data\\n                    int bytesEchoed = 0;\\n                    while (true) {\\n                        echoBuffer.clear();\\n\\n                        int r = sc.read(echoBuffer);\\n\\n                        if (r &lt;= 0) {\\n                            break;\\n                        }\\n\\n                        echoBuffer.flip();\\n\\n                        sc.write(echoBuffer);\\n                        bytesEchoed += r;\\n                    }\\n\\n                    System.out.println(\\&quot;Echoed \\&quot; + bytesEchoed + \\&quot; from \\&quot; + sc);\\n\\n                    it.remove();\\n                }\\n            }\\n        }\\n    }\\n\\n    public static void nioCharset() throws Exception {\\n        String inputFile = \\&quot;resources/nio_showcase_read\\&quot;;\\n        String outputFile = \\&quot;resources/nio_showcase_write\\&quot;;\\n\\n        RandomAccessFile inf = new RandomAccessFile( inputFile, \\&quot;r\\&quot; );\\n        RandomAccessFile outf = new RandomAccessFile( outputFile, \\&quot;rw\\&quot; );\\n        long inputLength = new File( inputFile ).length();\\n\\n        FileChannel inc = inf.getChannel();\\n        FileChannel outc = outf.getChannel();\\n\\n        MappedByteBuffer inputData =\\n                inc.map( FileChannel.MapMode.READ_ONLY, 0, inputLength );\\n\\n        Charset latin1 = Charset.forName( \\&quot;ISO-8859-1\\&quot; );\\n        CharsetDecoder decoder = latin1.newDecoder();\\n        CharsetEncoder encoder = latin1.newEncoder();\\n\\n        CharBuffer cb = decoder.decode( inputData );\\n\\n        // Process char data here\\n\\n        ByteBuffer outputData = encoder.encode( cb );\\n\\n        outc.write( outputData );\\n\\n        inf.close();\\n        outf.close();\\n    }\\n\\n    public static void main(String[] args) throws Exception {\\n        System.out.println(\\&quot;\\\\n****** nioReadFromFileAndPrintString\\&quot;);\\n        nioReadFromFileAndPrintString();\\n        System.out.println(\\&quot;\\\\n****** nioWriteStringToFile\\&quot;);\\n        nioWriteStringToFile();\\n        System.out.println(\\&quot;\\\\n****** nioDirectBufferReadFromFileAndPrintString\\&quot;);\\n        nioDirectBufferReadFromFileAndPrintString();\\n        System.out.println(\\&quot;\\\\n****** nioMemoryMappedBuffer\\&quot;);\\n        nioMemoryMappedBuffer();\\n//        System.out.println(\\&quot;\\\\n****** nioGatherAndScather (run `netcat localhost port` to connect)\\&quot;);\\n//        nioGatherAndScather(2021, 1, 1, 10);\\n//        System.out.println(\\&quot;\\\\n****** nioFileLock\\&quot;);\\n//        nioFileLock();\\n//        System.out.println(\\&quot;\\\\n****** nioSelector\\&quot;);\\n//        nioSelector(new int[]{2020, 2021});\\n        System.out.println(\\&quot;\\\\n****** nioCharset\\&quot;);\\n        nioCharset();\\n    }\\n}\\n```&quot;]]],536870916]],[&quot;^1A&quot;,[224,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[224,&quot;^[&quot;,&quot;  ```java\\nimport java.io.*;\\nimport java.net.InetSocketAddress;\\nimport java.net.ServerSocket;\\nimport java.nio.ByteBuffer;\\nimport java.nio.CharBuffer;\\nimport java.nio.MappedByteBuffer;\\nimport java.nio.channels.*;\\nimport java.nio.charset.Charset;\\nimport java.nio.charset.CharsetDecoder;\\nimport java.nio.charset.CharsetEncoder;\\nimport java.util.Iterator;\\nimport java.util.Set;\\n\\n\\n@SuppressWarnings(\\&quot;ALL\\&quot;)\\nclass demo_nio {\\n    /**\\n     * NIO read from file and print String\\n     *\\n     * @throws IOException\\n     */\\n    public static void nioReadFromFileAndPrintString() throws IOException {\\n        FileInputStream inputStream = new FileInputStream(\\&quot;resources/nio_showcase_read\\&quot;);\\n        // 1. get Channel\\n        FileChannel channel = inputStream.getChannel();\\n        // 2. allocate buffer\\n        ByteBuffer buffer = ByteBuffer.allocate(1024);\\n        // 3. pretry C-like\\n        while (channel.read(buffer) != -1) {\\n            // 4. flip before read\\n            buffer.flip();\\n            System.out.println(new String(buffer.array()));\\n        }\\n    }\\n\\n    /**\\n     * NIO write String to file\\n     *\\n     * @throws IOException\\n     */\\n    public static void nioWriteStringToFile() throws IOException {\\n        FileOutputStream outputStream = new FileOutputStream(\\&quot;resources/nio_showcase_write\\&quot;);\\n        String message = \\&quot;Hello NIO\\&quot;;\\n        // 1. get channel\\n        FileChannel channel = outputStream.getChannel();\\n        // 2. allocate buffer\\n        ByteBuffer buffer = ByteBuffer.allocate(1024);\\n        // 3. write buffer\\n        buffer.put(message.getBytes());\\n        // 4. flip buffer\\n        buffer.flip();\\n        // 5. write channel\\n        channel.write(buffer);\\n\\n        // or, use wrap method\\n        buffer = ByteBuffer.wrap(message.getBytes());\\n        channel.write(buffer);\\n    }\\n\\n    /**\\n     * NIO DirectBuffer\\n     * &lt;p&gt;\\n     * Given a direct byte buffer, the Java virtual machine will make a best effort to perform native I/O operations directly upon it.\\n     * That is, it will attempt to avoid copying the buffer’s content to (or from) an intermediate buffer before (or after)\\n     * each invocation of one of the underlying operating system’s native I/O operations.\\n     *\\n     * @throws IOException\\n     */\\n    public static void nioDirectBufferReadFromFileAndPrintString() throws IOException {\\n        FileInputStream inputStream = new FileInputStream(\\&quot;resources/nio_showcase_read\\&quot;);\\n        // 1. get Channel\\n        FileChannel channel = inputStream.getChannel();\\n        // 2. allocate buffer\\n        ByteBuffer buffer = ByteBuffer.allocateDirect(1024);\\n        // 3. pretry C-like\\n        while (channel.read(buffer) != -1) {\\n            try {\\n                // 4. flip before read\\n                buffer.flip();\\n                // DirectBuffer cannot read heap-buffer(hb)\\n                // UnsupportedOperationException\\n                // buffer.array();\\n                while (buffer.hasRemaining()) {\\n                    //  `(char)buffer.get()` can only handle char-encoding characters, not work for Chinese/double-char Unicode\\n                    System.out.print((char) buffer.get());\\n                }\\n            } finally {\\n                // 5. clean buffer\\n                buffer.clear();\\n            }\\n        }\\n    }\\n\\n    /**\\n     * NIO memory-mapped buffer\\n     * &lt;p&gt;\\n     * Memory-mapped file I/O is accomplished by causing the data in a file to magically appear as the contents of a memory array.\\n     * At first, this sounds like it simply means reading the entire file into memory, but in fact it does not.\\n     * In general, only the parts of the file that you actually read or write are brought, or mapped, into memory.\\n     *\\n     * @throws IOException\\n     */\\n    public static void nioMemoryMappedBuffer() throws IOException {\\n        FileInputStream inputStream = new FileInputStream(\\&quot;resources/nio_showcase_read\\&quot;);\\n        // 1. get Channel\\n        FileChannel channel = inputStream.getChannel();\\n        // 2. allocate buffer\\n        MappedByteBuffer buffer = channel.map(FileChannel.MapMode.READ_ONLY, 0, 1024);\\n        // 3. MappedByteBuffer has no internal array\\n        while (buffer.hasRemaining()) {\\n            System.out.print((char) buffer.get());\\n        }\\n    }\\n\\n    /**\\n     * NIO gather and scather\\n     * Useful for composing buffers\\n     *\\n     * @param port\\n     * @param firstHeaderLength\\n     * @param secondHeaderLength\\n     * @param bodyLength\\n     * @throws Exception\\n     */\\n    public static void nioGatherAndScather(int port, int firstHeaderLength, int secondHeaderLength, int bodyLength) throws Exception {\\n        ServerSocketChannel ssc = ServerSocketChannel.open();\\n        InetSocketAddress address = new InetSocketAddress(port);\\n        ssc.socket().bind(address);\\n        int messageLength = firstHeaderLength + secondHeaderLength + bodyLength;\\n        ByteBuffer buffers[] = new ByteBuffer[]{\\n                ByteBuffer.allocate(firstHeaderLength),\\n                ByteBuffer.allocate(secondHeaderLength),\\n                ByteBuffer.allocate(bodyLength)\\n        };\\n        SocketChannel sc = ssc.accept();\\n        // Scatter-read into buffers\\n        int bytesRead = 0;\\n        while (bytesRead &lt; messageLength) {\\n            long r = sc.read(buffers);\\n            bytesRead += r;\\n\\n            System.out.println(\\&quot;r \\&quot; + r);\\n            for (int i = 0; i &lt; buffers.length; ++i) {\\n                ByteBuffer bb = buffers[i];\\n                System.out.println(\\&quot;b \\&quot; + i + \\&quot; \\&quot; + bb.position() + \\&quot; \\&quot; + bb.limit());\\n            }\\n        }\\n\\n        // Process message here\\n        for (int i = 0; i &lt; buffers.length; i++) {\\n            System.out.println(\\&quot;m \\&quot; + new String(buffers[i].array()));\\n        }\\n\\n        // Flip buffers\\n        for (int i = 0; i &lt; buffers.length; ++i) {\\n            ByteBuffer bb = buffers[i];\\n            bb.flip();\\n        }\\n\\n        // Scatter-write back out\\n        long bytesWritten = 0;\\n        while (bytesWritten &lt; messageLength) {\\n            long r = sc.write(buffers);\\n            bytesWritten += r;\\n        }\\n\\n        // Clear buffers\\n        for (int i = 0; i &lt; buffers.length; ++i) {\\n            ByteBuffer bb = buffers[i];\\n            bb.clear();\\n        }\\n\\n        System.out.println(bytesRead + \\&quot; \\&quot; + bytesWritten + \\&quot; \\&quot; + messageLength);\\n    }\\n\\n    /**\\n     * You can lock an entire file or a portion of a file.\\n     * If you acquire an exclusive lock, then no one else can acquire a lock on that same file or portion of a file.\\n     * If you acquire a shared lock, then others can acquire shared locks, but not exclusive locks, on that same file or portion of a file.\\n     * File locking is not always done for the purpose of protecting data.\\n     * For example, you might temporarily lock a file to ensure that a particular write operation is made atomically, without interference from other programs.\\n     *\\n     * @throws Exception\\n     */\\n    public static void nioFileLock() throws Exception {\\n        int start = 0;\\n        int end = 1024;\\n        for (int i = 0; i &lt; 2; i++) {\\n            new Thread(() -&gt; {\\n                // Get file channel\\n                try (RandomAccessFile raf = new RandomAccessFile(\\&quot;resources/nio_showcase_read\\&quot;, \\&quot;rw\\&quot;);\\n                     FileChannel fc = raf.getChannel()) {\\n                    // Get lock\\n                    System.out.println(Thread.currentThread() + \\&quot; trying to get lock\\&quot;);\\n                    FileLock lock = fc.lock(start, end, false);\\n                    System.out.println(Thread.currentThread() + \\&quot;got lock!\\&quot;);\\n\\n                    // Pause\\n                    System.out.println(Thread.currentThread() + \\&quot;pausing\\&quot;);\\n                    try {\\n                        Thread.sleep(1000);\\n                    } catch (InterruptedException ie) {\\n                    }\\n\\n                    // Release lock\\n                    System.out.println(Thread.currentThread() + \\&quot;going to release lock\\&quot;);\\n                    lock.release();\\n                    System.out.println(Thread.currentThread() + \\&quot;released lock\\&quot;);\\n                } catch (Exception e) {\\n                    System.out.print(\\&quot;\\\\n\\&quot; + Thread.currentThread() + \\&quot; \\&quot;);\\n                    e.printStackTrace();\\n                }\\n            }).start();\\n        }\\n    }\\n\\n    public static void nioSelector(int[] ports) throws IOException {\\n        // 1. Create a new selector\\n        Selector selector = Selector.open();\\n\\n        // 2. Create a new Buffer for read\\n        ByteBuffer echoBuffer = ByteBuffer.allocate(1024);\\n\\n        // Open a listener on each port, and register each one\\n        // with the selector\\n        for (int i = 0; i &lt; ports.length; ++i) {\\n            ServerSocketChannel ssc = ServerSocketChannel.open();\\n            ssc.configureBlocking(false);\\n            ServerSocket ss = ssc.socket();\\n            InetSocketAddress address = new InetSocketAddress(ports[i]);\\n            ss.bind(address);\\n\\n            SelectionKey key = ssc.register(selector, SelectionKey.OP_ACCEPT);\\n\\n            System.out.println(\\&quot;Going to listen on \\&quot; + ports[i]);\\n        }\\n\\n        while (true) {\\n            int num = selector.select();\\n\\n            Set selectedKeys = selector.selectedKeys();\\n            Iterator it = selectedKeys.iterator();\\n\\n            while (it.hasNext()) {\\n                SelectionKey key = (SelectionKey) it.next();\\n\\n                if ((key.readyOps() &amp; SelectionKey.OP_ACCEPT)\\n                        == SelectionKey.OP_ACCEPT) {\\n                    // Accept the new connection\\n                    ServerSocketChannel ssc = (ServerSocketChannel) key.channel();\\n                    SocketChannel sc = ssc.accept();\\n                    sc.configureBlocking(false);\\n\\n                    // Add the new connection to the selector\\n                    SelectionKey newKey = sc.register(selector, SelectionKey.OP_READ);\\n                    // Must reove the key manually\\n                    it.remove();\\n\\n                    System.out.println(\\&quot;Got connection from \\&quot; + sc);\\n                } else if ((key.readyOps() &amp; SelectionKey.OP_READ)\\n                        == SelectionKey.OP_READ) {\\n                    // Read the data\\n                    SocketChannel sc = (SocketChannel) key.channel();\\n\\n                    // Echo data\\n                    int bytesEchoed = 0;\\n                    while (true) {\\n                        echoBuffer.clear();\\n\\n                        int r = sc.read(echoBuffer);\\n\\n                        if (r &lt;= 0) {\\n                            break;\\n                        }\\n\\n                        echoBuffer.flip();\\n\\n                        sc.write(echoBuffer);\\n                        bytesEchoed += r;\\n                    }\\n\\n                    System.out.println(\\&quot;Echoed \\&quot; + bytesEchoed + \\&quot; from \\&quot; + sc);\\n\\n                    it.remove();\\n                }\\n            }\\n        }\\n    }\\n\\n    public static void nioCharset() throws Exception {\\n        String inputFile = \\&quot;resources/nio_showcase_read\\&quot;;\\n        String outputFile = \\&quot;resources/nio_showcase_write\\&quot;;\\n\\n        RandomAccessFile inf = new RandomAccessFile( inputFile, \\&quot;r\\&quot; );\\n        RandomAccessFile outf = new RandomAccessFile( outputFile, \\&quot;rw\\&quot; );\\n        long inputLength = new File( inputFile ).length();\\n\\n        FileChannel inc = inf.getChannel();\\n        FileChannel outc = outf.getChannel();\\n\\n        MappedByteBuffer inputData =\\n                inc.map( FileChannel.MapMode.READ_ONLY, 0, inputLength );\\n\\n        Charset latin1 = Charset.forName( \\&quot;ISO-8859-1\\&quot; );\\n        CharsetDecoder decoder = latin1.newDecoder();\\n        CharsetEncoder encoder = latin1.newEncoder();\\n\\n        CharBuffer cb = decoder.decode( inputData );\\n\\n        // Process char data here\\n\\n        ByteBuffer outputData = encoder.encode( cb );\\n\\n        outc.write( outputData );\\n\\n        inf.close();\\n        outf.close();\\n    }\\n\\n    public static void main(String[] args) throws Exception {\\n        System.out.println(\\&quot;\\\\n****** nioReadFromFileAndPrintString\\&quot;);\\n        nioReadFromFileAndPrintString();\\n        System.out.println(\\&quot;\\\\n****** nioWriteStringToFile\\&quot;);\\n        nioWriteStringToFile();\\n        System.out.println(\\&quot;\\\\n****** nioDirectBufferReadFromFileAndPrintString\\&quot;);\\n        nioDirectBufferReadFromFileAndPrintString();\\n        System.out.println(\\&quot;\\\\n****** nioMemoryMappedBuffer\\&quot;);\\n        nioMemoryMappedBuffer();\\n//        System.out.println(\\&quot;\\\\n****** nioGatherAndScather (run `netcat localhost port` to connect)\\&quot;);\\n//        nioGatherAndScather(2021, 1, 1, 10);\\n//        System.out.println(\\&quot;\\\\n****** nioFileLock\\&quot;);\\n//        nioFileLock();\\n//        System.out.println(\\&quot;\\\\n****** nioSelector\\&quot;);\\n//        nioSelector(new int[]{2020, 2021});\\n        System.out.println(\\&quot;\\\\n****** nioCharset\\&quot;);\\n        nioCharset();\\n    }\\n}\\n```&quot;,536870916]],[&quot;^1A&quot;,[224,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[224,&quot;^K&quot;,78,536870916]],[&quot;^1A&quot;,[224,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[224,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,13377],536870916]],[&quot;^1A&quot;,[224,&quot;^17&quot;,78,536870916]],[&quot;^1A&quot;,[224,&quot;^13&quot;,78,536870916]],[&quot;^1A&quot;,[224,&quot;^Z&quot;,[],536870916]],[&quot;^1A&quot;,[224,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[224,&quot;^?&quot;,&quot;~u611b87e5-a833-49f2-8a4f-ba4bf1c73d05&quot;,536870916]],[&quot;^1A&quot;,[225,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[225,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[225,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[225,&quot;^[&quot;,&quot;## [[nio demo]]&quot;,536870916]],[&quot;^1A&quot;,[225,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[225,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[225,&quot;^K&quot;,70,536870916]],[&quot;^1A&quot;,[225,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[225,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,16],536870916]],[&quot;^1A&quot;,[225,&quot;^17&quot;,70,536870916]],[&quot;^1A&quot;,[225,&quot;^13&quot;,70,536870916]],[&quot;^1A&quot;,[225,&quot;^12&quot;,78,536870916]],[&quot;^1A&quot;,[225,&quot;^L&quot;,78,536870916]],[&quot;^1A&quot;,[225,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[225,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;nio demo&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[nio demo]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[225,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[225,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[225,&quot;^?&quot;,&quot;~u611b87e5-5046-49b9-ac02-76501f8e019b&quot;,536870916]],[&quot;^1A&quot;,[226,&quot;^1E&quot;,&quot;-e8--83--8c--e6--99--af-&quot;,536870916]],[&quot;^1A&quot;,[226,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[226,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-d701-4772-b0f1-a85093383adb&quot;],[&quot;^?&quot;,&quot;~u611b87e5-b0ed-40ba-b092-9bf3548308c0&quot;],[&quot;^?&quot;,&quot;~u611b87e5-fe14-42d9-aa07-677ad7314101&quot;],[&quot;^?&quot;,&quot;~u611b87e5-1a25-455a-80d0-cbd7c233cfa5&quot;],[&quot;^?&quot;,&quot;~u611b87e5-1e5b-40b2-8c2d-6b349184c15b&quot;]]],536870916]],[&quot;^1A&quot;,[226,&quot;^[&quot;,&quot;## 背景&quot;,536870916]],[&quot;^1A&quot;,[226,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[226,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[226,&quot;^K&quot;,225,536870916]],[&quot;^1A&quot;,[226,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[226,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,16,&quot;^1L&quot;,28],536870916]],[&quot;^1A&quot;,[226,&quot;^17&quot;,70,536870916]],[&quot;^1A&quot;,[226,&quot;^13&quot;,70,536870916]],[&quot;^1A&quot;,[226,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[226,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;背景&quot;]],536870916]],[&quot;^1A&quot;,[226,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[226,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[226,&quot;^?&quot;,&quot;~u611b87e5-3560-46ae-9ad0-a6e379ddf48a&quot;,536870916]],[&quot;^1A&quot;,[227,&quot;^1E&quot;,&quot;Thread_based_model&quot;,536870916]],[&quot;^1A&quot;,[227,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627568063846_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627568063846_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[227,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[227,&quot;^[&quot;,&quot;## Thread-based model\\n![image.png](../assets/image_1627568063846_0.png)&quot;,536870916]],[&quot;^1A&quot;,[227,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[227,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[227,&quot;^K&quot;,226,536870916]],[&quot;^1A&quot;,[227,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[227,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,28,&quot;^1L&quot;,106],536870916]],[&quot;^1A&quot;,[227,&quot;^17&quot;,70,536870916]],[&quot;^1A&quot;,[227,&quot;^13&quot;,226,536870916]],[&quot;^1A&quot;,[227,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[227,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Thread-based model&quot;]],536870916]],[&quot;^1A&quot;,[227,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[227,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[227,&quot;^?&quot;,&quot;~u611b87e5-1e5b-40b2-8c2d-6b349184c15b&quot;,536870916]],[&quot;^1A&quot;,[228,&quot;^1E&quot;,&quot;Event_driven_model&quot;,536870916]],[&quot;^1A&quot;,[228,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627568149432_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627568149432_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;伪代码:&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;socketA, pipeB;&quot;,&quot;\\n&quot;,&quot;watchedList.add(socketA, FOR_READ);        //[1]&quot;,&quot;\\n&quot;,&quot;watchedList.add(pipeB, FOR_READ);&quot;,&quot;\\n&quot;,&quot;while(events = demultiplexer.watch(watchedList)) {    //[2]&quot;,&quot;\\n&quot;,&quot;  //event loop&quot;,&quot;\\n&quot;,&quot;  foreach(event in events) {          //[3]&quot;,&quot;\\n&quot;,&quot;    //This read will never block and will always return data&quot;,&quot;\\n&quot;,&quot;    data = event.resource.read();&quot;,&quot;\\n&quot;,&quot;    if(data === RESOURCE_CLOSED)&quot;,&quot;\\n&quot;,&quot;      //the resource was closed, remove it from the watched list&quot;,&quot;\\n&quot;,&quot;      demultiplexer.unwatch(event.resource);&quot;,&quot;\\n&quot;,&quot;    else&quot;,&quot;\\n&quot;,&quot;      //some actual data was received, process it&quot;,&quot;\\n&quot;,&quot;      consumeData(data);&quot;,&quot;\\n&quot;,&quot;  }&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;c&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,211,&quot;^1S&quot;,808],&quot;^1T&quot;,&quot;~```c\\nsocketA, pipeB;\\nwatchedList.add(socketA, FOR_READ);        //[1]\\nwatchedList.add(pipeB, FOR_READ);\\nwhile(events = demultiplexer.watch(watchedList)) {    //[2]\\n  //event loop\\n  foreach(event in events) {          //[3]\\n    //This read will never block and will always return data\\n    data = event.resource.read();\\n    if(data === RESOURCE_CLOSED)\\n      //the resource was closed, remove it from the watched list\\n      demultiplexer.unwatch(event.resource);\\n    else\\n      //some actual data was received, process it\\n      consumeData(data);\\n  }\\n}\\n```&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;It&apos;s interesting to see that with this pattern, we can now handle several I/O operations inside a single thread, without using a busy-waiting technique. The following image shows us how a web server would be able to handle multiple connections using a synchronous event demultiplexer and a single thread:&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628130296252_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628130296252_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[228,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[228,&quot;^[&quot;,&quot;## Event-driven model\\n![image.png](../assets/image_1627568149432_0.png) \\n\\n伪代码:\\n```c\\nsocketA, pipeB;\\nwatchedList.add(socketA, FOR_READ);        //[1]\\nwatchedList.add(pipeB, FOR_READ);\\nwhile(events = demultiplexer.watch(watchedList)) {    //[2]\\n  //event loop\\n  foreach(event in events) {          //[3]\\n    //This read will never block and will always return data\\n    data = event.resource.read();\\n    if(data === RESOURCE_CLOSED)\\n      //the resource was closed, remove it from the watched list\\n      demultiplexer.unwatch(event.resource);\\n    else\\n      //some actual data was received, process it\\n      consumeData(data);\\n  }\\n}\\n```\\n\\nIt&apos;s interesting to see that with this pattern, we can now handle several I/O operations inside a single thread, without using a busy-waiting technique. The following image shows us how a web server would be able to handle multiple connections using a synchronous event demultiplexer and a single thread:\\n![image.png](../assets/image_1628130296252_0.png)&quot;,536870916]],[&quot;^1A&quot;,[228,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[228,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[228,&quot;^K&quot;,227,536870916]],[&quot;^1A&quot;,[228,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[228,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,106,&quot;^1L&quot;,1177],536870916]],[&quot;^1A&quot;,[228,&quot;^17&quot;,70,536870916]],[&quot;^1A&quot;,[228,&quot;^13&quot;,226,536870916]],[&quot;^1A&quot;,[228,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[228,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Event-driven model&quot;]],536870916]],[&quot;^1A&quot;,[228,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[228,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[228,&quot;^?&quot;,&quot;~u611b87e5-1a25-455a-80d0-cbd7c233cfa5&quot;,536870916]],[&quot;^1A&quot;,[229,&quot;^1E&quot;,&quot;Reactor_pattern&quot;,536870916]],[&quot;^1A&quot;,[229,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;We can now introduce the reactor pattern, which is a specialization of the algorithm presented in the previous section. The main idea behind it is to have a &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;handler&quot;]]]],[&quot;Plain&quot;,&quot; (which in Node.js is represented by a &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;callback&quot;]]]],[&quot;Plain&quot;,&quot; function) associated with each I/O operation, which &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;will be invoked as soon as an event is produced and processed by the event loop.&quot;]]]],[&quot;Plain&quot;,&quot; The structure of the reactor pattern is shown in the following image:&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628130703583_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628130703583_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;The application generates a new I/O operation by &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;submitting a request to the Event Demultiplexer.&quot;]]]],[&quot;Plain&quot;,&quot; The application also specifies a handler, which will be invoked when the operation completes. Submitting a new request to the Event Demultiplexer is a non-blocking call and it immediately returns the control back to the application.&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;When a set of I/O operations completes, the Event Demultiplexer pushes the new events into the &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;Event Queue&quot;]]]],[&quot;Plain&quot;,&quot;.&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;At this point, the Event Loop &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;iterates over&quot;]]]],[&quot;Plain&quot;,&quot; the items of the Event Queue.&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;For each event, the associated handler is invoked.&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,4,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;The handler, which is part of the application code, will give back the control to the Event Loop when its execution completes (5a). However, new asynchronous operations might be requested during the execution of the handler (5b), causing new operations to be inserted in the Event Demultiplexer (1), before the control is given back to the Event Loop.&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,5,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;When all the items in the Event Queue are processed, the loop will block again on the Event Demultiplexer which will then trigger another cycle.&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627568223793_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627568223793_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]]],&quot;^20&quot;,[],&quot;^21&quot;,6,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true]]]],536870916]],[&quot;^1A&quot;,[229,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[229,&quot;^[&quot;,&quot;## Reactor pattern\\n\\nWe can now introduce the reactor pattern, which is a specialization of the algorithm presented in the previous section. The main idea behind it is to have a **handler** (which in Node.js is represented by a **callback** function) associated with each I/O operation, which **will be invoked as soon as an event is produced and processed by the event loop.** The structure of the reactor pattern is shown in the following image:\\n![image.png](../assets/image_1628130703583_0.png) \\n\\n1. The application generates a new I/O operation by **submitting a request to the Event Demultiplexer.** The application also specifies a handler, which will be invoked when the operation completes. Submitting a new request to the Event Demultiplexer is a non-blocking call and it immediately returns the control back to the application.\\n\\n2. When a set of I/O operations completes, the Event Demultiplexer pushes the new events into the **Event Queue**.\\n\\n3. At this point, the Event Loop **iterates over** the items of the Event Queue.\\n\\n4. For each event, the associated handler is invoked.\\n\\n5. The handler, which is part of the application code, will give back the control to the Event Loop when its execution completes (5a). However, new asynchronous operations might be requested during the execution of the handler (5b), causing new operations to be inserted in the Event Demultiplexer (1), before the control is given back to the Event Loop.\\n\\n6. When all the items in the Event Queue are processed, the loop will block again on the Event Demultiplexer which will then trigger another cycle.\\n\\n![image.png](../assets/image_1627568223793_0.png)&quot;,536870916]],[&quot;^1A&quot;,[229,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[229,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[229,&quot;^K&quot;,228,536870916]],[&quot;^1A&quot;,[229,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[229,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1177,&quot;^1L&quot;,2877],536870916]],[&quot;^1A&quot;,[229,&quot;^17&quot;,70,536870916]],[&quot;^1A&quot;,[229,&quot;^13&quot;,226,536870916]],[&quot;^1A&quot;,[229,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[229,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Reactor pattern&quot;]],536870916]],[&quot;^1A&quot;,[229,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[229,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[229,&quot;^?&quot;,&quot;~u611b87e5-fe14-42d9-aa07-677ad7314101&quot;,536870916]],[&quot;^1A&quot;,[230,&quot;^1E&quot;,&quot;C10K_problem&quot;,536870916]],[&quot;^1A&quot;,[230,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;The term of the C10k problem was born when Kegel (2006) first published a cognominal article in 1999 on this problem. He announced that \\&quot;it is time for web servers to handle ten thousand clients simultaneously.\\&quot; The original article was revised multiple times and became an influential resource on web server scalability&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[230,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[230,&quot;^[&quot;,&quot;## C10K problem\\n\\nThe term of the C10k problem was born when Kegel (2006) first published a cognominal article in 1999 on this problem. He announced that \\&quot;it is time for web servers to handle ten thousand clients simultaneously.\\&quot; The original article was revised multiple times and became an influential resource on web server scalability&quot;,536870916]],[&quot;^1A&quot;,[230,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[230,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[230,&quot;^K&quot;,229,536870916]],[&quot;^1A&quot;,[230,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[230,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2877,&quot;^1L&quot;,3224],536870916]],[&quot;^1A&quot;,[230,&quot;^17&quot;,70,536870916]],[&quot;^1A&quot;,[230,&quot;^13&quot;,226,536870916]],[&quot;^1A&quot;,[230,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[230,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;C10K problem&quot;]],536870916]],[&quot;^1A&quot;,[230,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[230,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[230,&quot;^?&quot;,&quot;~u611b87e5-b0ed-40ba-b092-9bf3548308c0&quot;,536870916]],[&quot;^1A&quot;,[231,&quot;^1E&quot;,&quot;SEDA&quot;,536870916]],[&quot;^1A&quot;,[231,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;“SEDA: An Architecture for Well-Conditioned, Scalable Internet Services” (2001)&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627568750506_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627568750506_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Each rectangle is a &quot;],[&quot;Code&quot;,&quot;stage&quot;],[&quot;Plain&quot;,&quot; with its unique logic. Events travel through &quot;],[&quot;Code&quot;,&quot;queues&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;between multiple stages. A request is put into an incoming queue initiating the&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;execution of a set of commands at a stage. Then new events are generated that are&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;processed at the latter stages until the processing is finished at the final one. The&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;illustrated sequence of actions starting from the point when an incoming request is&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;at the initial stage up to a result at the last stage can be called a SEDA transaction.&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;The execution of the incoming request must be asynchronous.&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627569669240_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627569669240_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[231,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[231,&quot;^[&quot;,&quot;## SEDA\\n\\n“SEDA: An Architecture for Well-Conditioned, Scalable Internet Services” (2001)\\n![image.png](../assets/image_1627568750506_0.png) \\nEach rectangle is a `stage` with its unique logic. Events travel through `queues`\\nbetween multiple stages. A request is put into an incoming queue initiating the\\nexecution of a set of commands at a stage. Then new events are generated that are\\nprocessed at the latter stages until the processing is finished at the final one. The\\nillustrated sequence of actions starting from the point when an incoming request is\\nat the initial stage up to a result at the last stage can be called a SEDA transaction.\\nThe execution of the incoming request must be asynchronous.\\n![image.png](../assets/image_1627569669240_0.png)&quot;,536870916]],[&quot;^1A&quot;,[231,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[231,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[231,&quot;^K&quot;,230,536870916]],[&quot;^1A&quot;,[231,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[231,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3224,&quot;^1L&quot;,4016],536870916]],[&quot;^1A&quot;,[231,&quot;^17&quot;,70,536870916]],[&quot;^1A&quot;,[231,&quot;^13&quot;,226,536870916]],[&quot;^1A&quot;,[231,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[231,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;SEDA&quot;]],536870916]],[&quot;^1A&quot;,[231,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[231,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[231,&quot;^?&quot;,&quot;~u611b87e5-d701-4772-b0f1-a85093383adb&quot;,536870916]],[&quot;^1A&quot;,[232,&quot;^1E&quot;,&quot;select-26-epoll&quot;,536870916]],[&quot;^1A&quot;,[232,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 要完成对I/O流的复用需要完成如下几个事情：&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;用户态怎么将文件句柄传递到内核态？&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;内核态怎么判断I/O流可读可写？&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;内核怎么通知监控者有I/O流可读可写？&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;监控者如何找到可读可写的I/O流并传递给用户态应用程序？&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,4,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;继续循环时监控者怎样重复上述步骤？&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;select的做法&quot;]]]]]]],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,5,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;select创建3个文件描述符集，并将这些文件描述符拷贝到内核中，这里限制了文件句柄的最大的数量为1024（注意是全部传入---第一次拷贝）；&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;内核针对读缓冲区和写缓冲区来判断是否可读可写,这个动作和select无关；&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;内核在检测到文件句柄可读/可写时就产生&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;中断通知&quot;]]]],[&quot;Plain&quot;,&quot;监控者select，select被内核触发之后，就返回可读可写的文件句柄的总数；&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;select会将之前传递给内核的文件句柄再次从内核传到用户态（第2次拷贝），select返回给用户态的只是可读可写的文件句柄总数，再使用FD_ISSET宏函数来检测哪些文件I/O可读可写（遍历）；&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,4,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;select对于事件的监控是建立在内核的修改之上的，也就是说经过一次监控之后，内核会修改位，因此再次监控时需要再次从用户态向内核态进行拷贝（第N次拷贝）&quot;]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;如果读写并发量很大，每次IO都响应中断对操作系统显然是低效的。因此内核对设备IO中断使用&quot;],[&quot;Code&quot;,&quot;NAPI&quot;],[&quot;Plain&quot;,&quot;(需要驱动支持)半轮询半中断对大量IO中断进行缓冲和打包。&quot;]]]],[&quot;Break_Line&quot;]]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;select整个过程中对fd集有多次拷贝，同时依赖遍历来响应中断，这也是select限制描述集大小和整体性能较低的部分原因&quot;]]]],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;epoll的做法&quot;]]]]]]],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,5,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;首先执行epoll_create在内核专属于epoll的高速cache区，并在该缓冲区建立&quot;],[&quot;Code&quot;,&quot;红黑树&quot;],[&quot;Plain&quot;,&quot;和&quot;],[&quot;Code&quot;,&quot;就绪链表&quot;],[&quot;Plain&quot;,&quot;，用户态传入的文件句柄将被放到红黑树中（第一次拷贝）。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;内核针对读缓冲区和写缓冲区来判断是否可读可写，这个动作与epoll无关；&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;epoll_ctl执行add动作时除了将文件句柄放到红黑树上之外，还向内核注册了该文件句柄的回调函数，内核在检测到某句柄可读可写时则调用该回调函数&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;将文件句柄放到就绪链表&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;epoll_wait只监控就绪链表就可以&quot;]]]],[&quot;Plain&quot;,&quot;，如果就绪链表有文件句柄，则表示该文件句柄可读可写，并返回到用户态（少量的拷贝，或者是mmap）。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,4,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;由于内核不修改文件句柄的位，因此只需要在第一次传入就可以重复监控，直到使用epoll_ctl删除，否则不需要重新传入，因此无多次拷贝。简单说：epoll是继承了select/poll的I/O复用的思想，并在二者的基础上从监控IO流、查找I/O事件等角度来提高效率，具体地说就是内核句柄列表、红黑树、就绪list链表来实现的。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;水平触发(Level trigger)和边缘触发(Edge trigger)&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;当一个socket句柄上有事件时，内核会把该句柄插入上面所说的准备就绪list链表，这时我们调用epoll_wait，会把准备就绪的socket拷贝到用户态内存，然后清空准备就绪list链表， 最后，epoll_wait干了件事，就是检查这些socket，如果不是ET模式（就是LT模式的句柄了），并且这些socket上确实有未处理的事件时，又把该句柄放回到刚刚清空的准备就绪链表了，所以，非ET的句柄，只要它上面还有事件，epoll_wait每次都会返回。而ET模式的句柄，除非有新中断到，即使socket上的事件没有处理完，也是不会次次从epoll_wait返回的。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,5,&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,true]]]],536870916]],[&quot;^1A&quot;,[232,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[232,&quot;^[&quot;,&quot;## select&amp;epoll\\n\\n要完成对I/O流的复用需要完成如下几个事情：\\n\\n1. 用户态怎么将文件句柄传递到内核态？\\n\\n2. 内核态怎么判断I/O流可读可写？\\n\\n3. 内核怎么通知监控者有I/O流可读可写？\\n\\n4. 监控者如何找到可读可写的I/O流并传递给用户态应用程序？\\n\\n5. 继续循环时监控者怎样重复上述步骤？\\n\\n**_select的做法_**\\n\\n1. select创建3个文件描述符集，并将这些文件描述符拷贝到内核中，这里限制了文件句柄的最大的数量为1024（注意是全部传入---第一次拷贝）；\\n2. 内核针对读缓冲区和写缓冲区来判断是否可读可写,这个动作和select无关；\\n3. 内核在检测到文件句柄可读/可写时就产生**中断通知**监控者select，select被内核触发之后，就返回可读可写的文件句柄的总数；\\n4. select会将之前传递给内核的文件句柄再次从内核传到用户态（第2次拷贝），select返回给用户态的只是可读可写的文件句柄总数，再使用FD_ISSET宏函数来检测哪些文件I/O可读可写（遍历）；\\n5. select对于事件的监控是建立在内核的修改之上的，也就是说经过一次监控之后，内核会修改位，因此再次监控时需要再次从用户态向内核态进行拷贝（第N次拷贝）\\n&gt; _如果读写并发量很大，每次IO都响应中断对操作系统显然是低效的。因此内核对设备IO中断使用`NAPI`(需要驱动支持)半轮询半中断对大量IO中断进行缓冲和打包。_\\n\\n&gt; _select整个过程中对fd集有多次拷贝，同时依赖遍历来响应中断，这也是select限制描述集大小和整体性能较低的部分原因_\\n\\n**_epoll的做法_**\\n\\n1. 首先执行epoll_create在内核专属于epoll的高速cache区，并在该缓冲区建立`红黑树`和`就绪链表`，用户态传入的文件句柄将被放到红黑树中（第一次拷贝）。\\n2. 内核针对读缓冲区和写缓冲区来判断是否可读可写，这个动作与epoll无关；\\n3. epoll_ctl执行add动作时除了将文件句柄放到红黑树上之外，还向内核注册了该文件句柄的回调函数，内核在检测到某句柄可读可写时则调用该回调函数**将文件句柄放到就绪链表**。\\n4. **epoll_wait只监控就绪链表就可以**，如果就绪链表有文件句柄，则表示该文件句柄可读可写，并返回到用户态（少量的拷贝，或者是mmap）。\\n5. 由于内核不修改文件句柄的位，因此只需要在第一次传入就可以重复监控，直到使用epoll_ctl删除，否则不需要重新传入，因此无多次拷贝。简单说：epoll是继承了select/poll的I/O复用的思想，并在二者的基础上从监控IO流、查找I/O事件等角度来提高效率，具体地说就是内核句柄列表、红黑树、就绪list链表来实现的。\\n\\n**_水平触发(Level trigger)和边缘触发(Edge trigger)_**\\n\\n当一个socket句柄上有事件时，内核会把该句柄插入上面所说的准备就绪list链表，这时我们调用epoll_wait，会把准备就绪的socket拷贝到用户态内存，然后清空准备就绪list链表， 最后，epoll_wait干了件事，就是检查这些socket，如果不是ET模式（就是LT模式的句柄了），并且这些socket上确实有未处理的事件时，又把该句柄放回到刚刚清空的准备就绪链表了，所以，非ET的句柄，只要它上面还有事件，epoll_wait每次都会返回。而ET模式的句柄，除非有新中断到，即使socket上的事件没有处理完，也是不会次次从epoll_wait返回的。&quot;,536870916]],[&quot;^1A&quot;,[232,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[232,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[232,&quot;^K&quot;,226,536870916]],[&quot;^1A&quot;,[232,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[232,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,4016,&quot;^1L&quot;,7709],536870916]],[&quot;^1A&quot;,[232,&quot;^17&quot;,70,536870916]],[&quot;^1A&quot;,[232,&quot;^13&quot;,70,536870916]],[&quot;^1A&quot;,[232,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[232,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;select&amp;epoll&quot;]],536870916]],[&quot;^1A&quot;,[232,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[232,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[232,&quot;^?&quot;,&quot;~u611b87e5-61a1-48a2-a8c9-1a4c6e179103&quot;,536870916]],[&quot;^1A&quot;,[233,&quot;^1E&quot;,&quot;IO&quot;,536870916]],[&quot;^1A&quot;,[233,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;在讨论page cache前，简单描述下linux系统IO的流程。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[233,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-4e52-4655-b323-6ba3e53ce50f&quot;],[&quot;^?&quot;,&quot;~u61001e50-e971-4d21-b419-70394317a708&quot;]]],536870916]],[&quot;^1A&quot;,[233,&quot;^[&quot;,&quot;## IO\\n\\n在讨论page cache前，简单描述下linux系统IO的流程。&quot;,536870916]],[&quot;^1A&quot;,[233,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[233,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[233,&quot;^K&quot;,66,536870916]],[&quot;^1A&quot;,[233,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[233,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,73],536870916]],[&quot;^1A&quot;,[233,&quot;^17&quot;,66,536870916]],[&quot;^1A&quot;,[233,&quot;^13&quot;,66,536870916]],[&quot;^1A&quot;,[233,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[233,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;IO&quot;]],536870916]],[&quot;^1A&quot;,[233,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[233,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[233,&quot;^?&quot;,&quot;~u611b87e5-87ad-4d2d-8bd5-78b6d5452f0e&quot;,536870916]],[&quot;^1A&quot;,[234,&quot;^1E&quot;,&quot;read-e6--b5--81--e7--a8--8b-&quot;,536870916]],[&quot;^1A&quot;,[234,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627397902772_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627397902772_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;应用程序发起读请求，触发系统调用read()函数，用户态切换为内核态&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;文件系统通过目录项→inode→address_space→页缓存树，查询Page Cache是否存在&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Page Cache不存在产生缺页中断&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;CPU向DMA发出控制指令&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,4,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;DMA 控制器将数据从主存或硬盘拷贝到内核空间（kernel space）的缓冲区（read buffer）&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,5,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;DMA 磁盘控制器向 CPU 发出数据读完的信号，由 CPU 负责将数据从内核缓冲区&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;拷贝&quot;]]]],[&quot;Plain&quot;,&quot;到用户缓冲区&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,6,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;用户进程由内核态切换回用户态，获得文件数据&quot;]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;数据复制流程&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627449773135_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627449773135_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;上下文切换&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627449785047_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627449785047_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]]],&quot;^20&quot;,[],&quot;^21&quot;,5,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true]]]],536870916]],[&quot;^1A&quot;,[234,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[234,&quot;^[&quot;,&quot;## read流程\\nid:: 61001e50-e971-4d21-b419-70394317a708\\n\\n![image.png](../assets/image_1627397902772_0.png) \\n\\n1. 应用程序发起读请求，触发系统调用read()函数，用户态切换为内核态\\n2. 文件系统通过目录项→inode→address_space→页缓存树，查询Page Cache是否存在\\n3. Page Cache不存在产生缺页中断\\n4. CPU向DMA发出控制指令\\n5. DMA 控制器将数据从主存或硬盘拷贝到内核空间（kernel space）的缓冲区（read buffer）\\n6. DMA 磁盘控制器向 CPU 发出数据读完的信号，由 CPU 负责将数据从内核缓冲区**拷贝**到用户缓冲区\\n5. 用户进程由内核态切换回用户态，获得文件数据\\n\\n&gt; 数据复制流程\\n![image.png](../assets/image_1627449773135_0.png) \\n\\n&gt; 上下文切换\\n![image.png](../assets/image_1627449785047_0.png)&quot;,536870916]],[&quot;^1A&quot;,[234,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[234,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[234,&quot;^K&quot;,233,536870916]],[&quot;^1A&quot;,[234,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[234,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,73,&quot;^1L&quot;,954],536870916]],[&quot;^1A&quot;,[234,&quot;^17&quot;,66,536870916]],[&quot;^1A&quot;,[234,&quot;^13&quot;,233,536870916]],[&quot;^1A&quot;,[234,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;61001e50-e971-4d21-b419-70394317a708&quot;],536870916]],[&quot;^1A&quot;,[234,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[234,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[234,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;read流程&quot;]],536870916]],[&quot;^1A&quot;,[234,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[234,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[234,&quot;^?&quot;,&quot;~u61001e50-e971-4d21-b419-70394317a708&quot;,536870916]],[&quot;^1A&quot;,[235,&quot;^1E&quot;,&quot;write-e6--b5--81--e7--a8--8b-&quot;,536870916]],[&quot;^1A&quot;,[235,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627398203241_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627398203241_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;应用程序发起写请求，触发系统调用write()函数，用户态切换为内核态&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;文件系统通过目录项→inode→address_space→页缓存树，查询 Page Cache是否存在，如果不存在则需要创建&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Page Cache 存在后，CPU将数据从用户缓冲区拷贝到内核缓冲区，Page Cache 变为脏页，写流程返回&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;用户主动触发刷盘或者达到特定条件内核触发刷盘，唤醒 pdflush 线程，pdflush 将内核缓冲区的数据刷入磁盘&quot;]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;DMA 的全称叫直接内存存取（Direct Memory Access），是一种允许外围设备（硬件子系统）直接访问系统主内存的机制。基于 DMA 访问方式，硬件与内核缓冲区的数据传输由DMA控制器控制，CPU只需在数据传输开始和结束时做一点处理外（开始和结束时候要做中断处理），释放了CPU。目前大多数的硬件设备，包括磁盘控制器、网卡、显卡以及声卡等都支持 DMA 技术。&quot;],[&quot;Break_Line&quot;]]]]]],&quot;^20&quot;,[],&quot;^21&quot;,4,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true]]]],536870916]],[&quot;^1A&quot;,[235,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[235,&quot;^[&quot;,&quot;## write流程\\n\\n![image.png](../assets/image_1627398203241_0.png) \\n\\n1. 应用程序发起写请求，触发系统调用write()函数，用户态切换为内核态\\n2. 文件系统通过目录项→inode→address_space→页缓存树，查询 Page Cache是否存在，如果不存在则需要创建\\n3. Page Cache 存在后，CPU将数据从用户缓冲区拷贝到内核缓冲区，Page Cache 变为脏页，写流程返回\\n4. 用户主动触发刷盘或者达到特定条件内核触发刷盘，唤醒 pdflush 线程，pdflush 将内核缓冲区的数据刷入磁盘\\n\\n&gt; DMA 的全称叫直接内存存取（Direct Memory Access），是一种允许外围设备（硬件子系统）直接访问系统主内存的机制。基于 DMA 访问方式，硬件与内核缓冲区的数据传输由DMA控制器控制，CPU只需在数据传输开始和结束时做一点处理外（开始和结束时候要做中断处理），释放了CPU。目前大多数的硬件设备，包括磁盘控制器、网卡、显卡以及声卡等都支持 DMA 技术。&quot;,536870916]],[&quot;^1A&quot;,[235,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[235,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[235,&quot;^K&quot;,234,536870916]],[&quot;^1A&quot;,[235,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[235,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,954,&quot;^1L&quot;,2027],536870916]],[&quot;^1A&quot;,[235,&quot;^17&quot;,66,536870916]],[&quot;^1A&quot;,[235,&quot;^13&quot;,233,536870916]],[&quot;^1A&quot;,[235,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[235,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;write流程&quot;]],536870916]],[&quot;^1A&quot;,[235,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[235,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[235,&quot;^?&quot;,&quot;~u611b87e5-4e52-4655-b323-6ba3e53ce50f&quot;,536870916]],[&quot;^1A&quot;,[236,&quot;^1E&quot;,&quot;-e7--ae--80--e4--bb--8b-&quot;,536870916]],[&quot;^1A&quot;,[236,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;page cache用于&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;缓存文件的页数据&quot;]]]],[&quot;Plain&quot;,&quot;，页是逻辑上的概念，因此page cache是与文件系统同级的。在linux机上输入&quot;],[&quot;Code&quot;,&quot;free -m&quot;],[&quot;Plain&quot;,&quot;命令，会看到以下输出：&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627399083740_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627399083740_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;其中&quot;],[&quot;Code&quot;,&quot;buff/cache&quot;],[&quot;Plain&quot;,&quot;即表示page cache，或者是&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;buffer cache&quot;]]]],[&quot;Plain&quot;,&quot;。buffer cache用于&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;缓存块设备的块数据&quot;]]]],[&quot;Plain&quot;,&quot;，块是物理上的概念，因此buffer cache是与块设备驱动程序同级的。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;在Linux 2.4版本的内核之前，page cache与buffer cache是完全分离的。但是，块设备大多是磁盘，磁盘上的数据又大多通过文件系统来组织，这种设计导致很多数据被缓存了两次，浪费内存。所以在2.4版本内核之后，两块缓存近似融合在了一起：如果一个文件的页加载到了page cache，那么同时buffer cache只需要维护块指向页的指针就可以了。只有那些没有文件表示的块，或者绕过了文件系统直接操作（如dd命令）的块，才会真正放到buffer cache里。如下图所示，页大小为4kb，块大小为1kb。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627399229772_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627399229772_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;page cache与buffer cache的共同目的都是加速数据I/O：写数据时首先写到缓存，将写入的页标记为dirty，然后向外部存储flush，也就是缓存写机制中的write-back（另一种是write-through，Linux未采用）；读数据时首先读取缓存，如果未命中，再去外部存储读取，并且将读取来的数据也加入缓存。操作系统总是积极地将所有空闲内存都用作page cache和buffer cache，当内存不够用时也会用LRU等算法淘汰缓存页。&quot;]]]]],536870916]],[&quot;^1A&quot;,[236,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[236,&quot;^[&quot;,&quot;## 简介\\n\\npage cache用于**缓存文件的页数据**，页是逻辑上的概念，因此page cache是与文件系统同级的。在linux机上输入`free -m`命令，会看到以下输出：\\n\\n![image.png](../assets/image_1627399083740_0.png) \\n\\n其中`buff/cache`即表示page cache，或者是**buffer cache**。buffer cache用于**缓存块设备的块数据**，块是物理上的概念，因此buffer cache是与块设备驱动程序同级的。\\n\\n在Linux 2.4版本的内核之前，page cache与buffer cache是完全分离的。但是，块设备大多是磁盘，磁盘上的数据又大多通过文件系统来组织，这种设计导致很多数据被缓存了两次，浪费内存。所以在2.4版本内核之后，两块缓存近似融合在了一起：如果一个文件的页加载到了page cache，那么同时buffer cache只需要维护块指向页的指针就可以了。只有那些没有文件表示的块，或者绕过了文件系统直接操作（如dd命令）的块，才会真正放到buffer cache里。如下图所示，页大小为4kb，块大小为1kb。\\n\\n![image.png](../assets/image_1627399229772_0.png)\\n\\npage cache与buffer cache的共同目的都是加速数据I/O：写数据时首先写到缓存，将写入的页标记为dirty，然后向外部存储flush，也就是缓存写机制中的write-back（另一种是write-through，Linux未采用）；读数据时首先读取缓存，如果未命中，再去外部存储读取，并且将读取来的数据也加入缓存。操作系统总是积极地将所有空闲内存都用作page cache和buffer cache，当内存不够用时也会用LRU等算法淘汰缓存页。&quot;,536870916]],[&quot;^1A&quot;,[236,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[236,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[236,&quot;^K&quot;,233,536870916]],[&quot;^1A&quot;,[236,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[236,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2027,&quot;^1L&quot;,3681],536870916]],[&quot;^1A&quot;,[236,&quot;^17&quot;,66,536870916]],[&quot;^1A&quot;,[236,&quot;^13&quot;,66,536870916]],[&quot;^1A&quot;,[236,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[236,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;简介&quot;]],536870916]],[&quot;^1A&quot;,[236,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[236,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[236,&quot;^?&quot;,&quot;~u611b87e5-43b2-42cb-973d-aa9ed25724c0&quot;,536870916]],[&quot;^1A&quot;,[237,&quot;^1E&quot;,&quot;Project_management&quot;,536870916]],[&quot;^1A&quot;,[237,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[237,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-2592-42a6-80be-6223d31f6819&quot;]]],536870916]],[&quot;^1A&quot;,[237,&quot;^[&quot;,&quot;## Project management&quot;,536870916]],[&quot;^1A&quot;,[237,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[237,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[237,&quot;^K&quot;,73,536870916]],[&quot;^1A&quot;,[237,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[237,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,22],536870916]],[&quot;^1A&quot;,[237,&quot;^17&quot;,73,536870916]],[&quot;^1A&quot;,[237,&quot;^13&quot;,73,536870916]],[&quot;^1A&quot;,[237,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[237,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Project management&quot;]],536870916]],[&quot;^1A&quot;,[237,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[237,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[237,&quot;^?&quot;,&quot;~u611b87e5-02de-45bc-9dfc-8b87acff9124&quot;,536870916]],[&quot;^1A&quot;,[238,&quot;^1E&quot;,&quot;Help_instead_of_judgement&quot;,536870916]],[&quot;^1A&quot;,[238,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[238,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[238,&quot;^[&quot;,&quot;Help instead of judgement&quot;,536870916]],[&quot;^1A&quot;,[238,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[238,&quot;^K&quot;,237,536870916]],[&quot;^1A&quot;,[238,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[238,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,22,&quot;^1L&quot;,50],536870916]],[&quot;^1A&quot;,[238,&quot;^17&quot;,73,536870916]],[&quot;^1A&quot;,[238,&quot;^13&quot;,237,536870916]],[&quot;^1A&quot;,[238,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Help instead of judgement&quot;]],536870916]],[&quot;^1A&quot;,[238,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[238,&quot;^?&quot;,&quot;~u611b87e5-2592-42a6-80be-6223d31f6819&quot;,536870916]],[&quot;^1A&quot;,[247,&quot;^1E&quot;,&quot;raft-e5--9b--be--e8--a7--a3-&quot;,536870916]],[&quot;^1A&quot;,[247,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[247,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[247,&quot;^[&quot;,&quot;[raft图解](http://thesecretlivesofdata.com/raft/)&quot;,536870916]],[&quot;^1A&quot;,[247,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[247,&quot;^K&quot;,72,536870916]],[&quot;^1A&quot;,[247,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[247,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,54],536870916]],[&quot;^1A&quot;,[247,&quot;^17&quot;,72,536870916]],[&quot;^1A&quot;,[247,&quot;^13&quot;,72,536870916]],[&quot;^1A&quot;,[247,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;http&quot;,&quot;^1Z&quot;,&quot;thesecretlivesofdata.com/raft/&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;raft图解&quot;]],&quot;^1W&quot;,&quot;[raft图解](http://thesecretlivesofdata.com/raft/)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[247,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[247,&quot;^?&quot;,&quot;~u611b87e5-7e99-48db-be6e-2097e4d489eb&quot;,536870916]],[&quot;^1A&quot;,[248,&quot;^1E&quot;,&quot;state&quot;,536870916]],[&quot;^1A&quot;,[248,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[248,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e5-888c-428d-b5f7-edda5b46c8c0&quot;],[&quot;^?&quot;,&quot;~u611b87e5-1ae6-4bbe-b163-463753ac9416&quot;],[&quot;^?&quot;,&quot;~u611b87e5-d53b-4d46-8f25-680a03f12960&quot;]]],536870916]],[&quot;^1A&quot;,[248,&quot;^[&quot;,&quot;## state&quot;,536870916]],[&quot;^1A&quot;,[248,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[248,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[248,&quot;^K&quot;,247,536870916]],[&quot;^1A&quot;,[248,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[248,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,54,&quot;^1L&quot;,63],536870916]],[&quot;^1A&quot;,[248,&quot;^17&quot;,72,536870916]],[&quot;^1A&quot;,[248,&quot;^13&quot;,72,536870916]],[&quot;^1A&quot;,[248,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[248,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;state&quot;]],536870916]],[&quot;^1A&quot;,[248,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[248,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[248,&quot;^?&quot;,&quot;~u611b87e5-76b0-4276-afa3-92453605dcb2&quot;,536870916]],[&quot;^1A&quot;,[249,&quot;^1E&quot;,&quot;Leader&quot;,536870916]],[&quot;^1A&quot;,[249,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[249,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[249,&quot;^[&quot;,&quot;Leader&quot;,536870916]],[&quot;^1A&quot;,[249,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[249,&quot;^K&quot;,248,536870916]],[&quot;^1A&quot;,[249,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[249,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,63,&quot;^1L&quot;,73],536870916]],[&quot;^1A&quot;,[249,&quot;^17&quot;,72,536870916]],[&quot;^1A&quot;,[249,&quot;^13&quot;,248,536870916]],[&quot;^1A&quot;,[249,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Leader&quot;]],536870916]],[&quot;^1A&quot;,[249,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[249,&quot;^?&quot;,&quot;~u611b87e5-d53b-4d46-8f25-680a03f12960&quot;,536870916]],[&quot;^1A&quot;,[250,&quot;^1E&quot;,&quot;Follower&quot;,536870916]],[&quot;^1A&quot;,[250,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[250,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[250,&quot;^[&quot;,&quot;Follower&quot;,536870916]],[&quot;^1A&quot;,[250,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[250,&quot;^K&quot;,249,536870916]],[&quot;^1A&quot;,[250,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[250,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,73,&quot;^1L&quot;,85],536870916]],[&quot;^1A&quot;,[250,&quot;^17&quot;,72,536870916]],[&quot;^1A&quot;,[250,&quot;^13&quot;,248,536870916]],[&quot;^1A&quot;,[250,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Follower&quot;]],536870916]],[&quot;^1A&quot;,[250,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[250,&quot;^?&quot;,&quot;~u611b87e5-1ae6-4bbe-b163-463753ac9416&quot;,536870916]],[&quot;^1A&quot;,[251,&quot;^1E&quot;,&quot;Candidate&quot;,536870916]],[&quot;^1A&quot;,[251,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[251,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[251,&quot;^[&quot;,&quot;Candidate&quot;,536870916]],[&quot;^1A&quot;,[251,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[251,&quot;^K&quot;,250,536870916]],[&quot;^1A&quot;,[251,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[251,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,85,&quot;^1L&quot;,98],536870916]],[&quot;^1A&quot;,[251,&quot;^17&quot;,72,536870916]],[&quot;^1A&quot;,[251,&quot;^13&quot;,248,536870916]],[&quot;^1A&quot;,[251,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Candidate&quot;]],536870916]],[&quot;^1A&quot;,[251,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[251,&quot;^?&quot;,&quot;~u611b87e5-888c-428d-b5f7-edda5b46c8c0&quot;,536870916]],[&quot;^1A&quot;,[252,&quot;^1E&quot;,&quot;Leader_election&quot;,536870916]],[&quot;^1A&quot;,[252,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;The &quot;],[&quot;Code&quot;,&quot;candidate&quot;],[&quot;Plain&quot;,&quot; becomes the &quot;],[&quot;Code&quot;,&quot;leader&quot;],[&quot;Plain&quot;,&quot; if it gets votes from &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;a majority of&quot;]]]],[&quot;Plain&quot;,&quot; nodes.This process is called leader election.&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[252,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[252,&quot;^[&quot;,&quot;## Leader election\\nThe `candidate` becomes the `leader` if it gets votes from **a majority of** nodes.This process is called leader election.&quot;,536870916]],[&quot;^1A&quot;,[252,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[252,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[252,&quot;^K&quot;,248,536870916]],[&quot;^1A&quot;,[252,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[252,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,98,&quot;^1L&quot;,240],536870916]],[&quot;^1A&quot;,[252,&quot;^17&quot;,72,536870916]],[&quot;^1A&quot;,[252,&quot;^13&quot;,72,536870916]],[&quot;^1A&quot;,[252,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[252,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Leader election&quot;]],536870916]],[&quot;^1A&quot;,[252,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[252,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[252,&quot;^?&quot;,&quot;~u611b87e5-2a04-4126-a84b-3e60ae77f0cf&quot;,536870916]],[&quot;^1A&quot;,[253,&quot;^1E&quot;,&quot;Log_replication&quot;,536870916]],[&quot;^1A&quot;,[253,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[253,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[253,&quot;^[&quot;,&quot;## Log replication&quot;,536870916]],[&quot;^1A&quot;,[253,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[253,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[253,&quot;^K&quot;,252,536870916]],[&quot;^1A&quot;,[253,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[253,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,240,&quot;^1L&quot;,258],536870916]],[&quot;^1A&quot;,[253,&quot;^17&quot;,72,536870916]],[&quot;^1A&quot;,[253,&quot;^13&quot;,72,536870916]],[&quot;^1A&quot;,[253,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[253,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Log replication&quot;]],536870916]],[&quot;^1A&quot;,[253,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[253,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[253,&quot;^?&quot;,&quot;~u611b87e5-2857-43a4-9b9d-a78aa19f3061&quot;,536870916]],[&quot;^1A&quot;,[254,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[254,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[254,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-c64d-401b-a46b-894dd37ff58d&quot;],[&quot;^?&quot;,&quot;~u611b87e6-68f9-4b9d-a3d3-ef24a77aec0b&quot;],[&quot;^?&quot;,&quot;~u611b87e6-dfa7-4833-8467-fe50f8684f89&quot;]]],536870916]],[&quot;^1A&quot;,[254,&quot;^[&quot;,&quot;## [[数据类型]]&quot;,536870916]],[&quot;^1A&quot;,[254,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[254,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[254,&quot;^K&quot;,79,536870916]],[&quot;^1A&quot;,[254,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[254,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,22],536870916]],[&quot;^1A&quot;,[254,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[254,&quot;^13&quot;,79,536870916]],[&quot;^1A&quot;,[254,&quot;^12&quot;,67,536870916]],[&quot;^1A&quot;,[254,&quot;^L&quot;,67,536870916]],[&quot;^1A&quot;,[254,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[254,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;数据类型&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[数据类型]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[254,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[254,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[254,&quot;^?&quot;,&quot;~u611b87e6-1933-407c-adfa-b603ca5036b1&quot;,536870916]],[&quot;^1A&quot;,[255,&quot;^1E&quot;,&quot;-e5--86--85--e5--ad--98--e5--9b--9e--e6--94--b6-&quot;,536870916]],[&quot;^1A&quot;,[255,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;因为C语言并不具备自动内存回收功能，所以Redis在自己的对象系统中构建了一个&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;引用计数&quot;]]]],[&quot;Plain&quot;,&quot;（reference counting）技术实现的内存回收机制，通过这一机制，程序可以通过跟踪对象的引用计数信息，在适当的时候自动释放对象并进行内存回收。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[255,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[255,&quot;^[&quot;,&quot;## 内存回收\\n\\n因为C语言并不具备自动内存回收功能，所以Redis在自己的对象系统中构建了一个**引用计数**（reference counting）技术实现的内存回收机制，通过这一机制，程序可以通过跟踪对象的引用计数信息，在适当的时候自动释放对象并进行内存回收。&quot;,536870916]],[&quot;^1A&quot;,[255,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[255,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[255,&quot;^K&quot;,254,536870916]],[&quot;^1A&quot;,[255,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[255,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,22,&quot;^1L&quot;,365],536870916]],[&quot;^1A&quot;,[255,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[255,&quot;^13&quot;,254,536870916]],[&quot;^1A&quot;,[255,&quot;^12&quot;,67,536870916]],[&quot;^1A&quot;,[255,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[255,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内存回收&quot;]],536870916]],[&quot;^1A&quot;,[255,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[255,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[255,&quot;^?&quot;,&quot;~u611b87e6-dfa7-4833-8467-fe50f8684f89&quot;,536870916]],[&quot;^1A&quot;,[256,&quot;^1E&quot;,&quot;-e5--af--b9--e8--b1--a1--e5--85--b1--e4--ba--ab-&quot;,536870916]],[&quot;^1A&quot;,[256,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;除了用于实现引用计数内存回收机制之外，对象的引用计数属性还带有对象共享的作用。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;目前来说，Redis会在初始化服务器时，创建一万个字符串对象，这些对象包含了从0到9999的所有整数值，当服务器需要用到值为0到9999的字符串对象时，服务器就会使用这些共享对象，而不是新创建对象。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;为什么Redis不共享所有字符串对象，像Java字符串常量池一样？&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;当服务器考虑将一个共享对象设置为键的值对象时，程序需要先检查给定的共享对象和键想创建的目标对象是否完全相同，只有在共享对象和目标对象完全相同的情况下，程序才会将共享对象用作键的值对象，而一个共享对象保存的值越复杂，验证共享对象和目标对象是否相同所需的复杂度就会越高，消耗的CPU时间也会越多。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;如果共享对象是保存整数值的字符串对象，那么验证操作的复杂度为O（1）；如果共享对象是保存字符串值的字符串对象，那么验证操作的复杂度为O（N）；如果共享对象是包含了多个值（或者对象的）对象，比如列表对象或者哈希对象，那么验证操作的复杂度将会是O（N 2）。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[256,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[256,&quot;^[&quot;,&quot;## 对象共享\\n\\n除了用于实现引用计数内存回收机制之外，对象的引用计数属性还带有对象共享的作用。\\n\\n目前来说，Redis会在初始化服务器时，创建一万个字符串对象，这些对象包含了从0到9999的所有整数值，当服务器需要用到值为0到9999的字符串对象时，服务器就会使用这些共享对象，而不是新创建对象。\\n&gt; 为什么Redis不共享所有字符串对象，像Java字符串常量池一样？\\n当服务器考虑将一个共享对象设置为键的值对象时，程序需要先检查给定的共享对象和键想创建的目标对象是否完全相同，只有在共享对象和目标对象完全相同的情况下，程序才会将共享对象用作键的值对象，而一个共享对象保存的值越复杂，验证共享对象和目标对象是否相同所需的复杂度就会越高，消耗的CPU时间也会越多。\\n\\n如果共享对象是保存整数值的字符串对象，那么验证操作的复杂度为O（1）；如果共享对象是保存字符串值的字符串对象，那么验证操作的复杂度为O（N）；如果共享对象是包含了多个值（或者对象的）对象，比如列表对象或者哈希对象，那么验证操作的复杂度将会是O（N 2）。&quot;,536870916]],[&quot;^1A&quot;,[256,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[256,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[256,&quot;^K&quot;,255,536870916]],[&quot;^1A&quot;,[256,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[256,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,365,&quot;^1L&quot;,1680],536870916]],[&quot;^1A&quot;,[256,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[256,&quot;^13&quot;,254,536870916]],[&quot;^1A&quot;,[256,&quot;^12&quot;,67,536870916]],[&quot;^1A&quot;,[256,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[256,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;对象共享&quot;]],536870916]],[&quot;^1A&quot;,[256,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[256,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[256,&quot;^?&quot;,&quot;~u611b87e6-68f9-4b9d-a3d3-ef24a77aec0b&quot;,536870916]],[&quot;^1A&quot;,[257,&quot;^1E&quot;,&quot;-e5--af--b9--e8--b1--a1--e7--a9--ba--e8--bd--ac--e6--97--b6--e9--95--bf-&quot;,536870916]],[&quot;^1A&quot;,[257,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;除了前面介绍过的type、encoding、ptr和refcount四个属性之外，redisObject结构包含的最后一个属性为lru属性，该属性记录了对象最后一次被命令程序访问的时间。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[257,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[257,&quot;^[&quot;,&quot;## 对象空转时长\\n\\n除了前面介绍过的type、encoding、ptr和refcount四个属性之外，redisObject结构包含的最后一个属性为lru属性，该属性记录了对象最后一次被命令程序访问的时间。&quot;,536870916]],[&quot;^1A&quot;,[257,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[257,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[257,&quot;^K&quot;,256,536870916]],[&quot;^1A&quot;,[257,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[257,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1680,&quot;^1L&quot;,1918],536870916]],[&quot;^1A&quot;,[257,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[257,&quot;^13&quot;,254,536870916]],[&quot;^1A&quot;,[257,&quot;^12&quot;,67,536870916]],[&quot;^1A&quot;,[257,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[257,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;对象空转时长&quot;]],536870916]],[&quot;^1A&quot;,[257,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[257,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[257,&quot;^?&quot;,&quot;~u611b87e6-c64d-401b-a46b-894dd37ff58d&quot;,536870916]],[&quot;^1A&quot;,[258,&quot;^1E&quot;,&quot;-e5--8d--95--e6--9c--ba--e6--95--b0--e6--8d--ae--e5--ba--93-&quot;,536870916]],[&quot;^1A&quot;,[258,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[258,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-5664-4046-b4b3-2e07a21fa5f3&quot;],[&quot;^?&quot;,&quot;~u611b87e6-6ee0-4846-b7ba-e35165080b90&quot;],[&quot;^?&quot;,&quot;~u611b87e6-270b-471d-acc3-6c489527aa3d&quot;],[&quot;^?&quot;,&quot;~u611b87e6-1688-422f-8491-cf072848e932&quot;],[&quot;^?&quot;,&quot;~u611b87e6-3713-478c-942d-b5e98d570625&quot;]]],536870916]],[&quot;^1A&quot;,[258,&quot;^[&quot;,&quot;## 单机数据库&quot;,536870916]],[&quot;^1A&quot;,[258,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[258,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[258,&quot;^K&quot;,254,536870916]],[&quot;^1A&quot;,[258,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[258,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1918,&quot;^1L&quot;,1939],536870916]],[&quot;^1A&quot;,[258,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[258,&quot;^13&quot;,79,536870916]],[&quot;^1A&quot;,[258,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[258,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;单机数据库&quot;]],536870916]],[&quot;^1A&quot;,[258,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[258,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[258,&quot;^?&quot;,&quot;~u611b87e6-67de-4306-bb88-760f7c967eeb&quot;,536870916]],[&quot;^1A&quot;,[259,&quot;^1E&quot;,&quot;-e6--95--b0--e6--8d--ae--e5--ba--93--e6--95--b0--e7--bb--84-&quot;,536870916]],[&quot;^1A&quot;,[259,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis数据库以数组存储。默认情况下，Redis客户端的目标数据库为0号数据库，但客户端可以通过执行SELECT命令来切换目标数据库。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gsuc5n2c4dj30su0hejsa.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsuc5n2c4dj30su0hejsa.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsuc5n2c4dj30su0hejsa.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[259,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[259,&quot;^[&quot;,&quot;## 数据库数组\\n\\nRedis数据库以数组存储。默认情况下，Redis客户端的目标数据库为0号数据库，但客户端可以通过执行SELECT命令来切换目标数据库。\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gsuc5n2c4dj30su0hejsa.jpg&quot;,536870916]],[&quot;^1A&quot;,[259,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[259,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[259,&quot;^K&quot;,258,536870916]],[&quot;^1A&quot;,[259,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[259,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1939,&quot;^1L&quot;,2209],536870916]],[&quot;^1A&quot;,[259,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[259,&quot;^13&quot;,258,536870916]],[&quot;^1A&quot;,[259,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[259,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;数据库数组&quot;]],536870916]],[&quot;^1A&quot;,[259,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[259,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[259,&quot;^?&quot;,&quot;~u611b87e6-3713-478c-942d-b5e98d570625&quot;,536870916]],[&quot;^1A&quot;,[260,&quot;^1E&quot;,&quot;-e6--95--b0--e6--8d--ae--e5--ba--93--e9--94--ae--e7--a9--ba--e9--97--b4-&quot;,536870916]],[&quot;^1A&quot;,[260,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis是一个键值对（key-value pair）数据库服务器，服务器中的每个数据库都由一个redis.h/redisDb结构表示，其中，redisDb结构的dict字典保存了数据库中的所有键值对，我们将这个字典称为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;键空间（key space）&quot;]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627281111562_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627281111562_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[260,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[260,&quot;^[&quot;,&quot;## 数据库键空间\\n\\nRedis是一个键值对（key-value pair）数据库服务器，服务器中的每个数据库都由一个redis.h/redisDb结构表示，其中，redisDb结构的dict字典保存了数据库中的所有键值对，我们将这个字典称为**键空间（key space）**\\n\\n![image.png](../assets/image_1627281111562_0.png)&quot;,536870916]],[&quot;^1A&quot;,[260,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[260,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[260,&quot;^K&quot;,259,536870916]],[&quot;^1A&quot;,[260,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[260,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2209,&quot;^1L&quot;,2567],536870916]],[&quot;^1A&quot;,[260,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[260,&quot;^13&quot;,258,536870916]],[&quot;^1A&quot;,[260,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[260,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;数据库键空间&quot;]],536870916]],[&quot;^1A&quot;,[260,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[260,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[260,&quot;^?&quot;,&quot;~u611b87e6-1688-422f-8491-cf072848e932&quot;,536870916]],[&quot;^1A&quot;,[261,&quot;^1E&quot;,&quot;-e8--bf--87--e6--9c--9f--e5--ad--97--e5--85--b8-&quot;,536870916]],[&quot;^1A&quot;,[261,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;redisDb结构的expires字典保存了数据库中所有键的过期时间，我们称这个字典为过期字典。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627282007555_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627282007555_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;对过期字典的淘汰策略，Redis服务器使用的是&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;惰性删除&quot;]]]],[&quot;Plain&quot;,&quot;和&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;定期删除&quot;]]]],[&quot;Plain&quot;,&quot;两种策略：通过配合使用这两种删除策略，服务器可以很好地在合理使用CPU时间和避免浪费内存空间之间取得平衡。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;惰性删除：放任键过期不管，但是每次从键空间中获取键时，都检查取得的键是否过期，如果过期的话，就删除该键；如果没有过期，就返回该键。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;定期删除：每隔一段时间，程序就对数据库进行一次检查，删除里面的过期键。至于要删除多少过期键，以及要检查多少个数据库，则由算法决定。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[261,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[261,&quot;^[&quot;,&quot;## 过期字典\\n\\nredisDb结构的expires字典保存了数据库中所有键的过期时间，我们称这个字典为过期字典。\\n![image.png](../assets/image_1627282007555_0.png)\\n\\n对过期字典的淘汰策略，Redis服务器使用的是**惰性删除**和**定期删除**两种策略：通过配合使用这两种删除策略，服务器可以很好地在合理使用CPU时间和避免浪费内存空间之间取得平衡。\\n\\n惰性删除：放任键过期不管，但是每次从键空间中获取键时，都检查取得的键是否过期，如果过期的话，就删除该键；如果没有过期，就返回该键。\\n\\n定期删除：每隔一段时间，程序就对数据库进行一次检查，删除里面的过期键。至于要删除多少过期键，以及要检查多少个数据库，则由算法决定。&quot;,536870916]],[&quot;^1A&quot;,[261,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[261,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[261,&quot;^K&quot;,260,536870916]],[&quot;^1A&quot;,[261,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[261,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2567,&quot;^1L&quot;,3424],536870916]],[&quot;^1A&quot;,[261,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[261,&quot;^13&quot;,258,536870916]],[&quot;^1A&quot;,[261,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[261,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;过期字典&quot;]],536870916]],[&quot;^1A&quot;,[261,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[261,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[261,&quot;^?&quot;,&quot;~u611b87e6-270b-471d-acc3-6c489527aa3d&quot;,536870916]],[&quot;^1A&quot;,[262,&quot;^1E&quot;,&quot;-e6--8c--81--e4--b9--85--e5--8c--96-&quot;,536870916]],[&quot;^1A&quot;,[262,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[262,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-ed8c-4141-b5ca-b5a4fed0ff05&quot;],[&quot;^?&quot;,&quot;~u611b87e6-b640-4f1b-9e2b-f5ef7b7688bc&quot;],[&quot;^?&quot;,&quot;~u611b87e6-4318-4e69-b197-1c53bfcaa267&quot;],[&quot;^?&quot;,&quot;~u60fe5c3c-13b1-40ea-b8d5-70af1c3bdbc4&quot;]]],536870916]],[&quot;^1A&quot;,[262,&quot;^[&quot;,&quot;## 持久化&quot;,536870916]],[&quot;^1A&quot;,[262,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[262,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[262,&quot;^K&quot;,261,536870916]],[&quot;^1A&quot;,[262,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[262,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3424,&quot;^1L&quot;,3440],536870916]],[&quot;^1A&quot;,[262,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[262,&quot;^13&quot;,258,536870916]],[&quot;^1A&quot;,[262,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[262,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;持久化&quot;]],536870916]],[&quot;^1A&quot;,[262,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[262,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[262,&quot;^?&quot;,&quot;~u611b87e6-6ee0-4846-b7ba-e35165080b90&quot;,536870916]],[&quot;^1A&quot;,[263,&quot;^1E&quot;,&quot;RDB-e6--8c--81--e4--b9--85--e5--8c--96-&quot;,536870916]],[&quot;^1A&quot;,[263,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;因为Redis是内存数据库，它将自己的数据库状态储存在内存里面，所以如果不想办法将储存在内存中的数据库状态保存到磁盘里面，那么一旦服务器进程退出，服务器中的数据库状态也会消失不见。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;为了解决这个问题，Redis提供了RDB持久化功能，这个功能可以将Redis在内存中的数据库状态保存到磁盘里面，避免数据意外丢失。RDB结构如下：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627282591639_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627282591639_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[263,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[263,&quot;^[&quot;,&quot;## RDB持久化\\nid:: 60fe5c3c-13b1-40ea-b8d5-70af1c3bdbc4\\n\\n因为Redis是内存数据库，它将自己的数据库状态储存在内存里面，所以如果不想办法将储存在内存中的数据库状态保存到磁盘里面，那么一旦服务器进程退出，服务器中的数据库状态也会消失不见。\\n\\n为了解决这个问题，Redis提供了RDB持久化功能，这个功能可以将Redis在内存中的数据库状态保存到磁盘里面，避免数据意外丢失。RDB结构如下：\\n\\n![image.png](../assets/image_1627282591639_0.png)&quot;,536870916]],[&quot;^1A&quot;,[263,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[263,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[263,&quot;^K&quot;,262,536870916]],[&quot;^1A&quot;,[263,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[263,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3440,&quot;^1L&quot;,4032],536870916]],[&quot;^1A&quot;,[263,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[263,&quot;^13&quot;,262,536870916]],[&quot;^1A&quot;,[263,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fe5c3c-13b1-40ea-b8d5-70af1c3bdbc4&quot;],536870916]],[&quot;^1A&quot;,[263,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[263,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[263,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;RDB持久化&quot;]],536870916]],[&quot;^1A&quot;,[263,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[263,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[263,&quot;^?&quot;,&quot;~u60fe5c3c-13b1-40ea-b8d5-70af1c3bdbc4&quot;,536870916]],[&quot;^1A&quot;,[264,&quot;^1E&quot;,&quot;AOF-e6--8c--81--e4--b9--85--e5--8c--96-&quot;,536870916]],[&quot;^1A&quot;,[264,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;除了RDB持久化功能之外，Redis还提供了&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;AOF（Append Only File）&quot;]]]],[&quot;Plain&quot;,&quot;持久化功能。与RDB持久化通过保存数据库中的键值对来记录数据库状态不同，AOF持久化是通过保存Redis服务器所执行的写命令来记录数据库状态的。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;当AOF持久化功能处于打开状态时，服务器在执行完一个写命令之后，会以协议格式将被执行的写命令追加到服务器状态的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;aof_buf缓冲区&quot;]]]],[&quot;Plain&quot;,&quot;的末尾。因为服务器在处理文件事件时可能会执行写命令，使得一些内容被追加到aof_buf缓冲区里面，所以在服务器每次结束一个事件循环之前，它都会调用&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;flushAppendOnlyFile&quot;]]]],[&quot;Plain&quot;,&quot;函数，考虑是否需要将aof_buf缓冲区中的内容写入和保存到AOF文件里面。&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;flushAppendOnlyFile&quot;]]]],[&quot;Plain&quot;,&quot;函数行为由appendfsync选项的值决定。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627282886741_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627282886741_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[264,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[264,&quot;^[&quot;,&quot;## AOF持久化\\n\\n除了RDB持久化功能之外，Redis还提供了**AOF（Append Only File）**持久化功能。与RDB持久化通过保存数据库中的键值对来记录数据库状态不同，AOF持久化是通过保存Redis服务器所执行的写命令来记录数据库状态的。\\n\\n当AOF持久化功能处于打开状态时，服务器在执行完一个写命令之后，会以协议格式将被执行的写命令追加到服务器状态的**aof_buf缓冲区**的末尾。因为服务器在处理文件事件时可能会执行写命令，使得一些内容被追加到aof_buf缓冲区里面，所以在服务器每次结束一个事件循环之前，它都会调用**flushAppendOnlyFile**函数，考虑是否需要将aof_buf缓冲区中的内容写入和保存到AOF文件里面。**flushAppendOnlyFile**函数行为由appendfsync选项的值决定。\\n\\n![image.png](../assets/image_1627282886741_0.png)&quot;,536870916]],[&quot;^1A&quot;,[264,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[264,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[264,&quot;^K&quot;,263,536870916]],[&quot;^1A&quot;,[264,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[264,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,4032,&quot;^1L&quot;,4975],536870916]],[&quot;^1A&quot;,[264,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[264,&quot;^13&quot;,262,536870916]],[&quot;^1A&quot;,[264,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[264,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;AOF持久化&quot;]],536870916]],[&quot;^1A&quot;,[264,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[264,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[264,&quot;^?&quot;,&quot;~u611b87e6-4318-4e69-b197-1c53bfcaa267&quot;,536870916]],[&quot;^1A&quot;,[265,&quot;^1E&quot;,&quot;AOF-e7--b3--bb--e7--bb--9f--e7--bc--93--e5--ad--98-&quot;,536870916]],[&quot;^1A&quot;,[265,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;为了提高文件的写入效率，在现代操作系统中，当用户调用write函数，将一些数据写入到文件的时候，操作系统通常会将写入数据暂时保存在一个内存缓冲区里面，等到缓冲区的空间被填满、或者超过了指定的时限之后，才真正地将缓冲区中的数据写入到磁盘里面。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;这种做法虽然提高了效率，但也为写入数据带来了安全问题，因为如果计算机发生停机，那么保存在内存缓冲区里面的写入数据将会丢失。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;为此，系统提供了fsync和fdatasync两个同步函数，它们可以强制让操作系统立即将缓冲区中的数据写入到硬盘里面，从而确保写入数据的安全性。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[265,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[265,&quot;^[&quot;,&quot;## AOF系统缓存\\n\\n为了提高文件的写入效率，在现代操作系统中，当用户调用write函数，将一些数据写入到文件的时候，操作系统通常会将写入数据暂时保存在一个内存缓冲区里面，等到缓冲区的空间被填满、或者超过了指定的时限之后，才真正地将缓冲区中的数据写入到磁盘里面。\\n\\n这种做法虽然提高了效率，但也为写入数据带来了安全问题，因为如果计算机发生停机，那么保存在内存缓冲区里面的写入数据将会丢失。\\n\\n为此，系统提供了fsync和fdatasync两个同步函数，它们可以强制让操作系统立即将缓冲区中的数据写入到硬盘里面，从而确保写入数据的安全性。&quot;,536870916]],[&quot;^1A&quot;,[265,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[265,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[265,&quot;^K&quot;,264,536870916]],[&quot;^1A&quot;,[265,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[265,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,4975,&quot;^1L&quot;,5749],536870916]],[&quot;^1A&quot;,[265,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[265,&quot;^13&quot;,262,536870916]],[&quot;^1A&quot;,[265,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[265,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;AOF系统缓存&quot;]],536870916]],[&quot;^1A&quot;,[265,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[265,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[265,&quot;^?&quot;,&quot;~u611b87e6-b640-4f1b-9e2b-f5ef7b7688bc&quot;,536870916]],[&quot;^1A&quot;,[266,&quot;^1E&quot;,&quot;AOF-e9--87--8d--e5--86--99-&quot;,536870916]],[&quot;^1A&quot;,[266,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;为了解决AOF文件体积膨胀的问题，Redis提供了&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;AOF文件重写（rewrite）&quot;]]]],[&quot;Plain&quot;,&quot;功能。通过该功能，Redis服务器可以创建一个新的AOF文件来替代现有的AOF文件，新旧两个AOF文件所保存的数据库状态相同，但新AOF文件不会包含任何浪费空间的冗余命令，所以新AOF文件的体积通常会比旧AOF文件的体积要小得多。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;文件重写通过把多条更新命令合并一条，并保持数据的最终一致性。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[266,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[266,&quot;^[&quot;,&quot;## AOF重写\\n\\n为了解决AOF文件体积膨胀的问题，Redis提供了**AOF文件重写（rewrite）**功能。通过该功能，Redis服务器可以创建一个新的AOF文件来替代现有的AOF文件，新旧两个AOF文件所保存的数据库状态相同，但新AOF文件不会包含任何浪费空间的冗余命令，所以新AOF文件的体积通常会比旧AOF文件的体积要小得多。\\n\\n文件重写通过把多条更新命令合并一条，并保持数据的最终一致性。&quot;,536870916]],[&quot;^1A&quot;,[266,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[266,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[266,&quot;^K&quot;,265,536870916]],[&quot;^1A&quot;,[266,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[266,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5749,&quot;^1L&quot;,6266],536870916]],[&quot;^1A&quot;,[266,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[266,&quot;^13&quot;,262,536870916]],[&quot;^1A&quot;,[266,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[266,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;AOF重写&quot;]],536870916]],[&quot;^1A&quot;,[266,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[266,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[266,&quot;^?&quot;,&quot;~u611b87e6-ed8c-4141-b5ca-b5a4fed0ff05&quot;,536870916]],[&quot;^1A&quot;,[267,&quot;^1E&quot;,&quot;-e6--95--b0--e6--8d--ae--e5--ba--93--e4--ba--8b--e4--bb--b6-&quot;,536870916]],[&quot;^1A&quot;,[267,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[267,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-f2a9-4e8c-998f-b4e06afa729c&quot;]]],536870916]],[&quot;^1A&quot;,[267,&quot;^[&quot;,&quot;## 数据库事件&quot;,536870916]],[&quot;^1A&quot;,[267,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[267,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[267,&quot;^K&quot;,262,536870916]],[&quot;^1A&quot;,[267,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[267,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,6266,&quot;^1L&quot;,6288],536870916]],[&quot;^1A&quot;,[267,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[267,&quot;^13&quot;,258,536870916]],[&quot;^1A&quot;,[267,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[267,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;数据库事件&quot;]],536870916]],[&quot;^1A&quot;,[267,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[267,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[267,&quot;^?&quot;,&quot;~u611b87e6-5664-4046-b4b3-2e07a21fa5f3&quot;,536870916]],[&quot;^1A&quot;,[268,&quot;^1E&quot;,&quot;-e6--96--87--e4--bb--b6--e4--ba--8b--e4--bb--b6--e5--a4--84--e7--90--86--e5--99--a8-&quot;,536870916]],[&quot;^1A&quot;,[268,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis基于Reactor模式(参考 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;nio&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[nio]]&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; )  开发了自己的网络事件处理器：这个处理器被称为文件事件处理器（file event handler）。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;文件事件处理器使用I/O多路复用（multiplexing）程序来同时监听多个套接字，并根据套接字目前执行的任务来为套接字关联不同的事件处理器。当被监听的套接字准备好执行连接应答（accept）、读取（read）、写入（write）、关闭（close）等操作时，与操作相对应的文件事件就会产生，这时文件事件处理器就会调用套接字之前关联好的事件处理器来处理这些事件。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627283419048_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627283419048_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[268,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[268,&quot;^[&quot;,&quot;## 文件事件处理器\\n\\nRedis基于Reactor模式(参考 [[nio]] )  开发了自己的网络事件处理器：这个处理器被称为文件事件处理器（file event handler）。\\n\\n文件事件处理器使用I/O多路复用（multiplexing）程序来同时监听多个套接字，并根据套接字目前执行的任务来为套接字关联不同的事件处理器。当被监听的套接字准备好执行连接应答（accept）、读取（read）、写入（write）、关闭（close）等操作时，与操作相对应的文件事件就会产生，这时文件事件处理器就会调用套接字之前关联好的事件处理器来处理这些事件。\\n\\n![image.png](../assets/image_1627283419048_0.png)&quot;,536870916]],[&quot;^1A&quot;,[268,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[268,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[268,&quot;^K&quot;,267,536870916]],[&quot;^1A&quot;,[268,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[268,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,6288,&quot;^1L&quot;,7029],536870916]],[&quot;^1A&quot;,[268,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[268,&quot;^13&quot;,267,536870916]],[&quot;^1A&quot;,[268,&quot;^12&quot;,70,536870916]],[&quot;^1A&quot;,[268,&quot;^L&quot;,70,536870916]],[&quot;^1A&quot;,[268,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[268,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;文件事件处理器&quot;]],536870916]],[&quot;^1A&quot;,[268,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[268,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[268,&quot;^?&quot;,&quot;~u611b87e6-f2a9-4e8c-998f-b4e06afa729c&quot;,536870916]],[&quot;^1A&quot;,[269,&quot;^1E&quot;,&quot;-e5--a4--9a--e6--9c--ba--e6--95--b0--e6--8d--ae--e5--ba--93-&quot;,536870916]],[&quot;^1A&quot;,[269,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[269,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-3c4f-4b94-8f88-abc06122c29b&quot;],[&quot;^?&quot;,&quot;~u611b87e6-cbf8-44ff-84d3-a8b5abb025f2&quot;],[&quot;^?&quot;,&quot;~u611b87e6-5348-4c02-9cf2-bea63aa327e0&quot;],[&quot;^?&quot;,&quot;~u611b87e6-6b28-4960-b80f-afddba6a71b5&quot;],[&quot;^?&quot;,&quot;~u611b87e6-cd4e-4930-bb7e-90bb8294b1c0&quot;],[&quot;^?&quot;,&quot;~u611b87e6-9368-4167-ba8f-ec14eb487729&quot;],[&quot;^?&quot;,&quot;~u611b87e6-30ff-4b81-ac17-9ce5ae296696&quot;],[&quot;^?&quot;,&quot;~u60fe63d2-289e-4e2f-b301-289313d5a2e5&quot;],[&quot;^?&quot;,&quot;~u60fe6525-11df-407a-98b3-d9f3c850f4fc&quot;],[&quot;^?&quot;,&quot;~u611b87e6-ddf9-4120-96b2-332eb0dab72a&quot;]]],536870916]],[&quot;^1A&quot;,[269,&quot;^[&quot;,&quot;## 多机数据库&quot;,536870916]],[&quot;^1A&quot;,[269,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[269,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[269,&quot;^K&quot;,258,536870916]],[&quot;^1A&quot;,[269,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[269,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,7029,&quot;^1L&quot;,7050],536870916]],[&quot;^1A&quot;,[269,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[269,&quot;^13&quot;,79,536870916]],[&quot;^1A&quot;,[269,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[269,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;多机数据库&quot;]],536870916]],[&quot;^1A&quot;,[269,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[269,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[269,&quot;^?&quot;,&quot;~u611b87e6-1e03-463c-b4a8-1694369781c1&quot;,536870916]],[&quot;^1A&quot;,[270,&quot;^1E&quot;,&quot;-e5--a4--8d--e5--88--b6-&quot;,536870916]],[&quot;^1A&quot;,[270,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;与MongoDB &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fa96d4-dceb-4edb-aeaa-d8e7a14207aa&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fa96d4-dceb-4edb-aeaa-d8e7a14207aa))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot;类似，Redis提供两种副本集复制方式。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[270,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-5d04-4b66-9200-b9a1730b9320&quot;],[&quot;^?&quot;,&quot;~u611b87e6-7b58-4a55-9730-855a0d967739&quot;]]],536870916]],[&quot;^1A&quot;,[270,&quot;^[&quot;,&quot;## 复制\\n\\n与MongoDB ((60fa96d4-dceb-4edb-aeaa-d8e7a14207aa))类似，Redis提供两种副本集复制方式。&quot;,536870916]],[&quot;^1A&quot;,[270,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[270,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[270,&quot;^K&quot;,269,536870916]],[&quot;^1A&quot;,[270,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[270,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,7050,&quot;^1L&quot;,7172],536870916]],[&quot;^1A&quot;,[270,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[270,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[270,&quot;^L&quot;,323,536870916]],[&quot;^1A&quot;,[270,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[270,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;复制&quot;]],536870916]],[&quot;^1A&quot;,[270,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[270,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[270,&quot;^?&quot;,&quot;~u611b87e6-6b28-4960-b80f-afddba6a71b5&quot;,536870916]],[&quot;^1A&quot;,[271,&quot;^1E&quot;,&quot;-e5--90--8c--e6--ad--a5-(sync)&quot;,536870916]],[&quot;^1A&quot;,[271,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;基于RDB文件的初始化全量同步。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[271,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[271,&quot;^[&quot;,&quot;同步(sync)\\n基于RDB文件的初始化全量同步。&quot;,536870916]],[&quot;^1A&quot;,[271,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[271,&quot;^K&quot;,270,536870916]],[&quot;^1A&quot;,[271,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[271,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,7172,&quot;^1L&quot;,7236],536870916]],[&quot;^1A&quot;,[271,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[271,&quot;^13&quot;,270,536870916]],[&quot;^1A&quot;,[271,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;同步(sync)&quot;]],536870916]],[&quot;^1A&quot;,[271,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[271,&quot;^?&quot;,&quot;~u611b87e6-7b58-4a55-9730-855a0d967739&quot;,536870916]],[&quot;^1A&quot;,[272,&quot;^1E&quot;,&quot;-e5--91--bd--e4--bb--a4--e4--bc--a0--e6--92--ad-(command_propagate)&quot;,536870916]],[&quot;^1A&quot;,[272,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;基于AOF文件的增量同步。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[272,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[272,&quot;^[&quot;,&quot;命令传播(command propagate)\\n基于AOF文件的增量同步。&quot;,536870916]],[&quot;^1A&quot;,[272,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[272,&quot;^K&quot;,271,536870916]],[&quot;^1A&quot;,[272,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[272,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,7236,&quot;^1L&quot;,7310],536870916]],[&quot;^1A&quot;,[272,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[272,&quot;^13&quot;,270,536870916]],[&quot;^1A&quot;,[272,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;命令传播(command propagate)&quot;]],536870916]],[&quot;^1A&quot;,[272,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[272,&quot;^?&quot;,&quot;~u611b87e6-5d04-4b66-9200-b9a1730b9320&quot;,536870916]],[&quot;^1A&quot;,[273,&quot;^1E&quot;,&quot;-e5--89--af--e6--9c--ac-&quot;,536870916]],[&quot;^1A&quot;,[273,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;与MongoDB &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fa96d4-9695-4227-aac0-02725d40db05&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fa96d4-9695-4227-aac0-02725d40db05))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 和Kafka &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;61014b1a-574d-4772-90b7-66ef105899d6&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((61014b1a-574d-4772-90b7-66ef105899d6))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 不同，Redis出于性能考量在副本间异步复制。官方描述如下：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis uses by default &quot;],[&quot;Code&quot;,&quot;asynchronous replication&quot;],[&quot;Plain&quot;,&quot;, which being low latency and high performance, is the natural replication mode for the vast majority of Redis use cases. &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;However, Redis replicas asynchronously acknowledge the amount of data they received periodically with the master. So the master does not wait every time for a command to be processed by the replicas, however it knows, if needed, what replica already processed what command. This allows having optional synchronous replication.&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[273,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[273,&quot;^[&quot;,&quot;## 副本\\n\\n与MongoDB ((60fa96d4-9695-4227-aac0-02725d40db05)) 和Kafka ((61014b1a-574d-4772-90b7-66ef105899d6)) 不同，Redis出于性能考量在副本间异步复制。官方描述如下：\\n\\nRedis uses by default `asynchronous replication`, which being low latency and high performance, is the natural replication mode for the vast majority of Redis use cases. \\n\\nHowever, Redis replicas asynchronously acknowledge the amount of data they received periodically with the master. So the master does not wait every time for a command to be processed by the replicas, however it knows, if needed, what replica already processed what command. This allows having optional synchronous replication.&quot;,536870916]],[&quot;^1A&quot;,[273,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[273,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[273,&quot;^K&quot;,270,536870916]],[&quot;^1A&quot;,[273,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[273,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,7310,&quot;^1L&quot;,8025],536870916]],[&quot;^1A&quot;,[273,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[273,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[273,&quot;^L&quot;,204,536870916]],[&quot;^1A&quot;,[273,&quot;^L&quot;,215,536870916]],[&quot;^1A&quot;,[273,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[273,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;副本&quot;]],536870916]],[&quot;^1A&quot;,[273,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[273,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[273,&quot;^?&quot;,&quot;~u611b87e6-9368-4167-ba8f-ec14eb487729&quot;,536870916]],[&quot;^1A&quot;,[274,&quot;^1E&quot;,&quot;-e5--bf--83--e8--b7--b3--e6--a3--80--e6--b5--8b-&quot;,536870916]],[&quot;^1A&quot;,[274,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;由于Redis没有zookeeper这样的分布式协调器，节点与节点之间需要通过心跳来探测状态。在命令传播阶段，从服务器默认会以&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;每秒一次&quot;]]]],[&quot;Plain&quot;,&quot;的频率，向主服务器发送心跳命令：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;REPLCONF ACK &lt;replication_offset&gt;&quot;]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;其中replication_offset是从服务器当前的复制偏移量。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[274,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[274,&quot;^[&quot;,&quot;## 心跳检测\\n\\n由于Redis没有zookeeper这样的分布式协调器，节点与节点之间需要通过心跳来探测状态。在命令传播阶段，从服务器默认会以**每秒一次**的频率，向主服务器发送心跳命令：\\n\\n*REPLCONF ACK &lt;replication_offset&gt;*\\n\\n其中replication_offset是从服务器当前的复制偏移量。&quot;,536870916]],[&quot;^1A&quot;,[274,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[274,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[274,&quot;^K&quot;,273,536870916]],[&quot;^1A&quot;,[274,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[274,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,8025,&quot;^1L&quot;,8396],536870916]],[&quot;^1A&quot;,[274,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[274,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[274,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[274,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;心跳检测&quot;]],536870916]],[&quot;^1A&quot;,[274,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[274,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[274,&quot;^?&quot;,&quot;~u611b87e6-30ff-4b81-ac17-9ce5ae296696&quot;,536870916]],[&quot;^1A&quot;,[275,&quot;^1E&quot;,&quot;Sentinel&quot;,536870916]],[&quot;^1A&quot;,[275,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Sentinel（哨岗、哨兵）是Redis的高可用性（high availability）解决方案：由一个或多个Sentinel实例（instance）组成的Sentinel系统（system）可以监视任意多个主服务器，以及这些主服务器属下的所有从服务器，并在被监视的主服务器进入下线状态时，自动将下线主服务器属下的某个从服务器升级为新的主服务器，然后由新的主服务器代替已下线的主服务器继续处理命令请求。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;与MongoDB的 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fa96d4-1576-4759-8c10-9e49a72a39ff&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fa96d4-1576-4759-8c10-9e49a72a39ff))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot;不同，Sentinel充当了协调集群的角色。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;当一个主服务器被判断为客观下线时，监视这个下线主服务器的各个Sentinel会进行协商，选举出一个领头Sentinel，并由领头Sentinel对下线主服务器执行故障转移操作。选举的具体过程不再赘述，参见&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;raft&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[raft]]&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[275,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[275,&quot;^[&quot;,&quot;## Sentinel\\nid:: 60fe63d2-289e-4e2f-b301-289313d5a2e5\\n\\nSentinel（哨岗、哨兵）是Redis的高可用性（high availability）解决方案：由一个或多个Sentinel实例（instance）组成的Sentinel系统（system）可以监视任意多个主服务器，以及这些主服务器属下的所有从服务器，并在被监视的主服务器进入下线状态时，自动将下线主服务器属下的某个从服务器升级为新的主服务器，然后由新的主服务器代替已下线的主服务器继续处理命令请求。\\n\\n与MongoDB的 ((60fa96d4-1576-4759-8c10-9e49a72a39ff))不同，Sentinel充当了协调集群的角色。\\n\\n当一个主服务器被判断为客观下线时，监视这个下线主服务器的各个Sentinel会进行协商，选举出一个领头Sentinel，并由领头Sentinel对下线主服务器执行故障转移操作。选举的具体过程不再赘述，参见[[raft]]。&quot;,536870916]],[&quot;^1A&quot;,[275,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[275,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[275,&quot;^K&quot;,274,536870916]],[&quot;^1A&quot;,[275,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[275,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,8396,&quot;^1L&quot;,9339],536870916]],[&quot;^1A&quot;,[275,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[275,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[275,&quot;^12&quot;,72,536870916]],[&quot;^1A&quot;,[275,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fe63d2-289e-4e2f-b301-289313d5a2e5&quot;],536870916]],[&quot;^1A&quot;,[275,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[275,&quot;^L&quot;,72,536870916]],[&quot;^1A&quot;,[275,&quot;^L&quot;,322,536870916]],[&quot;^1A&quot;,[275,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[275,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Sentinel&quot;]],536870916]],[&quot;^1A&quot;,[275,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[275,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[275,&quot;^?&quot;,&quot;~u60fe63d2-289e-4e2f-b301-289313d5a2e5&quot;,536870916]],[&quot;^1A&quot;,[276,&quot;^1E&quot;,&quot;-e9--9b--86--e7--be--a4-(cluster)&quot;,536870916]],[&quot;^1A&quot;,[276,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis集群与MongoDB &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;副本集&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[副本集]]&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot;非常类似，都是NoSQL分布式系统高可用的方案。集群数据结构如下：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627284977091_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627284977091_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis集群通过分片的方式来保存数据库中的键值对：集群的整个数据库被分为16384个&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;槽&quot;]]]],[&quot;Plain&quot;,&quot;（slot），数据库中的每个键都属于这16384个槽的其中一个，集群中的每个节点可以处理0个或最多&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;16384&quot;]]]],[&quot;Plain&quot;,&quot;个槽。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[276,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[276,&quot;^[&quot;,&quot;## 集群(cluster)\\nid:: 60fe6525-11df-407a-98b3-d9f3c850f4fc\\n\\nRedis集群与MongoDB [[副本集]]非常类似，都是NoSQL分布式系统高可用的方案。集群数据结构如下：\\n\\n![image.png](../assets/image_1627284977091_0.png) \\n\\nRedis集群通过分片的方式来保存数据库中的键值对：集群的整个数据库被分为16384个**槽**（slot），数据库中的每个键都属于这16384个槽的其中一个，集群中的每个节点可以处理0个或最多**16384**个槽。&quot;,536870916]],[&quot;^1A&quot;,[276,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[276,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[276,&quot;^K&quot;,275,536870916]],[&quot;^1A&quot;,[276,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[276,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9339,&quot;^1L&quot;,9865],536870916]],[&quot;^1A&quot;,[276,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[276,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[276,&quot;^12&quot;,68,536870916]],[&quot;^1A&quot;,[276,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fe6525-11df-407a-98b3-d9f3c850f4fc&quot;],536870916]],[&quot;^1A&quot;,[276,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[276,&quot;^L&quot;,68,536870916]],[&quot;^1A&quot;,[276,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[276,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;集群(cluster)&quot;]],536870916]],[&quot;^1A&quot;,[276,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[276,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[276,&quot;^?&quot;,&quot;~u60fe6525-11df-407a-98b3-d9f3c850f4fc&quot;,536870916]],[&quot;^1A&quot;,[277,&quot;^1E&quot;,&quot;-e6--a7--bd-&quot;,536870916]],[&quot;^1A&quot;,[277,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;槽是Redis对&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;分布式哈希&quot;]]]],[&quot;Plain&quot;,&quot;的抽象，槽的存储方式如下：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627285288374_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627285288374_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;你可能会怀疑这样的槽存储是否占用了过多的空间，事实确实如此，换来的好处是能以O(1)的时间复杂度查找槽的归属节点。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[277,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[277,&quot;^[&quot;,&quot;## 槽\\n\\n槽是Redis对**分布式哈希**的抽象，槽的存储方式如下：\\n\\n![image.png](../assets/image_1627285288374_0.png) \\n\\n你可能会怀疑这样的槽存储是否占用了过多的空间，事实确实如此，换来的好处是能以O(1)的时间复杂度查找槽的归属节点。&quot;,536870916]],[&quot;^1A&quot;,[277,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[277,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[277,&quot;^K&quot;,276,536870916]],[&quot;^1A&quot;,[277,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[277,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9865,&quot;^1L&quot;,10184],536870916]],[&quot;^1A&quot;,[277,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[277,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[277,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[277,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;槽&quot;]],536870916]],[&quot;^1A&quot;,[277,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[277,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[277,&quot;^?&quot;,&quot;~u611b87e6-cbf8-44ff-84d3-a8b5abb025f2&quot;,536870916]],[&quot;^1A&quot;,[278,&quot;^1E&quot;,&quot;-e6--a7--bd-_MOVED-e9--94--99--e8--af--af-&quot;,536870916]],[&quot;^1A&quot;,[278,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;当节点发现键所在的槽并非由自己负责处理的时候，节点就会向客户端返回一个MOVED错误，指引客户端转向至正在负责槽的节点。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;集群模式的redis-cli客户端在接收到MOVED错误时，并不会打印出MOVED错误，而是根据MOVED错误自动进行节点转向，并打印出转向信息，所以我们是看不见节点返回的MOVED错误的。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[278,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[278,&quot;^[&quot;,&quot;## 槽-MOVED错误\\n\\n当节点发现键所在的槽并非由自己负责处理的时候，节点就会向客户端返回一个MOVED错误，指引客户端转向至正在负责槽的节点。\\n\\n集群模式的redis-cli客户端在接收到MOVED错误时，并不会打印出MOVED错误，而是根据MOVED错误自动进行节点转向，并打印出转向信息，所以我们是看不见节点返回的MOVED错误的。&quot;,536870916]],[&quot;^1A&quot;,[278,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[278,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[278,&quot;^K&quot;,277,536870916]],[&quot;^1A&quot;,[278,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[278,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,10184,&quot;^1L&quot;,10619],536870916]],[&quot;^1A&quot;,[278,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[278,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[278,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[278,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;槽-MOVED错误&quot;]],536870916]],[&quot;^1A&quot;,[278,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[278,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[278,&quot;^?&quot;,&quot;~u611b87e6-5348-4c02-9cf2-bea63aa327e0&quot;,536870916]],[&quot;^1A&quot;,[279,&quot;^1E&quot;,&quot;-e6--a7--bd-_ASK-e9--94--99--e8--af--af-&quot;,536870916]],[&quot;^1A&quot;,[279,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis集群的重新分片操作可以将&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;任意数量&quot;]]]],[&quot;Plain&quot;,&quot;已经指派给某个节点（源节点）的槽改为指派给另一个节点（目标节点），并且相关槽所属的键值对也会从源节点被移动到目标节点。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;在进行重新分片期间，源节点向目标节点迁移一个槽的过程中，可能会出现这样一种情况：属于被迁移槽的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;一部分键值对&quot;]]]],[&quot;Plain&quot;,&quot;保存在源节点里面，而&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;另一部分键值对&quot;]]]],[&quot;Plain&quot;,&quot;则保存在目标节点里面。如果节点发现当前键命中了这种情况，会向客户端返回一个ASK错误，指引客户端转向目标节点。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;类似HTTP协议的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;302/301&quot;]]]],[&quot;Plain&quot;,&quot;跳转，MOVED表示服务端确认该键需要转移，而ASK错误表示服务端不确认槽内所有键都需要转移。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[279,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[279,&quot;^[&quot;,&quot;## 槽-ASK错误\\n\\nRedis集群的重新分片操作可以将**任意数量**已经指派给某个节点（源节点）的槽改为指派给另一个节点（目标节点），并且相关槽所属的键值对也会从源节点被移动到目标节点。\\n\\n在进行重新分片期间，源节点向目标节点迁移一个槽的过程中，可能会出现这样一种情况：属于被迁移槽的**一部分键值对**保存在源节点里面，而**另一部分键值对**则保存在目标节点里面。如果节点发现当前键命中了这种情况，会向客户端返回一个ASK错误，指引客户端转向目标节点。\\n\\n类似HTTP协议的**302/301**跳转，MOVED表示服务端确认该键需要转移，而ASK错误表示服务端不确认槽内所有键都需要转移。&quot;,536870916]],[&quot;^1A&quot;,[279,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[279,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[279,&quot;^K&quot;,278,536870916]],[&quot;^1A&quot;,[279,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[279,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,10619,&quot;^1L&quot;,11429],536870916]],[&quot;^1A&quot;,[279,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[279,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[279,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[279,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;槽-ASK错误&quot;]],536870916]],[&quot;^1A&quot;,[279,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[279,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[279,&quot;^?&quot;,&quot;~u611b87e6-cd4e-4930-bb7e-90bb8294b1c0&quot;,536870916]],[&quot;^1A&quot;,[280,&quot;^1E&quot;,&quot;-e6--95--85--e9--9a--9c--e8--bd--ac--e7--a7--bb-&quot;,536870916]],[&quot;^1A&quot;,[280,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;与 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fe63d2-289e-4e2f-b301-289313d5a2e5&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fe63d2-289e-4e2f-b301-289313d5a2e5))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 一样，集群故障转移时选举主节点的方法都是基于&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;raft&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[raft]]&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot;协议实现的。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[280,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[280,&quot;^[&quot;,&quot;## 故障转移\\n\\n与 ((60fe63d2-289e-4e2f-b301-289313d5a2e5)) 一样，集群故障转移时选举主节点的方法都是基于[[raft]]协议实现的。&quot;,536870916]],[&quot;^1A&quot;,[280,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[280,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[280,&quot;^K&quot;,279,536870916]],[&quot;^1A&quot;,[280,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[280,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,11429,&quot;^1L&quot;,11593],536870916]],[&quot;^1A&quot;,[280,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[280,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[280,&quot;^12&quot;,72,536870916]],[&quot;^1A&quot;,[280,&quot;^L&quot;,72,536870916]],[&quot;^1A&quot;,[280,&quot;^L&quot;,275,536870916]],[&quot;^1A&quot;,[280,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[280,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;故障转移&quot;]],536870916]],[&quot;^1A&quot;,[280,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[280,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[280,&quot;^?&quot;,&quot;~u611b87e6-3c4f-4b94-8f88-abc06122c29b&quot;,536870916]],[&quot;^1A&quot;,[281,&quot;^1E&quot;,&quot;-e6--b6--88--e6--81--af-&quot;,536870916]],[&quot;^1A&quot;,[281,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;集群中的节点基于Goosip协议，通过发送和接收消息来进行通信，常见的消息包括MEET、PING、PONG、PUBLISH、FAIL五种。&quot;]]]]],536870916]],[&quot;^1A&quot;,[281,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[281,&quot;^[&quot;,&quot;## LATER 消息\\n\\n集群中的节点基于Goosip协议，通过发送和接收消息来进行通信，常见的消息包括MEET、PING、PONG、PUBLISH、FAIL五种。&quot;,536870916]],[&quot;^1A&quot;,[281,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[281,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[281,&quot;^K&quot;,280,536870916]],[&quot;^1A&quot;,[281,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[281,&quot;^1&lt;&quot;,&quot;LATER&quot;,536870916]],[&quot;^1A&quot;,[281,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,11593,&quot;^1L&quot;,11768],536870916]],[&quot;^1A&quot;,[281,&quot;^17&quot;,79,536870916]],[&quot;^1A&quot;,[281,&quot;^13&quot;,269,536870916]],[&quot;^1A&quot;,[281,&quot;^12&quot;,4,536870916]],[&quot;^1A&quot;,[281,&quot;^L&quot;,4,536870916]],[&quot;^1A&quot;,[281,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[281,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;消息&quot;]],536870916]],[&quot;^1A&quot;,[281,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[281,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[281,&quot;^?&quot;,&quot;~u611b87e6-ddf9-4120-96b2-332eb0dab72a&quot;,536870916]],[&quot;^1A&quot;,[282,&quot;^1E&quot;,&quot;2021_08_05&quot;,536870916]],[&quot;^1A&quot;,[282,&quot;^S&quot;,[],536877556]],[&quot;^1A&quot;,[282,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[282,&quot;^[&quot;,&quot;&quot;,536877556]],[&quot;^1A&quot;,[282,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[282,&quot;^K&quot;,86,536870916]],[&quot;^1A&quot;,[282,&quot;^X&quot;,1,536877556]],[&quot;^1A&quot;,[282,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,57],536870916]],[&quot;^1A&quot;,[282,&quot;^17&quot;,86,536870916]],[&quot;^1A&quot;,[282,&quot;^13&quot;,86,536870916]],[&quot;^1A&quot;,[282,&quot;^12&quot;,86,536877556]],[&quot;^1A&quot;,[282,&quot;^D&quot;,[&quot;^ &quot;],536877556]],[&quot;^1A&quot;,[282,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[282,&quot;^Z&quot;,[],536877556]],[&quot;^1A&quot;,[282,&quot;^1D&quot;,true,536877556]],[&quot;^1A&quot;,[282,&quot;^?&quot;,&quot;~u611b87e6-fd63-49e2-ae1b-cc836c64dbba&quot;,536870916]],[&quot;^1A&quot;,[283,&quot;^1E&quot;,&quot;HA&quot;,536870916]],[&quot;^1A&quot;,[283,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[283,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-8f42-41f8-854b-2bbee7b7b3d9&quot;],[&quot;^?&quot;,&quot;~u611b87e6-800c-4191-9115-8fbace6e358e&quot;]]],536870916]],[&quot;^1A&quot;,[283,&quot;^[&quot;,&quot;## HA&quot;,536870916]],[&quot;^1A&quot;,[283,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[283,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[283,&quot;^K&quot;,74,536870916]],[&quot;^1A&quot;,[283,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[283,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,6],536870916]],[&quot;^1A&quot;,[283,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[283,&quot;^13&quot;,74,536870916]],[&quot;^1A&quot;,[283,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[283,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;HA&quot;]],536870916]],[&quot;^1A&quot;,[283,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[283,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[283,&quot;^?&quot;,&quot;~u611b87e6-c440-42f3-8019-42e0fc90aa69&quot;,536870916]],[&quot;^1A&quot;,[284,&quot;^1E&quot;,&quot;-e8--af--84--e4--bb--b7--e7--bb--b4--e5--ba--a6-&quot;,536870916]],[&quot;^1A&quot;,[284,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[284,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-31fa-4d6c-8cdd-6fc55073d77c&quot;],[&quot;^?&quot;,&quot;~u611b87e6-ddfb-4880-82b9-0a72eebc5185&quot;]]],536870916]],[&quot;^1A&quot;,[284,&quot;^[&quot;,&quot;## 评价维度&quot;,536870916]],[&quot;^1A&quot;,[284,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[284,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[284,&quot;^K&quot;,283,536870916]],[&quot;^1A&quot;,[284,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[284,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,6,&quot;^1L&quot;,25],536870916]],[&quot;^1A&quot;,[284,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[284,&quot;^13&quot;,283,536870916]],[&quot;^1A&quot;,[284,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[284,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;评价维度&quot;]],536870916]],[&quot;^1A&quot;,[284,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[284,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[284,&quot;^?&quot;,&quot;~u611b87e6-800c-4191-9115-8fbace6e358e&quot;,536870916]],[&quot;^1A&quot;,[285,&quot;^1E&quot;,&quot;N-e4--b8--aa-9&quot;,536870916]],[&quot;^1A&quot;,[285,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;可用性级别\\t系统可用性%\\t宕机时间/年\\t宕机时间/月\\t宕机时间/周\\t宕机时间/天&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;不可用\\t90%\\t36.5 天\\t73 小时\\t16.8 小时\\t144 分钟&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;基本可用\\t99%\\t87.6 小时\\t7.3 小时\\t1.68 小时\\t14.4 分钟&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;较高可用\\t99.9%\\t8.76 小时\\t43.8 分钟\\t10.1 分钟\\t1.44 分钟&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;高可用\\t99.99%\\t52.56 分钟\\t4.38 分钟\\t1.01 秒\\t8.64 秒&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;极高可用\\t99.999%\\t5.26 分钟\\t26.28 秒\\t6.06 秒\\t0.86 秒&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[285,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[285,&quot;^[&quot;,&quot;N个9\\n可用性级别\\t系统可用性%\\t宕机时间/年\\t宕机时间/月\\t宕机时间/周\\t宕机时间/天\\n不可用\\t90%\\t36.5 天\\t73 小时\\t16.8 小时\\t144 分钟\\n基本可用\\t99%\\t87.6 小时\\t7.3 小时\\t1.68 小时\\t14.4 分钟\\n较高可用\\t99.9%\\t8.76 小时\\t43.8 分钟\\t10.1 分钟\\t1.44 分钟\\n高可用\\t99.99%\\t52.56 分钟\\t4.38 分钟\\t1.01 秒\\t8.64 秒\\n极高可用\\t99.999%\\t5.26 分钟\\t26.28 秒\\t6.06 秒\\t0.86 秒&quot;,536870916]],[&quot;^1A&quot;,[285,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[285,&quot;^K&quot;,284,536870916]],[&quot;^1A&quot;,[285,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[285,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,25,&quot;^1L&quot;,468],536870916]],[&quot;^1A&quot;,[285,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[285,&quot;^13&quot;,284,536870916]],[&quot;^1A&quot;,[285,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;N个9&quot;]],536870916]],[&quot;^1A&quot;,[285,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[285,&quot;^?&quot;,&quot;~u611b87e6-ddfb-4880-82b9-0a72eebc5185&quot;,536870916]],[&quot;^1A&quot;,[286,&quot;^1E&quot;,&quot;qos(-e8--a1--a1--e9--87--8f--e6--b6--88--e6--81--af--e7--b3--bb--e7--bb--9f-)&quot;,536870916]],[&quot;^1A&quot;,[286,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Quality of Service&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[286,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[286,&quot;^[&quot;,&quot;qos(衡量消息系统)\\nQuality of Service&quot;,536870916]],[&quot;^1A&quot;,[286,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[286,&quot;^K&quot;,285,536870916]],[&quot;^1A&quot;,[286,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[286,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,468,&quot;^1L&quot;,519],536870916]],[&quot;^1A&quot;,[286,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[286,&quot;^13&quot;,284,536870916]],[&quot;^1A&quot;,[286,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;qos(衡量消息系统)&quot;]],536870916]],[&quot;^1A&quot;,[286,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[286,&quot;^?&quot;,&quot;~u611b87e6-31fa-4d6c-8cdd-6fc55073d77c&quot;,536870916]],[&quot;^1A&quot;,[287,&quot;^1E&quot;,&quot;-e5--8f--af--e7--94--a8--e6--80--a7--e7--bb--b4--e5--ba--a6-&quot;,536870916]],[&quot;^1A&quot;,[287,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[287,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-2ee7-4bb7-b72a-b1ba67266cbf&quot;],[&quot;^?&quot;,&quot;~u611b87e6-d1be-4ed4-baed-8d4f9906f8cd&quot;],[&quot;^?&quot;,&quot;~u611b87e6-5eec-4ae6-a760-bf5f87f30533&quot;],[&quot;^?&quot;,&quot;~u611b87e6-5eab-43b4-93e5-596686d71be0&quot;]]],536870916]],[&quot;^1A&quot;,[287,&quot;^[&quot;,&quot;## 可用性维度&quot;,536870916]],[&quot;^1A&quot;,[287,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[287,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[287,&quot;^K&quot;,284,536870916]],[&quot;^1A&quot;,[287,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[287,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,519,&quot;^1L&quot;,541],536870916]],[&quot;^1A&quot;,[287,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[287,&quot;^13&quot;,283,536870916]],[&quot;^1A&quot;,[287,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[287,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;可用性维度&quot;]],536870916]],[&quot;^1A&quot;,[287,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[287,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[287,&quot;^?&quot;,&quot;~u611b87e6-8f42-41f8-854b-2bbee7b7b3d9&quot;,536870916]],[&quot;^1A&quot;,[288,&quot;^1E&quot;,&quot;-e4--b8--ad--e9--97--b4--e4--bb--b6--e7--9a--84--e5--8f--af--e7--94--a8--e6--80--a7-&quot;,536870916]],[&quot;^1A&quot;,[288,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[288,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-277e-463c-86ea-a1451bc9286b&quot;],[&quot;^?&quot;,&quot;~u611b87e6-af8d-43b6-a415-65728bc4d7da&quot;],[&quot;^?&quot;,&quot;~u611b87e6-65bc-441c-9590-36e763c66fc3&quot;],[&quot;^?&quot;,&quot;~u611b87e6-733c-479b-a393-f98c88f0bc3a&quot;]]],536870916]],[&quot;^1A&quot;,[288,&quot;^[&quot;,&quot;## 中间件的可用性&quot;,536870916]],[&quot;^1A&quot;,[288,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[288,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[288,&quot;^K&quot;,287,536870916]],[&quot;^1A&quot;,[288,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[288,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,541,&quot;^1L&quot;,570],536870916]],[&quot;^1A&quot;,[288,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[288,&quot;^13&quot;,287,536870916]],[&quot;^1A&quot;,[288,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[288,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;中间件的可用性&quot;]],536870916]],[&quot;^1A&quot;,[288,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[288,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[288,&quot;^?&quot;,&quot;~u611b87e6-5eab-43b4-93e5-596686d71be0&quot;,536870916]],[&quot;^1A&quot;,[289,&quot;^1E&quot;,&quot;-e5--86--97--e4--bd--99-&quot;,536870916]],[&quot;^1A&quot;,[289,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;如MongoDB的 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;副本集&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[副本集]]&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; ，和Kafka的 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;61014b1a-574d-4772-90b7-66ef105899d6&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((61014b1a-574d-4772-90b7-66ef105899d6))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; ，通过多个节点以避免系统的单点故障。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[289,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[289,&quot;^[&quot;,&quot;冗余\\n如MongoDB的 [[副本集]] ，和Kafka的 ((61014b1a-574d-4772-90b7-66ef105899d6)) ，通过多个节点以避免系统的单点故障。&quot;,536870916]],[&quot;^1A&quot;,[289,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[289,&quot;^K&quot;,288,536870916]],[&quot;^1A&quot;,[289,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[289,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,570,&quot;^1L&quot;,726],536870916]],[&quot;^1A&quot;,[289,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[289,&quot;^13&quot;,288,536870916]],[&quot;^1A&quot;,[289,&quot;^12&quot;,68,536870916]],[&quot;^1A&quot;,[289,&quot;^L&quot;,68,536870916]],[&quot;^1A&quot;,[289,&quot;^L&quot;,204,536870916]],[&quot;^1A&quot;,[289,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;冗余&quot;]],536870916]],[&quot;^1A&quot;,[289,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[289,&quot;^?&quot;,&quot;~u611b87e6-733c-479b-a393-f98c88f0bc3a&quot;,536870916]],[&quot;^1A&quot;,[290,&quot;^1E&quot;,&quot;-e6--95--85--e9--9a--9c--e8--bd--ac--e7--a7--bb-&quot;,536870916]],[&quot;^1A&quot;,[290,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;基于冗余机制的，在故障情况下的系统恢复机制。如基于 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;raft&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[raft]]&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot;的节点选取算法。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[290,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[290,&quot;^[&quot;,&quot;故障转移\\n基于冗余机制的，在故障情况下的系统恢复机制。如基于 [[raft]]的节点选取算法。&quot;,536870916]],[&quot;^1A&quot;,[290,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[290,&quot;^K&quot;,289,536870916]],[&quot;^1A&quot;,[290,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[290,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,726,&quot;^1L&quot;,858],536870916]],[&quot;^1A&quot;,[290,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[290,&quot;^13&quot;,288,536870916]],[&quot;^1A&quot;,[290,&quot;^12&quot;,72,536870916]],[&quot;^1A&quot;,[290,&quot;^L&quot;,72,536870916]],[&quot;^1A&quot;,[290,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;故障转移&quot;]],536870916]],[&quot;^1A&quot;,[290,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[290,&quot;^?&quot;,&quot;~u611b87e6-65bc-441c-9590-36e763c66fc3&quot;,536870916]],[&quot;^1A&quot;,[291,&quot;^1E&quot;,&quot;-e9--9a--94--e7--a6--bb-&quot;,536870916]],[&quot;^1A&quot;,[291,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;在一些小型企业，中间件可能是共享资源，使用这些共享资源要额外小心。如果可以避免，建议使用虚拟化/多租户等技术做资源隔离。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;微服务可以认为是一种以隔离为核心的架构。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[291,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[291,&quot;^[&quot;,&quot;隔离\\n在一些小型企业，中间件可能是共享资源，使用这些共享资源要额外小心。如果可以避免，建议使用虚拟化/多租户等技术做资源隔离。\\n微服务可以认为是一种以隔离为核心的架构。&quot;,536870916]],[&quot;^1A&quot;,[291,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[291,&quot;^K&quot;,290,536870916]],[&quot;^1A&quot;,[291,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[291,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,858,&quot;^1L&quot;,1120],536870916]],[&quot;^1A&quot;,[291,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[291,&quot;^13&quot;,288,536870916]],[&quot;^1A&quot;,[291,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;隔离&quot;]],536870916]],[&quot;^1A&quot;,[291,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[291,&quot;^?&quot;,&quot;~u611b87e6-af8d-43b6-a415-65728bc4d7da&quot;,536870916]],[&quot;^1A&quot;,[292,&quot;^1E&quot;,&quot;-e8--b4--9f--e8--bd--bd--e5--9d--87--e8--a1--a1-&quot;,536870916]],[&quot;^1A&quot;,[292,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[292,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[292,&quot;^[&quot;,&quot;负载均衡&quot;,536870916]],[&quot;^1A&quot;,[292,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[292,&quot;^K&quot;,291,536870916]],[&quot;^1A&quot;,[292,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[292,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1120,&quot;^1L&quot;,1138],536870916]],[&quot;^1A&quot;,[292,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[292,&quot;^13&quot;,288,536870916]],[&quot;^1A&quot;,[292,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;负载均衡&quot;]],536870916]],[&quot;^1A&quot;,[292,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[292,&quot;^?&quot;,&quot;~u611b87e6-277e-463c-86ea-a1451bc9286b&quot;,536870916]],[&quot;^1A&quot;,[293,&quot;^1E&quot;,&quot;-e7--bd--91--e7--bb--9c--e7--9a--84--e5--8f--af--e7--94--a8--e6--80--a7-&quot;,536870916]],[&quot;^1A&quot;,[293,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[293,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-da6b-4fb3-9bc5-8c4adbbfe593&quot;],[&quot;^?&quot;,&quot;~u611b87e6-1c8a-40d7-bf4d-a3e9ba76f83e&quot;],[&quot;^?&quot;,&quot;~u611b87e6-0f56-40d0-9ac5-6e7292a4aa7d&quot;]]],536870916]],[&quot;^1A&quot;,[293,&quot;^[&quot;,&quot;## 网络的可用性&quot;,536870916]],[&quot;^1A&quot;,[293,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[293,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[293,&quot;^K&quot;,288,536870916]],[&quot;^1A&quot;,[293,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[293,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1138,&quot;^1L&quot;,1164],536870916]],[&quot;^1A&quot;,[293,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[293,&quot;^13&quot;,287,536870916]],[&quot;^1A&quot;,[293,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[293,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;网络的可用性&quot;]],536870916]],[&quot;^1A&quot;,[293,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[293,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[293,&quot;^?&quot;,&quot;~u611b87e6-5eec-4ae6-a760-bf5f87f30533&quot;,536870916]],[&quot;^1A&quot;,[294,&quot;^1E&quot;,&quot;-e8--b6--85--e6--97--b6--e9--87--8d--e8--af--95-&quot;,536870916]],[&quot;^1A&quot;,[294,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;考虑系统在弱网、网络抖动、网络不可用等会引起网络超时的情况下的表现。如果超时发生在内部依赖，如数据库、缓存等，一般考虑降级策略，因为此时过多的重试可能也无济于事，甚至会阻碍网络的恢复。对于外部依赖，应采取合适的重试策略，如果有必要的话持久化失败的网络调用以补偿消费。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[294,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[294,&quot;^[&quot;,&quot;超时重试\\n考虑系统在弱网、网络抖动、网络不可用等会引起网络超时的情况下的表现。如果超时发生在内部依赖，如数据库、缓存等，一般考虑降级策略，因为此时过多的重试可能也无济于事，甚至会阻碍网络的恢复。对于外部依赖，应采取合适的重试策略，如果有必要的话持久化失败的网络调用以补偿消费。&quot;,536870916]],[&quot;^1A&quot;,[294,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[294,&quot;^K&quot;,293,536870916]],[&quot;^1A&quot;,[294,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[294,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1164,&quot;^1L&quot;,1587],536870916]],[&quot;^1A&quot;,[294,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[294,&quot;^13&quot;,293,536870916]],[&quot;^1A&quot;,[294,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;超时重试&quot;]],536870916]],[&quot;^1A&quot;,[294,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[294,&quot;^?&quot;,&quot;~u611b87e6-0f56-40d0-9ac5-6e7292a4aa7d&quot;,536870916]],[&quot;^1A&quot;,[295,&quot;^1E&quot;,&quot;-e7--86--94--e6--96--ad-&quot;,536870916]],[&quot;^1A&quot;,[295,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;熔断指的是当某个操作失败多次时，不再重试，而是返回失败，以保证整体系统不会因此操作而瘫痪，类似于电路系统中的断路器。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[295,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[295,&quot;^[&quot;,&quot;熔断\\n熔断指的是当某个操作失败多次时，不再重试，而是返回失败，以保证整体系统不会因此操作而瘫痪，类似于电路系统中的断路器。&quot;,536870916]],[&quot;^1A&quot;,[295,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[295,&quot;^K&quot;,294,536870916]],[&quot;^1A&quot;,[295,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[295,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1587,&quot;^1L&quot;,1779],536870916]],[&quot;^1A&quot;,[295,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[295,&quot;^13&quot;,293,536870916]],[&quot;^1A&quot;,[295,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;熔断&quot;]],536870916]],[&quot;^1A&quot;,[295,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[295,&quot;^?&quot;,&quot;~u611b87e6-1c8a-40d7-bf4d-a3e9ba76f83e&quot;,536870916]],[&quot;^1A&quot;,[296,&quot;^1E&quot;,&quot;-e9--99--90--e6--b5--81-&quot;,536870916]],[&quot;^1A&quot;,[296,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;限流是一种保守的保护策略，通过限定某操作的发生频次以保证系统压力在逾期范围内。常见的限流方式可以分为两类：基于请求限流和基于资源限流。基于请求限流指从外部访问的请求角度考虑限流，常见的方式有：限制总量、限制时间量。基于资源限流是从系统内部考虑的，即：找到系统内部影响性能的关键资源，对其使用上限进行限制。常见的内部资源有：连接数、文件句柄、线程数、请求队列等。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[296,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[296,&quot;^[&quot;,&quot;限流\\n限流是一种保守的保护策略，通过限定某操作的发生频次以保证系统压力在逾期范围内。常见的限流方式可以分为两类：基于请求限流和基于资源限流。基于请求限流指从外部访问的请求角度考虑限流，常见的方式有：限制总量、限制时间量。基于资源限流是从系统内部考虑的，即：找到系统内部影响性能的关键资源，对其使用上限进行限制。常见的内部资源有：连接数、文件句柄、线程数、请求队列等。&quot;,536870916]],[&quot;^1A&quot;,[296,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[296,&quot;^K&quot;,295,536870916]],[&quot;^1A&quot;,[296,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[296,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1779,&quot;^1L&quot;,2337],536870916]],[&quot;^1A&quot;,[296,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[296,&quot;^13&quot;,293,536870916]],[&quot;^1A&quot;,[296,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;限流&quot;]],536870916]],[&quot;^1A&quot;,[296,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[296,&quot;^?&quot;,&quot;~u611b87e6-da6b-4fb3-9bc5-8c4adbbfe593&quot;,536870916]],[&quot;^1A&quot;,[297,&quot;^1E&quot;,&quot;-e6--9c--8d--e5--8a--a1--e7--9a--84--e5--8f--af--e7--94--a8--e6--80--a7-&quot;,536870916]],[&quot;^1A&quot;,[297,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[297,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-9093-474e-b832-fdf335f0a81f&quot;],[&quot;^?&quot;,&quot;~u611b87e6-4711-4e04-af59-4c73d29d0475&quot;],[&quot;^?&quot;,&quot;~u611b87e6-68be-45e1-9dcb-2d9a24983ca8&quot;]]],536870916]],[&quot;^1A&quot;,[297,&quot;^[&quot;,&quot;## 服务的可用性&quot;,536870916]],[&quot;^1A&quot;,[297,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[297,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[297,&quot;^K&quot;,293,536870916]],[&quot;^1A&quot;,[297,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[297,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2337,&quot;^1L&quot;,2363],536870916]],[&quot;^1A&quot;,[297,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[297,&quot;^13&quot;,287,536870916]],[&quot;^1A&quot;,[297,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[297,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;服务的可用性&quot;]],536870916]],[&quot;^1A&quot;,[297,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[297,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[297,&quot;^?&quot;,&quot;~u611b87e6-d1be-4ed4-baed-8d4f9906f8cd&quot;,536870916]],[&quot;^1A&quot;,[298,&quot;^1E&quot;,&quot;-e4--b8--bb--e6--ac--a1--e9--80--bb--e8--be--91--e9--9a--94--e7--a6--bb-&quot;,536870916]],[&quot;^1A&quot;,[298,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;多数的业务逻辑会包括80%的次要逻辑和20%的主要逻辑，主次逻辑在初步实施时不一定能完全分辨清楚，但随着生产环境监测和公司战略方向调整，主要逻辑会逐步被认识到。对主要逻辑做更多的保护和隔离能避免大型事故的产生。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[298,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[298,&quot;^[&quot;,&quot;主次逻辑隔离\\n多数的业务逻辑会包括80%的次要逻辑和20%的主要逻辑，主次逻辑在初步实施时不一定能完全分辨清楚，但随着生产环境监测和公司战略方向调整，主要逻辑会逐步被认识到。对主要逻辑做更多的保护和隔离能避免大型事故的产生。&quot;,536870916]],[&quot;^1A&quot;,[298,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[298,&quot;^K&quot;,297,536870916]],[&quot;^1A&quot;,[298,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[298,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2363,&quot;^1L&quot;,2696],536870916]],[&quot;^1A&quot;,[298,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[298,&quot;^13&quot;,297,536870916]],[&quot;^1A&quot;,[298,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;主次逻辑隔离&quot;]],536870916]],[&quot;^1A&quot;,[298,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[298,&quot;^?&quot;,&quot;~u611b87e6-68be-45e1-9dcb-2d9a24983ca8&quot;,536870916]],[&quot;^1A&quot;,[299,&quot;^1E&quot;,&quot;TDD-e6--80--9d--e6--83--b3-&quot;,536870916]],[&quot;^1A&quot;,[299,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Test Driven Development是一种围绕测试用例的开发模式。当然商业化是复杂和快速变化的，可能不会有那么多时间做到完整的用例测试，现有的测试也不一定能跟上系统变化的速度。但是测试用例的作用在于让开发者知道自己关心什么，以及当用例不通过时，自己是否还关心这个用例。拥有一定程度用例测试的系统，对整个团队都是福报。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;TDD指的不仅仅是增加测试用例，而是在开发过程中就针对可能需要测试的代码做一些\\&quot;后门\\&quot;。比如为某个私有字段开发一个测试用的公用方法等。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[299,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[299,&quot;^[&quot;,&quot;TDD思想\\nTest Driven Development是一种围绕测试用例的开发模式。当然商业化是复杂和快速变化的，可能不会有那么多时间做到完整的用例测试，现有的测试也不一定能跟上系统变化的速度。但是测试用例的作用在于让开发者知道自己关心什么，以及当用例不通过时，自己是否还关心这个用例。拥有一定程度用例测试的系统，对整个团队都是福报。\\nTDD指的不仅仅是增加测试用例，而是在开发过程中就针对可能需要测试的代码做一些\\&quot;后门\\&quot;。比如为某个私有字段开发一个测试用的公用方法等。&quot;,536870916]],[&quot;^1A&quot;,[299,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[299,&quot;^K&quot;,298,536870916]],[&quot;^1A&quot;,[299,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[299,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2696,&quot;^1L&quot;,3357],536870916]],[&quot;^1A&quot;,[299,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[299,&quot;^13&quot;,297,536870916]],[&quot;^1A&quot;,[299,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;TDD思想&quot;]],536870916]],[&quot;^1A&quot;,[299,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[299,&quot;^?&quot;,&quot;~u611b87e6-4711-4e04-af59-4c73d29d0475&quot;,536870916]],[&quot;^1A&quot;,[300,&quot;^1E&quot;,&quot;-e6--9c--8d--e5--8a--a1--e6--80--a7--e8--83--bd-&quot;,536870916]],[&quot;^1A&quot;,[300,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;性能是一种宽泛的说法，一般会从响应时间、内存占用、CPU运行情况等方面衡量一个系统的性能。以Java程序为例，GC时间和JVM内存就是很重要的性能指标。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[300,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[300,&quot;^[&quot;,&quot;服务性能\\n性能是一种宽泛的说法，一般会从响应时间、内存占用、CPU运行情况等方面衡量一个系统的性能。以Java程序为例，GC时间和JVM内存就是很重要的性能指标。&quot;,536870916]],[&quot;^1A&quot;,[300,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[300,&quot;^K&quot;,299,536870916]],[&quot;^1A&quot;,[300,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[300,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3357,&quot;^1L&quot;,3585],536870916]],[&quot;^1A&quot;,[300,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[300,&quot;^13&quot;,297,536870916]],[&quot;^1A&quot;,[300,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;服务性能&quot;]],536870916]],[&quot;^1A&quot;,[300,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[300,&quot;^?&quot;,&quot;~u611b87e6-9093-474e-b832-fdf335f0a81f&quot;,536870916]],[&quot;^1A&quot;,[301,&quot;^1E&quot;,&quot;-e7--9b--91--e6--8e--a7--e4--b8--8e--e5--ae--a1--e8--ae--a1-&quot;,536870916]],[&quot;^1A&quot;,[301,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[301,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-ef6c-4894-b799-78aa12a42fc2&quot;],[&quot;^?&quot;,&quot;~u611b87e6-0ebc-4df2-9ceb-80f96731e3f7&quot;]]],536870916]],[&quot;^1A&quot;,[301,&quot;^[&quot;,&quot;## 监控与审计&quot;,536870916]],[&quot;^1A&quot;,[301,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[301,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[301,&quot;^K&quot;,297,536870916]],[&quot;^1A&quot;,[301,&quot;^X&quot;,3,536870916]],[&quot;^1A&quot;,[301,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3585,&quot;^1L&quot;,3608],536870916]],[&quot;^1A&quot;,[301,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[301,&quot;^13&quot;,287,536870916]],[&quot;^1A&quot;,[301,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[301,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;监控与审计&quot;]],536870916]],[&quot;^1A&quot;,[301,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[301,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[301,&quot;^?&quot;,&quot;~u611b87e6-2ee7-4bb7-b72a-b1ba67266cbf&quot;,536870916]],[&quot;^1A&quot;,[302,&quot;^1E&quot;,&quot;-e7--9b--91--e6--8e--a7--e7--b3--bb--e7--bb--9f-&quot;,536870916]],[&quot;^1A&quot;,[302,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;制作用于监控的图表、告警，这些系统能让你在周末上午安安稳稳的睡大觉，或者凌晨2点被惊醒并庆幸此时用户数很少。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[302,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[302,&quot;^[&quot;,&quot;监控系统\\n制作用于监控的图表、告警，这些系统能让你在周末上午安安稳稳的睡大觉，或者凌晨2点被惊醒并庆幸此时用户数很少。&quot;,536870916]],[&quot;^1A&quot;,[302,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[302,&quot;^K&quot;,301,536870916]],[&quot;^1A&quot;,[302,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[302,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3608,&quot;^1L&quot;,3792],536870916]],[&quot;^1A&quot;,[302,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[302,&quot;^13&quot;,301,536870916]],[&quot;^1A&quot;,[302,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;监控系统&quot;]],536870916]],[&quot;^1A&quot;,[302,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[302,&quot;^?&quot;,&quot;~u611b87e6-0ebc-4df2-9ceb-80f96731e3f7&quot;,536870916]],[&quot;^1A&quot;,[303,&quot;^1E&quot;,&quot;-e5--ae--a1--e8--ae--a1--e7--b3--bb--e7--bb--9f-&quot;,536870916]],[&quot;^1A&quot;,[303,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[303,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[303,&quot;^[&quot;,&quot;审计系统&quot;,536870916]],[&quot;^1A&quot;,[303,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[303,&quot;^K&quot;,302,536870916]],[&quot;^1A&quot;,[303,&quot;^X&quot;,4,536870916]],[&quot;^1A&quot;,[303,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3792,&quot;^1L&quot;,3809],536870916]],[&quot;^1A&quot;,[303,&quot;^17&quot;,74,536870916]],[&quot;^1A&quot;,[303,&quot;^13&quot;,301,536870916]],[&quot;^1A&quot;,[303,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;审计系统&quot;]],536870916]],[&quot;^1A&quot;,[303,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[303,&quot;^?&quot;,&quot;~u611b87e6-ef6c-4894-b799-78aa12a42fc2&quot;,536870916]],[&quot;^1A&quot;,[304,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[304,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[304,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[304,&quot;^[&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[304,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[304,&quot;^K&quot;,77,536870916]],[&quot;^1A&quot;,[304,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[304,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,1],536870916]],[&quot;^1A&quot;,[304,&quot;^17&quot;,77,536870916]],[&quot;^1A&quot;,[304,&quot;^13&quot;,77,536870916]],[&quot;^1A&quot;,[304,&quot;^Z&quot;,[],536870916]],[&quot;^1A&quot;,[304,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[304,&quot;^?&quot;,&quot;~u611b87e6-02b0-4515-ad4f-5e98b2c885a8&quot;,536870916]],[&quot;^1A&quot;,[305,&quot;^1E&quot;,&quot;synchronized&quot;,536870916]],[&quot;^1A&quot;,[305,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[305,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-49a5-4c5b-8937-79e329128f48&quot;],[&quot;^?&quot;,&quot;~u611b87e6-9de2-4fe6-87c9-e71b359f6a37&quot;],[&quot;^?&quot;,&quot;~u611b87e6-83fb-4d4a-92bd-c7fcaa7089bd&quot;],[&quot;^?&quot;,&quot;~u611b87e6-2fa7-4593-80c1-3c5956aaf6b8&quot;],[&quot;^?&quot;,&quot;~u611b87e6-d85c-464e-b938-a80848881199&quot;],[&quot;^?&quot;,&quot;~u611b87e6-9c62-4b12-ae4a-229e35b4b511&quot;]]],536870916]],[&quot;^1A&quot;,[305,&quot;^[&quot;,&quot;## synchronized\\nrefrence:: [synchronized](https://www.cnblogs.com/woshimrf/p/java-synchronized.html)&quot;,536870916]],[&quot;^1A&quot;,[305,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[305,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[305,&quot;^K&quot;,60,536870916]],[&quot;^1A&quot;,[305,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[305,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,105],536870916]],[&quot;^1A&quot;,[305,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[305,&quot;^13&quot;,60,536870916]],[&quot;^1A&quot;,[305,&quot;^D&quot;,[&quot;^ &quot;,&quot;~:refrence&quot;,&quot;[synchronized](https://www.cnblogs.com/woshimrf/p/java-synchronized.html)&quot;],536870916]],[&quot;^1A&quot;,[305,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2:&quot;]],536870916]],[&quot;^1A&quot;,[305,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[305,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;synchronized&quot;]],536870916]],[&quot;^1A&quot;,[305,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[305,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[305,&quot;^?&quot;,&quot;~u611b87e6-2fbc-4352-a625-36c0582e2ca0&quot;,536870916]],[&quot;^1A&quot;,[306,&quot;^1E&quot;,&quot;-e5--ba--94--e7--94--a8--e6--96--b9--e5--bc--8f-&quot;,536870916]],[&quot;^1A&quot;,[306,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;synchronized关键字最主要有以下3种应用方式：&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;修饰实例方法，作用于当前实例加锁，进入同步代码前要获得当前实例的锁&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;修饰静态方法，作用于当前类对象加锁，进入同步代码前要获得当前类对象的锁&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;修饰代码块，指定加锁对象，对给定对象加锁，进入同步代码块前要获得给定对象的锁&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,false]]]],536870916]],[&quot;^1A&quot;,[306,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[306,&quot;^[&quot;,&quot;## 应用方式\\n\\nsynchronized关键字最主要有以下3种应用方式：\\n+ 修饰实例方法，作用于当前实例加锁，进入同步代码前要获得当前实例的锁\\n+ 修饰静态方法，作用于当前类对象加锁，进入同步代码前要获得当前类对象的锁\\n+ 修饰代码块，指定加锁对象，对给定对象加锁，进入同步代码块前要获得给定对象的锁&quot;,536870916]],[&quot;^1A&quot;,[306,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[306,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[306,&quot;^K&quot;,305,536870916]],[&quot;^1A&quot;,[306,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[306,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,105,&quot;^1L&quot;,526],536870916]],[&quot;^1A&quot;,[306,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[306,&quot;^13&quot;,305,536870916]],[&quot;^1A&quot;,[306,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[306,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;应用方式&quot;]],536870916]],[&quot;^1A&quot;,[306,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[306,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[306,&quot;^?&quot;,&quot;~u611b87e6-9c62-4b12-ae4a-229e35b4b511&quot;,536870916]],[&quot;^1A&quot;,[307,&quot;^1E&quot;,&quot;-e5--af--b9--e8--b1--a1--e5--a4--b4-&quot;,536870916]],[&quot;^1A&quot;,[307,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;在JVM中，对象在内存中到布局分为三块区域：对象头，实例数据和对齐填充。 如下：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628243643075_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628243643075_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;一般而言，synchronized使用的锁对象是存储在Java对象头里的，jvm采用2个字来存储对象头(如果对象是数组则会分配3个字，多出来到1个字记录的是数组长度)，其主要结构是由Mark Word和Class Metadata Address组成，其结构说明如下：&quot;],[&quot;Break_Line&quot;]]]],[&quot;Table&quot;,[&quot;^ &quot;,&quot;^27&quot;,[[[&quot;Plain&quot;,&quot;虚拟机位数&quot;]],[[&quot;Plain&quot;,&quot;头对象结构&quot;]],[[&quot;Plain&quot;,&quot;说明&quot;]]],&quot;^28&quot;,[[[[[&quot;Plain&quot;,&quot;32/64bit&quot;]],[[&quot;Plain&quot;,&quot;Mark Word&quot;]],[[&quot;Plain&quot;,&quot;存储对象的hashcode, 锁信息或分代年龄或GC标志等信息&quot;]]],[[[&quot;Plain&quot;,&quot;32/64bit&quot;]],[[&quot;Plain&quot;,&quot;Class Metadata Address&quot;]],[[&quot;Plain&quot;,&quot;类型指针指向对象的类元数据， JVM通过这个指针确定该对象是哪个类的实例&quot;]]]]],&quot;^29&quot;,[3]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;其中Mark Word在默认情况下存储着对象的HashCode, 分代年龄，锁标记等。由于对象头的信息是与对象自身定义的数据没有关系到额外存储成本，因此考虑到JVM的空间效率，Mark Word被设计成为一个&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;非固定&quot;]]]],[&quot;Plain&quot;,&quot;的数据结构，以便存储更多有效的数据，它会根据对象本身的状态复用自己的存储空间。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Table&quot;,[&quot;^ &quot;,&quot;^27&quot;,[[[&quot;Plain&quot;,&quot;锁状态&quot;]],[[&quot;Plain&quot;,&quot;25bit&quot;]],[[&quot;Plain&quot;,&quot;4bit&quot;]],[[&quot;Plain&quot;,&quot;1bit是否是偏向锁&quot;]],[[&quot;Plain&quot;,&quot;2bit锁标志位&quot;]]],&quot;^28&quot;,[[[[[&quot;Plain&quot;,&quot;无锁状态&quot;]],[[&quot;Plain&quot;,&quot;对象HashCode&quot;]],[[&quot;Plain&quot;,&quot;对象分代年龄&quot;]],[[&quot;Plain&quot;,&quot;0&quot;]],[[&quot;Plain&quot;,&quot;01&quot;]]],[[[&quot;Plain&quot;,&quot;轻量级锁&quot;]],[[&quot;Plain&quot;,&quot;指向栈中锁记录的指针--&quot;]],[[&quot;Plain&quot;,&quot;&quot;]],[[&quot;Plain&quot;,&quot;&quot;]],[[&quot;Plain&quot;,&quot;00&quot;]]],[[[&quot;Plain&quot;,&quot;重量级锁&quot;]],[[&quot;Plain&quot;,&quot;指向互斥量的指针--&quot;]],[[&quot;Plain&quot;,&quot;&quot;]],[[&quot;Plain&quot;,&quot;&quot;]],[[&quot;Plain&quot;,&quot;10&quot;]]],[[[&quot;Plain&quot;,&quot;GC标记&quot;]],[[&quot;Plain&quot;,&quot;空--&quot;]],[[&quot;Plain&quot;,&quot;&quot;]],[[&quot;Plain&quot;,&quot;&quot;]],[[&quot;Plain&quot;,&quot;11&quot;]]],[[[&quot;Plain&quot;,&quot;偏向锁&quot;]],[[&quot;Plain&quot;,&quot;线程ID+Epoch&quot;]],[[&quot;Plain&quot;,&quot;对象分带年龄&quot;]],[[&quot;Plain&quot;,&quot;1&quot;]],[[&quot;Plain&quot;,&quot;01&quot;]]]]],&quot;^29&quot;,[5]]]],536870916]],[&quot;^1A&quot;,[307,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[307,&quot;^[&quot;,&quot;## 对象头\\n\\n在JVM中，对象在内存中到布局分为三块区域：对象头，实例数据和对齐填充。 如下：\\n![image.png](../assets/image_1628243643075_0.png)\\n\\n一般而言，synchronized使用的锁对象是存储在Java对象头里的，jvm采用2个字来存储对象头(如果对象是数组则会分配3个字，多出来到1个字记录的是数组长度)，其主要结构是由Mark Word和Class Metadata Address组成，其结构说明如下：\\n|虚拟机位数\\t|头对象结构\\t|说明|\\n|---|---|---|\\n|32/64bit\\t|Mark Word\\t|存储对象的hashcode, 锁信息或分代年龄或GC标志等信息|\\n|32/64bit\\t|Class Metadata Address\\t|类型指针指向对象的类元数据， JVM通过这个指针确定该对象是哪个类的实例|\\n其中Mark Word在默认情况下存储着对象的HashCode, 分代年龄，锁标记等。由于对象头的信息是与对象自身定义的数据没有关系到额外存储成本，因此考虑到JVM的空间效率，Mark Word被设计成为一个**非固定**的数据结构，以便存储更多有效的数据，它会根据对象本身的状态复用自己的存储空间。\\n|锁状态|\\t25bit|\\t4bit|\\t1bit是否是偏向锁|\\t2bit锁标志位|\\n|---|---|---|---|---|---|\\n|无锁状态|\\t对象HashCode|\\t对象分代年龄|\\t0|\\t01|\\n|轻量级锁|\\t指向栈中锁记录的指针--|\\t||00|\\n|重量级锁|\\t指向互斥量的指针--|\\t||10|\\n|GC标记|\\t空--|\\t||11|\\n|偏向锁|\\t线程ID+Epoch|对象分带年龄\\t|1|01|&quot;,536870916]],[&quot;^1A&quot;,[307,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[307,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[307,&quot;^K&quot;,306,536870916]],[&quot;^1A&quot;,[307,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[307,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,526,&quot;^1L&quot;,2051],536870916]],[&quot;^1A&quot;,[307,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[307,&quot;^13&quot;,305,536870916]],[&quot;^1A&quot;,[307,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[307,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;对象头&quot;]],536870916]],[&quot;^1A&quot;,[307,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[307,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[307,&quot;^?&quot;,&quot;~u611b87e6-d85c-464e-b938-a80848881199&quot;,536870916]],[&quot;^1A&quot;,[308,&quot;^1E&quot;,&quot;monitor-e5--af--b9--e8--b1--a1--e9--94--81-&quot;,536870916]],[&quot;^1A&quot;,[308,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;每个对象都存在着一个monitor与之关联，对象与其monitor之间的关系有存在多种实现方式，如monitor可以与对象一起创建销毁或当线程试图获取对象锁时自动生成，但当一个monitor被某个线程持有后，它便处于锁定状态。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;ObjectMonitor中有两个队列， &quot;],[&quot;Code&quot;,&quot;_WaitSet&quot;],[&quot;Plain&quot;,&quot;和&quot;],[&quot;Code&quot;,&quot;_EntryList&quot;],[&quot;Plain&quot;,&quot;， 用来保存ObjectWaiter对象列表(每个等待锁的线程都会被封装成ObjectWaiter对象)， _owner指向持有ObjectMonitor对象的线程。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;当多个线程同时访问一段同步代码时，首先会进入_EntryList集合， 当线程获取到对象的monitor后，进入_owner区域， 并把monitor中到onwer变量设置为当前线程， 同时monitor中的计数器count+1。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;若线程调用wait()方法，将释放当前持有的monitor， owner=null， count-1, 同时该线程进入waitSet集合中等待被唤醒。若当前线程执行完毕也将释放monitor(锁)，并复位变量的值，以便其他线程进入获取monitor(锁)。 如下图所示：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628244513301_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628244513301_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[308,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[308,&quot;^[&quot;,&quot;## monitor对象锁\\n\\n每个对象都存在着一个monitor与之关联，对象与其monitor之间的关系有存在多种实现方式，如monitor可以与对象一起创建销毁或当线程试图获取对象锁时自动生成，但当一个monitor被某个线程持有后，它便处于锁定状态。\\n\\nObjectMonitor中有两个队列， `_WaitSet`和`_EntryList`， 用来保存ObjectWaiter对象列表(每个等待锁的线程都会被封装成ObjectWaiter对象)， _owner指向持有ObjectMonitor对象的线程。\\n\\n当多个线程同时访问一段同步代码时，首先会进入_EntryList集合， 当线程获取到对象的monitor后，进入_owner区域， 并把monitor中到onwer变量设置为当前线程， 同时monitor中的计数器count+1。\\n\\n若线程调用wait()方法，将释放当前持有的monitor， owner=null， count-1, 同时该线程进入waitSet集合中等待被唤醒。若当前线程执行完毕也将释放monitor(锁)，并复位变量的值，以便其他线程进入获取monitor(锁)。 如下图所示：\\n![image.png](../assets/image_1628244513301_0.png)&quot;,536870916]],[&quot;^1A&quot;,[308,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[308,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[308,&quot;^K&quot;,307,536870916]],[&quot;^1A&quot;,[308,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[308,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2051,&quot;^1L&quot;,3183],536870916]],[&quot;^1A&quot;,[308,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[308,&quot;^13&quot;,305,536870916]],[&quot;^1A&quot;,[308,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[308,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;monitor对象锁&quot;]],536870916]],[&quot;^1A&quot;,[308,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[308,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[308,&quot;^?&quot;,&quot;~u611b87e6-2fa7-4593-80c1-3c5956aaf6b8&quot;,536870916]],[&quot;^1A&quot;,[309,&quot;^1E&quot;,&quot;synchronized-e4--bb--a3--e7--a0--81--e5--9d--97-&quot;,536870916]],[&quot;^1A&quot;,[309,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;同步语句块的实现使用的是&quot;],[&quot;Code&quot;,&quot;monitorenter&quot;],[&quot;Plain&quot;,&quot; 和 &quot;],[&quot;Code&quot;,&quot;monitorexit&quot;],[&quot;Plain&quot;,&quot; 指令，其中monitorenter指令指向同步代码块的开始位置，monitorexit指令则指明同步代码块的结束位置，当执行monitorenter指令时，当前线程将试图获取 objectref(即对象锁) 所对应的 monitor 的持有权，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;当 objectref 的 monitor 的进入计数器为 0，那线程可以成功取得 monitor，并将计数器值设置为 1&quot;]]]],[&quot;Plain&quot;,&quot;，取锁成功。如果当前线程已经拥有 objectref 的 monitor 的持有权，那它可以重入这个 monitor (关于重入性稍后会分析)，重入时计数器的值也会加 1。倘若其他线程已经拥有 objectref 的 monitor 的所有权，那当前线程将被阻塞，直到正在执行线程执行完毕，即monitorexit指令被执行，执行线程将释放 monitor(锁)并设置计数器值为0 ，其他线程将有机会持有 monitor 。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;值得注意的是编译器将会确保无论方法通过何种方式完成，方法中调用过的每条 monitorenter 指令都有执行其对应 monitorexit 指令，而无论这个方法是正常结束还是异常结束。为了保证在方法异常完成时 monitorenter 和 monitorexit 指令依然可以正确配对执行，编译器会自动产生一个异常处理器，这个异常处理器声明可处理所有的异常，它的目的就是用来执行 monitorexit 指令。从字节码中也可以看出多了一个monitorexit指令，它就是异常结束时被执行的释放monitor 的指令。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[309,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[309,&quot;^[&quot;,&quot;## synchronized代码块\\n\\n同步语句块的实现使用的是`monitorenter` 和 `monitorexit` 指令，其中monitorenter指令指向同步代码块的开始位置，monitorexit指令则指明同步代码块的结束位置，当执行monitorenter指令时，当前线程将试图获取 objectref(即对象锁) 所对应的 monitor 的持有权，**当 objectref 的 monitor 的进入计数器为 0，那线程可以成功取得 monitor，并将计数器值设置为 1**，取锁成功。如果当前线程已经拥有 objectref 的 monitor 的持有权，那它可以重入这个 monitor (关于重入性稍后会分析)，重入时计数器的值也会加 1。倘若其他线程已经拥有 objectref 的 monitor 的所有权，那当前线程将被阻塞，直到正在执行线程执行完毕，即monitorexit指令被执行，执行线程将释放 monitor(锁)并设置计数器值为0 ，其他线程将有机会持有 monitor 。\\n\\n值得注意的是编译器将会确保无论方法通过何种方式完成，方法中调用过的每条 monitorenter 指令都有执行其对应 monitorexit 指令，而无论这个方法是正常结束还是异常结束。为了保证在方法异常完成时 monitorenter 和 monitorexit 指令依然可以正确配对执行，编译器会自动产生一个异常处理器，这个异常处理器声明可处理所有的异常，它的目的就是用来执行 monitorexit 指令。从字节码中也可以看出多了一个monitorexit指令，它就是异常结束时被执行的释放monitor 的指令。&quot;,536870916]],[&quot;^1A&quot;,[309,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[309,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[309,&quot;^K&quot;,308,536870916]],[&quot;^1A&quot;,[309,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[309,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3183,&quot;^1L&quot;,4745],536870916]],[&quot;^1A&quot;,[309,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[309,&quot;^13&quot;,305,536870916]],[&quot;^1A&quot;,[309,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[309,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;synchronized代码块&quot;]],536870916]],[&quot;^1A&quot;,[309,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[309,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[309,&quot;^?&quot;,&quot;~u611b87e6-83fb-4d4a-92bd-c7fcaa7089bd&quot;,536870916]],[&quot;^1A&quot;,[310,&quot;^1E&quot;,&quot;synchronized-e6--96--b9--e6--b3--95-&quot;,536870916]],[&quot;^1A&quot;,[310,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;方法级的同步是隐式，即无需通过字节码指令来控制的，它实现在方法调用和返回操作之中。JVM可以从方法常量池中的&quot;],[&quot;Code&quot;,&quot;方法表结构(method_info Structure)&quot;],[&quot;Plain&quot;,&quot; 中的 &quot;],[&quot;Code&quot;,&quot;ACC_SYNCHRONIZED&quot;],[&quot;Plain&quot;,&quot; 访问标志区分一个方法是否同步方法。当方法调用时，调用指令将会&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;检查方法的 ACC_SYNCHRONIZED 访问标志是否被设置，如果设置了，执行线程将先持有monitor&quot;]]]],[&quot;Plain&quot;,&quot;（虚拟机规范中用的是管程一词）， 然后再执行方法，最后再方法完成(无论是正常完成还是非正常完成)时释放monitor。在方法执行期间，执行线程持有了monitor，其他任何线程都无法再获得同一个monitor。如果一个同步方法执行期间抛 出了异常，并且在方法内部无法处理此异常，那这个同步方法所持有的monitor将在异常抛到同步方法之外时自动释放。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[310,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[310,&quot;^[&quot;,&quot;## synchronized方法\\n\\n方法级的同步是隐式，即无需通过字节码指令来控制的，它实现在方法调用和返回操作之中。JVM可以从方法常量池中的`方法表结构(method_info Structure)` 中的 `ACC_SYNCHRONIZED` 访问标志区分一个方法是否同步方法。当方法调用时，调用指令将会**检查方法的 ACC_SYNCHRONIZED 访问标志是否被设置，如果设置了，执行线程将先持有monitor**（虚拟机规范中用的是管程一词）， 然后再执行方法，最后再方法完成(无论是正常完成还是非正常完成)时释放monitor。在方法执行期间，执行线程持有了monitor，其他任何线程都无法再获得同一个monitor。如果一个同步方法执行期间抛 出了异常，并且在方法内部无法处理此异常，那这个同步方法所持有的monitor将在异常抛到同步方法之外时自动释放。&quot;,536870916]],[&quot;^1A&quot;,[310,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[310,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[310,&quot;^K&quot;,309,536870916]],[&quot;^1A&quot;,[310,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[310,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,4745,&quot;^1L&quot;,5668],536870916]],[&quot;^1A&quot;,[310,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[310,&quot;^13&quot;,305,536870916]],[&quot;^1A&quot;,[310,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[310,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;synchronized方法&quot;]],536870916]],[&quot;^1A&quot;,[310,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[310,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[310,&quot;^?&quot;,&quot;~u611b87e6-9de2-4fe6-87c9-e71b359f6a37&quot;,536870916]],[&quot;^1A&quot;,[311,&quot;^1E&quot;,&quot;-e9--94--81--e4--bc--98--e5--8c--96-&quot;,536870916]],[&quot;^1A&quot;,[311,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;偏向锁&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;偏向锁是Java 6之后加入的新锁，它是一种针对加锁操作的优化手段，经过研究发现，在大多数情况下，锁不仅不存在多线程竞争，而且总是由同一线程多次获得，因此为了减少同一线程获取锁(会涉及到一些CAS操作,耗时)的代价而引入偏向锁。偏向锁的核心思想是，如果一个线程获得了锁，那么锁就进入偏向模式，此时Mark Word 的结构也变为偏向锁结构，当这个线程再次请求锁时，无需再做任何同步操作，即获取锁的过程，这样就省去了大量有关锁申请的操作，从而也就提供程序的性能。所以，对于没有锁竞争的场合，偏向锁有很好的优化效果，毕竟极有可能连续多次是同一个线程申请相同的锁。但是对于锁竞争比较激烈的场合，偏向锁就失效了，因为这样场合极有可能每次申请锁的线程都是不相同的，因此这种场合下不应该使用偏向锁，否则会得不偿失，需要注意的是，偏向锁失败后，并不会立即膨胀为重量级锁，而是先升级为轻量级锁。下面我们接着了解轻量级锁。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;轻量级锁&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;倘若偏向锁失败，虚拟机并不会立即升级为重量级锁，它还会尝试使用一种称为轻量级锁的优化手段(1.6之后加入的)，此时Mark Word 的结构也变为轻量级锁的结构。轻量级锁能够提升程序性能的依据是“对绝大部分的锁，在整个同步周期内都不存在竞争”，注意这是经验数据。需要了解的是，轻量级锁所适应的场景是线程交替执行同步块的场合，如果存在同一时间访问同一锁的场合，就会导致轻量级锁膨胀为重量级锁。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;自旋锁&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;轻量级锁失败后，虚拟机为了避免线程真实地在操作系统层面挂起，还会进行一项称为自旋锁的优化手段。这是基于在大多数情况下，线程持有锁的时间都不会太长，如果直接挂起操作系统层面的线程可能会得不偿失，毕竟操作系统实现线程之间的切换时需要从用户态转换到核心态，这个状态之间的转换需要相对比较长的时间，时间成本相对较高，因此自旋锁会假设在不久将来，当前的线程可以获得锁，因此虚拟机会让当前想要获取锁的线程做几个空循环(这也是称为自旋的原因)，一般不会太久，可能是50个循环或100循环，在经过若干次循环后，如果得到锁，就顺利进入临界区。如果还不能获得锁，那就会将线程在操作系统层面挂起，这就是自旋锁的优化方式，这种方式确实也是可以提升效率的。最后没办法也就只能升级为重量级锁了。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;锁消除&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;消除锁是虚拟机另外一种锁的优化，这种优化更彻底，Java虚拟机在JIT编译时(可以简单理解为当某段代码即将第一次被执行时进行编译，又称即时编译)，通过对运行上下文的扫描，去除不可能存在共享资源竞争的锁，通过这种方式消除没有必要的锁，可以节省毫无意义的请求锁时间，如下StringBuffer的append是一个同步方法，但是在add方法中的StringBuffer属于一个局部变量，并且不会被其他线程所使用，因此StringBuffer不可能存在共享资源竞争的情景，JVM会自动将其锁消除。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[311,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[311,&quot;^[&quot;,&quot;## 锁优化\\n\\n**_偏向锁_**\\n\\n偏向锁是Java 6之后加入的新锁，它是一种针对加锁操作的优化手段，经过研究发现，在大多数情况下，锁不仅不存在多线程竞争，而且总是由同一线程多次获得，因此为了减少同一线程获取锁(会涉及到一些CAS操作,耗时)的代价而引入偏向锁。偏向锁的核心思想是，如果一个线程获得了锁，那么锁就进入偏向模式，此时Mark Word 的结构也变为偏向锁结构，当这个线程再次请求锁时，无需再做任何同步操作，即获取锁的过程，这样就省去了大量有关锁申请的操作，从而也就提供程序的性能。所以，对于没有锁竞争的场合，偏向锁有很好的优化效果，毕竟极有可能连续多次是同一个线程申请相同的锁。但是对于锁竞争比较激烈的场合，偏向锁就失效了，因为这样场合极有可能每次申请锁的线程都是不相同的，因此这种场合下不应该使用偏向锁，否则会得不偿失，需要注意的是，偏向锁失败后，并不会立即膨胀为重量级锁，而是先升级为轻量级锁。下面我们接着了解轻量级锁。\\n\\n**_轻量级锁_**\\n\\n倘若偏向锁失败，虚拟机并不会立即升级为重量级锁，它还会尝试使用一种称为轻量级锁的优化手段(1.6之后加入的)，此时Mark Word 的结构也变为轻量级锁的结构。轻量级锁能够提升程序性能的依据是“对绝大部分的锁，在整个同步周期内都不存在竞争”，注意这是经验数据。需要了解的是，轻量级锁所适应的场景是线程交替执行同步块的场合，如果存在同一时间访问同一锁的场合，就会导致轻量级锁膨胀为重量级锁。\\n\\n**_自旋锁_**\\n\\n轻量级锁失败后，虚拟机为了避免线程真实地在操作系统层面挂起，还会进行一项称为自旋锁的优化手段。这是基于在大多数情况下，线程持有锁的时间都不会太长，如果直接挂起操作系统层面的线程可能会得不偿失，毕竟操作系统实现线程之间的切换时需要从用户态转换到核心态，这个状态之间的转换需要相对比较长的时间，时间成本相对较高，因此自旋锁会假设在不久将来，当前的线程可以获得锁，因此虚拟机会让当前想要获取锁的线程做几个空循环(这也是称为自旋的原因)，一般不会太久，可能是50个循环或100循环，在经过若干次循环后，如果得到锁，就顺利进入临界区。如果还不能获得锁，那就会将线程在操作系统层面挂起，这就是自旋锁的优化方式，这种方式确实也是可以提升效率的。最后没办法也就只能升级为重量级锁了。\\n\\n**_锁消除_**\\n\\n消除锁是虚拟机另外一种锁的优化，这种优化更彻底，Java虚拟机在JIT编译时(可以简单理解为当某段代码即将第一次被执行时进行编译，又称即时编译)，通过对运行上下文的扫描，去除不可能存在共享资源竞争的锁，通过这种方式消除没有必要的锁，可以节省毫无意义的请求锁时间，如下StringBuffer的append是一个同步方法，但是在add方法中的StringBuffer属于一个局部变量，并且不会被其他线程所使用，因此StringBuffer不可能存在共享资源竞争的情景，JVM会自动将其锁消除。&quot;,536870916]],[&quot;^1A&quot;,[311,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[311,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[311,&quot;^K&quot;,310,536870916]],[&quot;^1A&quot;,[311,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[311,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5668,&quot;^1L&quot;,9134],536870916]],[&quot;^1A&quot;,[311,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[311,&quot;^13&quot;,305,536870916]],[&quot;^1A&quot;,[311,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[311,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;锁优化&quot;]],536870916]],[&quot;^1A&quot;,[311,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[311,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[311,&quot;^?&quot;,&quot;~u611b87e6-49a5-4c5b-8937-79e329128f48&quot;,536870916]],[&quot;^1A&quot;,[312,&quot;^1E&quot;,&quot;volatile&quot;,536870916]],[&quot;^1A&quot;,[312,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[312,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u611b87e6-a9dc-4ad4-8b92-309a88d9d59b&quot;],[&quot;^?&quot;,&quot;~u611b87e6-8847-45f5-a8c2-caaa0ac77016&quot;],[&quot;^?&quot;,&quot;~u611b87e6-cca0-4e46-8d82-068a257c5c72&quot;],[&quot;^?&quot;,&quot;~u611b87e6-da33-4cea-9a4a-5c030940eb0a&quot;]]],536870916]],[&quot;^1A&quot;,[312,&quot;^[&quot;,&quot;## volatile\\nreference:: [padi tech](https://www.pdai.tech/md/java/thread/java-thread-x-key-volatile.html)&quot;,536870916]],[&quot;^1A&quot;,[312,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[312,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[312,&quot;^K&quot;,305,536870916]],[&quot;^1A&quot;,[312,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[312,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9134,&quot;^1L&quot;,9240],536870916]],[&quot;^1A&quot;,[312,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[312,&quot;^13&quot;,60,536870916]],[&quot;^1A&quot;,[312,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;[padi tech](https://www.pdai.tech/md/java/thread/java-thread-x-key-volatile.html)&quot;],536870916]],[&quot;^1A&quot;,[312,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^26&quot;]],536870916]],[&quot;^1A&quot;,[312,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[312,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;volatile&quot;]],536870916]],[&quot;^1A&quot;,[312,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[312,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[312,&quot;^?&quot;,&quot;~u611b87e6-8123-4998-82ee-eeadba9e35a4&quot;,536870916]],[&quot;^1A&quot;,[313,&quot;^1E&quot;,&quot;-e9--98--b2--e9--87--8d--e6--8e--92--e5--ba--8f-&quot;,536870916]],[&quot;^1A&quot;,[313,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;编译器可以改变指令执行的顺序以使吞吐量最大化。这种顺序上的变化不会改变代码语义，但是编译器假定内存的值仅仅在代码中有&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;显式的修改指令&quot;]]]],[&quot;Plain&quot;,&quot;时才会改变。然而，内存的值可以被另一个线程改变！&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;在程序运行时，为了提高执行性能，编译器和处理器会对指令进行重排序，JMM 为了保证在不同的编译器和 CPU 上有相同的结果，通过插入特定类型的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;内存屏障&quot;]]]]]]],[&quot;Plain&quot;,&quot;来禁止+ 特定类型的编译器重排序和处理器重排序，插入一条内存屏障会告诉编译器和 CPU：不管什么指令都不能和这条 Memory Barrier 指令重排序。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[313,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[313,&quot;^[&quot;,&quot;## 防重排序\\n编译器可以改变指令执行的顺序以使吞吐量最大化。这种顺序上的变化不会改变代码语义，但是编译器假定内存的值仅仅在代码中有**显式的修改指令**时才会改变。然而，内存的值可以被另一个线程改变！\\n\\n在程序运行时，为了提高执行性能，编译器和处理器会对指令进行重排序，JMM 为了保证在不同的编译器和 CPU 上有相同的结果，通过插入特定类型的**_内存屏障_**来禁止+ 特定类型的编译器重排序和处理器重排序，插入一条内存屏障会告诉编译器和 CPU：不管什么指令都不能和这条 Memory Barrier 指令重排序。&quot;,536870916]],[&quot;^1A&quot;,[313,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[313,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[313,&quot;^K&quot;,312,536870916]],[&quot;^1A&quot;,[313,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[313,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9240,&quot;^1L&quot;,9945],536870916]],[&quot;^1A&quot;,[313,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[313,&quot;^13&quot;,312,536870916]],[&quot;^1A&quot;,[313,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[313,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;防重排序&quot;]],536870916]],[&quot;^1A&quot;,[313,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[313,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[313,&quot;^?&quot;,&quot;~u611b87e6-da33-4cea-9a4a-5c030940eb0a&quot;,536870916]],[&quot;^1A&quot;,[314,&quot;^1E&quot;,&quot;-e5--8f--af--e8--a7--81--e6--80--a7-&quot;,536870916]],[&quot;^1A&quot;,[314,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[314,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[314,&quot;^[&quot;,&quot;## 可见性&quot;,536870916]],[&quot;^1A&quot;,[314,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[314,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[314,&quot;^K&quot;,313,536870916]],[&quot;^1A&quot;,[314,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[314,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9945,&quot;^1L&quot;,9961],536870916]],[&quot;^1A&quot;,[314,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[314,&quot;^13&quot;,312,536870916]],[&quot;^1A&quot;,[314,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[314,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;可见性&quot;]],536870916]],[&quot;^1A&quot;,[314,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[314,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[314,&quot;^?&quot;,&quot;~u611b87e6-cca0-4e46-8d82-068a257c5c72&quot;,536870916]],[&quot;^1A&quot;,[315,&quot;^1E&quot;,&quot;-e6--9c--89--e5--ba--8f--e6--80--a7-&quot;,536870916]],[&quot;^1A&quot;,[315,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[315,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[315,&quot;^[&quot;,&quot;## 有序性&quot;,536870916]],[&quot;^1A&quot;,[315,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[315,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[315,&quot;^K&quot;,314,536870916]],[&quot;^1A&quot;,[315,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[315,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9961,&quot;^1L&quot;,9977],536870916]],[&quot;^1A&quot;,[315,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[315,&quot;^13&quot;,312,536870916]],[&quot;^1A&quot;,[315,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[315,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;有序性&quot;]],536870916]],[&quot;^1A&quot;,[315,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[315,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[315,&quot;^?&quot;,&quot;~u611b87e6-8847-45f5-a8c2-caaa0ac77016&quot;,536870916]],[&quot;^1A&quot;,[316,&quot;^1E&quot;,&quot;happens_before&quot;,536870916]],[&quot;^1A&quot;,[316,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;JVM定义的先行发生原则让&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;一个操作无需控制就能先于另一个操作完成&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;单一线程原则 在一个线程内，在程序前面的操作先行发生于后面的操作。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;管程锁定规则 一个 unlock 操作先行发生于后面对同一个锁的 lock 操作。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;volatile变量规则 对一个 volatile 变量的写操作先行发生于后面对这个变量的读操作。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;线程启动规则 对象的 start() 方法调用先行发生于此线程的每一个动作。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,4,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;线程加入规则 对象的结束先行发生于 join() 方法返回。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,5,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;线程中断规则 对线程 interrupt() 方法的调用先行发生于被中断线程的代码检测到中断事件的发生，可以通过 interrupted() 方法检测到是否有中断发生。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,6,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;对象终结规则 一个对象的初始化完成(构造函数执行结束)先行发生于它的 finalize() 方法的开始。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,7,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;传递性 如果操作 A 先行发生于操作 B，操作 B 先行发生于操作 C，那么操作 A 先行发生于操作 C。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,8,&quot;^22&quot;,[],&quot;^23&quot;,3,&quot;^24&quot;,true]]]],536870916]],[&quot;^1A&quot;,[316,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[316,&quot;^[&quot;,&quot;## happens-before\\nreference:: [padi tech](https://www.pdai.tech/md/java/thread/java-thread-x-theorty.html#happens-before-%e8%a7%84%e5%88%99)\\nJVM定义的先行发生原则让**一个操作无需控制就能先于另一个操作完成**。\\n\\n1. 单一线程原则 在一个线程内，在程序前面的操作先行发生于后面的操作。  \\n2. 管程锁定规则 一个 unlock 操作先行发生于后面对同一个锁的 lock 操作。  \\n3. volatile变量规则 对一个 volatile 变量的写操作先行发生于后面对这个变量的读操作。  \\n4. 线程启动规则 对象的 start() 方法调用先行发生于此线程的每一个动作。  \\n5. 线程加入规则 对象的结束先行发生于 join() 方法返回。  \\n6. 线程中断规则 对线程 interrupt() 方法的调用先行发生于被中断线程的代码检测到中断事件的发生，可以通过 interrupted() 方法检测到是否有中断发生。 \\n7. 对象终结规则 一个对象的初始化完成(构造函数执行结束)先行发生于它的 finalize() 方法的开始。 \\n8. 传递性 如果操作 A 先行发生于操作 B，操作 B 先行发生于操作 C，那么操作 A 先行发生于操作 C。&quot;,536870916]],[&quot;^1A&quot;,[316,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[316,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[316,&quot;^K&quot;,315,536870916]],[&quot;^1A&quot;,[316,&quot;^X&quot;,2,536870916]],[&quot;^1A&quot;,[316,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9977,&quot;^1L&quot;,11208],536870916]],[&quot;^1A&quot;,[316,&quot;^17&quot;,60,536870916]],[&quot;^1A&quot;,[316,&quot;^13&quot;,312,536870916]],[&quot;^1A&quot;,[316,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;[padi tech](https://www.pdai.tech/md/java/thread/java-thread-x-theorty.html#happens-before-%e8%a7%84%e5%88%99)&quot;],536870916]],[&quot;^1A&quot;,[316,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^26&quot;]],536870916]],[&quot;^1A&quot;,[316,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[316,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;happens-before&quot;]],536870916]],[&quot;^1A&quot;,[316,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[316,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[316,&quot;^?&quot;,&quot;~u611b87e6-a9dc-4ad4-8b92-309a88d9d59b&quot;,536870916]],[&quot;^1A&quot;,[317,&quot;^1E&quot;,&quot;-e5--88--86--e7--89--87--e7--ae--80--e4--bb--8b-&quot;,536870916]],[&quot;^1A&quot;,[317,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;分片（sharding）是指将数据拆分，将其分散存放在不同的机器上的过程。有时也用分区（partitioning）来表示这个概念。将数据分散到不同的机器上，不需要功能强大的大型计算机就可以储存更多的数据，处理更大的负载。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[317,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[317,&quot;^[&quot;,&quot;## 分片简介 \\n\\n分片（sharding）是指将数据拆分，将其分散存放在不同的机器上的过程。有时也用分区（partitioning）来表示这个概念。将数据分散到不同的机器上，不需要功能强大的大型计算机就可以储存更多的数据，处理更大的负载。&quot;,536870916]],[&quot;^1A&quot;,[317,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[317,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[317,&quot;^K&quot;,61,536870916]],[&quot;^1A&quot;,[317,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[317,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,309],536870916]],[&quot;^1A&quot;,[317,&quot;^17&quot;,61,536870916]],[&quot;^1A&quot;,[317,&quot;^13&quot;,61,536870916]],[&quot;^1A&quot;,[317,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[317,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;分片简介 &quot;]],536870916]],[&quot;^1A&quot;,[317,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[317,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[317,&quot;^?&quot;,&quot;~u611b87e6-e92b-4475-a85a-5364bc801386&quot;,536870916]],[&quot;^1A&quot;,[318,&quot;^1E&quot;,&quot;-e5--88--86--e7--89--87--e6--9f--a5--e8--af--a2-&quot;,536870916]],[&quot;^1A&quot;,[318,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;包含片键的查询能够直接被发送到目标分片或者是集群分片的一个子集，这样的查询叫做定向查询（targeted query）。有些查询必须被发送到所有分片，这样的查询叫做分散-聚集查询（scatter-gather query）&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[318,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[318,&quot;^[&quot;,&quot;## 分片查询 \\n\\n包含片键的查询能够直接被发送到目标分片或者是集群分片的一个子集，这样的查询叫做定向查询（targeted query）。有些查询必须被发送到所有分片，这样的查询叫做分散-聚集查询（scatter-gather query）&quot;,536870916]],[&quot;^1A&quot;,[318,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[318,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[318,&quot;^K&quot;,317,536870916]],[&quot;^1A&quot;,[318,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[318,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,309,&quot;^1L&quot;,591],536870916]],[&quot;^1A&quot;,[318,&quot;^17&quot;,61,536870916]],[&quot;^1A&quot;,[318,&quot;^13&quot;,61,536870916]],[&quot;^1A&quot;,[318,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[318,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;分片查询 &quot;]],536870916]],[&quot;^1A&quot;,[318,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[318,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[318,&quot;^?&quot;,&quot;~u611b87e6-4c63-41d0-b136-e6e8034626c8&quot;,536870916]],[&quot;^1A&quot;,[319,&quot;^1E&quot;,&quot;-e7--89--87--e9--94--ae--e9--80--89--e6--8b--a9-&quot;,536870916]],[&quot;^1A&quot;,[319,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;选择分片前，先要评估以下问题。分片能够降低&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;写延迟&quot;]]]],[&quot;Plain&quot;,&quot;。方式通常是将请求发送到地理位置更近的服务器或者更强的服务器。分片能够增加&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;吞吐量&quot;]]]],[&quot;Plain&quot;,&quot;。因为可以提高并行性，并确保请求被均衡地分发到各集群成员上。分片能增加系统资源。分片越多，可用RAM也越多。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;升序片键 &quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;升序片键通常有点类似于\\&quot;date\\&quot;字段或者是ObjectId，是一种会随着时间稳定增长的字段。自增ID也是升序键的一种。 升序片键会导致所有的写请求都会被路由到一个分片中。该块是唯一一个&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;不断增长和拆分&quot;]]]],[&quot;Plain&quot;,&quot;的块，因为它是唯一一个能够接收到插入请求的块。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;另外，升序片键会导致MongoDB的数据均衡处理变得困难，因为所有的新块都是由同一分片创建的。而不能像均衡分发的系统中那样，只需要纠正比较小的不均衡就好了。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;随机片键 &quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;随机分发的键可以是用户名、邮件地址、UDID（Unique Device IDentifier，唯一设备标识符 ）、MD5散列值，或者是数据集中其他一些没有规律的健。由于写入数据是随机分发的，各分片增长的速度应大致相同，这就减少了需要进行迁移的次数。使用随机分发片键的唯一弊端在于，MongoDB在随机访问超出RAM大小的数据时效率不高。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;基于位置的片键&quot;]]]]]]]]]]],536870916]],[&quot;^1A&quot;,[319,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[319,&quot;^[&quot;,&quot;## 片键选择\\n\\n选择分片前，先要评估以下问题。分片能够降低**写延迟**。方式通常是将请求发送到地理位置更近的服务器或者更强的服务器。分片能够增加**吞吐量**。因为可以提高并行性，并确保请求被均衡地分发到各集群成员上。分片能增加系统资源。分片越多，可用RAM也越多。\\n\\n**_升序片键 _**\\n\\n升序片键通常有点类似于\\&quot;date\\&quot;字段或者是ObjectId，是一种会随着时间稳定增长的字段。自增ID也是升序键的一种。 升序片键会导致所有的写请求都会被路由到一个分片中。该块是唯一一个**不断增长和拆分**的块，因为它是唯一一个能够接收到插入请求的块。\\n\\n另外，升序片键会导致MongoDB的数据均衡处理变得困难，因为所有的新块都是由同一分片创建的。而不能像均衡分发的系统中那样，只需要纠正比较小的不均衡就好了。\\n\\n**_随机片键 _**\\n\\n随机分发的键可以是用户名、邮件地址、UDID（Unique Device IDentifier，唯一设备标识符 ）、MD5散列值，或者是数据集中其他一些没有规律的健。由于写入数据是随机分发的，各分片增长的速度应大致相同，这就减少了需要进行迁移的次数。使用随机分发片键的唯一弊端在于，MongoDB在随机访问超出RAM大小的数据时效率不高。\\n\\n**_基于位置的片键_**&quot;,536870916]],[&quot;^1A&quot;,[319,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[319,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[319,&quot;^K&quot;,318,536870916]],[&quot;^1A&quot;,[319,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[319,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,591,&quot;^1L&quot;,2023],536870916]],[&quot;^1A&quot;,[319,&quot;^17&quot;,61,536870916]],[&quot;^1A&quot;,[319,&quot;^13&quot;,61,536870916]],[&quot;^1A&quot;,[319,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[319,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;片键选择&quot;]],536870916]],[&quot;^1A&quot;,[319,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[319,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[319,&quot;^?&quot;,&quot;~u611b87e6-56dc-4fb5-a9d1-14146734c42b&quot;,536870916]],[&quot;^1A&quot;,[320,&quot;^1E&quot;,&quot;-e4--bb--80--e4--b9--88--e6--98--af--e5--89--af--e6--9c--ac--e9--9b--86-&quot;,536870916]],[&quot;^1A&quot;,[320,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;副本集是一组服务器，其中有一个主服务器（primary），用于处理客户端请求；还有多个备份服务器（secondary），用于保存主服务器的数据副本。如果主服务器崩溃了，备份服务器会自动将其中一个成员升级为新的主服务器。&quot;]]]]],536873392]],[&quot;^1A&quot;,[320,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[320,&quot;^[&quot;,&quot;## 什么是副本集 \\nid:: 60fa96d4-6cb1-4ad1-8d7b-0260d786048f\\n副本集是一组服务器，其中有一个主服务器（primary），用于处理客户端请求；还有多个备份服务器（secondary），用于保存主服务器的数据副本。如果主服务器崩溃了，备份服务器会自动将其中一个成员升级为新的主服务器。&quot;,536873392]],[&quot;^1A&quot;,[320,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[320,&quot;^14&quot;,2,536873392]],[&quot;^1A&quot;,[320,&quot;^K&quot;,68,536870916]],[&quot;^1A&quot;,[320,&quot;^X&quot;,1,536873392]],[&quot;^1A&quot;,[320,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,370],536870916]],[&quot;^1A&quot;,[320,&quot;^17&quot;,68,536870916]],[&quot;^1A&quot;,[320,&quot;^13&quot;,68,536870916]],[&quot;^1A&quot;,[320,&quot;^12&quot;,68,536873392]],[&quot;^1A&quot;,[320,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fa96d4-6cb1-4ad1-8d7b-0260d786048f&quot;],536873392]],[&quot;^1A&quot;,[320,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[320,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[320,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;什么是副本集 &quot;]],536873392]],[&quot;^1A&quot;,[320,&quot;^15&quot;,&quot;^1N&quot;,536873392]],[&quot;^1A&quot;,[320,&quot;^1D&quot;,false,536873392]],[&quot;^1A&quot;,[320,&quot;^?&quot;,&quot;~u60fa96d4-6cb1-4ad1-8d7b-0260d786048f&quot;,536870916]],[&quot;^1A&quot;,[321,&quot;^1E&quot;,&quot;-e9--80--89--e4--b8--be--e6--9c--ba--e5--88--b6-&quot;,536870916]],[&quot;^1A&quot;,[321,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;大多数 - Majority&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;选择主节点时需要由大多数决定，主节点只有在得到大多数支持时才能继续作为主节点，写操作被复制到大多数成员时这个写操作。这里的大多数被定义为“副本中一半以上的成员” 。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;成员总数 \\t 大多数 &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;1 \\t 1 &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;2 \\t 2 &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;3 \\t 2 &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;4 \\t 3 &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;5 \\t 3 &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;6 \\t 4 &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;7 \\t 4&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[321,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[321,&quot;^[&quot;,&quot;## 选举机制\\nid:: 60fa96d4-72a9-4cec-8082-683c81e0ce37\\n\\n**_大多数 - Majority_**\\n\\n选择主节点时需要由大多数决定，主节点只有在得到大多数支持时才能继续作为主节点，写操作被复制到大多数成员时这个写操作。这里的大多数被定义为“副本中一半以上的成员” 。\\n\\n成员总数 \\t 大多数 \\n 1 \\t 1 \\n 2 \\t 2 \\n 3 \\t 2 \\n 4 \\t 3 \\n 5 \\t 3 \\n 6 \\t 4 \\n 7 \\t 4&quot;,536870916]],[&quot;^1A&quot;,[321,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[321,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[321,&quot;^K&quot;,320,536870916]],[&quot;^1A&quot;,[321,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[321,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,370,&quot;^1L&quot;,814],536870916]],[&quot;^1A&quot;,[321,&quot;^17&quot;,68,536870916]],[&quot;^1A&quot;,[321,&quot;^13&quot;,68,536870916]],[&quot;^1A&quot;,[321,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fa96d4-72a9-4cec-8082-683c81e0ce37&quot;],536870916]],[&quot;^1A&quot;,[321,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[321,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[321,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;选举机制&quot;]],536870916]],[&quot;^1A&quot;,[321,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[321,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[321,&quot;^?&quot;,&quot;~u60fa96d4-72a9-4cec-8082-683c81e0ce37&quot;,536870916]],[&quot;^1A&quot;,[322,&quot;^1E&quot;,&quot;-e9--80--89--e4--b8--be--e4--bb--b2--e8--a3--81--e8--80--85-&quot;,536870916]],[&quot;^1A&quot;,[322,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 但是，很多人的应用程序使用量比较小，并不想保存三份数据副本。两份副本已经足够了，保存第三份副本的话纯粹是浪费人力、物力和财力。&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 对于这种部署，MongoDB支持一种特殊类型的成员，称为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;仲裁者（arbiter）&quot;]]]],[&quot;Plain&quot;,&quot;。仲裁者的唯一作用就是参与选举。仲裁者并不保存数据，也不会为客户端提供服务：它只是为了帮助具有两个成员的副本集能够满足“大多数”这个条件。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[322,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[322,&quot;^[&quot;,&quot;## 选举仲裁者 \\nid:: 60fa96d4-1576-4759-8c10-9e49a72a39ff\\n\\n但是，很多人的应用程序使用量比较小，并不想保存三份数据副本。两份副本已经足够了，保存第三份副本的话纯粹是浪费人力、物力和财力。\\n\\n对于这种部署，MongoDB支持一种特殊类型的成员，称为**仲裁者（arbiter）**。仲裁者的唯一作用就是参与选举。仲裁者并不保存数据，也不会为客户端提供服务：它只是为了帮助具有两个成员的副本集能够满足“大多数”这个条件。&quot;,536870916]],[&quot;^1A&quot;,[322,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[322,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[322,&quot;^K&quot;,321,536870916]],[&quot;^1A&quot;,[322,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[322,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,814,&quot;^1L&quot;,1384],536870916]],[&quot;^1A&quot;,[322,&quot;^17&quot;,68,536870916]],[&quot;^1A&quot;,[322,&quot;^13&quot;,68,536870916]],[&quot;^1A&quot;,[322,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fa96d4-1576-4759-8c10-9e49a72a39ff&quot;],536870916]],[&quot;^1A&quot;,[322,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[322,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[322,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;选举仲裁者 &quot;]],536870916]],[&quot;^1A&quot;,[322,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[322,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[322,&quot;^?&quot;,&quot;~u60fa96d4-1576-4759-8c10-9e49a72a39ff&quot;,536870916]],[&quot;^1A&quot;,[323,&quot;^1E&quot;,&quot;-e5--89--af--e6--9c--ac--e9--9b--86--e5--90--8c--e6--ad--a5-&quot;,536870916]],[&quot;^1A&quot;,[323,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;复制用于在多台服务器之间备份数据。MongoDB的复制功能是使用&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;操作日志oplog&quot;]]]],[&quot;Plain&quot;,&quot;实现的，操作日志包含了主节点的每一次写操作。oplog是主节点的local数据库中的一个&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;固定集合&quot;]]]],[&quot;Plain&quot;,&quot;。备份节点通过查询这个集合就可以知道需要进行复制的操作。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;每个备份节点都维护着自己的oplog，记录着每一次从主节点复制数据的操作。这样，每个成员都可以作为同步源提供给其他成员使用。备份节点从当前使用的同步源中获取需要执行的操作，然后在自己的数据集上执行这些操作，最后再将这些操作写入自己的oplog。如果遇到某个操作失败的情况（只有当同步源的数据损坏或者数据与主节点不一致时才可能发生），那么备份节点就会停止从当前的同步源复制数据。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;初始化同步&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;首先，这个成员会做一些记录前的准备工作：选择一个成员作为同步源，在local.me中为自己创建一个标识符，删除所有已存在的数据库，以一个全新的状态开始进行同步。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;然后是克隆（cloning），就是将同步源的所有记录全部复制到本地。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;然后就进入oplog同步的第一步，克隆过程中的所有操作都会被记录到oplog中。如果有文档在克隆过程中被移动了，就可能会被遗漏，导致没有被克隆，对于这样的文档，可能需要重新进行克隆&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;接下来是oplog同步过程的第二步，用于将第一个oplog同步中的操作记录下来。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;过程可以总结为先遍历Primary上的所有DB的所有集合，将数据拷贝到自身节点，然后读取全量同步开始到结束时间段内的oplog并重放。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Mongod 初始化同步的处理方式，可以引申到应用层增量迁移库表的场景。具体来说，当应用层需要增量迁移某个库表到另一个节点上时，可以：1. 本地(或者消息队列)保存oplog 2. 开始全量同步 3. oplog回放直到与源数据追平。如下图：&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gsiqsazaltj30p1072jrz.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;init sync&quot;]],&quot;^1W&quot;,&quot;![init sync](https://tva1.sinaimg.cn/large/008i3skNgy1gsiqsazaltj30p1072jrz.jpg )&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[323,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[323,&quot;^[&quot;,&quot;## 副本集同步 \\nid:: 60fa96d4-dceb-4edb-aeaa-d8e7a14207aa\\n\\n复制用于在多台服务器之间备份数据。MongoDB的复制功能是使用**操作日志oplog**实现的，操作日志包含了主节点的每一次写操作。oplog是主节点的local数据库中的一个**固定集合**。备份节点通过查询这个集合就可以知道需要进行复制的操作。\\n\\n每个备份节点都维护着自己的oplog，记录着每一次从主节点复制数据的操作。这样，每个成员都可以作为同步源提供给其他成员使用。备份节点从当前使用的同步源中获取需要执行的操作，然后在自己的数据集上执行这些操作，最后再将这些操作写入自己的oplog。如果遇到某个操作失败的情况（只有当同步源的数据损坏或者数据与主节点不一致时才可能发生），那么备份节点就会停止从当前的同步源复制数据。\\n\\n**_初始化同步_**\\n\\n首先，这个成员会做一些记录前的准备工作：选择一个成员作为同步源，在local.me中为自己创建一个标识符，删除所有已存在的数据库，以一个全新的状态开始进行同步。\\n\\n然后是克隆（cloning），就是将同步源的所有记录全部复制到本地。\\n\\n然后就进入oplog同步的第一步，克隆过程中的所有操作都会被记录到oplog中。如果有文档在克隆过程中被移动了，就可能会被遗漏，导致没有被克隆，对于这样的文档，可能需要重新进行克隆\\n\\n接下来是oplog同步过程的第二步，用于将第一个oplog同步中的操作记录下来。\\n\\n过程可以总结为先遍历Primary上的所有DB的所有集合，将数据拷贝到自身节点，然后读取全量同步开始到结束时间段内的oplog并重放。\\n\\nMongod 初始化同步的处理方式，可以引申到应用层增量迁移库表的场景。具体来说，当应用层需要增量迁移某个库表到另一个节点上时，可以：1. 本地(或者消息队列)保存oplog 2. 开始全量同步 3. oplog回放直到与源数据追平。如下图：\\n\\n![init sync](https://tva1.sinaimg.cn/large/008i3skNgy1gsiqsazaltj30p1072jrz.jpg )&quot;,536870916]],[&quot;^1A&quot;,[323,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[323,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[323,&quot;^K&quot;,322,536870916]],[&quot;^1A&quot;,[323,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[323,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1384,&quot;^1L&quot;,3565],536870916]],[&quot;^1A&quot;,[323,&quot;^17&quot;,68,536870916]],[&quot;^1A&quot;,[323,&quot;^13&quot;,68,536870916]],[&quot;^1A&quot;,[323,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fa96d4-dceb-4edb-aeaa-d8e7a14207aa&quot;],536870916]],[&quot;^1A&quot;,[323,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[323,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[323,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;副本集同步 &quot;]],536870916]],[&quot;^1A&quot;,[323,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[323,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[323,&quot;^?&quot;,&quot;~u60fa96d4-dceb-4edb-aeaa-d8e7a14207aa&quot;,536870916]],[&quot;^1A&quot;,[324,&quot;^1E&quot;,&quot;-e8--af--bb--e5--86--99--e5--88--86--e7--a6--bb-&quot;,536870916]],[&quot;^1A&quot;,[324,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;默认情况下，驱动程序会将所有的请求都路由到主节点。这通常也正是你需要的，但是可以通过设置驱动程序的读取首选项（read preferences）配置其他选项。将读请求发送到备份节点通常不是一个好主意。虽然在某些特定情况下这是有意义的，但是通常应该将全部请求都路由到主节点。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;出于一致性考虑 &quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;对一致性要求非常高的应用程序不应该从备份节点读取数据。备份节点通常会落后主节点几毫秒，但是，不能保证一定是这样。有时，由于加载问题、配置错误、网络故障等原因，备份节点可能会落后于主节点几分钟、几个小时甚至几天。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;出于负载考虑&quot;]]]]]]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;许多用户会将读请求发送给备份节点，以便实现分布式负载。例如，如果你的服务器每秒只能处理10 000次查询，而你需要进行30 000次查询，可能就需要设置几个备份节点，并且让它们分担一些数据加载的工作。但是，这种扩展方式非常危险，很容易导致系统意外过载，一旦出现这种问题，很难恢复。 &quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;假设你遇到了上面提到的情况：每秒30 000次读请求。你决定创建一个拥有4个成员的副本集：每个备份节点的压力都在可承受范围内，整个系统也在正常运转。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;后来，某一个备份节点崩溃了。现在剩余的每个成员的负载都是100%。如果需要恢复刚刚崩溃的成员，它就需要从其他成员处复制数据，这就会导致其他成员过载。服务器过载经常导致性能变慢，副本集性能进一步降低，然后强制其他成员承担更多的负载，导致这些成员变得更慢，这是一个&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;恶性死循环&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;但在某些情况下，将读请求发给备份节点是合理的。 最常见的将读请求发给送备份节点的原因：失去主节点时，应用程序进入只读状态。这种读选项叫做主节点优先（primary preferred）。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[324,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[324,&quot;^[&quot;,&quot;## 读写分离 \\n\\n默认情况下，驱动程序会将所有的请求都路由到主节点。这通常也正是你需要的，但是可以通过设置驱动程序的读取首选项（read preferences）配置其他选项。将读请求发送到备份节点通常不是一个好主意。虽然在某些特定情况下这是有意义的，但是通常应该将全部请求都路由到主节点。\\n\\n**_出于一致性考虑 _**\\n\\n对一致性要求非常高的应用程序不应该从备份节点读取数据。备份节点通常会落后主节点几毫秒，但是，不能保证一定是这样。有时，由于加载问题、配置错误、网络故障等原因，备份节点可能会落后于主节点几分钟、几个小时甚至几天。\\n\\n**_出于负载考虑_** \\n\\n许多用户会将读请求发送给备份节点，以便实现分布式负载。例如，如果你的服务器每秒只能处理10 000次查询，而你需要进行30 000次查询，可能就需要设置几个备份节点，并且让它们分担一些数据加载的工作。但是，这种扩展方式非常危险，很容易导致系统意外过载，一旦出现这种问题，很难恢复。 \\n\\n假设你遇到了上面提到的情况：每秒30 000次读请求。你决定创建一个拥有4个成员的副本集：每个备份节点的压力都在可承受范围内，整个系统也在正常运转。\\n\\n后来，某一个备份节点崩溃了。现在剩余的每个成员的负载都是100%。如果需要恢复刚刚崩溃的成员，它就需要从其他成员处复制数据，这就会导致其他成员过载。服务器过载经常导致性能变慢，副本集性能进一步降低，然后强制其他成员承担更多的负载，导致这些成员变得更慢，这是一个**恶性死循环**。\\n\\n但在某些情况下，将读请求发给备份节点是合理的。 最常见的将读请求发给送备份节点的原因：失去主节点时，应用程序进入只读状态。这种读选项叫做主节点优先（primary preferred）。&quot;,536870916]],[&quot;^1A&quot;,[324,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[324,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[324,&quot;^K&quot;,323,536870916]],[&quot;^1A&quot;,[324,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[324,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,3565,&quot;^1L&quot;,5594],536870916]],[&quot;^1A&quot;,[324,&quot;^17&quot;,68,536870916]],[&quot;^1A&quot;,[324,&quot;^13&quot;,68,536870916]],[&quot;^1A&quot;,[324,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[324,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;读写分离 &quot;]],536870916]],[&quot;^1A&quot;,[324,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[324,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[324,&quot;^?&quot;,&quot;~u611b87e6-56eb-400c-a614-2ab6acf891a2&quot;,536870916]],[&quot;^1A&quot;,[325,&quot;^1E&quot;,&quot;-e4--b8--bb--e4--bb--8e--e6--a8--a1--e5--bc--8f-&quot;,536870916]],[&quot;^1A&quot;,[325,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;主从模式下，MongoDB不会做自动故障转移，而且需要明确声明主节点和从节点。&quot;]]]]],536870916]],[&quot;^1A&quot;,[325,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[325,&quot;^[&quot;,&quot;## 主从模式\\n\\n主从模式下，MongoDB不会做自动故障转移，而且需要明确声明主节点和从节点。&quot;,536870916]],[&quot;^1A&quot;,[325,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[325,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[325,&quot;^K&quot;,324,536870916]],[&quot;^1A&quot;,[325,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[325,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,5594,&quot;^1L&quot;,5714],536870916]],[&quot;^1A&quot;,[325,&quot;^17&quot;,68,536870916]],[&quot;^1A&quot;,[325,&quot;^13&quot;,68,536870916]],[&quot;^1A&quot;,[325,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[325,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;主从模式&quot;]],536870916]],[&quot;^1A&quot;,[325,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[325,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[325,&quot;^?&quot;,&quot;~u611b87e6-8f59-4294-a6e4-5de6d5c2a8fc&quot;,536870916]],[&quot;^1A&quot;,[326,&quot;^1E&quot;,&quot;-e7--bc--96--e7--a0--81--e8--a1--a8-&quot;,536870916]],[&quot;^1A&quot;,[326,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gsu5qwthehj30ss0ckwgm.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu5qwthehj30ss0ckwgm.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu5qwthehj30ss0ckwgm.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[326,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[326,&quot;^[&quot;,&quot;## 编码表\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gsu5qwthehj30ss0ckwgm.jpg&quot;,536870916]],[&quot;^1A&quot;,[326,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[326,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[326,&quot;^K&quot;,81,536870916]],[&quot;^1A&quot;,[326,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[326,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,80],536870916]],[&quot;^1A&quot;,[326,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[326,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[326,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[326,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;编码表&quot;]],536870916]],[&quot;^1A&quot;,[326,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[326,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[326,&quot;^?&quot;,&quot;~u611b87e6-a265-4996-8da7-89f0d9e65eb3&quot;,536870916]],[&quot;^1A&quot;,[327,&quot;^1E&quot;,&quot;REDIS_STRING&quot;,536870916]],[&quot;^1A&quot;,[327,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[327,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[327,&quot;^[&quot;,&quot;REDIS_STRING  \\nscope:: encoding\\nobject:: REDIS_ENCODING_INT\\nname:: 整数编码\\ndescription:: 字符串对象保存的是整数值且这个整数值可以用long类型来表示\\nimage:: https://tva1.sinaimg.cn/large/008i3skNgy1gsu651urrlj30js0bsaaj.jpg&quot;,536870916]],[&quot;^1A&quot;,[327,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[327,&quot;^K&quot;,326,536870916]],[&quot;^1A&quot;,[327,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[327,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,80,&quot;^1L&quot;,344],536870916]],[&quot;^1A&quot;,[327,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[327,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[327,&quot;^D&quot;,[&quot;^ &quot;,&quot;~:scope&quot;,&quot;encoding&quot;,&quot;~:object&quot;,&quot;REDIS_ENCODING_INT&quot;,&quot;^22&quot;,&quot;整数编码&quot;,&quot;~:description&quot;,&quot;字符串对象保存的是整数值且这个整数值可以用long类型来表示&quot;,&quot;~:image&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu651urrlj30js0bsaaj.jpg&quot;],536870916]],[&quot;^1A&quot;,[327,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;,&quot;^2&gt;&quot;]],536870916]],[&quot;^1A&quot;,[327,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_STRING  &quot;]],536870916]],[&quot;^1A&quot;,[327,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[327,&quot;^?&quot;,&quot;~u611b87e6-d131-46af-a626-4e9418b02b78&quot;,536870916]],[&quot;^1A&quot;,[328,&quot;^1E&quot;,&quot;REDIS_STRING&quot;,536870916]],[&quot;^1A&quot;,[328,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[328,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[328,&quot;^[&quot;,&quot;REDIS_STRING \\nscope:: encoding\\nobject:: REDIS_ENCODING_EMBSTR\\nname:: 紧凑编码\\ndescription:: 字符串对象保存的是一个字符串值且长度小于等于32字节\\nimage:: https://tva1.sinaimg.cn/large/008i3skNgy1gsu6c1ja66j30sy038t8x.jpg&quot;,536870916]],[&quot;^1A&quot;,[328,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[328,&quot;^K&quot;,327,536870916]],[&quot;^1A&quot;,[328,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[328,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,344,&quot;^1L&quot;,602],536870916]],[&quot;^1A&quot;,[328,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[328,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[328,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_EMBSTR&quot;,&quot;^22&quot;,&quot;紧凑编码&quot;,&quot;^2=&quot;,&quot;字符串对象保存的是一个字符串值且长度小于等于32字节&quot;,&quot;^2&gt;&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu6c1ja66j30sy038t8x.jpg&quot;],536870916]],[&quot;^1A&quot;,[328,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;,&quot;^2&gt;&quot;]],536870916]],[&quot;^1A&quot;,[328,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_STRING &quot;]],536870916]],[&quot;^1A&quot;,[328,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[328,&quot;^?&quot;,&quot;~u611b87e6-bada-4d24-8beb-be4a206d2d70&quot;,536870916]],[&quot;^1A&quot;,[329,&quot;^1E&quot;,&quot;REDIS_STRING&quot;,536870916]],[&quot;^1A&quot;,[329,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[329,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[329,&quot;^[&quot;,&quot;REDIS_STRING \\nscope:: encoding\\nobject:: REDIS_ENCODING_RAW\\nname:: 简单动态字符串编码\\ndescription:: 一般字符串对象&quot;,536870916]],[&quot;^1A&quot;,[329,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[329,&quot;^K&quot;,328,536870916]],[&quot;^1A&quot;,[329,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[329,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,602,&quot;^1L&quot;,742],536870916]],[&quot;^1A&quot;,[329,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[329,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[329,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_RAW&quot;,&quot;^22&quot;,&quot;简单动态字符串编码&quot;,&quot;^2=&quot;,&quot;一般字符串对象&quot;],536870916]],[&quot;^1A&quot;,[329,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;]],536870916]],[&quot;^1A&quot;,[329,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_STRING &quot;]],536870916]],[&quot;^1A&quot;,[329,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[329,&quot;^?&quot;,&quot;~u611b87e6-28fa-403c-bfa5-769371af867c&quot;,536870916]],[&quot;^1A&quot;,[330,&quot;^1E&quot;,&quot;REDIS_LIST&quot;,536870916]],[&quot;^1A&quot;,[330,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[330,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[330,&quot;^[&quot;,&quot;REDIS_LIST \\nscope:: encoding\\nobject:: REDIS_ENCODING_ZIPLIST\\nname:: 压缩列表\\ndescription:: 列表对象保存的所有字符串元素长度都小于64字节且元素个数小于512&quot;,536870916]],[&quot;^1A&quot;,[330,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[330,&quot;^K&quot;,329,536870916]],[&quot;^1A&quot;,[330,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[330,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,742,&quot;^1L&quot;,937],536870916]],[&quot;^1A&quot;,[330,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[330,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[330,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_ZIPLIST&quot;,&quot;^22&quot;,&quot;压缩列表&quot;,&quot;^2=&quot;,&quot;列表对象保存的所有字符串元素长度都小于64字节且元素个数小于512&quot;],536870916]],[&quot;^1A&quot;,[330,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;]],536870916]],[&quot;^1A&quot;,[330,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_LIST &quot;]],536870916]],[&quot;^1A&quot;,[330,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[330,&quot;^?&quot;,&quot;~u611b87e6-e26a-409b-8ec2-14bad5cfa2bf&quot;,536870916]],[&quot;^1A&quot;,[331,&quot;^1E&quot;,&quot;REDIS_LIST&quot;,536870916]],[&quot;^1A&quot;,[331,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[331,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[331,&quot;^[&quot;,&quot;REDIS_LIST \\nscope:: encoding\\nobject:: REDIS_ENCODING_LINKEDLIST\\nname:: 链表\\ndescription:: 双向无环链表&quot;,536870916]],[&quot;^1A&quot;,[331,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[331,&quot;^K&quot;,330,536870916]],[&quot;^1A&quot;,[331,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[331,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,937,&quot;^1L&quot;,1058],536870916]],[&quot;^1A&quot;,[331,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[331,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[331,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_LINKEDLIST&quot;,&quot;^22&quot;,&quot;链表&quot;,&quot;^2=&quot;,&quot;双向无环链表&quot;],536870916]],[&quot;^1A&quot;,[331,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;]],536870916]],[&quot;^1A&quot;,[331,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_LIST &quot;]],536870916]],[&quot;^1A&quot;,[331,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[331,&quot;^?&quot;,&quot;~u611b87e6-7ec7-4628-8271-f49b877328d7&quot;,536870916]],[&quot;^1A&quot;,[332,&quot;^1E&quot;,&quot;REDIS_HASH&quot;,536870916]],[&quot;^1A&quot;,[332,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[332,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[332,&quot;^[&quot;,&quot;REDIS_HASH \\nscope:: encoding\\nobject:: REDIS_ENCODING_ZIPLIST\\nname:: 压缩列表\\ndescription:: 哈希对象保存的所有键值对的键和值的字符串长度都小于64字节且键值对数量小于512&quot;,536870916]],[&quot;^1A&quot;,[332,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[332,&quot;^K&quot;,331,536870916]],[&quot;^1A&quot;,[332,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[332,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1058,&quot;^1L&quot;,1274],536870916]],[&quot;^1A&quot;,[332,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[332,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[332,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_ZIPLIST&quot;,&quot;^22&quot;,&quot;压缩列表&quot;,&quot;^2=&quot;,&quot;哈希对象保存的所有键值对的键和值的字符串长度都小于64字节且键值对数量小于512&quot;],536870916]],[&quot;^1A&quot;,[332,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;]],536870916]],[&quot;^1A&quot;,[332,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_HASH &quot;]],536870916]],[&quot;^1A&quot;,[332,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[332,&quot;^?&quot;,&quot;~u611b87e6-0fda-4b4c-b009-99a5de38af47&quot;,536870916]],[&quot;^1A&quot;,[333,&quot;^1E&quot;,&quot;REDIS_HASH&quot;,536870916]],[&quot;^1A&quot;,[333,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[333,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[333,&quot;^[&quot;,&quot;REDIS_HASH \\nscope:: encoding\\nobject:: REDIS_ENCODING_HT\\nname:: 哈希表\\ndescription:: 拉链法哈希表&quot;,536870916]],[&quot;^1A&quot;,[333,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[333,&quot;^K&quot;,332,536870916]],[&quot;^1A&quot;,[333,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[333,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1274,&quot;^1L&quot;,1390],536870916]],[&quot;^1A&quot;,[333,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[333,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[333,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_HT&quot;,&quot;^22&quot;,&quot;哈希表&quot;,&quot;^2=&quot;,&quot;拉链法哈希表&quot;],536870916]],[&quot;^1A&quot;,[333,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;]],536870916]],[&quot;^1A&quot;,[333,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_HASH &quot;]],536870916]],[&quot;^1A&quot;,[333,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[333,&quot;^?&quot;,&quot;~u611b87e6-307e-4e19-92e1-358921c02ccc&quot;,536870916]],[&quot;^1A&quot;,[334,&quot;^1E&quot;,&quot;REDIS_SET&quot;,536870916]],[&quot;^1A&quot;,[334,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[334,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[334,&quot;^[&quot;,&quot;REDIS_SET \\nscope:: encoding\\nobject:: REDIS_ENCODING_INTSET\\nname:: 整数集合\\ndescription:: 集合对象保存的所有元素都是整数值且个数不超过512&quot;,536870916]],[&quot;^1A&quot;,[334,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[334,&quot;^K&quot;,333,536870916]],[&quot;^1A&quot;,[334,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[334,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1390,&quot;^1L&quot;,1563],536870916]],[&quot;^1A&quot;,[334,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[334,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[334,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_INTSET&quot;,&quot;^22&quot;,&quot;整数集合&quot;,&quot;^2=&quot;,&quot;集合对象保存的所有元素都是整数值且个数不超过512&quot;],536870916]],[&quot;^1A&quot;,[334,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;]],536870916]],[&quot;^1A&quot;,[334,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_SET &quot;]],536870916]],[&quot;^1A&quot;,[334,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[334,&quot;^?&quot;,&quot;~u611b87e6-4baa-4fff-a3fd-635cc70e1ebf&quot;,536870916]],[&quot;^1A&quot;,[335,&quot;^1E&quot;,&quot;REDIS_SET&quot;,536870916]],[&quot;^1A&quot;,[335,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[335,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[335,&quot;^[&quot;,&quot;REDIS_SET \\nscope:: encoding\\nobject:: REDIS_ENCODING_HT\\nname:: 哈希表\\ndescription:: 一般集合&quot;,536870916]],[&quot;^1A&quot;,[335,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[335,&quot;^K&quot;,334,536870916]],[&quot;^1A&quot;,[335,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[335,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1563,&quot;^1L&quot;,1672],536870916]],[&quot;^1A&quot;,[335,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[335,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[335,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_HT&quot;,&quot;^22&quot;,&quot;哈希表&quot;,&quot;^2=&quot;,&quot;一般集合&quot;],536870916]],[&quot;^1A&quot;,[335,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;]],536870916]],[&quot;^1A&quot;,[335,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_SET &quot;]],536870916]],[&quot;^1A&quot;,[335,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[335,&quot;^?&quot;,&quot;~u611b87e6-5ca5-4e23-b485-38c706b1e2f6&quot;,536870916]],[&quot;^1A&quot;,[336,&quot;^1E&quot;,&quot;REDIS_ZSET&quot;,536870916]],[&quot;^1A&quot;,[336,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[336,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[336,&quot;^[&quot;,&quot;REDIS_ZSET \\nscope:: encoding\\nobject:: REDIS_ENCODING_ZIPLIST\\nname:: 压缩列表\\ndescription:: 有序结合对象所有元素成员的长度都小于64字节且元素数量小于128&quot;,536870916]],[&quot;^1A&quot;,[336,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[336,&quot;^K&quot;,335,536870916]],[&quot;^1A&quot;,[336,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[336,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1672,&quot;^1L&quot;,1864],536870916]],[&quot;^1A&quot;,[336,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[336,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[336,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_ZIPLIST&quot;,&quot;^22&quot;,&quot;压缩列表&quot;,&quot;^2=&quot;,&quot;有序结合对象所有元素成员的长度都小于64字节且元素数量小于128&quot;],536870916]],[&quot;^1A&quot;,[336,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;]],536870916]],[&quot;^1A&quot;,[336,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_ZSET &quot;]],536870916]],[&quot;^1A&quot;,[336,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[336,&quot;^?&quot;,&quot;~u611b87e6-6491-4edc-83c2-dad02c7edc15&quot;,536870916]],[&quot;^1A&quot;,[337,&quot;^1E&quot;,&quot;REDIS_ZSET&quot;,536870916]],[&quot;^1A&quot;,[337,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[337,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[337,&quot;^[&quot;,&quot;REDIS_ZSET \\nscope:: encoding\\nobject:: REDIS_ENCODING_SKIPLIST\\nname:: 跳跃表\\ndescription:: 整数集合对象包括一个字典和一个跳跃表以实现O(1)查找和快速排序查找\\nimage:: https://tva1.sinaimg.cn/large/008i3skNgy1gsu7hv5k6rj30sy0gitad.jpg&quot;,536870916]],[&quot;^1A&quot;,[337,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[337,&quot;^K&quot;,336,536870916]],[&quot;^1A&quot;,[337,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[337,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1864,&quot;^1L&quot;,2138],536870916]],[&quot;^1A&quot;,[337,&quot;^17&quot;,81,536870916]],[&quot;^1A&quot;,[337,&quot;^13&quot;,81,536870916]],[&quot;^1A&quot;,[337,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2;&quot;,&quot;encoding&quot;,&quot;^2&lt;&quot;,&quot;REDIS_ENCODING_SKIPLIST&quot;,&quot;^22&quot;,&quot;跳跃表&quot;,&quot;^2=&quot;,&quot;整数集合对象包括一个字典和一个跳跃表以实现O(1)查找和快速排序查找&quot;,&quot;^2&gt;&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu7hv5k6rj30sy0gitad.jpg&quot;],536870916]],[&quot;^1A&quot;,[337,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2;&quot;,&quot;^2&lt;&quot;,&quot;^22&quot;,&quot;^2=&quot;,&quot;^2&gt;&quot;]],536870916]],[&quot;^1A&quot;,[337,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;REDIS_ZSET &quot;]],536870916]],[&quot;^1A&quot;,[337,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[337,&quot;^?&quot;,&quot;~u611b87e6-ef19-4a51-ab7e-8cc4f92f730b&quot;,536870916]],[&quot;^1A&quot;,[338,&quot;^1E&quot;,&quot;-e7--8e--b0--e8--b1--a1-&quot;,536870916]],[&quot;^1A&quot;,[338,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;短信推送任务出现大批量的重复发送，所幸限流器拦截，只对300名左右用户重发2-3条短信。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[338,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[338,&quot;^[&quot;,&quot;# 现象\\n短信推送任务出现大批量的重复发送，所幸限流器拦截，只对300名左右用户重发2-3条短信。&quot;,536870916]],[&quot;^1A&quot;,[338,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[338,&quot;^14&quot;,1,536870916]],[&quot;^1A&quot;,[338,&quot;^K&quot;,63,536870916]],[&quot;^1A&quot;,[338,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[338,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,130],536870916]],[&quot;^1A&quot;,[338,&quot;^17&quot;,63,536870916]],[&quot;^1A&quot;,[338,&quot;^13&quot;,63,536870916]],[&quot;^1A&quot;,[338,&quot;^1M&quot;,1,536870916]],[&quot;^1A&quot;,[338,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;现象&quot;]],536870916]],[&quot;^1A&quot;,[338,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[338,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[338,&quot;^?&quot;,&quot;~u611b87e6-cd41-4ce6-9ee6-66314b02b08c&quot;,536870916]],[&quot;^1A&quot;,[339,&quot;^1E&quot;,&quot;-e4--bb--a3--e7--a0--81--e7--8e--b0--e5--9c--ba-&quot;,536870916]],[&quot;^1A&quot;,[339,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Hard_Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;try (Scanner scanner = new Scanner(new BufferedInputStream(inputStream))) {&quot;,&quot;\\n&quot;,&quot;              // @0&quot;,&quot;\\n&quot;,&quot;              List&lt;String&gt; guaidList = new ArrayList&lt;&gt;();&quot;,&quot;\\n&quot;,&quot;              // skip first line&quot;,&quot;\\n&quot;,&quot;              scanner.nextLine();&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;              while (scanner.hasNext()) {&quot;,&quot;\\n&quot;,&quot;                  String[] rows = scanner.nextLine().trim().split(\\&quot;,\\&quot;);&quot;,&quot;\\n&quot;,&quot;                  if (rows.length &lt; 1) {&quot;,&quot;\\n&quot;,&quot;                  bloomFilter.put(guaid);&quot;,&quot;\\n&quot;,&quot;                  guaidList.add(guaid);&quot;,&quot;\\n&quot;,&quot;                  if (guaidList.size() == batchSize) {&quot;,&quot;\\n&quot;,&quot;                      // @1&quot;,&quot;\\n&quot;,&quot;                      executorService.submit(taskRunnable(guaidList, adminTask));&quot;,&quot;\\n&quot;,&quot;                      // @2&quot;,&quot;\\n&quot;,&quot;                      guaidList.clear();&quot;,&quot;\\n&quot;,&quot;                  }&quot;,&quot;\\n&quot;,&quot;              }&quot;,&quot;\\n&quot;,&quot;          } finally {&quot;,&quot;\\n&quot;,&quot;              inputStream.close();&quot;,&quot;\\n&quot;,&quot;          }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;          // @3&quot;,&quot;\\n&quot;,&quot;          if (!guaidList.isEmpty()) {&quot;,&quot;\\n&quot;,&quot;              executorService.submit(taskRunnable(guaidList, adminTask));&quot;,&quot;\\n&quot;,&quot;          }&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,163,&quot;^1S&quot;,1159],&quot;^1T&quot;,&quot;~```java\\ntry (Scanner scanner = new Scanner(new BufferedInputStream(inputStream))) {\\n              // @0\\n              List&lt;String&gt; guaidList = new ArrayList&lt;&gt;();\\n              // skip first line\\n              scanner.nextLine();\\n\\n              while (scanner.hasNext()) {\\n                  String[] rows = scanner.nextLine().trim().split(\\&quot;,\\&quot;);\\n                  if (rows.length &lt; 1) {\\n                  bloomFilter.put(guaid);\\n                  guaidList.add(guaid);\\n                  if (guaidList.size() == batchSize) {\\n                      // @1\\n                      executorService.submit(taskRunnable(guaidList, adminTask));\\n                      // @2\\n                      guaidList.clear();\\n                  }\\n              }\\n          } finally {\\n              inputStream.close();\\n          }\\n\\n          // @3\\n          if (!guaidList.isEmpty()) {\\n              executorService.submit(taskRunnable(guaidList, adminTask));\\n          }\\n\\n```&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;@0: 声明一个数组&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;@1: 将数组作为任务参数，提交任务到线程池中&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;@2: 提交完之后清空数组&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;以上代码的意图为实现一个 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;单生产者-多消费者&quot;]]]],[&quot;Plain&quot;,&quot; 的模型，其中 &quot;],[&quot;Code&quot;,&quot;guaidList&quot;],[&quot;Plain&quot;,&quot; 被错误的当做消息队列使用。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;从&quot;],[&quot;Code&quot;,&quot;@1&quot;],[&quot;Plain&quot;,&quot; 提交任务到线程池中的任务开始这段时间，&quot;],[&quot;Code&quot;,&quot;guaidList&quot;],[&quot;Plain&quot;,&quot; 内容不断变更，因为子线程开始时，读取到的 &quot;],[&quot;Code&quot;,&quot;guaidList&quot;],[&quot;Plain&quot;,&quot; 内容是未知的。而生产环境跑出的结果为，多数子线程读到的 &quot;],[&quot;Code&quot;,&quot;guaidList&quot;],[&quot;Plain&quot;,&quot; 是 &quot;],[&quot;Code&quot;,&quot;@3&quot;],[&quot;Plain&quot;,&quot; 执行完后的状态，说明子线程很快就已经完成数据生产。导致 &quot;],[&quot;Code&quot;,&quot;@3&quot;],[&quot;Plain&quot;,&quot; 后的 &quot;],[&quot;Code&quot;,&quot;guaidList&quot;],[&quot;Plain&quot;,&quot; 被反复消费。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false]]]],536870916]],[&quot;^1A&quot;,[339,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[339,&quot;^[&quot;,&quot;# 代码现场\\n\\n\\n```java\\ntry (Scanner scanner = new Scanner(new BufferedInputStream(inputStream))) {\\n              // @0\\n              List&lt;String&gt; guaidList = new ArrayList&lt;&gt;();\\n              // skip first line\\n              scanner.nextLine();\\n\\n              while (scanner.hasNext()) {\\n                  String[] rows = scanner.nextLine().trim().split(\\&quot;,\\&quot;);\\n                  if (rows.length &lt; 1) {\\n                  bloomFilter.put(guaid);\\n                  guaidList.add(guaid);\\n                  if (guaidList.size() == batchSize) {\\n                      // @1\\n                      executorService.submit(taskRunnable(guaidList, adminTask));\\n                      // @2\\n                      guaidList.clear();\\n                  }\\n              }\\n          } finally {\\n              inputStream.close();\\n          }\\n\\n          // @3\\n          if (!guaidList.isEmpty()) {\\n              executorService.submit(taskRunnable(guaidList, adminTask));\\n          }\\n\\n```\\n\\n* @0: 声明一个数组\\n* @1: 将数组作为任务参数，提交任务到线程池中\\n* @2: 提交完之后清空数组\\n\\n以上代码的意图为实现一个 **单生产者-多消费者** 的模型，其中 `guaidList` 被错误的当做消息队列使用。\\n从`@1` 提交任务到线程池中的任务开始这段时间，`guaidList` 内容不断变更，因为子线程开始时，读取到的 `guaidList` 内容是未知的。而生产环境跑出的结果为，多数子线程读到的 `guaidList` 是 `@3` 执行完后的状态，说明子线程很快就已经完成数据生产。导致 `@3` 后的 `guaidList` 被反复消费。&quot;,536870916]],[&quot;^1A&quot;,[339,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[339,&quot;^14&quot;,1,536870916]],[&quot;^1A&quot;,[339,&quot;^K&quot;,338,536870916]],[&quot;^1A&quot;,[339,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[339,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,130,&quot;^1L&quot;,1818],536870916]],[&quot;^1A&quot;,[339,&quot;^17&quot;,63,536870916]],[&quot;^1A&quot;,[339,&quot;^13&quot;,63,536870916]],[&quot;^1A&quot;,[339,&quot;^1M&quot;,1,536870916]],[&quot;^1A&quot;,[339,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;代码现场&quot;]],536870916]],[&quot;^1A&quot;,[339,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[339,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[339,&quot;^?&quot;,&quot;~u611b87e6-2d69-461a-ad8a-ddd93f96a116&quot;,536870916]],[&quot;^1A&quot;,[340,&quot;^1E&quot;,&quot;RootCause&quot;,536870916]],[&quot;^1A&quot;,[340,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;代码忽略了Java多线程内存共享的事实，导致数据被反复消费。同时Java对象可变性(&quot;],[&quot;Code&quot;,&quot;@2&quot;],[&quot;Plain&quot;,&quot;)，和数组线程安全(&quot;],[&quot;Code&quot;,&quot;@0&quot;],[&quot;Plain&quot;,&quot;)也值得注意&quot;]]]]],536870916]],[&quot;^1A&quot;,[340,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[340,&quot;^[&quot;,&quot;# RootCause\\n\\n代码忽略了Java多线程内存共享的事实，导致数据被反复消费。同时Java对象可变性(`@2`)，和数组线程安全(`@0`)也值得注意&quot;,536870916]],[&quot;^1A&quot;,[340,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[340,&quot;^14&quot;,1,536870916]],[&quot;^1A&quot;,[340,&quot;^K&quot;,339,536870916]],[&quot;^1A&quot;,[340,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[340,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1818,&quot;^1L&quot;,1989],536870916]],[&quot;^1A&quot;,[340,&quot;^17&quot;,63,536870916]],[&quot;^1A&quot;,[340,&quot;^13&quot;,63,536870916]],[&quot;^1A&quot;,[340,&quot;^1M&quot;,1,536870916]],[&quot;^1A&quot;,[340,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;RootCause&quot;]],536870916]],[&quot;^1A&quot;,[340,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[340,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[340,&quot;^?&quot;,&quot;~u611b87e6-8b33-484b-a8fd-267ad1879a86&quot;,536870916]],[&quot;^1A&quot;,[341,&quot;^1E&quot;,&quot;-e5--86--85--e9--83--a8--e5--ad--98--e5--82--a8-_-e7--ae--80--e5--8d--95--e5--9f--ba--e6--9c--ac--e5--ad--97--e7--ac--a6--e4--b8--b2-&quot;,536870916]],[&quot;^1A&quot;,[341,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; Redis没有直接使用C语言传统的字符串表示，而是自己构建了一种名为简单动态字符串（simple dynamic string，SDS）的抽象类型，并将SDS用作Redis的默认字符串表示。&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; C语言程序的开发者可能都编写过诸如字符串数组溢出、字符串求长度、字符串拼接等功能，由于C语言字符串对这些功能的支持并不是很友好，实现这些功能既麻烦，又容易出错。SDS就是为了解决这些基本问题而设计的，一个简单的SDS表示如下：&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gst2kibulyj30qa0aqt92.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gst2kibulyj30qa0aqt92.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gst2kibulyj30qa0aqt92.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;free属性的值为0，表示这个SDS没有分配任何未使用空间。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;len属性的值为5，表示这个SDS保存了一个五字节长的字符串。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;buf属性是一个char类型的数组，数组的前五个字节分别保存了&apos;R&apos;、&apos;e&apos;、&apos;d&apos;、&apos;i&apos;、&apos;s&apos;五个字符，而最后一个字节则保存了空字符&apos;\\\\0&apos;。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;len属性可以帮助我们快速得到字符串的长度，free属性可避免数组溢出的问题。而buf就是C语言的字符串数组，因此SDS是可以兼容部分C字符串函数的。&quot;]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;内存预分配&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;与MongoDB的 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fa96d4-647d-4634-83f3-9662466fd2d9&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fa96d4-647d-4634-83f3-9662466fd2d9))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 类似，free属性能指示我们什么时候应该对buf数组进行扩容了。比如我们正在进行字符串拼接的操作，而被拼接的字符串长度大于拼接函数的free值，这时就需要进行buf数组的扩容。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;扩容是相对简单的，只需要开辟一片新的内存空间，然后复制原来的值即可，但这个过程是耗时的，应该尽力避免扩容。回想下Java的HashMap预分配策略，Redis采用了类似的方法。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;空间预分配用于优化SDS的字符串增长操作：当SDS的API对一个SDS进行修改，并且需要对SDS进行空间扩展的时候，程序不仅会为SDS分配修改所必须要的空间，还会为SDS分配额外的未使用空间。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;其中，额外分配的未使用空间数量由以下公式决定：&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;如果对SDS进行修改之后，SDS的长度（也即是len属性的值）将小于1MB，那么程序分配和len属性&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;同样大小的未使用空间&quot;]]]],[&quot;Plain&quot;,&quot;，这时SDS len属性的值将和free属性的值相同。举个例子，如果进行修改之后，SDS的len将变成13字节，那么程序也会分配13字节的未使用空间，SDS的buf数组的实际长度将变成13+13+1=27字节（额外的一字节用于保存空字符）。&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;如果对SDS进行修改之后，SDS的长度将大于等于1MB，那么程序会分配1MB的未使用空间。举个例子，如果进行修改之后，SDS的len将变成30MB，那么程序会分配1MB的未使用空间，SDS的buf数组的实际长度将为30MB+1MB+1byte。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;通过空间预分配策略，Redis可以减少连续执行字符串增长操作所需的内存重分配次数。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,2,&quot;^24&quot;,false]]]],536870916]],[&quot;^1A&quot;,[341,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[341,&quot;^[&quot;,&quot;## 内部存储-简单基本字符串\\nid:: 60fce37d-d4ae-4c29-8831-42653d4955a1\\n\\nRedis没有直接使用C语言传统的字符串表示，而是自己构建了一种名为简单动态字符串（simple dynamic string，SDS）的抽象类型，并将SDS用作Redis的默认字符串表示。\\n\\nC语言程序的开发者可能都编写过诸如字符串数组溢出、字符串求长度、字符串拼接等功能，由于C语言字符串对这些功能的支持并不是很友好，实现这些功能既麻烦，又容易出错。SDS就是为了解决这些基本问题而设计的，一个简单的SDS表示如下：\\n\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gst2kibulyj30qa0aqt92.jpg\\n\\n* free属性的值为0，表示这个SDS没有分配任何未使用空间。\\n* len属性的值为5，表示这个SDS保存了一个五字节长的字符串。\\n* buf属性是一个char类型的数组，数组的前五个字节分别保存了&apos;R&apos;、&apos;e&apos;、&apos;d&apos;、&apos;i&apos;、&apos;s&apos;五个字符，而最后一个字节则保存了空字符&apos;\\\\0&apos;。\\n\\nlen属性可以帮助我们快速得到字符串的长度，free属性可避免数组溢出的问题。而buf就是C语言的字符串数组，因此SDS是可以兼容部分C字符串函数的。\\n\\n&gt; 内存预分配\\n\\n与MongoDB的 ((60fa96d4-647d-4634-83f3-9662466fd2d9)) 类似，free属性能指示我们什么时候应该对buf数组进行扩容了。比如我们正在进行字符串拼接的操作，而被拼接的字符串长度大于拼接函数的free值，这时就需要进行buf数组的扩容。\\n\\n扩容是相对简单的，只需要开辟一片新的内存空间，然后复制原来的值即可，但这个过程是耗时的，应该尽力避免扩容。回想下Java的HashMap预分配策略，Redis采用了类似的方法。\\n\\n空间预分配用于优化SDS的字符串增长操作：当SDS的API对一个SDS进行修改，并且需要对SDS进行空间扩展的时候，程序不仅会为SDS分配修改所必须要的空间，还会为SDS分配额外的未使用空间。\\n\\n其中，额外分配的未使用空间数量由以下公式决定：\\n\\n* 如果对SDS进行修改之后，SDS的长度（也即是len属性的值）将小于1MB，那么程序分配和len属性**同样大小的未使用空间**，这时SDS len属性的值将和free属性的值相同。举个例子，如果进行修改之后，SDS的len将变成13字节，那么程序也会分配13字节的未使用空间，SDS的buf数组的实际长度将变成13+13+1=27字节（额外的一字节用于保存空字符）。\\n\\n* 如果对SDS进行修改之后，SDS的长度将大于等于1MB，那么程序会分配1MB的未使用空间。举个例子，如果进行修改之后，SDS的len将变成30MB，那么程序会分配1MB的未使用空间，SDS的buf数组的实际长度将为30MB+1MB+1byte。\\n通过空间预分配策略，Redis可以减少连续执行字符串增长操作所需的内存重分配次数。&quot;,536870916]],[&quot;^1A&quot;,[341,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[341,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[341,&quot;^K&quot;,67,536870916]],[&quot;^1A&quot;,[341,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[341,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,2975],536870916]],[&quot;^1A&quot;,[341,&quot;^17&quot;,67,536870916]],[&quot;^1A&quot;,[341,&quot;^13&quot;,67,536870916]],[&quot;^1A&quot;,[341,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fce37d-d4ae-4c29-8831-42653d4955a1&quot;],536870916]],[&quot;^1A&quot;,[341,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[341,&quot;^L&quot;,214,536870916]],[&quot;^1A&quot;,[341,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[341,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内部存储-简单基本字符串&quot;]],536870916]],[&quot;^1A&quot;,[341,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[341,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[341,&quot;^?&quot;,&quot;~u60fce37d-d4ae-4c29-8831-42653d4955a1&quot;,536870916]],[&quot;^1A&quot;,[342,&quot;^1E&quot;,&quot;-e5--86--85--e9--83--a8--e5--ad--98--e5--82--a8-_-e9--93--be--e8--a1--a8-&quot;,536870916]],[&quot;^1A&quot;,[342,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;链表提供了高效的节点重排能力，以及顺序性的节点访问方式，并且可以通过增删节点来灵活地调整链表的长度。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;作为一种常用数据结构，链表内置在很多高级的编程语言里面，因为Redis使用的C语言并没有内置这种数据结构，所以Redis构建了自己的链表实现。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis链表实现如下图所示：&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gst36uebdpj30su09amxs.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gst36uebdpj30su09amxs.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gst36uebdpj30su09amxs.jpg{:height 216, :width 647}&quot;,&quot;^1X&quot;,&quot;{:height 216, :width 647}&quot;]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis链表有以下特点：&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;双端：链表节点带有prev和next指针，获取某个节点的前置节点和后置节点的复杂度都是O（1）。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;无环：表头节点的prev指针和表尾节点的next指针都指向NULL，对链表的访问以NULL为终点。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;带表头指针和表尾指针：通过list结构的head指针和tail指针，程序获取链表的表头节点和表尾节点的复杂度为O（1）。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;带链表长度计数器：程序使用list结构的len属性来对list持有的链表节点进行计数，程序获取链表中节点数量的复杂度为O（1）。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;多态：链表节点使用void*指针来保存节点值，并且可以通过list结构的dup、free、match三个属性为节点值设置类型特定函数，所以链表可以用于保存各种不同类型的值。&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false]]]],536870916]],[&quot;^1A&quot;,[342,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[342,&quot;^[&quot;,&quot;## 内部存储-链表\\n\\n链表提供了高效的节点重排能力，以及顺序性的节点访问方式，并且可以通过增删节点来灵活地调整链表的长度。\\n\\n作为一种常用数据结构，链表内置在很多高级的编程语言里面，因为Redis使用的C语言并没有内置这种数据结构，所以Redis构建了自己的链表实现。\\n\\nRedis链表实现如下图所示：\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gst36uebdpj30su09amxs.jpg{:height 216, :width 647}\\n\\nRedis链表有以下特点：\\n* 双端：链表节点带有prev和next指针，获取某个节点的前置节点和后置节点的复杂度都是O（1）。\\n* 无环：表头节点的prev指针和表尾节点的next指针都指向NULL，对链表的访问以NULL为终点。\\n* 带表头指针和表尾指针：通过list结构的head指针和tail指针，程序获取链表的表头节点和表尾节点的复杂度为O（1）。\\n* 带链表长度计数器：程序使用list结构的len属性来对list持有的链表节点进行计数，程序获取链表中节点数量的复杂度为O（1）。\\n* 多态：链表节点使用void*指针来保存节点值，并且可以通过list结构的dup、free、match三个属性为节点值设置类型特定函数，所以链表可以用于保存各种不同类型的值。&quot;,536870916]],[&quot;^1A&quot;,[342,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[342,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[342,&quot;^K&quot;,341,536870916]],[&quot;^1A&quot;,[342,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[342,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2975,&quot;^1L&quot;,4291],536870916]],[&quot;^1A&quot;,[342,&quot;^17&quot;,67,536870916]],[&quot;^1A&quot;,[342,&quot;^13&quot;,67,536870916]],[&quot;^1A&quot;,[342,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[342,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内部存储-链表&quot;]],536870916]],[&quot;^1A&quot;,[342,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[342,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[342,&quot;^?&quot;,&quot;~u611b87e6-77ad-4c88-98d5-8bcf324ef133&quot;,536870916]],[&quot;^1A&quot;,[343,&quot;^1E&quot;,&quot;-e5--86--85--e9--83--a8--e5--ad--98--e5--82--a8-_-e5--ad--97--e5--85--b8-&quot;,536870916]],[&quot;^1A&quot;,[343,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;Redis的字典使用哈希表作为底层实现，一个哈希表里面可以有多个哈希表节点，而每个哈希表节点就保存了字典中的一个键值对。一个完整的字典表示如下：&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gst3b6sxgnj30sq0fqq3z.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gst3b6sxgnj30sq0fqq3z.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gst3b6sxgnj30sq0fqq3z.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;除了常见的拉链哈希表结构，你可能还注意到了ht数组，ht是一个包含两个项的数组，数组中的每个项都是一个dictht哈希表，一般情况下，字典只使用ht[0]哈希表，ht[1]哈希表只会在对ht[0]哈希表进行rehash时使用。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;rehash&quot;]]]]]]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;与 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fce37d-d4ae-4c29-8831-42653d4955a1&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fce37d-d4ae-4c29-8831-42653d4955a1))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot;的扩容类似，rehash是在哈希表的负载因子过大时，开辟出一片更大的内存空间，并将原哈希表的键值对都复制到新内存空间。具体的说，是将ht[0]里的所有键值对rehash到ht[1]里面。但是，这个rehash动作并不是一次性、集中式地完成的，而是分多次、渐进式地完成的。这被称为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;渐进式rehash&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;这样做的原因在于，如果ht[0]里只保存着四个键值对，那么服务器可以在瞬间就将这些键值对全部rehash到ht[1]；但是，如果哈希表里保存的键值对数量不是四个，而是四百万、四千万甚至四亿个键值对，那么要一次性将这些键值对全部rehash到ht[1]的话，庞大的计算量可能会导致服务器在一段时间内停止服务。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;渐进式rehash的关键在于维护一个&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;索引计数器变量&quot;]]]],[&quot;Plain&quot;,&quot;。在rehash进行期间，每次对字典执行添加、删除、查找或者更新操作时，程序除了执行指定的操作以外，还会顺带将ht[0]哈希表在rehashidx索引上的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;所有键值对&quot;]]]],[&quot;Plain&quot;,&quot;rehash到ht[1]，当rehash工作完成之后，程序将rehashidx属性的值增一。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;这是一种&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;分而治之&quot;]]]],[&quot;Plain&quot;,&quot;的方式。将rehash键值对所需的计算工作均摊到对字典的每个添加、删除、查找和更新操作上，从而避免了集中式rehash而带来的庞大计算量。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[343,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[343,&quot;^[&quot;,&quot;## 内部存储-字典\\n\\nRedis的字典使用哈希表作为底层实现，一个哈希表里面可以有多个哈希表节点，而每个哈希表节点就保存了字典中的一个键值对。一个完整的字典表示如下：\\n\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gst3b6sxgnj30sq0fqq3z.jpg\\n\\n除了常见的拉链哈希表结构，你可能还注意到了ht数组，ht是一个包含两个项的数组，数组中的每个项都是一个dictht哈希表，一般情况下，字典只使用ht[0]哈希表，ht[1]哈希表只会在对ht[0]哈希表进行rehash时使用。\\n\\n**_rehash_**\\n\\n与 ((60fce37d-d4ae-4c29-8831-42653d4955a1))的扩容类似，rehash是在哈希表的负载因子过大时，开辟出一片更大的内存空间，并将原哈希表的键值对都复制到新内存空间。具体的说，是将ht[0]里的所有键值对rehash到ht[1]里面。但是，这个rehash动作并不是一次性、集中式地完成的，而是分多次、渐进式地完成的。这被称为**渐进式rehash**。\\n\\n这样做的原因在于，如果ht[0]里只保存着四个键值对，那么服务器可以在瞬间就将这些键值对全部rehash到ht[1]；但是，如果哈希表里保存的键值对数量不是四个，而是四百万、四千万甚至四亿个键值对，那么要一次性将这些键值对全部rehash到ht[1]的话，庞大的计算量可能会导致服务器在一段时间内停止服务。\\n\\n渐进式rehash的关键在于维护一个**索引计数器变量**。在rehash进行期间，每次对字典执行添加、删除、查找或者更新操作时，程序除了执行指定的操作以外，还会顺带将ht[0]哈希表在rehashidx索引上的**所有键值对**rehash到ht[1]，当rehash工作完成之后，程序将rehashidx属性的值增一。\\n\\n这是一种**分而治之**的方式。将rehash键值对所需的计算工作均摊到对字典的每个添加、删除、查找和更新操作上，从而避免了集中式rehash而带来的庞大计算量。&quot;,536870916]],[&quot;^1A&quot;,[343,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[343,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[343,&quot;^K&quot;,342,536870916]],[&quot;^1A&quot;,[343,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[343,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,4291,&quot;^1L&quot;,6297],536870916]],[&quot;^1A&quot;,[343,&quot;^17&quot;,67,536870916]],[&quot;^1A&quot;,[343,&quot;^13&quot;,67,536870916]],[&quot;^1A&quot;,[343,&quot;^L&quot;,341,536870916]],[&quot;^1A&quot;,[343,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[343,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内部存储-字典&quot;]],536870916]],[&quot;^1A&quot;,[343,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[343,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[343,&quot;^?&quot;,&quot;~u611b87e6-2042-4009-b626-f1be87ca2144&quot;,536870916]],[&quot;^1A&quot;,[344,&quot;^1E&quot;,&quot;-e5--86--85--e9--83--a8--e5--ad--98--e5--82--a8-_-e8--b7--b3--e8--b7--83--e8--a1--a8-&quot;,536870916]],[&quot;^1A&quot;,[344,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 跳跃表（skiplist）是一种有序数据结构，它通过在每个节点中维持多个指向其他节点的指针，从而达到快速访问节点的目的。如下图所示：&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gst3ux4qw3j30su0awjsh.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gst3ux4qw3j30su0awjsh.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gst3ux4qw3j30su0awjsh.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 跳跃表的思想是，以额外的节点指针存储为代价，通过跳过的方式降低节点查找的时间复杂度。在上图所示跳跃表中，查找分值为2.0的过程如下图所示：&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gsu4u1h3joj30ss0aomya.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu4u1h3joj30ss0aomya.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu4u1h3joj30ss0aomya.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[344,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[344,&quot;^[&quot;,&quot;## 内部存储-跳跃表\\nid:: 60fced9d-a7e4-4ba9-a112-22d456758c59\\n\\n跳跃表（skiplist）是一种有序数据结构，它通过在每个节点中维持多个指向其他节点的指针，从而达到快速访问节点的目的。如下图所示：\\n\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gst3ux4qw3j30su0awjsh.jpg\\n\\n跳跃表的思想是，以额外的节点指针存储为代价，通过跳过的方式降低节点查找的时间复杂度。在上图所示跳跃表中，查找分值为2.0的过程如下图所示：\\n\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gsu4u1h3joj30ss0aomya.jpg&quot;,536870916]],[&quot;^1A&quot;,[344,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[344,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[344,&quot;^K&quot;,343,536870916]],[&quot;^1A&quot;,[344,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[344,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,6297,&quot;^1L&quot;,6908],536870916]],[&quot;^1A&quot;,[344,&quot;^17&quot;,67,536870916]],[&quot;^1A&quot;,[344,&quot;^13&quot;,67,536870916]],[&quot;^1A&quot;,[344,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fced9d-a7e4-4ba9-a112-22d456758c59&quot;],536870916]],[&quot;^1A&quot;,[344,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[344,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[344,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内部存储-跳跃表&quot;]],536870916]],[&quot;^1A&quot;,[344,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[344,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[344,&quot;^?&quot;,&quot;~u60fced9d-a7e4-4ba9-a112-22d456758c59&quot;,536870916]],[&quot;^1A&quot;,[345,&quot;^1E&quot;,&quot;-e5--86--85--e9--83--a8--e5--ad--98--e5--82--a8-_-e6--95--b4--e6--95--b0--e9--9b--86--e5--90--88-&quot;,536870916]],[&quot;^1A&quot;,[345,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;整数集合（intset）是Redis用于保存整数值的集合抽象数据结构，它可以保存类型为int16_t、int32_t或者int64_t的整数值，并且保证集合中不会出现重复元素。一个整数集合示例如下：&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gsu4zglengj30ss09u3z0.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu4zglengj30ss09u3z0.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu4zglengj30ss09u3z0.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;注意到contents数组是从&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;小到大&quot;]]]],[&quot;Plain&quot;,&quot;排列的。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;整数集合升级&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;由于整数集合可以存储int16_t、int32_t或者int64_t三种不同类型的整数值，所以当一个空的整数集合初始化时，应该选择哪种类型的整数值作为存储呢？答案是int16_t，原因很简单，更节省内存。当有更大的整数放进来时，整数集合会进行空间升级。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;升级首先要做的是，根据新类型的长度，以及集合元素的数量（包括要添加的新元素在内），对底层数组进行空间重分配。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;重分配后，因为引发升级的新元素的长度总是比整数集合现有所有元素的长度都大，所以这个新元素的值要么就大于所有现有元素，要么就小于所有现有元素。因此新元素放到数组开头或者末尾即可。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;可以看到，升级也是一种&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;空间预分配&quot;]]]],[&quot;Plain&quot;,&quot;的策略，是Redis常用的节省内存的手段。&quot;],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[345,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[345,&quot;^[&quot;,&quot;## 内部存储-整数集合\\n\\n整数集合（intset）是Redis用于保存整数值的集合抽象数据结构，它可以保存类型为int16_t、int32_t或者int64_t的整数值，并且保证集合中不会出现重复元素。一个整数集合示例如下：\\n\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gsu4zglengj30ss09u3z0.jpg\\n\\n注意到contents数组是从**小到大**排列的。\\n\\n&gt; 整数集合升级\\n\\n由于整数集合可以存储int16_t、int32_t或者int64_t三种不同类型的整数值，所以当一个空的整数集合初始化时，应该选择哪种类型的整数值作为存储呢？答案是int16_t，原因很简单，更节省内存。当有更大的整数放进来时，整数集合会进行空间升级。\\n\\n升级首先要做的是，根据新类型的长度，以及集合元素的数量（包括要添加的新元素在内），对底层数组进行空间重分配。\\n\\n重分配后，因为引发升级的新元素的长度总是比整数集合现有所有元素的长度都大，所以这个新元素的值要么就大于所有现有元素，要么就小于所有现有元素。因此新元素放到数组开头或者末尾即可。\\n\\n可以看到，升级也是一种**空间预分配**的策略，是Redis常用的节省内存的手段。&quot;,536870916]],[&quot;^1A&quot;,[345,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[345,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[345,&quot;^K&quot;,344,536870916]],[&quot;^1A&quot;,[345,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[345,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,6908,&quot;^1L&quot;,8179],536870916]],[&quot;^1A&quot;,[345,&quot;^17&quot;,67,536870916]],[&quot;^1A&quot;,[345,&quot;^13&quot;,67,536870916]],[&quot;^1A&quot;,[345,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[345,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内部存储-整数集合&quot;]],536870916]],[&quot;^1A&quot;,[345,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[345,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[345,&quot;^?&quot;,&quot;~u611b87e6-6400-4ce3-9b6c-58809f13099b&quot;,536870916]],[&quot;^1A&quot;,[346,&quot;^1E&quot;,&quot;-e5--86--85--e9--83--a8--e5--ad--98--e5--82--a8-_-e5--8e--8b--e7--bc--a9--e5--88--97--e8--a1--a8-&quot;,536870916]],[&quot;^1A&quot;,[346,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 压缩列表是Redis为了节约内存而开发的，是由一系列特殊编码的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;连续内存块&quot;]]]],[&quot;Plain&quot;,&quot;组成的顺序型（sequential）数据结构。一个压缩列表可以包含任意多个节点（entry），每个节点可以保存一个字节数组或者一个整数值。&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 压缩列表的设计出发点在于，当每个节点的值都比较小，且节点个数较少时，顺序型结构占内存更少(节省了前后指针)，且不会损失太多时间复杂度。而且顺序结构对CPU缓存更友好。&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 一个压缩列表示例如下：&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gsu5dnvrc0j30sw0340sv.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu5dnvrc0j30sw0340sv.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu5dnvrc0j30sw0340sv.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 尾节点的计算公式：&quot;],[&quot;Break_Line&quot;]]]],[&quot;Displayed_Math&quot;,&quot;entry5 = p + 179, p = begin, 179 = zltail &quot;],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 压缩列表的节点表示如下：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gsu5jfoonlj30su02a3ym.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu5jfoonlj30su02a3ym.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu5jfoonlj30su02a3ym.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[346,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[346,&quot;^[&quot;,&quot;## 内部存储-压缩列表\\nid:: 60fe1e1e-ca1d-446a-be3b-84bfd7489629\\n\\n压缩列表是Redis为了节约内存而开发的，是由一系列特殊编码的**连续内存块**组成的顺序型（sequential）数据结构。一个压缩列表可以包含任意多个节点（entry），每个节点可以保存一个字节数组或者一个整数值。\\n\\n压缩列表的设计出发点在于，当每个节点的值都比较小，且节点个数较少时，顺序型结构占内存更少(节省了前后指针)，且不会损失太多时间复杂度。而且顺序结构对CPU缓存更友好。\\n\\n一个压缩列表示例如下：\\n\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gsu5dnvrc0j30sw0340sv.jpg\\n\\n尾节点的计算公式：\\n$$entry5 = p + 179, p = begin, 179 = zltail $$\\n\\n压缩列表的节点表示如下：\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gsu5jfoonlj30su02a3ym.jpg&quot;,536870916]],[&quot;^1A&quot;,[346,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[346,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[346,&quot;^K&quot;,345,536870916]],[&quot;^1A&quot;,[346,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[346,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,8179,&quot;^1L&quot;,9088],536870916]],[&quot;^1A&quot;,[346,&quot;^17&quot;,67,536870916]],[&quot;^1A&quot;,[346,&quot;^13&quot;,67,536870916]],[&quot;^1A&quot;,[346,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;60fe1e1e-ca1d-446a-be3b-84bfd7489629&quot;],536870916]],[&quot;^1A&quot;,[346,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536870916]],[&quot;^1A&quot;,[346,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[346,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内部存储-压缩列表&quot;]],536870916]],[&quot;^1A&quot;,[346,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[346,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[346,&quot;^?&quot;,&quot;~u60fe1e1e-ca1d-446a-be3b-84bfd7489629&quot;,536870916]],[&quot;^1A&quot;,[347,&quot;^1E&quot;,&quot;-e5--af--b9--e8--b1--a1-&quot;,536870916]],[&quot;^1A&quot;,[347,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 与Redis客户端直接交互的并不是之前介绍的内部存储结构，而是Redis对象系统，这个系统包含字符串对象、列表对象、哈希对象、集合对象和有序集合对象这五种类型的对象，每种对象都用到了至少一种我们前面所介绍的数据结构。&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gsu5pfh6iyj30nw0fegmr.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu5pfh6iyj30nw0fegmr.jpg&quot;]],&quot;^1W&quot;,&quot;https://tva1.sinaimg.cn/large/008i3skNgy1gsu5pfh6iyj30nw0fegmr.jpg&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 对象与内部存储的关联关系称作&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;对象编码&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Macro&quot;,[&quot;^ &quot;,&quot;^22&quot;,&quot;query&quot;,&quot;~:arguments&quot;,[&quot;(property scope encoding)&quot;]]],[&quot;Break_Line&quot;]]]]],536870916]],[&quot;^1A&quot;,[347,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[347,&quot;^[&quot;,&quot;## 对象\\nquery-table:: true\\nquery-properties:: [:block :object :name :description :image]\\nquery-sort-by:: block\\nquery-sort-desc:: false\\n\\n与Redis客户端直接交互的并不是之前介绍的内部存储结构，而是Redis对象系统，这个系统包含字符串对象、列表对象、哈希对象、集合对象和有序集合对象这五种类型的对象，每种对象都用到了至少一种我们前面所介绍的数据结构。\\n\\nhttps://tva1.sinaimg.cn/large/008i3skNgy1gsu5pfh6iyj30nw0fegmr.jpg\\n\\n对象与内部存储的关联关系称作**对象编码**。\\n{{query (property scope encoding)}}&quot;,536870916]],[&quot;^1A&quot;,[347,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[347,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[347,&quot;^K&quot;,346,536870916]],[&quot;^1A&quot;,[347,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[347,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9088,&quot;^1L&quot;,9722],536870916]],[&quot;^1A&quot;,[347,&quot;^17&quot;,67,536870916]],[&quot;^1A&quot;,[347,&quot;^13&quot;,67,536870916]],[&quot;^1A&quot;,[347,&quot;^D&quot;,[&quot;^ &quot;,&quot;~:query-table&quot;,true,&quot;~:query-properties&quot;,&quot;[:block :object :name :description :image]&quot;,&quot;~:query-sort-by&quot;,&quot;block&quot;,&quot;~:query-sort-desc&quot;,false],536870916]],[&quot;^1A&quot;,[347,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2@&quot;,&quot;^2A&quot;,&quot;^2B&quot;,&quot;^2C&quot;]],536870916]],[&quot;^1A&quot;,[347,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[347,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;对象&quot;]],536870916]],[&quot;^1A&quot;,[347,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[347,&quot;^1D&quot;,true,536870916]],[&quot;^1A&quot;,[347,&quot;^?&quot;,&quot;~u611b87e6-511f-4e71-a34c-d4b83ae809a8&quot;,536870916]],[&quot;^1A&quot;,[348,&quot;^1E&quot;,&quot;&quot;,536870916]],[&quot;^1A&quot;,[348,&quot;^S&quot;,[],536870916]],[&quot;^1A&quot;,[348,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[348,&quot;^[&quot;,&quot;## [[对象编码描述]]&quot;,536870916]],[&quot;^1A&quot;,[348,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[348,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[348,&quot;^K&quot;,347,536870916]],[&quot;^1A&quot;,[348,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[348,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,9722,&quot;^1L&quot;,9747],536870916]],[&quot;^1A&quot;,[348,&quot;^17&quot;,67,536870916]],[&quot;^1A&quot;,[348,&quot;^13&quot;,67,536870916]],[&quot;^1A&quot;,[348,&quot;^12&quot;,81,536870916]],[&quot;^1A&quot;,[348,&quot;^L&quot;,81,536870916]],[&quot;^1A&quot;,[348,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[348,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;对象编码描述&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[对象编码描述]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536870916]],[&quot;^1A&quot;,[348,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[348,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[348,&quot;^?&quot;,&quot;~u611b87e6-c4ae-4443-b3d4-7807971677c4&quot;,536870916]],[&quot;^1A&quot;,[360,&quot;^1E&quot;,&quot;-e7--b4--a2--e5--bc--95--e7--ae--80--e4--bb--8b-&quot;,536870916]],[&quot;^1A&quot;,[360,&quot;^S&quot;,[],536881305]],[&quot;^1A&quot;,[360,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[360,&quot;^[&quot;,&quot;## 简介&quot;,536881305]],[&quot;^1A&quot;,[360,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[360,&quot;^14&quot;,2,536881305]],[&quot;^1A&quot;,[360,&quot;^K&quot;,82,536870916]],[&quot;^1A&quot;,[360,&quot;^X&quot;,1,536881305]],[&quot;^1A&quot;,[360,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,268],536870916]],[&quot;^1A&quot;,[360,&quot;^17&quot;,82,536870916]],[&quot;^1A&quot;,[360,&quot;^13&quot;,82,536870916]],[&quot;^1A&quot;,[360,&quot;^12&quot;,82,536881305]],[&quot;^1A&quot;,[360,&quot;^D&quot;,[&quot;^ &quot;],536881305]],[&quot;^1A&quot;,[360,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[360,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;简介&quot;]],536881305]],[&quot;^1A&quot;,[360,&quot;^15&quot;,&quot;^1N&quot;,536881305]],[&quot;^1A&quot;,[360,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[360,&quot;^?&quot;,&quot;~u611b87e6-a1d2-4c75-9f46-9cb9151f0e9e&quot;,536870916]],[&quot;^1A&quot;,[362,&quot;^1E&quot;,&quot;InnoDB-e7--89--a9--e7--90--86--e5--ad--98--e5--82--a8-(dig_more_info_from_the_book)&quot;,536870916]],[&quot;^1A&quot;,[362,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;当我们创建一个table时， InnoDB会创建三个文件。 一个是表结构定义文件， 另一个为数据实际存储文件， 并且&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;所有的索引&quot;]]]],[&quot;Plain&quot;,&quot;也将存放在这个文件中，每添加一个索引，.ibd文件中就需要多维护一个B+Tree索引树。最后一个文件保存该table所制定的字符集。&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627887869841_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627887869841_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;例子：我们在下面例子中找主键为20的记录，假设组的大小为1。&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627891053008_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627891053008_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]]]],536883329]],[&quot;^1A&quot;,[362,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[362,&quot;^[&quot;,&quot;## LATER InnoDB物理存储(dig more info from the book)\\ncollapsed:: true\\n当我们创建一个table时， InnoDB会创建三个文件。 一个是表结构定义文件， 另一个为数据实际存储文件， 并且**所有的索引**也将存放在这个文件中，每添加一个索引，.ibd文件中就需要多维护一个B+Tree索引树。最后一个文件保存该table所制定的字符集。\\n![image.png](../assets/image_1627887869841_0.png)\\n例子：我们在下面例子中找主键为20的记录，假设组的大小为1。\\n![image.png](../assets/image_1627891053008_0.png)&quot;,536883351]],[&quot;^1A&quot;,[362,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[362,&quot;^14&quot;,2,536883329]],[&quot;^1A&quot;,[362,&quot;^K&quot;,844,536883329]],[&quot;^1A&quot;,[362,&quot;^X&quot;,1,536883329]],[&quot;^1A&quot;,[362,&quot;^1&lt;&quot;,&quot;LATER&quot;,536883329]],[&quot;^1A&quot;,[362,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,288,&quot;^1L&quot;,863],536870916]],[&quot;^1A&quot;,[362,&quot;^17&quot;,82,536870916]],[&quot;^1A&quot;,[362,&quot;^13&quot;,82,536870916]],[&quot;^1A&quot;,[362,&quot;^12&quot;,4,536883329]],[&quot;^1A&quot;,[362,&quot;^12&quot;,82,536883329]],[&quot;^1A&quot;,[362,&quot;^D&quot;,[&quot;^ &quot;,&quot;~:collapsed&quot;,true],536883351]],[&quot;^1A&quot;,[362,&quot;^L&quot;,4,536883329]],[&quot;^1A&quot;,[362,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[362,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;InnoDB物理存储(dig more info from the book)&quot;]],536883329]],[&quot;^1A&quot;,[362,&quot;^15&quot;,&quot;^1N&quot;,536883329]],[&quot;^1A&quot;,[362,&quot;^1D&quot;,true,536883351]],[&quot;^1A&quot;,[362,&quot;^?&quot;,&quot;~u611b87e6-ce5d-4541-90ba-636af9e5eb08&quot;,536870916]],[&quot;^1A&quot;,[374,&quot;^1E&quot;,&quot;MongoDB-e9--94--81-&quot;,536870916]],[&quot;^1A&quot;,[374,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;MongoDB 有 4 个粒度级别的锁&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Global (mongod 实例) – 所有的数据库上加锁&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Database – 锁定某个数据库&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Collection – 锁定某个集合&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Document – 锁定某个文档&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,false]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;除了用于读取的&quot;],[&quot;Code&quot;,&quot;共享 (S) 锁&quot;],[&quot;Plain&quot;,&quot; (读锁) 和用于写入操作的&quot;],[&quot;Code&quot;,&quot;排它 (X) 锁&quot;],[&quot;Plain&quot;,&quot; (写锁) 之外，&quot;],[&quot;Code&quot;,&quot;意向共享 (IS)&quot;],[&quot;Plain&quot;,&quot; 和&quot;],[&quot;Code&quot;,&quot;意向排它 (IX) 锁&quot;],[&quot;Plain&quot;,&quot;表示使用更精细的粒度锁定读取或写入资源的意图。但我们锁定某个资源的时候，使用意向锁来锁定比它更高级别的资源，这也是多粒度锁的核心。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;对一个数据行或者 document 加意向锁的含义是：当前事务想要在这个节点或者这个节点的子节点加某种锁 (共享或者排它)，有了意向锁以后，对任何数据加共享锁或者排它锁都要先加意向锁再加具体锁。&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627882974324_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627882974324_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;当我们对 d1 这个 document 进行写入的时候，需要给它加上 X 锁 (排它锁), 这个时候要先去它上层的资源 Global,D1 (database),C1 (collection) 加上 IX (意向排它锁), 加了之后才能在 d1 上加实际的排它锁。如果实际的锁加在 C1 等非叶子节点情况也是一样的。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;加意向锁最主要的作用就是在&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;加实际的锁的时候，通过检查父节点是否已经存在了意向锁来确定当前是否可以加上锁。&quot;]]]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;比如 d1 上持有了实际的排它锁，这个时候 C1,D1,Global 都有一个意向排它锁。此时如果有另外的请求想要在 C1 上加实际的共享锁 (读), 但是 C1 已经有了意向排它锁了，所以就加不成了，需要等待。如果此时想要在 d2 上加共享锁。此时需要先去它的上层节点添加意向共享锁，虽然 C1,D1 已经存在了意向排它锁，但是仍然可以加上意向共享锁，因为它们是兼容的。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;]]]],[&quot;Table&quot;,[&quot;^ &quot;,&quot;^27&quot;,[[[&quot;Plain&quot;,&quot;&quot;]],[[&quot;Plain&quot;,&quot;IS (意向共享)&quot;]],[[&quot;Plain&quot;,&quot;IX (意向排它)&quot;]],[[&quot;Plain&quot;,&quot;S (共享)&quot;]],[[&quot;Plain&quot;,&quot;X (排它)&quot;]]],&quot;^28&quot;,[[[[[&quot;Plain&quot;,&quot;IS (意向共享)&quot;]],[[&quot;Plain&quot;,&quot;true&quot;]],[[&quot;Plain&quot;,&quot;true&quot;]],[[&quot;Plain&quot;,&quot;true&quot;]],[[&quot;Plain&quot;,&quot;false&quot;]]],[[[&quot;Plain&quot;,&quot;IX (意向排它)&quot;]],[[&quot;Plain&quot;,&quot;true&quot;]],[[&quot;Plain&quot;,&quot;true&quot;]],[[&quot;Plain&quot;,&quot;false&quot;]],[[&quot;Plain&quot;,&quot;false&quot;]]],[[[&quot;Plain&quot;,&quot;S (共享)&quot;]],[[&quot;Plain&quot;,&quot;true&quot;]],[[&quot;Plain&quot;,&quot;false&quot;]],[[&quot;Plain&quot;,&quot;true&quot;]],[[&quot;Plain&quot;,&quot;false&quot;]]],[[[&quot;Plain&quot;,&quot;X (排它)&quot;]],[[&quot;Plain&quot;,&quot;false&quot;]],[[&quot;Plain&quot;,&quot;false&quot;]],[[&quot;Plain&quot;,&quot;false&quot;]],[[&quot;Plain&quot;,&quot;false&quot;]]]]],&quot;^29&quot;,[5]]]],536870916]],[&quot;^1A&quot;,[374,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[374,&quot;^[&quot;,&quot;## MongoDB锁\\n\\nMongoDB 有 4 个粒度级别的锁\\n\\n+ Global (mongod 实例) – 所有的数据库上加锁\\n+ Database – 锁定某个数据库\\n+ Collection – 锁定某个集合\\n+ Document – 锁定某个文档\\n\\n除了用于读取的`共享 (S) 锁` (读锁) 和用于写入操作的`排它 (X) 锁` (写锁) 之外，`意向共享 (IS)` 和`意向排它 (IX) 锁`表示使用更精细的粒度锁定读取或写入资源的意图。但我们锁定某个资源的时候，使用意向锁来锁定比它更高级别的资源，这也是多粒度锁的核心。\\n\\n对一个数据行或者 document 加意向锁的含义是：当前事务想要在这个节点或者这个节点的子节点加某种锁 (共享或者排它)，有了意向锁以后，对任何数据加共享锁或者排它锁都要先加意向锁再加具体锁。\\n![image.png](../assets/image_1627882974324_0.png) \\n当我们对 d1 这个 document 进行写入的时候，需要给它加上 X 锁 (排它锁), 这个时候要先去它上层的资源 Global,D1 (database),C1 (collection) 加上 IX (意向排它锁), 加了之后才能在 d1 上加实际的排它锁。如果实际的锁加在 C1 等非叶子节点情况也是一样的。\\n\\n加意向锁最主要的作用就是在**加实际的锁的时候，通过检查父节点是否已经存在了意向锁来确定当前是否可以加上锁。**\\n\\n比如 d1 上持有了实际的排它锁，这个时候 C1,D1,Global 都有一个意向排它锁。此时如果有另外的请求想要在 C1 上加实际的共享锁 (读), 但是 C1 已经有了意向排它锁了，所以就加不成了，需要等待。如果此时想要在 d2 上加共享锁。此时需要先去它的上层节点添加意向共享锁，虽然 C1,D1 已经存在了意向排它锁，但是仍然可以加上意向共享锁，因为它们是兼容的。\\n\\n|                      | IS (意向共享)| \\tIX (意向排它)| \\tS (共享)\\t| X (排它)| \\n| --- | --- | --- | --- | --- |\\n| IS (意向共享)| \\ttrue| true| \\ttrue\\t| false| \\n| IX (意向排它)| \\ttrue\\t| true\\t| false\\t| false| \\n| S (共享)| \\ttrue| \\tfalse| \\ttrue\\t| false| \\n| X (排它)| \\tfalse\\t| false\\t| false\\t| false|&quot;,536870916]],[&quot;^1A&quot;,[374,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[374,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[374,&quot;^K&quot;,85,536870916]],[&quot;^1A&quot;,[374,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[374,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,2161],536870916]],[&quot;^1A&quot;,[374,&quot;^17&quot;,85,536870916]],[&quot;^1A&quot;,[374,&quot;^13&quot;,85,536870916]],[&quot;^1A&quot;,[374,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[374,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;MongoDB锁&quot;]],536870916]],[&quot;^1A&quot;,[374,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[374,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[374,&quot;^?&quot;,&quot;~u611b87e6-5e0c-4d2e-891f-06c1d822adcf&quot;,536870916]],[&quot;^1A&quot;,[375,&quot;^1E&quot;,&quot;-e6--82--b2--e8--a7--82--e9--94--81-&quot;,536870916]],[&quot;^1A&quot;,[375,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;每一个对资源的请求，都需要首先确保请求的资源上有相应的锁。比如对某个文档的读请求，要先给它加上用于读的S锁，被S锁住的资源不能再加上X锁，确保读的过程中资源不会被改写。同时这个S锁本身是共享的，它锁住的资源可以被其他并发的读请求获取。而写锁是排他的，同一个资源的写锁，只能被单个的请求持有。这种机制即保证了写的原子性（X锁排他），又保证了读的并发性（S锁共享）。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;上面这种处理并发的方式，叫做&quot;],[&quot;Code&quot;,&quot;悲观并发控制（pessimistic concurrency control）&quot;],[&quot;Plain&quot;,&quot;，也叫悲观锁。每一个读写请求都要检查相应的锁，有了对应的锁才进行后续操作，严格的杜绝了数据的混乱。同时悲观锁的代价是要消耗CPU资源去做锁相关的操作，请求可能会互相阻塞，甚至发生死锁。比如两个写请求A和B同时请求a、b两个资源。如果A给a加上了锁，还没给b加上锁；B给b加上了锁，还没有给a加上锁，就会导致&quot;],[&quot;Code&quot;,&quot;死锁&quot;],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627883443566_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627883443566_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]]]],536870916]],[&quot;^1A&quot;,[375,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536870916]],[&quot;^1A&quot;,[375,&quot;^[&quot;,&quot;## 悲观锁\\n\\n每一个对资源的请求，都需要首先确保请求的资源上有相应的锁。比如对某个文档的读请求，要先给它加上用于读的S锁，被S锁住的资源不能再加上X锁，确保读的过程中资源不会被改写。同时这个S锁本身是共享的，它锁住的资源可以被其他并发的读请求获取。而写锁是排他的，同一个资源的写锁，只能被单个的请求持有。这种机制即保证了写的原子性（X锁排他），又保证了读的并发性（S锁共享）。\\n\\n上面这种处理并发的方式，叫做`悲观并发控制（pessimistic concurrency control）`，也叫悲观锁。每一个读写请求都要检查相应的锁，有了对应的锁才进行后续操作，严格的杜绝了数据的混乱。同时悲观锁的代价是要消耗CPU资源去做锁相关的操作，请求可能会互相阻塞，甚至发生死锁。比如两个写请求A和B同时请求a、b两个资源。如果A给a加上了锁，还没给b加上锁；B给b加上了锁，还没有给a加上锁，就会导致`死锁`。\\n![image.png](../assets/image_1627883443566_0.png)&quot;,536870916]],[&quot;^1A&quot;,[375,&quot;^W&quot;,&quot;^1H&quot;,536870916]],[&quot;^1A&quot;,[375,&quot;^14&quot;,2,536870916]],[&quot;^1A&quot;,[375,&quot;^K&quot;,374,536870916]],[&quot;^1A&quot;,[375,&quot;^X&quot;,1,536870916]],[&quot;^1A&quot;,[375,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2161,&quot;^1L&quot;,3301],536870916]],[&quot;^1A&quot;,[375,&quot;^17&quot;,85,536870916]],[&quot;^1A&quot;,[375,&quot;^13&quot;,85,536870916]],[&quot;^1A&quot;,[375,&quot;^1M&quot;,2,536870916]],[&quot;^1A&quot;,[375,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;悲观锁&quot;]],536870916]],[&quot;^1A&quot;,[375,&quot;^15&quot;,&quot;^1N&quot;,536870916]],[&quot;^1A&quot;,[375,&quot;^1D&quot;,false,536870916]],[&quot;^1A&quot;,[375,&quot;^?&quot;,&quot;~u611b87e6-d681-43c1-b002-50b7a744a0f6&quot;,536870916]],[&quot;^1A&quot;,[376,&quot;^2&quot;,&quot;0.0.1&quot;,536870918]],[&quot;^1A&quot;,[376,&quot;^11&quot;,&quot;^2&quot;,536870918]],[&quot;^1A&quot;,[377,&quot;^W&quot;,&quot;^1H&quot;,536870920]],[&quot;^1A&quot;,[377,&quot;^V&quot;,20210817,536870920]],[&quot;^1A&quot;,[377,&quot;^E&quot;,true,536870920]],[&quot;^1A&quot;,[377,&quot;^19&quot;,&quot;aug 17th, 2021&quot;,536870920]],[&quot;^1A&quot;,[377,&quot;^1=&quot;,&quot;Aug 17th, 2021&quot;,536870920]],[&quot;^1A&quot;,[377,&quot;^?&quot;,&quot;~u611b87e7-1333-4a7a-aba8-14bfd4e8082a&quot;,536870920]],[&quot;^1A&quot;,[378,&quot;^1E&quot;,&quot;&quot;,536870921]],[&quot;^1A&quot;,[378,&quot;^S&quot;,[],536870921]],[&quot;^1A&quot;,[378,&quot;^[&quot;,&quot;&quot;,536870921]],[&quot;^1A&quot;,[378,&quot;^W&quot;,&quot;^1H&quot;,536870921]],[&quot;^1A&quot;,[378,&quot;^V&quot;,20210817,536870921]],[&quot;^1A&quot;,[378,&quot;^E&quot;,true,536870921]],[&quot;^1A&quot;,[378,&quot;^K&quot;,377,536870921]],[&quot;^1A&quot;,[378,&quot;^X&quot;,1,536870921]],[&quot;^1A&quot;,[378,&quot;^17&quot;,377,536870921]],[&quot;^1A&quot;,[378,&quot;^13&quot;,377,536870921]],[&quot;^1A&quot;,[378,&quot;^D&quot;,[&quot;^ &quot;],536870921]],[&quot;^1A&quot;,[378,&quot;^Z&quot;,[],536870921]],[&quot;^1A&quot;,[378,&quot;^1D&quot;,true,536870921]],[&quot;^1A&quot;,[378,&quot;^?&quot;,&quot;~u611b87e7-1c17-497b-956c-21d0f8c51f73&quot;,536870921]],[&quot;^1A&quot;,[379,&quot;^11&quot;,&quot;^10&quot;,536870922]],[&quot;^1A&quot;,[381,&quot;^W&quot;,&quot;^1H&quot;,536870973]],[&quot;^1A&quot;,[381,&quot;^V&quot;,20210819,536870973]],[&quot;^1A&quot;,[381,&quot;^E&quot;,true,536870973]],[&quot;^1A&quot;,[381,&quot;^19&quot;,&quot;aug 19th, 2021&quot;,536870973]],[&quot;^1A&quot;,[381,&quot;^1=&quot;,&quot;Aug 19th, 2021&quot;,536870973]],[&quot;^1A&quot;,[381,&quot;^?&quot;,&quot;~u611def72-feb8-42eb-a7d6-550542b37864&quot;,536870973]],[&quot;^1A&quot;,[382,&quot;^1E&quot;,&quot;&quot;,536870974]],[&quot;^1A&quot;,[382,&quot;^S&quot;,[],536870974]],[&quot;^1A&quot;,[382,&quot;^[&quot;,&quot;&quot;,536870974]],[&quot;^1A&quot;,[382,&quot;^W&quot;,&quot;^1H&quot;,536870974]],[&quot;^1A&quot;,[382,&quot;^V&quot;,20210819,536870974]],[&quot;^1A&quot;,[382,&quot;^E&quot;,true,536870974]],[&quot;^1A&quot;,[382,&quot;^K&quot;,381,536870974]],[&quot;^1A&quot;,[382,&quot;^X&quot;,1,536870974]],[&quot;^1A&quot;,[382,&quot;^17&quot;,381,536870974]],[&quot;^1A&quot;,[382,&quot;^13&quot;,381,536870974]],[&quot;^1A&quot;,[382,&quot;^D&quot;,[&quot;^ &quot;],536870974]],[&quot;^1A&quot;,[382,&quot;^Z&quot;,[],536870974]],[&quot;^1A&quot;,[382,&quot;^1D&quot;,true,536870974]],[&quot;^1A&quot;,[382,&quot;^?&quot;,&quot;~u611def72-ba31-4bd4-ab6b-1acaf238c2df&quot;,536870974]],[&quot;^1A&quot;,[383,&quot;^W&quot;,&quot;^1H&quot;,536870988]],[&quot;^1A&quot;,[383,&quot;^V&quot;,20210820,536870988]],[&quot;^1A&quot;,[383,&quot;^E&quot;,true,536870988]],[&quot;^1A&quot;,[383,&quot;^19&quot;,&quot;aug 20th, 2021&quot;,536870988]],[&quot;^1A&quot;,[383,&quot;^1=&quot;,&quot;Aug 20th, 2021&quot;,536870988]],[&quot;^1A&quot;,[383,&quot;^?&quot;,&quot;~u611e9812-3a3f-47b8-b275-8c8162237f42&quot;,536870988]],[&quot;^1A&quot;,[384,&quot;^1E&quot;,&quot;&quot;,536870989]],[&quot;^1A&quot;,[384,&quot;^S&quot;,[],536870989]],[&quot;^1A&quot;,[384,&quot;^[&quot;,&quot;&quot;,536870989]],[&quot;^1A&quot;,[384,&quot;^W&quot;,&quot;^1H&quot;,536870989]],[&quot;^1A&quot;,[384,&quot;^V&quot;,20210820,536870989]],[&quot;^1A&quot;,[384,&quot;^E&quot;,true,536870989]],[&quot;^1A&quot;,[384,&quot;^K&quot;,383,536870989]],[&quot;^1A&quot;,[384,&quot;^X&quot;,1,536870989]],[&quot;^1A&quot;,[384,&quot;^17&quot;,383,536870989]],[&quot;^1A&quot;,[384,&quot;^13&quot;,383,536870989]],[&quot;^1A&quot;,[384,&quot;^D&quot;,[&quot;^ &quot;],536870989]],[&quot;^1A&quot;,[384,&quot;^Z&quot;,[],536870989]],[&quot;^1A&quot;,[384,&quot;^1D&quot;,true,536870989]],[&quot;^1A&quot;,[384,&quot;^?&quot;,&quot;~u611e9812-344a-483a-b4ff-9cd64f98bdb5&quot;,536870989]],[&quot;^1A&quot;,[385,&quot;^W&quot;,&quot;^1H&quot;,536870991]],[&quot;^1A&quot;,[385,&quot;^V&quot;,20210821,536870991]],[&quot;^1A&quot;,[385,&quot;^E&quot;,true,536870991]],[&quot;^1A&quot;,[385,&quot;^19&quot;,&quot;aug 21st, 2021&quot;,536870991]],[&quot;^1A&quot;,[385,&quot;^1=&quot;,&quot;Aug 21st, 2021&quot;,536870991]],[&quot;^1A&quot;,[385,&quot;^?&quot;,&quot;~u611fe466-06c0-46b7-8015-70fe7de2f3b3&quot;,536870991]],[&quot;^1A&quot;,[386,&quot;^1E&quot;,&quot;&quot;,536870992]],[&quot;^1A&quot;,[386,&quot;^S&quot;,[],536870992]],[&quot;^1A&quot;,[386,&quot;^[&quot;,&quot;&quot;,536870992]],[&quot;^1A&quot;,[386,&quot;^W&quot;,&quot;^1H&quot;,536870992]],[&quot;^1A&quot;,[386,&quot;^V&quot;,20210821,536870992]],[&quot;^1A&quot;,[386,&quot;^E&quot;,true,536870992]],[&quot;^1A&quot;,[386,&quot;^K&quot;,385,536870992]],[&quot;^1A&quot;,[386,&quot;^X&quot;,1,536870992]],[&quot;^1A&quot;,[386,&quot;^17&quot;,385,536870992]],[&quot;^1A&quot;,[386,&quot;^13&quot;,385,536870992]],[&quot;^1A&quot;,[386,&quot;^D&quot;,[&quot;^ &quot;],536870992]],[&quot;^1A&quot;,[386,&quot;^Z&quot;,[],536870992]],[&quot;^1A&quot;,[386,&quot;^1D&quot;,true,536870992]],[&quot;^1A&quot;,[386,&quot;^?&quot;,&quot;~u611fe466-23e1-494f-8005-567e75f687a4&quot;,536870992]],[&quot;^1A&quot;,[388,&quot;^Q&quot;,1631932186943,536871212]],[&quot;^1A&quot;,[388,&quot;^E&quot;,false,536871092]],[&quot;^1A&quot;,[388,&quot;^19&quot;,&quot;projects&quot;,536871092]],[&quot;^1A&quot;,[388,&quot;^1=&quot;,&quot;projects&quot;,536871092]],[&quot;^1A&quot;,[388,&quot;^G&quot;,1631932201587,536871237]],[&quot;^1A&quot;,[388,&quot;^?&quot;,&quot;~u614452eb-6ac0-416a-b27c-c0de4ac634b2&quot;,536871092]],[&quot;^1A&quot;,[389,&quot;^1E&quot;,&quot;&quot;,536871092]],[&quot;^1A&quot;,[389,&quot;^S&quot;,[],536871092]],[&quot;^1A&quot;,[389,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871092]],[&quot;^1A&quot;,[389,&quot;^[&quot;,&quot;[[用户触达]]&quot;,536871092]],[&quot;^1A&quot;,[389,&quot;^W&quot;,&quot;^1H&quot;,536871092]],[&quot;^1A&quot;,[389,&quot;^K&quot;,388,536871092]],[&quot;^1A&quot;,[389,&quot;^X&quot;,1,536871092]],[&quot;^1A&quot;,[389,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,19],536871092]],[&quot;^1A&quot;,[389,&quot;^17&quot;,388,536871092]],[&quot;^1A&quot;,[389,&quot;^13&quot;,388,536871092]],[&quot;^1A&quot;,[389,&quot;^12&quot;,388,536871092]],[&quot;^1A&quot;,[389,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;用户触达&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[用户触达]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536871092]],[&quot;^1A&quot;,[389,&quot;^1D&quot;,true,536871092]],[&quot;^1A&quot;,[389,&quot;^?&quot;,&quot;~u614452eb-ac00-40ca-965d-4c1d4c4279fa&quot;,536871092]],[&quot;^1A&quot;,[390,&quot;^1E&quot;,&quot;-e7--94--a8--e6--88--b7--e5--a2--9e--e9--95--bf-&quot;,536871092]],[&quot;^1A&quot;,[390,&quot;^S&quot;,[],536871231]],[&quot;^1A&quot;,[390,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871092]],[&quot;^1A&quot;,[390,&quot;^[&quot;,&quot;## 用户增长&quot;,536871092]],[&quot;^1A&quot;,[390,&quot;^W&quot;,&quot;^1H&quot;,536871092]],[&quot;^1A&quot;,[390,&quot;^14&quot;,2,536871231]],[&quot;^1A&quot;,[390,&quot;^K&quot;,389,536871092]],[&quot;^1A&quot;,[390,&quot;^X&quot;,1,536871231]],[&quot;^1A&quot;,[390,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,19,&quot;^1L&quot;,36],536871092]],[&quot;^1A&quot;,[390,&quot;^17&quot;,388,536871092]],[&quot;^1A&quot;,[390,&quot;^13&quot;,388,536871092]],[&quot;^1A&quot;,[390,&quot;^12&quot;,388,536871231]],[&quot;^1A&quot;,[390,&quot;^D&quot;,[&quot;^ &quot;],536871231]],[&quot;^1A&quot;,[390,&quot;^1M&quot;,2,536871092]],[&quot;^1A&quot;,[390,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;用户增长&quot;]],536871231]],[&quot;^1A&quot;,[390,&quot;^15&quot;,&quot;^1N&quot;,536871231]],[&quot;^1A&quot;,[390,&quot;^1D&quot;,false,536871212]],[&quot;^1A&quot;,[390,&quot;^?&quot;,&quot;~u614452eb-fb91-47ae-a711-3e2200613681&quot;,536871092]],[&quot;^1A&quot;,[391,&quot;^E&quot;,false,536871095]],[&quot;^1A&quot;,[391,&quot;^19&quot;,&quot;http&quot;,536871095]],[&quot;^1A&quot;,[391,&quot;^1=&quot;,&quot;http&quot;,536871095]],[&quot;^1A&quot;,[391,&quot;^?&quot;,&quot;~u614452eb-5dbd-49ed-b469-0167043df88d&quot;,536871095]],[&quot;^1A&quot;,[392,&quot;^1E&quot;,&quot;&quot;,536871095]],[&quot;^1A&quot;,[392,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;DNS解析&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;ISP解析IP&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;TCP连接建立&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;SSL认证&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;HTTP响应报文&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;浏览器加载渲染&quot;],[&quot;Break_Line&quot;]]]]],536871095]],[&quot;^1A&quot;,[392,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871095]],[&quot;^1A&quot;,[392,&quot;^[&quot;,&quot;## `URL解析`\\n\\nDNS解析\\nISP解析IP\\nTCP连接建立\\nSSL认证\\nHTTP响应报文\\n浏览器加载渲染&quot;,536871095]],[&quot;^1A&quot;,[392,&quot;^W&quot;,&quot;^1H&quot;,536871095]],[&quot;^1A&quot;,[392,&quot;^14&quot;,2,536871095]],[&quot;^1A&quot;,[392,&quot;^K&quot;,391,536871095]],[&quot;^1A&quot;,[392,&quot;^X&quot;,1,536871095]],[&quot;^1A&quot;,[392,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,103],536871095]],[&quot;^1A&quot;,[392,&quot;^17&quot;,391,536871095]],[&quot;^1A&quot;,[392,&quot;^13&quot;,391,536871095]],[&quot;^1A&quot;,[392,&quot;^12&quot;,391,536871095]],[&quot;^1A&quot;,[392,&quot;^1M&quot;,2,536871095]],[&quot;^1A&quot;,[392,&quot;^Z&quot;,[[&quot;Code&quot;,&quot;URL解析&quot;]],536871095]],[&quot;^1A&quot;,[392,&quot;^15&quot;,&quot;^1N&quot;,536871095]],[&quot;^1A&quot;,[392,&quot;^1D&quot;,false,536871095]],[&quot;^1A&quot;,[392,&quot;^?&quot;,&quot;~u614452eb-7e32-4335-b4c0-115c3d350eb9&quot;,536871095]],[&quot;^1A&quot;,[393,&quot;^1E&quot;,&quot;&quot;,536871095]],[&quot;^1A&quot;,[393,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;本质上是TCP长连接，短连接。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;长连接：即握手建立连接后，服务端和客户端不会主动关闭连接（close），之后的通讯复用此连接。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;短连接：即握手建立连接后，服务端和客户端在完成短暂通讯后即主动close调连接&quot;],[&quot;Break_Line&quot;]]]]],536871095]],[&quot;^1A&quot;,[393,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871095]],[&quot;^1A&quot;,[393,&quot;^[&quot;,&quot;## `长连接`\\n\\n本质上是TCP长连接，短连接。\\n\\n长连接：即握手建立连接后，服务端和客户端不会主动关闭连接（close），之后的通讯复用此连接。\\n\\n短连接：即握手建立连接后，服务端和客户端在完成短暂通讯后即主动close调连接&quot;,536871095]],[&quot;^1A&quot;,[393,&quot;^W&quot;,&quot;^1H&quot;,536871095]],[&quot;^1A&quot;,[393,&quot;^14&quot;,2,536871095]],[&quot;^1A&quot;,[393,&quot;^K&quot;,392,536871095]],[&quot;^1A&quot;,[393,&quot;^X&quot;,1,536871095]],[&quot;^1A&quot;,[393,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,103,&quot;^1L&quot;,401],536871095]],[&quot;^1A&quot;,[393,&quot;^17&quot;,391,536871095]],[&quot;^1A&quot;,[393,&quot;^13&quot;,391,536871095]],[&quot;^1A&quot;,[393,&quot;^12&quot;,391,536871095]],[&quot;^1A&quot;,[393,&quot;^1M&quot;,2,536871095]],[&quot;^1A&quot;,[393,&quot;^Z&quot;,[[&quot;Code&quot;,&quot;长连接&quot;]],536871095]],[&quot;^1A&quot;,[393,&quot;^15&quot;,&quot;^1N&quot;,536871095]],[&quot;^1A&quot;,[393,&quot;^1D&quot;,false,536871095]],[&quot;^1A&quot;,[393,&quot;^?&quot;,&quot;~u614452eb-c80c-4174-b74a-cbd36a3b0b28&quot;,536871095]],[&quot;^1A&quot;,[394,&quot;^1E&quot;,&quot;&quot;,536871095]],[&quot;^1A&quot;,[394,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;快速重传：快速重传和恢复（fast retransmit and recovery，FRR）是一种拥塞控制算法，它能快速恢复丢失的数据包。没有FRR，如果数据包丢失了，TCP将会使用定时器来要求传输暂停。在暂停的这段时间内，没有新的或复制的数据包被发送。有了FRR，如果接收机接收到一个不按顺序的数据段，它会立即给发送机发送一个重复确认。如果发送机接收到三个重复确认，它会假定确认件指出的数据段丢失了，并立即重传这些丢失的数据段。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;tva1.sinaimg.cn/large/008i3skNgy1gs2js3s8zlj307c07oglx.jpg&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image&quot;]],&quot;^1W&quot;,&quot;![image](https://tva1.sinaimg.cn/large/008i3skNgy1gs2js3s8zlj307c07oglx.jpg)&quot;,&quot;^1X&quot;,&quot;&quot;]]]]]],536871095]],[&quot;^1A&quot;,[394,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871095]],[&quot;^1A&quot;,[394,&quot;^[&quot;,&quot;## `TCP拥塞控制`\\n\\n快速重传：快速重传和恢复（fast retransmit and recovery，FRR）是一种拥塞控制算法，它能快速恢复丢失的数据包。没有FRR，如果数据包丢失了，TCP将会使用定时器来要求传输暂停。在暂停的这段时间内，没有新的或复制的数据包被发送。有了FRR，如果接收机接收到一个不按顺序的数据段，它会立即给发送机发送一个重复确认。如果发送机接收到三个重复确认，它会假定确认件指出的数据段丢失了，并立即重传这些丢失的数据段。\\n\\n![image](https://tva1.sinaimg.cn/large/008i3skNgy1gs2js3s8zlj307c07oglx.jpg)&quot;,536871095]],[&quot;^1A&quot;,[394,&quot;^W&quot;,&quot;^1H&quot;,536871095]],[&quot;^1A&quot;,[394,&quot;^14&quot;,2,536871095]],[&quot;^1A&quot;,[394,&quot;^K&quot;,393,536871095]],[&quot;^1A&quot;,[394,&quot;^X&quot;,1,536871095]],[&quot;^1A&quot;,[394,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,401,&quot;^1L&quot;,1066],536871095]],[&quot;^1A&quot;,[394,&quot;^17&quot;,391,536871095]],[&quot;^1A&quot;,[394,&quot;^13&quot;,391,536871095]],[&quot;^1A&quot;,[394,&quot;^12&quot;,391,536871095]],[&quot;^1A&quot;,[394,&quot;^1M&quot;,2,536871095]],[&quot;^1A&quot;,[394,&quot;^Z&quot;,[[&quot;Code&quot;,&quot;TCP拥塞控制&quot;]],536871095]],[&quot;^1A&quot;,[394,&quot;^15&quot;,&quot;^1N&quot;,536871095]],[&quot;^1A&quot;,[394,&quot;^1D&quot;,false,536871095]],[&quot;^1A&quot;,[394,&quot;^?&quot;,&quot;~u614452eb-d794-4037-978d-5472ff42a74c&quot;,536871095]],[&quot;^1A&quot;,[395,&quot;^E&quot;,false,536871098]],[&quot;^1A&quot;,[395,&quot;^19&quot;,&quot;用户触达&quot;,536871098]],[&quot;^1A&quot;,[395,&quot;^1=&quot;,&quot;用户触达&quot;,536871098]],[&quot;^1A&quot;,[395,&quot;^?&quot;,&quot;~u614452eb-c152-424a-b862-13113f1811eb&quot;,536871098]],[&quot;^1A&quot;,[396,&quot;^1E&quot;,&quot;Design&quot;,536871098]],[&quot;^1A&quot;,[396,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1629356118687_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1629356118687_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536871098]],[&quot;^1A&quot;,[396,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871098]],[&quot;^1A&quot;,[396,&quot;^[&quot;,&quot;## Design\\n![image.png](../assets/image_1629356118687_0.png)&quot;,536871098]],[&quot;^1A&quot;,[396,&quot;^W&quot;,&quot;^1H&quot;,536871098]],[&quot;^1A&quot;,[396,&quot;^14&quot;,2,536871098]],[&quot;^1A&quot;,[396,&quot;^K&quot;,395,536871098]],[&quot;^1A&quot;,[396,&quot;^X&quot;,1,536871098]],[&quot;^1A&quot;,[396,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,60],536871098]],[&quot;^1A&quot;,[396,&quot;^17&quot;,395,536871098]],[&quot;^1A&quot;,[396,&quot;^13&quot;,395,536871098]],[&quot;^1A&quot;,[396,&quot;^12&quot;,395,536871098]],[&quot;^1A&quot;,[396,&quot;^1M&quot;,2,536871098]],[&quot;^1A&quot;,[396,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Design&quot;]],536871098]],[&quot;^1A&quot;,[396,&quot;^15&quot;,&quot;^1N&quot;,536871098]],[&quot;^1A&quot;,[396,&quot;^1D&quot;,false,536871098]],[&quot;^1A&quot;,[396,&quot;^?&quot;,&quot;~u614452eb-84ea-4550-8d5e-fa51bc07b483&quot;,536871098]],[&quot;^1A&quot;,[397,&quot;^1E&quot;,&quot;&quot;,536871098]],[&quot;^1A&quot;,[397,&quot;^S&quot;,[],536871098]],[&quot;^1A&quot;,[397,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871098]],[&quot;^1A&quot;,[397,&quot;^[&quot;,&quot;&quot;,536871098]],[&quot;^1A&quot;,[397,&quot;^W&quot;,&quot;^1H&quot;,536871098]],[&quot;^1A&quot;,[397,&quot;^K&quot;,396,536871098]],[&quot;^1A&quot;,[397,&quot;^X&quot;,1,536871098]],[&quot;^1A&quot;,[397,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,60,&quot;^1L&quot;,62],536871098]],[&quot;^1A&quot;,[397,&quot;^17&quot;,395,536871098]],[&quot;^1A&quot;,[397,&quot;^13&quot;,395,536871098]],[&quot;^1A&quot;,[397,&quot;^12&quot;,395,536871098]],[&quot;^1A&quot;,[397,&quot;^Z&quot;,[],536871098]],[&quot;^1A&quot;,[397,&quot;^1D&quot;,true,536871098]],[&quot;^1A&quot;,[397,&quot;^?&quot;,&quot;~u614452eb-6135-4def-bc27-9c02adf42444&quot;,536871098]],[&quot;^1A&quot;,[398,&quot;^1E&quot;,&quot;-e8--bf--87--e6--bb--a4--e6--89--8b--e6--9c--ba--e5--8f--b7--e6--97--b6--ef--bc--8c--e5--87--ba--e7--8e--b0-_ConcurrentModificationException_-3f-&quot;,536871098]],[&quot;^1A&quot;,[398,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;Java&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;Iterator&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;Java迭代器设计&quot;]]]],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 场景：过滤手机号数组中，非法的手机号&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; 问题代码：&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;List&lt;String&gt; mobiles = new ArrayList();&quot;,&quot;\\n&quot;,&quot;mobiles.add(\\&quot;173\\&quot;);&quot;,&quot;\\n&quot;,&quot;mobiles.add(\\&quot;1733\\&quot;);&quot;,&quot;\\n&quot;,&quot;mobiles.add(\\&quot;1735\\&quot;);&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;public boolean illegal(String mobile) {&quot;,&quot;\\n&quot;,&quot;  return mobile.length() == 3; &quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;,&quot;  &quot;,&quot;\\n&quot;,&quot;for (String mobile : mobiles) {&quot;,&quot;\\n&quot;,&quot;  if (illegal(mobile)) {&quot;,&quot;\\n&quot;,&quot;      mobiles.remove(mobile);&quot;,&quot;\\n&quot;,&quot;  }&quot;,&quot;\\n&quot;,&quot;}&quot;,&quot;\\n&quot;,&quot;System.out.println(mobiles);&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;java&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,275,&quot;^1S&quot;,607],&quot;^1T&quot;,&quot;~```java\\nList&lt;String&gt; mobiles = new ArrayList();\\nmobiles.add(\\&quot;173\\&quot;);\\nmobiles.add(\\&quot;1733\\&quot;);\\nmobiles.add(\\&quot;1735\\&quot;);\\n\\npublic boolean illegal(String mobile) {\\n  return mobile.length() == 3; \\n}\\n\\nfor (String mobile : mobiles) {\\n  if (illegal(mobile)) {\\n      mobiles.remove(mobile);\\n  }\\n}\\nSystem.out.println(mobiles);\\n```&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Java的迭代器，在调用&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;next&quot;]]]],[&quot;Plain&quot;,&quot;方法，即往下迭代时，会检查容器是否被修改。当修改发生时，会抛出 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;ConcurrentModificationException&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;],[&quot;Break_Line&quot;],[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot;此异常为迭代器提供&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;fail-fast&quot;]]]],[&quot;Plain&quot;,&quot;机制，避免容器不确定的行为。&quot;],[&quot;Break_Line&quot;]]]]],536871098]],[&quot;^1A&quot;,[398,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871098]],[&quot;^1A&quot;,[398,&quot;^[&quot;,&quot;## 过滤手机号时，出现 ConcurrentModificationException ?\\n\\n`Java` `Iterator`\\n\\n**Java迭代器设计**\\n\\n场景：过滤手机号数组中，非法的手机号\\n\\n问题代码：\\n\\n```java\\nList&lt;String&gt; mobiles = new ArrayList();\\nmobiles.add(\\&quot;173\\&quot;);\\nmobiles.add(\\&quot;1733\\&quot;);\\nmobiles.add(\\&quot;1735\\&quot;);\\n\\npublic boolean illegal(String mobile) {\\n  return mobile.length() == 3; \\n}\\n\\nfor (String mobile : mobiles) {\\n  if (illegal(mobile)) {\\n      mobiles.remove(mobile);\\n  }\\n}\\nSystem.out.println(mobiles);\\n```\\nJava的迭代器，在调用**next**方法，即往下迭代时，会检查容器是否被修改。当修改发生时，会抛出 **ConcurrentModificationException**。\\n\\n此异常为迭代器提供**fail-fast**机制，避免容器不确定的行为。&quot;,536871098]],[&quot;^1A&quot;,[398,&quot;^W&quot;,&quot;^1H&quot;,536871098]],[&quot;^1A&quot;,[398,&quot;^14&quot;,2,536871098]],[&quot;^1A&quot;,[398,&quot;^K&quot;,397,536871098]],[&quot;^1A&quot;,[398,&quot;^X&quot;,1,536871098]],[&quot;^1A&quot;,[398,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,62,&quot;^1L&quot;,870],536871098]],[&quot;^1A&quot;,[398,&quot;^17&quot;,395,536871098]],[&quot;^1A&quot;,[398,&quot;^13&quot;,395,536871098]],[&quot;^1A&quot;,[398,&quot;^12&quot;,395,536871098]],[&quot;^1A&quot;,[398,&quot;^1M&quot;,2,536871098]],[&quot;^1A&quot;,[398,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;过滤手机号时，出现 ConcurrentModificationException ?&quot;]],536871098]],[&quot;^1A&quot;,[398,&quot;^15&quot;,&quot;^1N&quot;,536871098]],[&quot;^1A&quot;,[398,&quot;^1D&quot;,true,536871098]],[&quot;^1A&quot;,[398,&quot;^?&quot;,&quot;~u614452eb-97ba-426c-966c-0e3f23865209&quot;,536871098]],[&quot;^1A&quot;,[399,&quot;^1E&quot;,&quot;-e7--b3--bb--e7--bb--9f--e5--90--af--e5--8a--a8--e6--97--b6--e8--b4--9f--e8--bd--bd--e9--ab--98-&quot;,536871098]],[&quot;^1A&quot;,[399,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Hard_Break_Line&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;JVM在启动时多线程加载类文件&quot;]]]],[&quot;Break_Line&quot;]]]]],536871098]],[&quot;^1A&quot;,[399,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871098]],[&quot;^1A&quot;,[399,&quot;^[&quot;,&quot;## 系统启动时负载高\\n\\n**JVM在启动时多线程加载类文件**&quot;,536871098]],[&quot;^1A&quot;,[399,&quot;^W&quot;,&quot;^1H&quot;,536871098]],[&quot;^1A&quot;,[399,&quot;^14&quot;,2,536871098]],[&quot;^1A&quot;,[399,&quot;^K&quot;,398,536871098]],[&quot;^1A&quot;,[399,&quot;^X&quot;,1,536871098]],[&quot;^1A&quot;,[399,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,870,&quot;^1L&quot;,949],536871098]],[&quot;^1A&quot;,[399,&quot;^17&quot;,395,536871098]],[&quot;^1A&quot;,[399,&quot;^13&quot;,395,536871098]],[&quot;^1A&quot;,[399,&quot;^12&quot;,395,536871098]],[&quot;^1A&quot;,[399,&quot;^1M&quot;,2,536871098]],[&quot;^1A&quot;,[399,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;系统启动时负载高&quot;]],536871098]],[&quot;^1A&quot;,[399,&quot;^15&quot;,&quot;^1N&quot;,536871098]],[&quot;^1A&quot;,[399,&quot;^1D&quot;,true,536871098]],[&quot;^1A&quot;,[399,&quot;^?&quot;,&quot;~u614452eb-8c3c-453e-9024-c0fddc77deba&quot;,536871098]],[&quot;^1A&quot;,[400,&quot;^1E&quot;,&quot;&quot;,536871098]],[&quot;^1A&quot;,[400,&quot;^S&quot;,[],536871098]],[&quot;^1A&quot;,[400,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871098]],[&quot;^1A&quot;,[400,&quot;^[&quot;,&quot;&quot;,536871098]],[&quot;^1A&quot;,[400,&quot;^W&quot;,&quot;^1H&quot;,536871098]],[&quot;^1A&quot;,[400,&quot;^K&quot;,399,536871098]],[&quot;^1A&quot;,[400,&quot;^X&quot;,1,536871098]],[&quot;^1A&quot;,[400,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,949,&quot;^1L&quot;,951],536871098]],[&quot;^1A&quot;,[400,&quot;^17&quot;,395,536871098]],[&quot;^1A&quot;,[400,&quot;^13&quot;,395,536871098]],[&quot;^1A&quot;,[400,&quot;^12&quot;,395,536871098]],[&quot;^1A&quot;,[400,&quot;^Z&quot;,[],536871098]],[&quot;^1A&quot;,[400,&quot;^1D&quot;,true,536871098]],[&quot;^1A&quot;,[400,&quot;^?&quot;,&quot;~u614452eb-23f3-4eff-8515-0c1dfd6e7987&quot;,536871098]],[&quot;^1A&quot;,[401,&quot;^1E&quot;,&quot;&quot;,536871098]],[&quot;^1A&quot;,[401,&quot;^S&quot;,[],536871098]],[&quot;^1A&quot;,[401,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871098]],[&quot;^1A&quot;,[401,&quot;^[&quot;,&quot;&quot;,536871098]],[&quot;^1A&quot;,[401,&quot;^W&quot;,&quot;^1H&quot;,536871098]],[&quot;^1A&quot;,[401,&quot;^K&quot;,400,536871098]],[&quot;^1A&quot;,[401,&quot;^X&quot;,1,536871098]],[&quot;^1A&quot;,[401,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,951,&quot;^1L&quot;,953],536871098]],[&quot;^1A&quot;,[401,&quot;^17&quot;,395,536871098]],[&quot;^1A&quot;,[401,&quot;^13&quot;,395,536871098]],[&quot;^1A&quot;,[401,&quot;^12&quot;,395,536871098]],[&quot;^1A&quot;,[401,&quot;^Z&quot;,[],536871098]],[&quot;^1A&quot;,[401,&quot;^1D&quot;,true,536871098]],[&quot;^1A&quot;,[401,&quot;^?&quot;,&quot;~u614452eb-5059-4de1-ae2b-01c2ef0ff6ce&quot;,536871098]],[&quot;^1A&quot;,[402,&quot;^1E&quot;,&quot;&quot;,536871098]],[&quot;^1A&quot;,[402,&quot;^S&quot;,[],536871098]],[&quot;^1A&quot;,[402,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871098]],[&quot;^1A&quot;,[402,&quot;^[&quot;,&quot;&quot;,536871098]],[&quot;^1A&quot;,[402,&quot;^W&quot;,&quot;^1H&quot;,536871098]],[&quot;^1A&quot;,[402,&quot;^K&quot;,401,536871098]],[&quot;^1A&quot;,[402,&quot;^X&quot;,1,536871098]],[&quot;^1A&quot;,[402,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,953,&quot;^1L&quot;,954],536871098]],[&quot;^1A&quot;,[402,&quot;^17&quot;,395,536871098]],[&quot;^1A&quot;,[402,&quot;^13&quot;,395,536871098]],[&quot;^1A&quot;,[402,&quot;^12&quot;,395,536871098]],[&quot;^1A&quot;,[402,&quot;^Z&quot;,[],536871098]],[&quot;^1A&quot;,[402,&quot;^1D&quot;,true,536871098]],[&quot;^1A&quot;,[402,&quot;^?&quot;,&quot;~u614452eb-15ce-4c5b-9f1f-56881f9f4152&quot;,536871098]],[&quot;^1A&quot;,[403,&quot;^E&quot;,false,536871101]],[&quot;^1A&quot;,[403,&quot;^19&quot;,&quot;hbase&quot;,536871101]],[&quot;^1A&quot;,[403,&quot;^1=&quot;,&quot;hbase&quot;,536871101]],[&quot;^1A&quot;,[403,&quot;^?&quot;,&quot;~u614452eb-c23d-44e3-9a46-d5c95e0db58b&quot;,536871101]],[&quot;^1A&quot;,[404,&quot;^1E&quot;,&quot;-e5--ad--98--e5--82--a8-&quot;,536871101]],[&quot;^1A&quot;,[404,&quot;^S&quot;,[],536871101]],[&quot;^1A&quot;,[404,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u614452eb-a8ec-48d6-8bd0-476a6e854136&quot;],[&quot;^?&quot;,&quot;~u614452eb-03ab-405c-b1cd-b785816ba156&quot;],[&quot;^?&quot;,&quot;~u614452eb-64e8-4f58-8ca5-c47ee4539454&quot;],[&quot;^?&quot;,&quot;~u614452eb-7d33-4d67-8ca1-1a2b2da3ab00&quot;]]],536871101]],[&quot;^1A&quot;,[404,&quot;^[&quot;,&quot;## 存储&quot;,536871101]],[&quot;^1A&quot;,[404,&quot;^W&quot;,&quot;^1H&quot;,536871101]],[&quot;^1A&quot;,[404,&quot;^14&quot;,2,536871101]],[&quot;^1A&quot;,[404,&quot;^K&quot;,403,536871101]],[&quot;^1A&quot;,[404,&quot;^X&quot;,1,536871101]],[&quot;^1A&quot;,[404,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,0,&quot;^1L&quot;,10],536871101]],[&quot;^1A&quot;,[404,&quot;^17&quot;,403,536871101]],[&quot;^1A&quot;,[404,&quot;^13&quot;,403,536871101]],[&quot;^1A&quot;,[404,&quot;^12&quot;,403,536871101]],[&quot;^1A&quot;,[404,&quot;^1M&quot;,2,536871101]],[&quot;^1A&quot;,[404,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;存储&quot;]],536871101]],[&quot;^1A&quot;,[404,&quot;^15&quot;,&quot;^1N&quot;,536871101]],[&quot;^1A&quot;,[404,&quot;^1D&quot;,false,536871101]],[&quot;^1A&quot;,[404,&quot;^?&quot;,&quot;~u614452eb-fbe2-44c4-81a8-82668deb2288&quot;,536871101]],[&quot;^1A&quot;,[405,&quot;^1E&quot;,&quot;-e6--a6--82--e8--a7--88-&quot;,536871101]],[&quot;^1A&quot;,[405,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627955773560_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627955773560_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536871101]],[&quot;^1A&quot;,[405,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871101]],[&quot;^1A&quot;,[405,&quot;^[&quot;,&quot;## 概览\\n![image.png](../assets/image_1627955773560_0.png)&quot;,536871101]],[&quot;^1A&quot;,[405,&quot;^W&quot;,&quot;^1H&quot;,536871101]],[&quot;^1A&quot;,[405,&quot;^14&quot;,2,536871101]],[&quot;^1A&quot;,[405,&quot;^K&quot;,404,536871101]],[&quot;^1A&quot;,[405,&quot;^X&quot;,2,536871101]],[&quot;^1A&quot;,[405,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,10,&quot;^1L&quot;,76],536871101]],[&quot;^1A&quot;,[405,&quot;^17&quot;,403,536871101]],[&quot;^1A&quot;,[405,&quot;^13&quot;,404,536871101]],[&quot;^1A&quot;,[405,&quot;^12&quot;,403,536871101]],[&quot;^1A&quot;,[405,&quot;^1M&quot;,2,536871101]],[&quot;^1A&quot;,[405,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;概览&quot;]],536871101]],[&quot;^1A&quot;,[405,&quot;^15&quot;,&quot;^1N&quot;,536871101]],[&quot;^1A&quot;,[405,&quot;^1D&quot;,true,536871101]],[&quot;^1A&quot;,[405,&quot;^?&quot;,&quot;~u614452eb-7d33-4d67-8ca1-1a2b2da3ab00&quot;,536871101]],[&quot;^1A&quot;,[406,&quot;^1E&quot;,&quot;-e7--b4--a2--e5--bc--95-&quot;,536871101]],[&quot;^1A&quot;,[406,&quot;^S&quot;,[],536871101]],[&quot;^1A&quot;,[406,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871101]],[&quot;^1A&quot;,[406,&quot;^[&quot;,&quot;## 索引 ((6107a6d6-a68f-4f4f-9382-cc1ac0ea129d))&quot;,536871101]],[&quot;^1A&quot;,[406,&quot;^W&quot;,&quot;^1H&quot;,536871101]],[&quot;^1A&quot;,[406,&quot;^14&quot;,2,536871101]],[&quot;^1A&quot;,[406,&quot;^K&quot;,405,536871101]],[&quot;^1A&quot;,[406,&quot;^X&quot;,2,536871101]],[&quot;^1A&quot;,[406,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,76,&quot;^1L&quot;,130],536871101]],[&quot;^1A&quot;,[406,&quot;^17&quot;,403,536871101]],[&quot;^1A&quot;,[406,&quot;^13&quot;,404,536871101]],[&quot;^1A&quot;,[406,&quot;^12&quot;,403,536871101]],[&quot;^1A&quot;,[406,&quot;^1M&quot;,2,536871101]],[&quot;^1A&quot;,[406,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;索引 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;6107a6d6-a68f-4f4f-9382-cc1ac0ea129d&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((6107a6d6-a68f-4f4f-9382-cc1ac0ea129d))&quot;,&quot;^1X&quot;,&quot;&quot;]]],536871101]],[&quot;^1A&quot;,[406,&quot;^15&quot;,&quot;^1N&quot;,536871101]],[&quot;^1A&quot;,[406,&quot;^1D&quot;,true,536871101]],[&quot;^1A&quot;,[406,&quot;^?&quot;,&quot;~u614452eb-64e8-4f58-8ca5-c47ee4539454&quot;,536871101]],[&quot;^1A&quot;,[407,&quot;^1E&quot;,&quot;-e5--ad--98--e5--82--a8--e6--a8--a1--e5--9e--8b-&quot;,536871101]],[&quot;^1A&quot;,[407,&quot;^S&quot;,[],536871101]],[&quot;^1A&quot;,[407,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u614452eb-2a2d-4288-832f-6c55fb274338&quot;],[&quot;^?&quot;,&quot;~u614452eb-1ced-449e-9b70-2afb9597d630&quot;]]],536871101]],[&quot;^1A&quot;,[407,&quot;^[&quot;,&quot;## 存储模型&quot;,536871101]],[&quot;^1A&quot;,[407,&quot;^W&quot;,&quot;^1H&quot;,536871101]],[&quot;^1A&quot;,[407,&quot;^14&quot;,2,536871101]],[&quot;^1A&quot;,[407,&quot;^K&quot;,406,536871101]],[&quot;^1A&quot;,[407,&quot;^X&quot;,2,536871101]],[&quot;^1A&quot;,[407,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,130,&quot;^1L&quot;,149],536871101]],[&quot;^1A&quot;,[407,&quot;^17&quot;,403,536871101]],[&quot;^1A&quot;,[407,&quot;^13&quot;,404,536871101]],[&quot;^1A&quot;,[407,&quot;^12&quot;,403,536871101]],[&quot;^1A&quot;,[407,&quot;^1M&quot;,2,536871101]],[&quot;^1A&quot;,[407,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;存储模型&quot;]],536871101]],[&quot;^1A&quot;,[407,&quot;^15&quot;,&quot;^1N&quot;,536871101]],[&quot;^1A&quot;,[407,&quot;^1D&quot;,true,536871101]],[&quot;^1A&quot;,[407,&quot;^?&quot;,&quot;~u614452eb-03ab-405c-b1cd-b785816ba156&quot;,536871101]],[&quot;^1A&quot;,[408,&quot;^1E&quot;,&quot;Region&quot;,536871101]],[&quot;^1A&quot;,[408,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Region是数据表的一个分片，当数据表大小超过一定阈值就会&quot;],[&quot;Code&quot;,&quot;水平切分&quot;],[&quot;Plain&quot;,&quot;，分裂为两个Region。Region是集群负载均衡的基本单位。通常一张表的Region会分布在整个集群的多台RegionServer上，一个RegionServer上会管理多个Region，当然，这些Region一般来自不同的数据表。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;一个Region由一个或者多个Store构成，Store的个数取决于表中列簇（column family）的个数，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;多少个列簇就有多少个Store&quot;]]]],[&quot;Plain&quot;,&quot;。HBase中，每个列簇的数据都集中存放在一起形成一个存储单元Store，因此建议将具有相同IO特性的数据设置在同一个列簇中。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;每个Store由一个&quot;],[&quot;Code&quot;,&quot;MemStore&quot;],[&quot;Plain&quot;,&quot;和一个或多个HFile组成。MemStore称为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;写缓存&quot;]]]],[&quot;Plain&quot;,&quot;，用户写入数据时首先会写到MemStore，当MemStore写满之后（缓存数据超过阈值，默认128M）系统会异步地将数据flush成一个HFile文件。显然，随着数据不断写入，HFile文件会越来越多，当HFile文件数超过一定阈值之后系统将会执行Compact操作，将这些小文件通过一定策略合并成一个或多个大文件。&quot;],[&quot;Break_Line&quot;]]]]],536871101]],[&quot;^1A&quot;,[408,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871101]],[&quot;^1A&quot;,[408,&quot;^[&quot;,&quot;## Region\\nRegion是数据表的一个分片，当数据表大小超过一定阈值就会`水平切分`，分裂为两个Region。Region是集群负载均衡的基本单位。通常一张表的Region会分布在整个集群的多台RegionServer上，一个RegionServer上会管理多个Region，当然，这些Region一般来自不同的数据表。\\n\\n一个Region由一个或者多个Store构成，Store的个数取决于表中列簇（column family）的个数，**多少个列簇就有多少个Store**。HBase中，每个列簇的数据都集中存放在一起形成一个存储单元Store，因此建议将具有相同IO特性的数据设置在同一个列簇中。\\n\\n每个Store由一个`MemStore`和一个或多个HFile组成。MemStore称为**写缓存**，用户写入数据时首先会写到MemStore，当MemStore写满之后（缓存数据超过阈值，默认128M）系统会异步地将数据flush成一个HFile文件。显然，随着数据不断写入，HFile文件会越来越多，当HFile文件数超过一定阈值之后系统将会执行Compact操作，将这些小文件通过一定策略合并成一个或多个大文件。&quot;,536871101]],[&quot;^1A&quot;,[408,&quot;^W&quot;,&quot;^1H&quot;,536871101]],[&quot;^1A&quot;,[408,&quot;^14&quot;,2,536871101]],[&quot;^1A&quot;,[408,&quot;^K&quot;,407,536871101]],[&quot;^1A&quot;,[408,&quot;^X&quot;,3,536871101]],[&quot;^1A&quot;,[408,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,149,&quot;^1L&quot;,1315],536871101]],[&quot;^1A&quot;,[408,&quot;^17&quot;,403,536871101]],[&quot;^1A&quot;,[408,&quot;^13&quot;,407,536871101]],[&quot;^1A&quot;,[408,&quot;^12&quot;,403,536871101]],[&quot;^1A&quot;,[408,&quot;^1M&quot;,2,536871101]],[&quot;^1A&quot;,[408,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Region&quot;]],536871101]],[&quot;^1A&quot;,[408,&quot;^15&quot;,&quot;^1N&quot;,536871101]],[&quot;^1A&quot;,[408,&quot;^1D&quot;,true,536871101]],[&quot;^1A&quot;,[408,&quot;^?&quot;,&quot;~u614452eb-1ced-449e-9b70-2afb9597d630&quot;,536871101]],[&quot;^1A&quot;,[409,&quot;^1E&quot;,&quot;ColumnFamily&quot;,536871101]],[&quot;^1A&quot;,[409,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;HBase中列按照列族分组，每个列族在硬盘上有自己的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;HFile集合&quot;]]]],[&quot;Plain&quot;,&quot;，HFile里的记录以&quot;],[&quot;Code&quot;,&quot;键值对&quot;],[&quot;Plain&quot;,&quot;的形式存储。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627899768483_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627899768483_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;HBase的一个&quot;],[&quot;Code&quot;,&quot;列簇&quot;],[&quot;Plain&quot;,&quot;（Column Family）本质上就是一棵&quot;],[&quot;Code&quot;,&quot;LSM&quot;],[&quot;Plain&quot;,&quot;树（Log-Structured Merge-Tree）。LSM树分为内存部分和磁盘部分。内存部分是一个维护有序数据集合的数据结构。一般来讲，内存数据结构可以选择平衡二叉树、红黑树、&quot;],[&quot;Code&quot;,&quot;跳跃表&quot;],[&quot;Plain&quot;,&quot;（SkipList）等维护&quot;],[&quot;Code&quot;,&quot;有序集&quot;],[&quot;Plain&quot;,&quot;的数据结构，这里由于考虑并发性能，HBase选择了表现更优秀的跳跃表。磁盘部分是由一个个独立的文件组成，每一个文件又是由一个个数据块组成。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;对于数据存储在磁盘上的数据库系统来说，磁盘寻道以及数据读取都是非常耗时的操作（简称IO耗时）。因此，为了避免不必要的IO耗时，可以在磁盘中存储一些&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;额外的二进制数据&quot;]]]],[&quot;Plain&quot;,&quot;，这些数据用来判断对于给定的key是否有可能存储在这个数据块中，这个数据结构称为&quot;],[&quot;Code&quot;,&quot;布隆过滤器&quot;],[&quot;Plain&quot;,&quot;（BloomFilter）。&quot;],[&quot;Break_Line&quot;]]]]],536871101]],[&quot;^1A&quot;,[409,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871101]],[&quot;^1A&quot;,[409,&quot;^[&quot;,&quot;## ColumnFamily\\n\\nHBase中列按照列族分组，每个列族在硬盘上有自己的**HFile集合**，HFile里的记录以`键值对`的形式存储。\\n![image.png](../assets/image_1627899768483_0.png)\\nHBase的一个`列簇`（Column Family）本质上就是一棵`LSM`树（Log-Structured Merge-Tree）。LSM树分为内存部分和磁盘部分。内存部分是一个维护有序数据集合的数据结构。一般来讲，内存数据结构可以选择平衡二叉树、红黑树、`跳跃表`（SkipList）等维护`有序集`的数据结构，这里由于考虑并发性能，HBase选择了表现更优秀的跳跃表。磁盘部分是由一个个独立的文件组成，每一个文件又是由一个个数据块组成。\\n\\n对于数据存储在磁盘上的数据库系统来说，磁盘寻道以及数据读取都是非常耗时的操作（简称IO耗时）。因此，为了避免不必要的IO耗时，可以在磁盘中存储一些**额外的二进制数据**，这些数据用来判断对于给定的key是否有可能存储在这个数据块中，这个数据结构称为`布隆过滤器`（BloomFilter）。&quot;,536871101]],[&quot;^1A&quot;,[409,&quot;^W&quot;,&quot;^1H&quot;,536871101]],[&quot;^1A&quot;,[409,&quot;^14&quot;,2,536871101]],[&quot;^1A&quot;,[409,&quot;^K&quot;,408,536871101]],[&quot;^1A&quot;,[409,&quot;^X&quot;,3,536871101]],[&quot;^1A&quot;,[409,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,1315,&quot;^1L&quot;,2465],536871101]],[&quot;^1A&quot;,[409,&quot;^17&quot;,403,536871101]],[&quot;^1A&quot;,[409,&quot;^13&quot;,407,536871101]],[&quot;^1A&quot;,[409,&quot;^12&quot;,403,536871101]],[&quot;^1A&quot;,[409,&quot;^1M&quot;,2,536871101]],[&quot;^1A&quot;,[409,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;ColumnFamily&quot;]],536871101]],[&quot;^1A&quot;,[409,&quot;^15&quot;,&quot;^1N&quot;,536871101]],[&quot;^1A&quot;,[409,&quot;^1D&quot;,true,536871101]],[&quot;^1A&quot;,[409,&quot;^?&quot;,&quot;~u614452eb-2a2d-4288-832f-6c55fb274338&quot;,536871101]],[&quot;^1A&quot;,[410,&quot;^1E&quot;,&quot;-e8--af--bb--e5--86--99-&quot;,536871101]],[&quot;^1A&quot;,[410,&quot;^S&quot;,[],536871101]],[&quot;^1A&quot;,[410,&quot;^1F&quot;,[&quot;^1G&quot;,[[&quot;^?&quot;,&quot;~u614452eb-7ba1-44cc-8d22-17d8a6fb8f49&quot;],[&quot;^?&quot;,&quot;~u614452eb-dd8d-47d0-8d1b-7f8ec5281a49&quot;]]],536871101]],[&quot;^1A&quot;,[410,&quot;^[&quot;,&quot;## 读写&quot;,536871101]],[&quot;^1A&quot;,[410,&quot;^W&quot;,&quot;^1H&quot;,536871101]],[&quot;^1A&quot;,[410,&quot;^14&quot;,2,536871101]],[&quot;^1A&quot;,[410,&quot;^K&quot;,407,536871101]],[&quot;^1A&quot;,[410,&quot;^X&quot;,2,536871101]],[&quot;^1A&quot;,[410,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2465,&quot;^1L&quot;,2478],536871101]],[&quot;^1A&quot;,[410,&quot;^17&quot;,403,536871101]],[&quot;^1A&quot;,[410,&quot;^13&quot;,404,536871101]],[&quot;^1A&quot;,[410,&quot;^12&quot;,403,536871101]],[&quot;^1A&quot;,[410,&quot;^1M&quot;,2,536871101]],[&quot;^1A&quot;,[410,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;读写&quot;]],536871101]],[&quot;^1A&quot;,[410,&quot;^15&quot;,&quot;^1N&quot;,536871101]],[&quot;^1A&quot;,[410,&quot;^1D&quot;,true,536871101]],[&quot;^1A&quot;,[410,&quot;^?&quot;,&quot;~u614452eb-a8ec-48d6-8bd0-476a6e854136&quot;,536871101]],[&quot;^1A&quot;,[411,&quot;^1E&quot;,&quot;-e8--af--bb--e6--b5--81--e7--a8--8b-&quot;,536871101]],[&quot;^1A&quot;,[411,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;从API的角度看，HBase数据读取可以分为get和scan两类，get请求通常根据给定rowkey查找一行记录，scan请求通常根据给定的startkey和stopkey查找多行满足条件的记录。但从技术实现的角度来看，get请求也是一种scan请求（最简单的scan请求，scan的条数为1）。从这个角度讲，所有读取操作都可以认为是一次scan操作。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;HBase Client端与Server端的scan操作并没有设计为一次RPC请求，这是因为一次大规模的scan操作很有可能就是一次全表扫描，扫描结果非常之大。实际上HBase会根据设置条件将一次大的scan操作拆分为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;多个RPC请求&quot;]]]],[&quot;Plain&quot;,&quot;，每个RPC请求称为一次&quot;],[&quot;Code&quot;,&quot;next请求&quot;],[&quot;Plain&quot;,&quot;，每次只返回规定数量的结果。每执行一次next()操作，客户端先会从本地缓存中检查是否有数据，如果有就直接返回给用户，如果没有就发起一次RPC请求到服务器端获取，获取成功之后缓存到本地。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Client-Server交互逻辑&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;在读流程开始前，HBase服务端需要接收客户端发送的读请求，同时定位读请求的执行节点。Client首先会从ZooKeeper中获取元数据&quot;],[&quot;Code&quot;,&quot;hbase:meta&quot;],[&quot;Plain&quot;,&quot;表所在的RegionServer，然后根据待读写rowkey发送请求到元数据所在RegionServer，获取数据所在的目标RegionServer和Region（并将这部分元数据信息缓存到本地），最后将请求进行封装发送到目标RegionServer进行处理。&quot;],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Server端Scanner体系&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;Scanner的核心体系包括三层Scanner：&quot;],[&quot;Code&quot;,&quot;RegionScanner&quot;],[&quot;Plain&quot;,&quot;，&quot;],[&quot;Code&quot;,&quot;StoreScanner&quot;],[&quot;Plain&quot;,&quot;，&quot;],[&quot;Code&quot;,&quot;MemStoreScanner&quot;],[&quot;Plain&quot;,&quot;和&quot;],[&quot;Code&quot;,&quot;StoreFileScanner&quot;],[&quot;Plain&quot;,&quot;，三者是层级的关系：&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;一个RegionScanner由多个StoreScanner构成。&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;一张表由多少个列簇组成，就有多少个StoreScanner&quot;]]]],[&quot;Plain&quot;,&quot;，每个StoreScanner负责对应Store的数据查找。&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;一个StoreScanner由MemStoreScanner和StoreFileScanner构成。每个Store的数据由内存中的MemStore和磁盘上的StoreFile文件组成。相对应的，StoreScanner会为当前该Store中每个HFile构造一个StoreFileScanner，用于实际执行对应文件的检索。同时，会为对应MemStore构造一个MemStoreScanner，用于执行该Store中MemStore的数据检索。&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627914884314_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627914884314_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Scanner 查找数据&quot;],[&quot;Break_Line&quot;]]]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;过滤淘汰部分不满足查询条件的Scanner。StoreScanner为每一个HFile构造一个对应的StoreFileScanner，需要注意的事实是，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;并不是每一个HFile都包含用户想要查找的KeyValue&quot;]]]],[&quot;Plain&quot;,&quot;，相反，可以通过一些查询条件过滤掉很多肯定不存在待查找KeyValue的HFile。主要过滤策略有：Time Range过滤、Rowkey Range过滤以及布隆过滤器，下图中StoreFile3检查未通过而被过滤淘汰。&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;每个Scanner seek到startKey。这个步骤在每个HFile文件中（或MemStore）中seek扫描起始点startKey。如果HFile中没有找到starkKey，则seek下一个KeyValue地址。HFile中具体的seek过程比较复杂。&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;KeyValueScanner合并构建&quot;],[&quot;Code&quot;,&quot;最小堆&quot;],[&quot;Plain&quot;,&quot;。将该Store中的所有StoreFileScanner和MemStoreScanner合并形成一个heap（最小堆），所谓heap实际上是一个优先级队列。在队列中，按照Scanner排序规则将Scanner seek得到的KeyValue由小到大进行排序。最小堆管理Scanner可以保证取出来的KeyValue都是最小的，这样依次不断地pop就可以由小到大获取目标KeyValue集合，保证有序性。&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627915096610_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627915096610_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;Scanner 过滤数据&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;经过Scanner体系的构建，KeyValue此时已经可以由小到大依次经KeyValueScanner获得，但这些KeyValue是否满足用户设定的TimeRange条件、版本号条件以及Filter条件还需要进一步的检查。检查规则如下：&quot;],[&quot;Break_Line&quot;]]]],&quot;^20&quot;,[],&quot;^22&quot;,[],&quot;^23&quot;,4,&quot;^24&quot;,false]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;1）检查该KeyValue的KeyType是否是Deleted/DeletedColumn/DeleteFamily等，如果是，则直接忽略该列所有其他版本，跳到下列（列簇）。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;2）检查该KeyValue的Timestamp是否在用户设定的Timestamp Range范围，如果不在该范围，忽略。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;3）检查该KeyValue是否满足用户设置的各种filter过滤器，如果不满足，忽略。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;4）检查该KeyValue是否满足用户查询中设定的版本数，比如用户只查询最新版本，则忽略该列的其他版本；反之，如果用户查询所有版本，则还需要查询该cell的其他版本。&quot;],[&quot;Break_Line&quot;]]]]],536871101]],[&quot;^1A&quot;,[411,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871101]],[&quot;^1A&quot;,[411,&quot;^[&quot;,&quot;## 读流程\\n\\n从API的角度看，HBase数据读取可以分为get和scan两类，get请求通常根据给定rowkey查找一行记录，scan请求通常根据给定的startkey和stopkey查找多行满足条件的记录。但从技术实现的角度来看，get请求也是一种scan请求（最简单的scan请求，scan的条数为1）。从这个角度讲，所有读取操作都可以认为是一次scan操作。\\n\\nHBase Client端与Server端的scan操作并没有设计为一次RPC请求，这是因为一次大规模的scan操作很有可能就是一次全表扫描，扫描结果非常之大。实际上HBase会根据设置条件将一次大的scan操作拆分为**多个RPC请求**，每个RPC请求称为一次`next请求`，每次只返回规定数量的结果。每执行一次next()操作，客户端先会从本地缓存中检查是否有数据，如果有就直接返回给用户，如果没有就发起一次RPC请求到服务器端获取，获取成功之后缓存到本地。\\n&gt; Client-Server交互逻辑\\n在读流程开始前，HBase服务端需要接收客户端发送的读请求，同时定位读请求的执行节点。Client首先会从ZooKeeper中获取元数据`hbase:meta`表所在的RegionServer，然后根据待读写rowkey发送请求到元数据所在RegionServer，获取数据所在的目标RegionServer和Region（并将这部分元数据信息缓存到本地），最后将请求进行封装发送到目标RegionServer进行处理。\\n&gt; Server端Scanner体系\\nScanner的核心体系包括三层Scanner：`RegionScanner`，`StoreScanner`，`MemStoreScanner`和`StoreFileScanner`，三者是层级的关系：\\n\\n+ 一个RegionScanner由多个StoreScanner构成。**一张表由多少个列簇组成，就有多少个StoreScanner**，每个StoreScanner负责对应Store的数据查找。\\n\\n+ 一个StoreScanner由MemStoreScanner和StoreFileScanner构成。每个Store的数据由内存中的MemStore和磁盘上的StoreFile文件组成。相对应的，StoreScanner会为当前该Store中每个HFile构造一个StoreFileScanner，用于实际执行对应文件的检索。同时，会为对应MemStore构造一个MemStoreScanner，用于执行该Store中MemStore的数据检索。\\n![image.png](../assets/image_1627914884314_0.png)\\n&gt; Scanner 查找数据\\n+ 过滤淘汰部分不满足查询条件的Scanner。StoreScanner为每一个HFile构造一个对应的StoreFileScanner，需要注意的事实是，**并不是每一个HFile都包含用户想要查找的KeyValue**，相反，可以通过一些查询条件过滤掉很多肯定不存在待查找KeyValue的HFile。主要过滤策略有：Time Range过滤、Rowkey Range过滤以及布隆过滤器，下图中StoreFile3检查未通过而被过滤淘汰。\\n\\n+ 每个Scanner seek到startKey。这个步骤在每个HFile文件中（或MemStore）中seek扫描起始点startKey。如果HFile中没有找到starkKey，则seek下一个KeyValue地址。HFile中具体的seek过程比较复杂。\\n\\n+ KeyValueScanner合并构建`最小堆`。将该Store中的所有StoreFileScanner和MemStoreScanner合并形成一个heap（最小堆），所谓heap实际上是一个优先级队列。在队列中，按照Scanner排序规则将Scanner seek得到的KeyValue由小到大进行排序。最小堆管理Scanner可以保证取出来的KeyValue都是最小的，这样依次不断地pop就可以由小到大获取目标KeyValue集合，保证有序性。\\n![image.png](../assets/image_1627915096610_0.png)\\n\\n&gt; Scanner 过滤数据\\n经过Scanner体系的构建，KeyValue此时已经可以由小到大依次经KeyValueScanner获得，但这些KeyValue是否满足用户设定的TimeRange条件、版本号条件以及Filter条件还需要进一步的检查。检查规则如下：\\n\\n1）检查该KeyValue的KeyType是否是Deleted/DeletedColumn/DeleteFamily等，如果是，则直接忽略该列所有其他版本，跳到下列（列簇）。\\n\\n2）检查该KeyValue的Timestamp是否在用户设定的Timestamp Range范围，如果不在该范围，忽略。\\n\\n3）检查该KeyValue是否满足用户设置的各种filter过滤器，如果不满足，忽略。\\n\\n4）检查该KeyValue是否满足用户查询中设定的版本数，比如用户只查询最新版本，则忽略该列的其他版本；反之，如果用户查询所有版本，则还需要查询该cell的其他版本。&quot;,536871101]],[&quot;^1A&quot;,[411,&quot;^W&quot;,&quot;^1H&quot;,536871101]],[&quot;^1A&quot;,[411,&quot;^14&quot;,2,536871101]],[&quot;^1A&quot;,[411,&quot;^K&quot;,410,536871101]],[&quot;^1A&quot;,[411,&quot;^X&quot;,3,536871101]],[&quot;^1A&quot;,[411,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,2478,&quot;^1L&quot;,6955],536871101]],[&quot;^1A&quot;,[411,&quot;^17&quot;,403,536871101]],[&quot;^1A&quot;,[411,&quot;^13&quot;,410,536871101]],[&quot;^1A&quot;,[411,&quot;^12&quot;,403,536871101]],[&quot;^1A&quot;,[411,&quot;^1M&quot;,2,536871101]],[&quot;^1A&quot;,[411,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;读流程&quot;]],536871101]],[&quot;^1A&quot;,[411,&quot;^15&quot;,&quot;^1N&quot;,536871101]],[&quot;^1A&quot;,[411,&quot;^1D&quot;,true,536871101]],[&quot;^1A&quot;,[411,&quot;^?&quot;,&quot;~u614452eb-dd8d-47d0-8d1b-7f8ec5281a49&quot;,536871101]],[&quot;^1A&quot;,[412,&quot;^1E&quot;,&quot;-e5--86--99--e6--b5--81--e7--a8--8b-&quot;,536871101]],[&quot;^1A&quot;,[412,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;HBase采用LSM树架构，天生适用于&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;写多读少&quot;]]]],[&quot;Plain&quot;,&quot;的应用场景。在真实生产线环境中，也正是因为HBase集群出色的写入能力，才能支持当下很多数据激增的业务。需要说明的是，HBase服务端并没有提供update、delete接口，HBase中对数据的更新、删除操作在服务器端也认为是写入操作，不同的是，更新操作会写入一个最新版本数据，删除操作会写入一条标记为deleted的KV数据。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;从整体架构的视角来看，写入流程可以概括为三个阶段。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627961907608_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627961907608_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;1）客户端处理阶段：客户端将用户的写入请求进行预处理，并根据集群元数据定位写入数据所在的RegionServer，将请求发送给对应的RegionServer。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot; 2）Region写入阶段：RegionServer接收到写入请求之后将数据解析出来，首先写入WAL，再写入对应Region列簇的MemStore。&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;3）MemStore Flush阶段：当Region中MemStore容量超过一定阈值，系统会异步执行flush操作，将内存中的数据写入文件，形成HFile。&quot;]]]]],536871101]],[&quot;^1A&quot;,[412,&quot;^1F&quot;,[&quot;^1G&quot;,[]],536871101]],[&quot;^1A&quot;,[412,&quot;^[&quot;,&quot;## 写流程\\n\\nHBase采用LSM树架构，天生适用于**写多读少**的应用场景。在真实生产线环境中，也正是因为HBase集群出色的写入能力，才能支持当下很多数据激增的业务。需要说明的是，HBase服务端并没有提供update、delete接口，HBase中对数据的更新、删除操作在服务器端也认为是写入操作，不同的是，更新操作会写入一个最新版本数据，删除操作会写入一条标记为deleted的KV数据。\\n\\n从整体架构的视角来看，写入流程可以概括为三个阶段。\\n![image.png](../assets/image_1627961907608_0.png) \\n1）客户端处理阶段：客户端将用户的写入请求进行预处理，并根据集群元数据定位写入数据所在的RegionServer，将请求发送给对应的RegionServer。\\n\\n 2）Region写入阶段：RegionServer接收到写入请求之后将数据解析出来，首先写入WAL，再写入对应Region列簇的MemStore。\\n\\n3）MemStore Flush阶段：当Region中MemStore容量超过一定阈值，系统会异步执行flush操作，将内存中的数据写入文件，形成HFile。&quot;,536871101]],[&quot;^1A&quot;,[412,&quot;^W&quot;,&quot;^1H&quot;,536871101]],[&quot;^1A&quot;,[412,&quot;^14&quot;,2,536871101]],[&quot;^1A&quot;,[412,&quot;^K&quot;,411,536871101]],[&quot;^1A&quot;,[412,&quot;^X&quot;,3,536871101]],[&quot;^1A&quot;,[412,&quot;^U&quot;,[&quot;^ &quot;,&quot;^1I&quot;,[],&quot;^1J&quot;,[],&quot;^1K&quot;,6955,&quot;^1L&quot;,8120],536871101]],[&quot;^1A&quot;,[412,&quot;^17&quot;,403,536871101]],[&quot;^1A&quot;,[412,&quot;^13&quot;,410,536871101]],[&quot;^1A&quot;,[412,&quot;^12&quot;,403,536871101]],[&quot;^1A&quot;,[412,&quot;^1M&quot;,2,536871101]],[&quot;^1A&quot;,[412,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;写流程&quot;]],536871101]],[&quot;^1A&quot;,[412,&quot;^15&quot;,&quot;^1N&quot;,536871101]],[&quot;^1A&quot;,[412,&quot;^1D&quot;,true,536871101]],[&quot;^1A&quot;,[412,&quot;^?&quot;,&quot;~u614452eb-7ba1-44cc-8d22-17d8a6fb8f49&quot;,536871101]],[&quot;^1A&quot;,[414,&quot;^Q&quot;,1631930655591,536871120]],[&quot;^1A&quot;,[414,&quot;^E&quot;,false,536871114]],[&quot;^1A&quot;,[414,&quot;^19&quot;,&quot;惊群效应&quot;,536871114]],[&quot;^1A&quot;,[414,&quot;^1=&quot;,&quot;惊群效应&quot;,536871114]],[&quot;^1A&quot;,[414,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;https://www.zhihu.com/question/22756773&quot;],536871144]],[&quot;^1A&quot;,[414,&quot;^G&quot;,1632620840855,536871524]],[&quot;^1A&quot;,[414,&quot;^?&quot;,&quot;~u61454903-7c12-4197-a591-b23ed363a300&quot;,536871114]],[&quot;^1A&quot;,[417,&quot;^1E&quot;,&quot;&quot;,536871524]],[&quot;^1A&quot;,[417,&quot;^S&quot;,[],536871524]],[&quot;^1A&quot;,[417,&quot;^[&quot;,&quot;&quot;,536871524]],[&quot;^1A&quot;,[417,&quot;^W&quot;,&quot;^1H&quot;,536871145]],[&quot;^1A&quot;,[417,&quot;^E&quot;,false,536871145]],[&quot;^1A&quot;,[417,&quot;^K&quot;,414,536871154]],[&quot;^1A&quot;,[417,&quot;^X&quot;,1,536871524]],[&quot;^1A&quot;,[417,&quot;^17&quot;,414,536871145]],[&quot;^1A&quot;,[417,&quot;^13&quot;,414,536871145]],[&quot;^1A&quot;,[417,&quot;^12&quot;,414,536871524]],[&quot;^1A&quot;,[417,&quot;^D&quot;,[&quot;^ &quot;],536871524]],[&quot;^1A&quot;,[417,&quot;^Z&quot;,[],536871524]],[&quot;^1A&quot;,[417,&quot;^1D&quot;,true,536871145]],[&quot;^1A&quot;,[417,&quot;^?&quot;,&quot;~u61454952-18f0-4904-bbca-c0634bbc639c&quot;,536871145]],[&quot;^1A&quot;,[418,&quot;^1E&quot;,&quot;&quot;,536871160]],[&quot;^1A&quot;,[418,&quot;^S&quot;,[],536879876]],[&quot;^1A&quot;,[418,&quot;^[&quot;,&quot;[[zookeeper]]&quot;,536871165]],[&quot;^1A&quot;,[418,&quot;^W&quot;,&quot;^1H&quot;,536871160]],[&quot;^1A&quot;,[418,&quot;^K&quot;,113,536871529]],[&quot;^1A&quot;,[418,&quot;^X&quot;,1,536879876]],[&quot;^1A&quot;,[418,&quot;^17&quot;,56,536871160]],[&quot;^1A&quot;,[418,&quot;^13&quot;,588,536878539]],[&quot;^1A&quot;,[418,&quot;^12&quot;,56,536879876]],[&quot;^1A&quot;,[418,&quot;^12&quot;,419,536879876]],[&quot;^1A&quot;,[418,&quot;^D&quot;,[&quot;^ &quot;],536879876]],[&quot;^1A&quot;,[418,&quot;^L&quot;,419,536879876]],[&quot;^1A&quot;,[418,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;zookeeper&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[zookeeper]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536879876]],[&quot;^1A&quot;,[418,&quot;^1D&quot;,true,536871160]],[&quot;^1A&quot;,[418,&quot;^?&quot;,&quot;~u61454b76-3606-4785-9b0f-7d44d63f70a9&quot;,536871160]],[&quot;^1A&quot;,[419,&quot;^Q&quot;,1631931266119,536871171]],[&quot;^1A&quot;,[419,&quot;^E&quot;,false,536871165]],[&quot;^1A&quot;,[419,&quot;^19&quot;,&quot;zookeeper&quot;,536871165]],[&quot;^1A&quot;,[419,&quot;^1=&quot;,&quot;zookeeper&quot;,536871165]],[&quot;^1A&quot;,[419,&quot;^G&quot;,1631932424614,536871347]],[&quot;^1A&quot;,[419,&quot;^?&quot;,&quot;~u61454b7d-efb7-4248-93af-b8754027a8d2&quot;,536871165]],[&quot;^1A&quot;,[420,&quot;^1E&quot;,&quot;&quot;,536871343]],[&quot;^1A&quot;,[420,&quot;^S&quot;,[],536871347]],[&quot;^1A&quot;,[420,&quot;^[&quot;,&quot;&quot;,536871347]],[&quot;^1A&quot;,[420,&quot;^W&quot;,&quot;^1H&quot;,536871167]],[&quot;^1A&quot;,[420,&quot;^E&quot;,false,536871167]],[&quot;^1A&quot;,[420,&quot;^K&quot;,419,536871167]],[&quot;^1A&quot;,[420,&quot;^X&quot;,1,536871347]],[&quot;^1A&quot;,[420,&quot;^17&quot;,419,536871167]],[&quot;^1A&quot;,[420,&quot;^13&quot;,419,536871167]],[&quot;^1A&quot;,[420,&quot;^12&quot;,419,536871347]],[&quot;^1A&quot;,[420,&quot;^D&quot;,[&quot;^ &quot;],536871347]],[&quot;^1A&quot;,[420,&quot;^1M&quot;,1,536871171]],[&quot;^1A&quot;,[420,&quot;^Z&quot;,[],536871347]],[&quot;^1A&quot;,[420,&quot;^1D&quot;,true,536871347]],[&quot;^1A&quot;,[420,&quot;^?&quot;,&quot;~u61454b7e-aa58-4485-b426-d8a8dcba0345&quot;,536871167]],[&quot;^1A&quot;,[424,&quot;^1E&quot;,&quot;&quot;,536871232]],[&quot;^1A&quot;,[424,&quot;^S&quot;,[],536871237]],[&quot;^1A&quot;,[424,&quot;^[&quot;,&quot;[[分布式锁]]&quot;,536871237]],[&quot;^1A&quot;,[424,&quot;^W&quot;,&quot;^1H&quot;,536871232]],[&quot;^1A&quot;,[424,&quot;^K&quot;,390,536871232]],[&quot;^1A&quot;,[424,&quot;^X&quot;,1,536871237]],[&quot;^1A&quot;,[424,&quot;^17&quot;,388,536871232]],[&quot;^1A&quot;,[424,&quot;^13&quot;,388,536871232]],[&quot;^1A&quot;,[424,&quot;^12&quot;,388,536871237]],[&quot;^1A&quot;,[424,&quot;^12&quot;,425,536871237]],[&quot;^1A&quot;,[424,&quot;^D&quot;,[&quot;^ &quot;],536871237]],[&quot;^1A&quot;,[424,&quot;^L&quot;,425,536871237]],[&quot;^1A&quot;,[424,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;分布式锁&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[分布式锁]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536871237]],[&quot;^1A&quot;,[424,&quot;^1D&quot;,true,536871232]],[&quot;^1A&quot;,[424,&quot;^?&quot;,&quot;~u61454f24-2655-41b7-a3e4-c5b844fb8279&quot;,536871232]],[&quot;^1A&quot;,[425,&quot;^Q&quot;,1631932206602,536871243]],[&quot;^1A&quot;,[425,&quot;^E&quot;,false,536871237]],[&quot;^1A&quot;,[425,&quot;^19&quot;,&quot;分布式锁&quot;,536871237]],[&quot;^1A&quot;,[425,&quot;^1=&quot;,&quot;分布式锁&quot;,536871237]],[&quot;^1A&quot;,[425,&quot;^G&quot;,1632620872944,536871547]],[&quot;^1A&quot;,[425,&quot;^?&quot;,&quot;~u61454f29-00ea-44d0-ba9b-cec190e6261e&quot;,536871237]],[&quot;^1A&quot;,[429,&quot;^1E&quot;,&quot;-e5--ae--9e--e7--8e--b0-&quot;,536871442]],[&quot;^1A&quot;,[429,&quot;^S&quot;,[],536871446]],[&quot;^1A&quot;,[429,&quot;^[&quot;,&quot;# 实现&quot;,536871442]],[&quot;^1A&quot;,[429,&quot;^W&quot;,&quot;^1H&quot;,536871355]],[&quot;^1A&quot;,[429,&quot;^14&quot;,1,536871446]],[&quot;^1A&quot;,[429,&quot;^E&quot;,false,536871355]],[&quot;^1A&quot;,[429,&quot;^K&quot;,425,536871380]],[&quot;^1A&quot;,[429,&quot;^X&quot;,1,536871446]],[&quot;^1A&quot;,[429,&quot;^17&quot;,425,536871355]],[&quot;^1A&quot;,[429,&quot;^13&quot;,425,536871360]],[&quot;^1A&quot;,[429,&quot;^12&quot;,425,536871446]],[&quot;^1A&quot;,[429,&quot;^D&quot;,[&quot;^ &quot;],536871446]],[&quot;^1A&quot;,[429,&quot;^1M&quot;,1,536871434]],[&quot;^1A&quot;,[429,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;实现&quot;]],536871446]],[&quot;^1A&quot;,[429,&quot;^15&quot;,&quot;^1N&quot;,536871446]],[&quot;^1A&quot;,[429,&quot;^1D&quot;,false,536871434]],[&quot;^1A&quot;,[429,&quot;^?&quot;,&quot;~u61455014-86e5-4838-8d33-7c7b077efa13&quot;,536871355]],[&quot;^1A&quot;,[430,&quot;^1E&quot;,&quot;-e5--88--a9--e7--94--a8-_zookeeper_-e7--9a--84--e5--90--8c--e7--ba--a7--e8--8a--82--e7--82--b9--e7--9a--84--e5--94--af--e4--b8--80--e6--80--a7--e7--89--b9--e6--80--a7--ef--bc--8c--e5--9c--a8--e9--9c--80--e8--a6--81--e8--8e--b7--e5--8f--96--e6--8e--92--e4--bb--96--e9--94--81--e6--97--b6--ef--bc--8c--e6--89--80--e6--9c--89--e7--9a--84--e5--ae--a2--e6--88--b7--e7--ab--af--e8--af--95--e5--9b--be--e9--80--9a--e8--bf--87--e8--b0--83--e7--94--a8-_create()_-e6--8e--a5--e5--8f--a3--ef--bc--8c--e5--9c--a8-_-2f-exclusive_lock_-e8--8a--82--e7--82--b9--e4--b8--8b--e5--88--9b--e5--bb--ba--e4--b8--b4--e6--97--b6--e5--ad--90--e8--8a--82--e7--82--b9-_-2f-exclusive_lock-2f-lock-ef--bc--8c--e6--9c--80--e7--bb--88--e5--8f--aa--e6--9c--89--e4--b8--80--e4--b8--aa--e5--ae--a2--e6--88--b7--e7--ab--af--e8--83--bd--e5--88--9b--e5--bb--ba--e6--88--90--e5--8a--9f--ef--bc--8c--e9--82--a3--e4--b9--88--e6--ad--a4--e5--ae--a2--e6--88--b7--e7--ab--af--e5--b0--b1--e8--8e--b7--e5--be--97--e4--ba--86--e5--88--86--e5--b8--83--e5--bc--8f--e9--94--81--e3--80--82--e5--90--8c--e6--97--b6--ef--bc--8c--e6--89--80--e6--9c--89--e6--b2--a1--e6--9c--89--e8--8e--b7--e5--8f--96--e5--88--b0--e9--94--81--e7--9a--84--e5--ae--a2--e6--88--b7--e7--ab--af--e5--8f--af--e4--bb--a5--e5--9c--a8-_-2f-exclusive_lock_-e8--8a--82--e7--82--b9--e4--b8--8a--e6--b3--a8--e5--86--8c--e4--b8--80--e4--b8--aa--e5--ad--90--e8--8a--82--e7--82--b9--e5--8f--98--e6--9b--b4--e7--9a--84-_watcher_-e7--9b--91--e5--90--ac--e4--ba--8b--e4--bb--b6--ef--bc--8c--e4--bb--a5--e4--be--bf--e9--87--8d--e6--96--b0--e4--ba--89--e5--8f--96--e8--8e--b7--e5--be--97--e9--94--81--e3--80--82-&quot;,536871376]],[&quot;^1A&quot;,[430,&quot;^S&quot;,[],536871537]],[&quot;^1A&quot;,[430,&quot;^[&quot;,&quot;利用 zookeeper 的同级节点的唯一性特性，在需要获取**排他锁**时，所有的客户端试图通过调用 create() 接口，在 /exclusive_lock 节点下创建临时子节点 /exclusive_lock/lock，最终只有一个客户端能创建成功，那么此客户端就获得了分布式锁。同时，所有没有获取到锁的客户端可以在 /exclusive_lock 节点上注册一个子节点变更的 watcher 监听事件，以便重新争取获得锁。&quot;,536871376]],[&quot;^1A&quot;,[430,&quot;^W&quot;,&quot;^1H&quot;,536871369]],[&quot;^1A&quot;,[430,&quot;^E&quot;,false,536871369]],[&quot;^1A&quot;,[430,&quot;^K&quot;,435,536871447]],[&quot;^1A&quot;,[430,&quot;^X&quot;,1,536871537]],[&quot;^1A&quot;,[430,&quot;^17&quot;,425,536871369]],[&quot;^1A&quot;,[430,&quot;^13&quot;,435,536871453]],[&quot;^1A&quot;,[430,&quot;^12&quot;,425,536871537]],[&quot;^1A&quot;,[430,&quot;^D&quot;,[&quot;^ &quot;],536871537]],[&quot;^1A&quot;,[430,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;利用 zookeeper 的同级节点的唯一性特性，在需要获取&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;排他锁&quot;]]]],[&quot;Plain&quot;,&quot;时，所有的客户端试图通过调用 create() 接口，在 /exclusive_lock 节点下创建临时子节点 /exclusive_lock/lock，最终只有一个客户端能创建成功，那么此客户端就获得了分布式锁。同时，所有没有获取到锁的客户端可以在 /exclusive_lock 节点上注册一个子节点变更的 watcher 监听事件，以便重新争取获得锁。&quot;]],536871537]],[&quot;^1A&quot;,[430,&quot;^1D&quot;,true,536871369]],[&quot;^1A&quot;,[430,&quot;^?&quot;,&quot;~u6145501f-8d05-456d-a3e7-4a5750f36813&quot;,536871369]],[&quot;^1A&quot;,[432,&quot;^1E&quot;,&quot;-e6--84--9f--e6--83--b3-&quot;,536871393]],[&quot;^1A&quot;,[432,&quot;^S&quot;,[],536871426]],[&quot;^1A&quot;,[432,&quot;^[&quot;,&quot;# 感想&quot;,536871393]],[&quot;^1A&quot;,[432,&quot;^W&quot;,&quot;^1H&quot;,536871393]],[&quot;^1A&quot;,[432,&quot;^14&quot;,1,536871426]],[&quot;^1A&quot;,[432,&quot;^E&quot;,false,536871393]],[&quot;^1A&quot;,[432,&quot;^K&quot;,429,536871426]],[&quot;^1A&quot;,[432,&quot;^X&quot;,1,536871426]],[&quot;^1A&quot;,[432,&quot;^17&quot;,425,536871393]],[&quot;^1A&quot;,[432,&quot;^13&quot;,425,536871393]],[&quot;^1A&quot;,[432,&quot;^12&quot;,425,536871426]],[&quot;^1A&quot;,[432,&quot;^D&quot;,[&quot;^ &quot;],536871426]],[&quot;^1A&quot;,[432,&quot;^1M&quot;,1,536871393]],[&quot;^1A&quot;,[432,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;感想&quot;]],536871426]],[&quot;^1A&quot;,[432,&quot;^15&quot;,&quot;^1N&quot;,536871426]],[&quot;^1A&quot;,[432,&quot;^1D&quot;,false,536871394]],[&quot;^1A&quot;,[432,&quot;^?&quot;,&quot;~uc9419f7e-261b-4c75-85d1-271fca1a3413&quot;,536871393]],[&quot;^1A&quot;,[433,&quot;^1E&quot;,&quot;-e5--bd--93--e6--9e--b6--e6--9e--84--e6--97--a0--e6--b3--95--e5--90--8c--e6--97--b6--e6--bb--a1--e8--b6--b3--e9--ab--98--e6--80--a7--e8--83--bd--e4--b8--8e--e5--bc--ba--e4--b8--80--e8--87--b4--e6--80--a7--ef--bc--8c--e9--80--89--e6--8b--a9--e5--88--86--e5--88--ab--e6--bb--a1--e8--b6--b3--e5--85--b6--e4--b8--ad--e4--b8--80--e7--a7--8d--ef--bc--8c--e8--ae--a9--e5--ae--a2--e6--88--b7--e8--87--aa--e5--b7--b1--e9--80--89--e6--8b--a9--ef--bc--8c--e7--be--8e--e7--a7--b0--e5--a4--9a--e5--85--83--e5--8c--96-&quot;,536871503]],[&quot;^1A&quot;,[433,&quot;^S&quot;,[],536871503]],[&quot;^1A&quot;,[433,&quot;^[&quot;,&quot;当架构无法同时满足高性能与强一致性，选择分别满足其中一种，让客户自己选择，美称多元化&quot;,536871503]],[&quot;^1A&quot;,[433,&quot;^W&quot;,&quot;^1H&quot;,536871393]],[&quot;^1A&quot;,[433,&quot;^E&quot;,false,536871393]],[&quot;^1A&quot;,[433,&quot;^K&quot;,432,536871393]],[&quot;^1A&quot;,[433,&quot;^X&quot;,1,536871503]],[&quot;^1A&quot;,[433,&quot;^17&quot;,425,536871393]],[&quot;^1A&quot;,[433,&quot;^13&quot;,432,536871393]],[&quot;^1A&quot;,[433,&quot;^12&quot;,425,536871503]],[&quot;^1A&quot;,[433,&quot;^D&quot;,[&quot;^ &quot;],536871503]],[&quot;^1A&quot;,[433,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;当架构无法同时满足高性能与强一致性，选择分别满足其中一种，让客户自己选择，美称多元化&quot;]],536871503]],[&quot;^1A&quot;,[433,&quot;^1D&quot;,true,536871393]],[&quot;^1A&quot;,[433,&quot;^?&quot;,&quot;~ufa8307fa-cdf1-4335-9be0-7c3d0cf36dc0&quot;,536871393]],[&quot;^1A&quot;,[435,&quot;^1E&quot;,&quot;zookeeper&quot;,536871451]],[&quot;^1A&quot;,[435,&quot;^S&quot;,[],536871451]],[&quot;^1A&quot;,[435,&quot;^[&quot;,&quot;zookeeper&quot;,536871451]],[&quot;^1A&quot;,[435,&quot;^W&quot;,&quot;^1H&quot;,536871447]],[&quot;^1A&quot;,[435,&quot;^E&quot;,false,536871447]],[&quot;^1A&quot;,[435,&quot;^K&quot;,429,536871447]],[&quot;^1A&quot;,[435,&quot;^X&quot;,1,536871451]],[&quot;^1A&quot;,[435,&quot;^17&quot;,425,536871447]],[&quot;^1A&quot;,[435,&quot;^13&quot;,429,536871447]],[&quot;^1A&quot;,[435,&quot;^12&quot;,425,536871451]],[&quot;^1A&quot;,[435,&quot;^D&quot;,[&quot;^ &quot;],536871451]],[&quot;^1A&quot;,[435,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;zookeeper&quot;]],536871451]],[&quot;^1A&quot;,[435,&quot;^1D&quot;,true,536871447]],[&quot;^1A&quot;,[435,&quot;^?&quot;,&quot;~u61455067-a3a7-448e-b3ac-19848826d59d&quot;,536871447]],[&quot;^1A&quot;,[436,&quot;^1E&quot;,&quot;-22--e6--8e--a2--e7--b4--a2--e4--b8--8e--e5--ae--9e--e8--b7--b5--22--e7--94--a8--e4--bd--9c--e9--a1--b9--e7--9b--ae--e8--83--8c--e6--99--af--e6--97--b6--e9--9d--9e--e5--b8--b8--e6--9c--89--e8--af--b4--e6--9c--8d--e5--8a--9b-&quot;,536871495]],[&quot;^1A&quot;,[436,&quot;^S&quot;,[],536871495]],[&quot;^1A&quot;,[436,&quot;^[&quot;,&quot;\\&quot;探索与实践\\&quot;用作项目背景时非常有说服力&quot;,536871495]],[&quot;^1A&quot;,[436,&quot;^W&quot;,&quot;^1H&quot;,536871458]],[&quot;^1A&quot;,[436,&quot;^E&quot;,false,536871458]],[&quot;^1A&quot;,[436,&quot;^K&quot;,433,536871458]],[&quot;^1A&quot;,[436,&quot;^X&quot;,1,536871495]],[&quot;^1A&quot;,[436,&quot;^17&quot;,425,536871458]],[&quot;^1A&quot;,[436,&quot;^13&quot;,432,536871458]],[&quot;^1A&quot;,[436,&quot;^12&quot;,425,536871495]],[&quot;^1A&quot;,[436,&quot;^D&quot;,[&quot;^ &quot;],536871495]],[&quot;^1A&quot;,[436,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;\\&quot;探索与实践\\&quot;用作项目背景时非常有说服力&quot;]],536871495]],[&quot;^1A&quot;,[436,&quot;^1D&quot;,true,536871458]],[&quot;^1A&quot;,[436,&quot;^?&quot;,&quot;~u6145510a-dae1-466d-bf99-e3365d6a5d0c&quot;,536871458]],[&quot;^1A&quot;,[437,&quot;^1E&quot;,&quot;-e6--83--8a--e7--be--a4--e6--95--88--e5--ba--94--ef--bc--88-thundering_herd-ef--bc--89--e6--98--af--e6--8c--87--e5--a4--9a--e8--bf--9b--e7--a8--8b--ef--bc--88--e5--a4--9a--e7--ba--bf--e7--a8--8b--ef--bc--89--e5--9c--a8--e5--90--8c--e6--97--b6--e9--98--bb--e5--a1--9e--e7--ad--89--e5--be--85--e5--90--8c--e4--b8--80--e4--b8--aa--e4--ba--8b--e4--bb--b6--e7--9a--84--e6--97--b6--e5--80--99--ef--bc--88--e4--bc--91--e7--9c--a0--e7--8a--b6--e6--80--81--ef--bc--89--ef--bc--8c--e5--a6--82--e6--9e--9c--e7--ad--89--e5--be--85--e7--9a--84--e8--bf--99--e4--b8--aa--e4--ba--8b--e4--bb--b6--e5--8f--91--e7--94--9f--ef--bc--8c--e9--82--a3--e4--b9--88--e4--bb--96--e5--b0--b1--e4--bc--9a--e5--94--a4--e9--86--92--e7--ad--89--e5--be--85--e7--9a--84--e6--89--80--e6--9c--89--e8--bf--9b--e7--a8--8b--ef--bc--88--e6--88--96--e8--80--85--e7--ba--bf--e7--a8--8b--ef--bc--89--ef--bc--8c--e4--bd--86--e6--98--af--e6--9c--80--e7--bb--88--e5--8d--b4--e5--8f--aa--e8--83--bd--e6--9c--89--e4--b8--80--e4--b8--aa--e8--bf--9b--e7--a8--8b--ef--bc--88--e7--ba--bf--e7--a8--8b--ef--bc--89--e8--8e--b7--e5--be--97--e8--bf--99--e4--b8--aa--e6--97--b6--e9--97--b4--e7--9a--84--e2--80--9c--e6--8e--a7--e5--88--b6--e6--9d--83--e2--80--9d--ef--bc--8c--e5--af--b9--e8--af--a5--e4--ba--8b--e4--bb--b6--e8--bf--9b--e8--a1--8c--e5--a4--84--e7--90--86--ef--bc--8c--e8--80--8c--e5--85--b6--e4--bb--96--e8--bf--9b--e7--a8--8b--ef--bc--88--e7--ba--bf--e7--a8--8b--ef--bc--89--e8--8e--b7--e5--8f--96--e2--80--9c--e6--8e--a7--e5--88--b6--e6--9d--83--e2--80--9d--e5--a4--b1--e8--b4--a5--ef--bc--8c--e5--8f--aa--e8--83--bd--e9--87--8d--e6--96--b0--e8--bf--9b--e5--85--a5--e4--bc--91--e7--9c--a0--e7--8a--b6--e6--80--81--ef--bc--8c--e8--bf--99--e7--a7--8d--e7--8e--b0--e8--b1--a1--e5--92--8c--e6--80--a7--e8--83--bd--e6--b5--aa--e8--b4--b9--e5--b0--b1--e5--8f--ab--e5--81--9a--e6--83--8a--e7--be--a4--e6--95--88--e5--ba--94--e3--80--82-&quot;,536871543]],[&quot;^1A&quot;,[437,&quot;^S&quot;,[],536871547]],[&quot;^1A&quot;,[437,&quot;^[&quot;,&quot;**惊群效应**（thundering herd）是指多进程（多线程）在同时阻塞等待同一个事件的时候（休眠状态），如果等待的这个事件发生，那么他就会唤醒等待的所有进程（或者线程），但是最终却只能有一个进程（线程）获得这个时间的“控制权”，对该事件进行处理，而其他进程（线程）获取“控制权”失败，只能重新进入休眠状态，这种现象和性能浪费就叫做惊群效应。&quot;,536871547]],[&quot;^1A&quot;,[437,&quot;^W&quot;,&quot;^1H&quot;,536871538]],[&quot;^1A&quot;,[437,&quot;^E&quot;,false,536871538]],[&quot;^1A&quot;,[437,&quot;^K&quot;,430,536871538]],[&quot;^1A&quot;,[437,&quot;^X&quot;,1,536871547]],[&quot;^1A&quot;,[437,&quot;^17&quot;,425,536871538]],[&quot;^1A&quot;,[437,&quot;^13&quot;,435,536871538]],[&quot;^1A&quot;,[437,&quot;^12&quot;,425,536871547]],[&quot;^1A&quot;,[437,&quot;^D&quot;,[&quot;^ &quot;],536871547]],[&quot;^1A&quot;,[437,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;惊群效应&quot;]]]],[&quot;Plain&quot;,&quot;（thundering herd）是指多进程（多线程）在同时阻塞等待同一个事件的时候（休眠状态），如果等待的这个事件发生，那么他就会唤醒等待的所有进程（或者线程），但是最终却只能有一个进程（线程）获得这个时间的“控制权”，对该事件进行处理，而其他进程（线程）获取“控制权”失败，只能重新进入休眠状态，这种现象和性能浪费就叫做惊群效应。&quot;]],536871547]],[&quot;^1A&quot;,[437,&quot;^1D&quot;,true,536871538]],[&quot;^1A&quot;,[437,&quot;^?&quot;,&quot;~u614fd13c-0d02-4695-a7af-c106dba57712&quot;,536871538]],[&quot;^1A&quot;,[438,&quot;^E&quot;,false,536871579]],[&quot;^1A&quot;,[438,&quot;^19&quot;,&quot;rocketmq自动创建topic会出现负载失衡&quot;,536871579]],[&quot;^1A&quot;,[438,&quot;^1=&quot;,&quot;RocketMq自动创建topic会出现负载失衡&quot;,536871579]],[&quot;^1A&quot;,[438,&quot;^?&quot;,&quot;~u61501372-662d-4176-9621-f1e7c7c055a0&quot;,536871579]],[&quot;^1A&quot;,[439,&quot;^E&quot;,false,536871583]],[&quot;^1A&quot;,[439,&quot;^19&quot;,&quot;rocketmqtopic会出现负载失衡&quot;,536871583]],[&quot;^1A&quot;,[439,&quot;^1=&quot;,&quot;RocketMqtopic会出现负载失衡&quot;,536871583]],[&quot;^1A&quot;,[439,&quot;^?&quot;,&quot;~u61501376-7d42-4cbb-a030-9ab24974b595&quot;,536871583]],[&quot;^1A&quot;,[440,&quot;^E&quot;,false,536871585]],[&quot;^1A&quot;,[440,&quot;^19&quot;,&quot;rocketmq topic会出现负载失衡&quot;,536871585]],[&quot;^1A&quot;,[440,&quot;^1=&quot;,&quot;RocketMq topic会出现负载失衡&quot;,536871585]],[&quot;^1A&quot;,[440,&quot;^?&quot;,&quot;~u61501377-d76a-42ef-bfde-45ca44fa8324&quot;,536871585]],[&quot;^1A&quot;,[441,&quot;^E&quot;,false,536871589]],[&quot;^1A&quot;,[441,&quot;^19&quot;,&quot;rocketmq topic出现负载失衡&quot;,536871589]],[&quot;^1A&quot;,[441,&quot;^1=&quot;,&quot;RocketMq topic出现负载失衡&quot;,536871589]],[&quot;^1A&quot;,[441,&quot;^?&quot;,&quot;~u61501378-ca09-4563-a8d1-f88a59b4e98f&quot;,536871589]],[&quot;^1A&quot;,[442,&quot;^E&quot;,false,536871593]],[&quot;^1A&quot;,[442,&quot;^19&quot;,&quot;rocketmq topic负载失衡&quot;,536871593]],[&quot;^1A&quot;,[442,&quot;^1=&quot;,&quot;RocketMq topic负载失衡&quot;,536871593]],[&quot;^1A&quot;,[442,&quot;^?&quot;,&quot;~u61501379-363c-4273-881d-bf6d8e805f08&quot;,536871593]],[&quot;^1A&quot;,[443,&quot;^E&quot;,false,536871597]],[&quot;^1A&quot;,[443,&quot;^19&quot;,&quot;rocketmq 负载失衡&quot;,536871597]],[&quot;^1A&quot;,[443,&quot;^1=&quot;,&quot;RocketMq 负载失衡&quot;,536871597]],[&quot;^1A&quot;,[443,&quot;^?&quot;,&quot;~u6150137b-fb3d-40ba-97d3-f97e38b06a7d&quot;,536871597]],[&quot;^1A&quot;,[444,&quot;^Q&quot;,1632637823673,536871605]],[&quot;^1A&quot;,[444,&quot;^E&quot;,false,536871599]],[&quot;^1A&quot;,[444,&quot;^19&quot;,&quot;rocketmq负载失衡&quot;,536871599]],[&quot;^1A&quot;,[444,&quot;^1=&quot;,&quot;RocketMq负载失衡&quot;,536871599]],[&quot;^1A&quot;,[444,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;[腾讯云](https://cloud.tencent.com/developer/article/1449855)&quot;],536871617]],[&quot;^1A&quot;,[444,&quot;^G&quot;,1632637829151,536871617]],[&quot;^1A&quot;,[444,&quot;^?&quot;,&quot;~u6150137c-da79-476d-a119-3f020c7ee44f&quot;,536871599]],[&quot;^1A&quot;,[445,&quot;^1E&quot;,&quot;&quot;,536871607]],[&quot;^1A&quot;,[445,&quot;^S&quot;,[&quot;^1@&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;RocketMQ 的 broker 与 broker 之间，通过nameserver进行路由同步，broker&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;每30s与nameserver同步路由信息。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;生产者发消息时，会先从本地和nameserver拉取路由信息，如果topic路由不存在，会拉取&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;名为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;TBW102&quot;]]]],[&quot;Plain&quot;,&quot;的默认topic的路由信息，并随机选择一个broker，将消息体、目标topic、&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;目标topic路由配置一同发往该broker。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;broker在启动时，会根据 &quot;],[&quot;Code&quot;,&quot;autoCreateTopicEnable&quot;],[&quot;Plain&quot;,&quot; 在内存中初始化&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;TBW102&quot;]]]],[&quot;Plain&quot;,&quot;的路由信息，&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;当收到以上消息时，会自动创建目标topic及路由，并持久化到本地。此时topic的自动创建流程已完成，在最多30s后，会与nameserver进行路由同步。此30s内，如果生产者没有发消息，或者另外的broker路由一直未被选中，则集群内新topic的路由信息始终只包含一台broker。当30s结束，此broker与nameserver完成路由同步，新topic的路由信息就无法被再次更新，出现负载失衡的情况。&quot;]]]]],536871617]],[&quot;^1A&quot;,[445,&quot;^[&quot;,&quot;reference:: [腾讯云](https://cloud.tencent.com/developer/article/1449855)\\nRocketMQ 的 broker 与 broker 之间，通过nameserver进行路由同步，broker\\n每30s与nameserver同步路由信息。\\n\\n生产者发消息时，会先从本地和nameserver拉取路由信息，如果topic路由不存在，会拉取\\n名为**TBW102**的默认topic的路由信息，并随机选择一个broker，将消息体、目标topic、\\n目标topic路由配置一同发往该broker。\\n\\nbroker在启动时，会根据 `autoCreateTopicEnable` 在内存中初始化**TBW102**的路由信息，\\n当收到以上消息时，会自动创建目标topic及路由，并持久化到本地。此时topic的自动创建流程已完成，在最多30s后，会与nameserver进行路由同步。此30s内，如果生产者没有发消息，或者另外的broker路由一直未被选中，则集群内新topic的路由信息始终只包含一台broker。当30s结束，此broker与nameserver完成路由同步，新topic的路由信息就无法被再次更新，出现负载失衡的情况。&quot;,536871617]],[&quot;^1A&quot;,[445,&quot;^W&quot;,&quot;^1H&quot;,536871607]],[&quot;^1A&quot;,[445,&quot;^E&quot;,false,536871607]],[&quot;^1A&quot;,[445,&quot;^K&quot;,444,536871607]],[&quot;^1A&quot;,[445,&quot;^X&quot;,1,536871617]],[&quot;^1A&quot;,[445,&quot;^17&quot;,444,536871607]],[&quot;^1A&quot;,[445,&quot;^13&quot;,444,536871607]],[&quot;^1A&quot;,[445,&quot;^12&quot;,444,536871617]],[&quot;^1A&quot;,[445,&quot;^=&quot;,true,536871617]],[&quot;^1A&quot;,[445,&quot;^D&quot;,[&quot;^ &quot;,&quot;^26&quot;,&quot;[腾讯云](https://cloud.tencent.com/developer/article/1449855)&quot;],536871617]],[&quot;^1A&quot;,[445,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^26&quot;]],536871617]],[&quot;^1A&quot;,[445,&quot;^1D&quot;,true,536871607]],[&quot;^1A&quot;,[445,&quot;^?&quot;,&quot;~u6150137e-c081-44b8-ad10-c3b7e155740e&quot;,536871607]],[&quot;^1A&quot;,[446,&quot;^1E&quot;,&quot;reference-3a--3a-_-e8--85--be--e8--ae--af--e4--ba--91-&quot;,536871606]],[&quot;^1A&quot;,[446,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;RocketMQ 的 broker 与 broker 之间，通过nameserver进行路由同步，broker&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;每30s与nameserver同步路由信息。&quot;],[&quot;Break_Line&quot;]]]]],536871607]],[&quot;^1A&quot;,[446,&quot;^[&quot;,&quot;reference:: [腾讯云](https://cloud.tencent.com/developer/article/1449855)\\nRocketMQ 的 broker 与 broker 之间，通过nameserver进行路由同步，broker\\n每30s与nameserver同步路由信息。&quot;,536871606]],[&quot;^1A&quot;,[446,&quot;^W&quot;,&quot;^1H&quot;,536871606]],[&quot;^1A&quot;,[446,&quot;^K&quot;,445,536871607]],[&quot;^1A&quot;,[446,&quot;^X&quot;,1,536871607]],[&quot;^1A&quot;,[446,&quot;^17&quot;,444,536871606]],[&quot;^1A&quot;,[446,&quot;^13&quot;,444,536871606]],[&quot;^1A&quot;,[446,&quot;^12&quot;,444,536871607]],[&quot;^1A&quot;,[446,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;reference:: &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;cloud.tencent.com/developer/article/1449855&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;腾讯云&quot;]],&quot;^1W&quot;,&quot;[腾讯云](https://cloud.tencent.com/developer/article/1449855)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536871607]],[&quot;^1A&quot;,[446,&quot;^1D&quot;,true,536871606]],[&quot;^1A&quot;,[446,&quot;^?&quot;,&quot;~u98cf392f-95c0-4c51-a441-26f59bb0faba&quot;,536871606]],[&quot;^1A&quot;,[447,&quot;^1E&quot;,&quot;-e7--94--9f--e4--ba--a7--e8--80--85--e5--8f--91--e6--b6--88--e6--81--af--e6--97--b6--ef--bc--8c--e4--bc--9a--e5--85--88--e4--bb--8e--e6--9c--ac--e5--9c--b0--e5--92--8c-nameserver-e6--8b--89--e5--8f--96--e8--b7--af--e7--94--b1--e4--bf--a1--e6--81--af--ef--bc--8c--e5--a6--82--e6--9e--9c-topic-e8--b7--af--e7--94--b1--e4--b8--8d--e5--ad--98--e5--9c--a8--ef--bc--8c--e4--bc--9a--e6--8b--89--e5--8f--96-&quot;,536871606]],[&quot;^1A&quot;,[447,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;名为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;TBW102&quot;]]]],[&quot;Plain&quot;,&quot;的默认topic的路由信息，并随机选择一个broker，将消息体、目标topic、&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;目标topic路由配置一同发往该broker。&quot;],[&quot;Break_Line&quot;]]]]],536871606]],[&quot;^1A&quot;,[447,&quot;^[&quot;,&quot;生产者发消息时，会先从本地和nameserver拉取路由信息，如果topic路由不存在，会拉取\\n名为**TBW102**的默认topic的路由信息，并随机选择一个broker，将消息体、目标topic、\\n目标topic路由配置一同发往该broker。&quot;,536871606]],[&quot;^1A&quot;,[447,&quot;^W&quot;,&quot;^1H&quot;,536871606]],[&quot;^1A&quot;,[447,&quot;^K&quot;,446,536871606]],[&quot;^1A&quot;,[447,&quot;^X&quot;,1,536871606]],[&quot;^1A&quot;,[447,&quot;^17&quot;,444,536871606]],[&quot;^1A&quot;,[447,&quot;^13&quot;,444,536871606]],[&quot;^1A&quot;,[447,&quot;^12&quot;,444,536871606]],[&quot;^1A&quot;,[447,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;生产者发消息时，会先从本地和nameserver拉取路由信息，如果topic路由不存在，会拉取&quot;]],536871606]],[&quot;^1A&quot;,[447,&quot;^1D&quot;,true,536871606]],[&quot;^1A&quot;,[447,&quot;^?&quot;,&quot;~ucd70fee1-eda6-49c5-97e3-48942d5a2079&quot;,536871606]],[&quot;^1A&quot;,[448,&quot;^1E&quot;,&quot;broker-e5--9c--a8--e5--90--af--e5--8a--a8--e6--97--b6--ef--bc--8c--e4--bc--9a--e6--a0--b9--e6--8d--ae-__-e5--9c--a8--e5--86--85--e5--ad--98--e4--b8--ad--e5--88--9d--e5--a7--8b--e5--8c--96-TBW102-e7--9a--84--e8--b7--af--e7--94--b1--e4--bf--a1--e6--81--af--ef--bc--8c-&quot;,536871606]],[&quot;^1A&quot;,[448,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;当收到以上消息时，会自动创建目标topic及路由，并持久化到本地。此时topic的自动创建流程已完成，在最多30s后，会与nameserver进行路由同步。此30s内，如果生产者没有发消息，或者另外的broker路由一直未被选中，则集群内新topic的路由信息始终只包含一台broker。当30s结束，此broker与nameserver完成路由同步，新topic的路由信息就无法被再次更新，出现负载失衡的情况。&quot;]]]]],536871606]],[&quot;^1A&quot;,[448,&quot;^[&quot;,&quot;broker在启动时，会根据 `autoCreateTopicEnable` 在内存中初始化**TBW102**的路由信息，\\n当收到以上消息时，会自动创建目标topic及路由，并持久化到本地。此时topic的自动创建流程已完成，在最多30s后，会与nameserver进行路由同步。此30s内，如果生产者没有发消息，或者另外的broker路由一直未被选中，则集群内新topic的路由信息始终只包含一台broker。当30s结束，此broker与nameserver完成路由同步，新topic的路由信息就无法被再次更新，出现负载失衡的情况。&quot;,536871606]],[&quot;^1A&quot;,[448,&quot;^W&quot;,&quot;^1H&quot;,536871606]],[&quot;^1A&quot;,[448,&quot;^K&quot;,447,536871606]],[&quot;^1A&quot;,[448,&quot;^X&quot;,1,536871606]],[&quot;^1A&quot;,[448,&quot;^17&quot;,444,536871606]],[&quot;^1A&quot;,[448,&quot;^13&quot;,444,536871606]],[&quot;^1A&quot;,[448,&quot;^12&quot;,444,536871606]],[&quot;^1A&quot;,[448,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;broker在启动时，会根据 &quot;],[&quot;Code&quot;,&quot;autoCreateTopicEnable&quot;],[&quot;Plain&quot;,&quot; 在内存中初始化&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;TBW102&quot;]]]],[&quot;Plain&quot;,&quot;的路由信息，&quot;]],536871606]],[&quot;^1A&quot;,[448,&quot;^1D&quot;,true,536871606]],[&quot;^1A&quot;,[448,&quot;^?&quot;,&quot;~uaf0a8dcd-f53c-4218-9036-1d26883167a3&quot;,536871606]],[&quot;^1A&quot;,[450,&quot;^1E&quot;,&quot;&quot;,536871623]],[&quot;^1A&quot;,[450,&quot;^S&quot;,[],536871628]],[&quot;^1A&quot;,[450,&quot;^[&quot;,&quot;[[sql全表扫描]]&quot;,536871628]],[&quot;^1A&quot;,[450,&quot;^W&quot;,&quot;^1H&quot;,536871623]],[&quot;^1A&quot;,[450,&quot;^K&quot;,122,536871623]],[&quot;^1A&quot;,[450,&quot;^X&quot;,1,536871628]],[&quot;^1A&quot;,[450,&quot;^17&quot;,58,536871623]],[&quot;^1A&quot;,[450,&quot;^13&quot;,58,536871623]],[&quot;^1A&quot;,[450,&quot;^12&quot;,58,536871628]],[&quot;^1A&quot;,[450,&quot;^12&quot;,451,536871628]],[&quot;^1A&quot;,[450,&quot;^D&quot;,[&quot;^ &quot;],536871628]],[&quot;^1A&quot;,[450,&quot;^L&quot;,451,536871628]],[&quot;^1A&quot;,[450,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;sql全表扫描&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[sql全表扫描]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536871628]],[&quot;^1A&quot;,[450,&quot;^1D&quot;,true,536871623]],[&quot;^1A&quot;,[450,&quot;^?&quot;,&quot;~u615013c0-b3b4-48a8-8fe0-919034dc85b3&quot;,536871623]],[&quot;^1A&quot;,[451,&quot;^Q&quot;,1632638382402,536871634]],[&quot;^1A&quot;,[451,&quot;^E&quot;,false,536871628]],[&quot;^1A&quot;,[451,&quot;^19&quot;,&quot;sql全表扫描&quot;,536871628]],[&quot;^1A&quot;,[451,&quot;^1=&quot;,&quot;sql全表扫描&quot;,536871628]],[&quot;^1A&quot;,[451,&quot;^G&quot;,1632641157662,536873208]],[&quot;^1A&quot;,[451,&quot;^?&quot;,&quot;~u615013cc-7f12-45fa-9e46-a5ba9b187d92&quot;,536871628]],[&quot;^1A&quot;,[452,&quot;^1E&quot;,&quot;-e9--9c--80--e6--b1--82--e6--98--af--e2--80--9c--e6--9b--b4--e6--96--b0--e4--b8--8a--e4--b8--aa--e6--9c--88--e6--9f--90--e4--b8--aa--e7--94--a8--e6--88--b7--e7--9a--84--e4--bd--99--e9--a2--9d--e2--80--9d--ef--bc--8c--e5--ae--9e--e9--99--85--e4--b8--9a--e5--8a--a1--e6--98--af--e8--a6--81--e5--9c--a8--e6--9c--88--e5--88--9d--ef--bc--8c--e5--af--b9--e4--b8--8a--e4--b8--aa--e6--9c--88--e5--8f--82--e4--b8--8e--e6--b4--bb--e5--8a--a8--e7--9a--84--e7--94--a8--e6--88--b7--e8--bf--9b--e8--a1--8c--e8--ae--b0--e8--b4--a6--ef--bc--8c--e4--bb--a5--e5--8f--91--e6--94--be--e7--8e--b0--e9--87--91--e5--a5--96--e5--8a--b1--e3--80--82--e8--a1--a8--e7--bb--93--e6--9e--84--e5--a6--82--e4--b8--8b--ef--bc--9a-&quot;,536873010]],[&quot;^1A&quot;,[452,&quot;^S&quot;,[[&quot;Table&quot;,[&quot;^ &quot;,&quot;^27&quot;,[[[&quot;Plain&quot;,&quot;字段名&quot;]],[[&quot;Plain&quot;,&quot;类型&quot;]],[[&quot;Plain&quot;,&quot;备注&quot;]]],&quot;^28&quot;,[[[[[&quot;Plain&quot;,&quot;time&quot;]],[[&quot;Plain&quot;,&quot;datetime&quot;]],[[&quot;Plain&quot;,&quot;参加时间&quot;]]]],[[[[&quot;Plain&quot;,&quot;userid&quot;]],[[&quot;Plain&quot;,&quot;uid&quot;]],[[&quot;Plain&quot;,&quot;用户id&quot;]]]]],&quot;^29&quot;,[3]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;由于一些历史原因，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;此表的主键并不是userid&quot;]]]],[&quot;Plain&quot;,&quot;。sql写法：&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;update table set 余额=xx where time &gt;= 月初 and time &lt;= 月末 and userid=用户id&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;sql&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,366,&quot;^1S&quot;,453],&quot;^1T&quot;,&quot;~```sql\\nupdate table set 余额=xx where time &gt;= 月初 and time &lt;= 月末 and userid=用户id\\n```\\n&quot;]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;原有索引：&quot;],[&quot;Break_Line&quot;]]]],[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;CREATE INDEX IX_TIME_USERID ON `table` (time, userid);&quot;,&quot;\\n&quot;],&quot;^1P&quot;,&quot;sql&quot;,&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,480,&quot;^1S&quot;,535],&quot;^1T&quot;,&quot;~```sql\\nCREATE INDEX IX_TIME_USERID ON `table` (time, userid);\\n```&quot;]]],536873010]],[&quot;^1A&quot;,[452,&quot;^[&quot;,&quot;需求是“更新上个月某个用户的余额”，实际业务是要在月初，对上个月参与活动的用户进行记账，以发放现金奖励。表结构如下：\\n|字段名|类型|备注|\\n|---|---|---|\\n|time|datetime|参加时间|\\n|---|---|---|\\n|userid|uid|用户id|\\n由于一些历史原因，**此表的主键并不是userid**。sql写法：\\n```sql\\nupdate table set 余额=xx where time &gt;= 月初 and time &lt;= 月末 and userid=用户id\\n```\\n原有索引：\\n```sql\\nCREATE INDEX IX_TIME_USERID ON `table` (time, userid);\\n```&quot;,536873010]],[&quot;^1A&quot;,[452,&quot;^W&quot;,&quot;^1H&quot;,536871632]],[&quot;^1A&quot;,[452,&quot;^E&quot;,false,536871632]],[&quot;^1A&quot;,[452,&quot;^K&quot;,451,536871632]],[&quot;^1A&quot;,[452,&quot;^X&quot;,1,536873010]],[&quot;^1A&quot;,[452,&quot;^17&quot;,451,536871632]],[&quot;^1A&quot;,[452,&quot;^13&quot;,451,536871632]],[&quot;^1A&quot;,[452,&quot;^12&quot;,451,536873010]],[&quot;^1A&quot;,[452,&quot;^D&quot;,[&quot;^ &quot;],536873010]],[&quot;^1A&quot;,[452,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;需求是“更新上个月某个用户的余额”，实际业务是要在月初，对上个月参与活动的用户进行记账，以发放现金奖励。表结构如下：&quot;]],536873010]],[&quot;^1A&quot;,[452,&quot;^1D&quot;,true,536871632]],[&quot;^1A&quot;,[452,&quot;^?&quot;,&quot;~u615013cc-928b-4d52-b357-d91907bc9d10&quot;,536871632]],[&quot;^1A&quot;,[454,&quot;^1E&quot;,&quot;-e9--97--ae--e9--a2--98--e6--98--af--e5--9c--a8--e5--bd--93--e6--9c--88--e5--b0--8f--e6--95--b0--e6--8d--ae--e9--87--8f-(10000)-e6--97--b6--ef--bc--8c-sql-e8--a1--a8--e7--8e--b0--e6--b2--a1--e6--9c--89--e9--97--ae--e9--a2--98--e3--80--82--e5--bd--93--e5--a4--a7--e7--ba--a6--e8--b6--85--e8--bf--87-10000-ef--bc--8c-sql-e6--80--a7--e8--83--bd--e4--bc--9a--e6--80--a5--e5--89--a7--e6--81--b6--e5--8c--96--e3--80--82--e7--9b--91--e6--8e--a7--e8--a7--82--e5--af--9f-60s-e8--b6--85--e6--97--b6--ef--bc--8c--e4--b8--9a--e5--8a--a1--e8--a1--a8--e7--8e--b0--e6--97--a0--e5--93--8d--e5--ba--94--e3--80--82-&quot;,536873014]],[&quot;^1A&quot;,[454,&quot;^S&quot;,[],536873014]],[&quot;^1A&quot;,[454,&quot;^[&quot;,&quot;问题是在当月小数据量(10000)时，sql表现没有问题。当大约超过10000，sql性能会急剧恶化。监控观察60s超时，业务表现无响应。&quot;,536873014]],[&quot;^1A&quot;,[454,&quot;^W&quot;,&quot;^1H&quot;,536872102]],[&quot;^1A&quot;,[454,&quot;^E&quot;,false,536872102]],[&quot;^1A&quot;,[454,&quot;^K&quot;,452,536872102]],[&quot;^1A&quot;,[454,&quot;^X&quot;,1,536873014]],[&quot;^1A&quot;,[454,&quot;^17&quot;,451,536872102]],[&quot;^1A&quot;,[454,&quot;^13&quot;,451,536872102]],[&quot;^1A&quot;,[454,&quot;^12&quot;,451,536873014]],[&quot;^1A&quot;,[454,&quot;^D&quot;,[&quot;^ &quot;],536873014]],[&quot;^1A&quot;,[454,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;问题是在当月小数据量(10000)时，sql表现没有问题。当大约超过10000，sql性能会急剧恶化。监控观察60s超时，业务表现无响应。&quot;]],536873014]],[&quot;^1A&quot;,[454,&quot;^1D&quot;,true,536872102]],[&quot;^1A&quot;,[454,&quot;^?&quot;,&quot;~u61501b18-edde-4355-b0c6-78486b480076&quot;,536872102]],[&quot;^1A&quot;,[455,&quot;^1E&quot;,&quot;-e5--88--86--e6--9e--90--e8--bf--87--e7--a8--8b-&quot;,536872219]],[&quot;^1A&quot;,[455,&quot;^S&quot;,[],536872219]],[&quot;^1A&quot;,[455,&quot;^[&quot;,&quot;分析过程&quot;,536872219]],[&quot;^1A&quot;,[455,&quot;^W&quot;,&quot;^1H&quot;,536872202]],[&quot;^1A&quot;,[455,&quot;^E&quot;,false,536872202]],[&quot;^1A&quot;,[455,&quot;^K&quot;,454,536872202]],[&quot;^1A&quot;,[455,&quot;^X&quot;,1,536872219]],[&quot;^1A&quot;,[455,&quot;^17&quot;,451,536872202]],[&quot;^1A&quot;,[455,&quot;^13&quot;,451,536872202]],[&quot;^1A&quot;,[455,&quot;^12&quot;,451,536872219]],[&quot;^1A&quot;,[455,&quot;^D&quot;,[&quot;^ &quot;],536872219]],[&quot;^1A&quot;,[455,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;分析过程&quot;]],536872219]],[&quot;^1A&quot;,[455,&quot;^1D&quot;,true,536872202]],[&quot;^1A&quot;,[455,&quot;^?&quot;,&quot;~u61501b63-aa77-45cf-9f02-b2e032f1ea2d&quot;,536872202]],[&quot;^1A&quot;,[456,&quot;^1E&quot;,&quot;-e5--ae--9a--e4--bd--8d--e9--97--ae--e9--a2--98-SQL-e3--80--82-&quot;,536872599]],[&quot;^1A&quot;,[456,&quot;^S&quot;,[],536872599]],[&quot;^1A&quot;,[456,&quot;^[&quot;,&quot;定位问题SQL。&quot;,536872599]],[&quot;^1A&quot;,[456,&quot;^W&quot;,&quot;^1H&quot;,536872212]],[&quot;^1A&quot;,[456,&quot;^E&quot;,false,536872212]],[&quot;^1A&quot;,[456,&quot;^K&quot;,455,536872212]],[&quot;^1A&quot;,[456,&quot;^X&quot;,1,536872599]],[&quot;^1A&quot;,[456,&quot;^17&quot;,451,536872212]],[&quot;^1A&quot;,[456,&quot;^13&quot;,455,536872215]],[&quot;^1A&quot;,[456,&quot;^12&quot;,451,536872599]],[&quot;^1A&quot;,[456,&quot;^D&quot;,[&quot;^ &quot;],536872599]],[&quot;^1A&quot;,[456,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;定位问题SQL。&quot;]],536872599]],[&quot;^1A&quot;,[456,&quot;^1D&quot;,true,536872212]],[&quot;^1A&quot;,[456,&quot;^?&quot;,&quot;~u61501b68-f181-460b-af61-775e0904be54&quot;,536872212]],[&quot;^1A&quot;,[457,&quot;^1E&quot;,&quot;-e5--af--b9--e7--ba--bf--e4--b8--8a--e6--95--b0--e6--8d--ae-EXPLAIN_SQL-e3--80--82--e4--b8--ba--e5--85--a8--e8--a1--a8--e6--95--b0--e6--8d--ae--e9--87--8f--ef--bc--8c--e5--88--b0-100-ef--bc--8c--e5--be--88--e6--98--8e--e6--98--be--e8--bf--99--e6--9d--a1-SQL-e6--98--af--e5--9c--a8--e5--85--a8--e8--a1--a8--e6--89--ab--e6--8f--8f--e3--80--82--e6--af--94--e8--be--83--e7--96--91--e6--83--91--e7--9a--84--e9--97--ae--e9--a2--98--e6--98--af--e4--b8--8d--e5--9c--a8--e4--b9--8b--e4--b8--ad--e3--80--82-&quot;,536872603]],[&quot;^1A&quot;,[457,&quot;^S&quot;,[[&quot;Table&quot;,[&quot;^ &quot;,&quot;^27&quot;,[[[&quot;Plain&quot;,&quot;...&quot;]],[[&quot;Plain&quot;,&quot;possible_keys&quot;]],[[&quot;Plain&quot;,&quot;key&quot;]],[[&quot;Plain&quot;,&quot;rows&quot;]],[[&quot;Plain&quot;,&quot;filtered&quot;]]],&quot;^28&quot;,[[[[[&quot;Plain&quot;,&quot;...&quot;]],[[&quot;Plain&quot;,&quot;IX_TIME_USERID&quot;]],[[&quot;Plain&quot;,&quot;PRIMARY&quot;]],[[&quot;Plain&quot;,&quot;43993&quot;]],[[&quot;Plain&quot;,&quot;100.0&quot;]]]]],&quot;^29&quot;,[5]]]],536872603]],[&quot;^1A&quot;,[457,&quot;^[&quot;,&quot;对线上数据EXPLAIN SQL。`rows`为全表数据量，`filtered`到100，很明显这条SQL是在全表扫描。比较疑惑的问题是`key`不在`possible_keys`之中。\\n|...|possible_keys|key|rows|filtered|\\n|---|---|---|---|---|---|---|\\n|   ...  | IX_TIME_USERID | PRIMARY | 43993 | 100.0 |&quot;,536872603]],[&quot;^1A&quot;,[457,&quot;^W&quot;,&quot;^1H&quot;,536872252]],[&quot;^1A&quot;,[457,&quot;^E&quot;,false,536872252]],[&quot;^1A&quot;,[457,&quot;^K&quot;,456,536872252]],[&quot;^1A&quot;,[457,&quot;^X&quot;,1,536872603]],[&quot;^1A&quot;,[457,&quot;^17&quot;,451,536872252]],[&quot;^1A&quot;,[457,&quot;^13&quot;,455,536872252]],[&quot;^1A&quot;,[457,&quot;^12&quot;,451,536872603]],[&quot;^1A&quot;,[457,&quot;^D&quot;,[&quot;^ &quot;],536872603]],[&quot;^1A&quot;,[457,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;对线上数据EXPLAIN SQL。&quot;],[&quot;Code&quot;,&quot;rows&quot;],[&quot;Plain&quot;,&quot;为全表数据量，&quot;],[&quot;Code&quot;,&quot;filtered&quot;],[&quot;Plain&quot;,&quot;到100，很明显这条SQL是在全表扫描。比较疑惑的问题是&quot;],[&quot;Code&quot;,&quot;key&quot;],[&quot;Plain&quot;,&quot;不在&quot;],[&quot;Code&quot;,&quot;possible_keys&quot;],[&quot;Plain&quot;,&quot;之中。&quot;]],536872603]],[&quot;^1A&quot;,[457,&quot;^1D&quot;,true,536872252]],[&quot;^1A&quot;,[457,&quot;^?&quot;,&quot;~u61501b98-0f36-44b2-807c-953269715211&quot;,536872252]],[&quot;^1A&quot;,[458,&quot;^1E&quot;,&quot;-e5--88--86--e6--9e--90-EXPLAIN-e8--a1--a8--e7--8e--b0--e3--80--82--e4--b8--8d--e9--9a--be--e5--be--97--e5--87--ba--ef--bc--8c-SQL-e5--bc--95--e6--93--8e--e8--af--84--e4--bc--b0--e8--b5--b0--e4--b8--ad--e7--9a--84--e7--b4--a2--e5--bc--95--e8--a6--81--e8--af--bb--e5--8f--96--e7--9a--84--e7--a3--81--e7--9b--98--e6--95--b0--ef--bc--8c--e6--88--96--e8--80--85--e8--af--b4--e4--bb--a3--e4--bb--b7--e8--b6--85--e8--bf--87--e8--ae--be--e5--ae--9a--e7--9a--84--e9--98--88--e5--80--bc--e3--80--82--e5--9b--a0--e6--ad--a4--e5--86--b3--e5--ae--9a--e8--b5--b0--e4--b8--bb--e9--94--ae--e7--b4--a2--e5--bc--95--e8--bf--9b--e8--a1--8c--e5--85--a8--e8--a1--a8--e6--89--ab--e6--8f--8f--e3--80--82-&quot;,536872589]],[&quot;^1A&quot;,[458,&quot;^S&quot;,[],536872593]],[&quot;^1A&quot;,[458,&quot;^[&quot;,&quot;分析EXPLAIN表现。不难得出，SQL引擎评估走`possible_keys`中的索引要读取的磁盘数，或者说代价超过设定的阈值。因此决定走主键索引进行全表扫描。&quot;,536872589]],[&quot;^1A&quot;,[458,&quot;^W&quot;,&quot;^1H&quot;,536872492]],[&quot;^1A&quot;,[458,&quot;^E&quot;,false,536872492]],[&quot;^1A&quot;,[458,&quot;^K&quot;,457,536872492]],[&quot;^1A&quot;,[458,&quot;^X&quot;,1,536872593]],[&quot;^1A&quot;,[458,&quot;^17&quot;,451,536872492]],[&quot;^1A&quot;,[458,&quot;^13&quot;,455,536872492]],[&quot;^1A&quot;,[458,&quot;^12&quot;,451,536872593]],[&quot;^1A&quot;,[458,&quot;^D&quot;,[&quot;^ &quot;],536872593]],[&quot;^1A&quot;,[458,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;分析EXPLAIN表现。不难得出，SQL引擎评估走&quot;],[&quot;Code&quot;,&quot;possible_keys&quot;],[&quot;Plain&quot;,&quot;中的索引要读取的磁盘数，或者说代价超过设定的阈值。因此决定走主键索引进行全表扫描。&quot;]],536872593]],[&quot;^1A&quot;,[458,&quot;^1D&quot;,true,536872492]],[&quot;^1A&quot;,[458,&quot;^?&quot;,&quot;~u61501c89-d595-4c8c-88fa-106e5ff092b1&quot;,536872492]],[&quot;^1A&quot;,[459,&quot;^1E&quot;,&quot;-e6--b7--b1--e5--85--a5--e5--88--86--e6--9e--90--e3--80--82-IX_TIME_USERID-e6--98--af--e5--a4--8d--e5--90--88--e7--b4--a2--e5--bc--95--ef--bc--8c--e6--ad--a4-SQL-e4--b8--ad--e5--af--b9--e5--88--97--e8--bf--9b--e8--a1--8c--e4--ba--86--e8--8c--83--e5--9b--b4--e6--9f--a5--e8--af--a2--ef--bc--8c--e7--94--b1--e4--ba--8e-InnoDB-e5--a4--8d--e5--90--88--e7--b4--a2--e5--bc--95--e6--98--af--e4--b8--80--e9--a2--97-B-2b--e6--a0--91--ef--bc--8c--e5--88--97--e5--9c--a8--e8--8c--83--e5--9b--b4--e5--86--85--e6--97--a0--e5--ba--8f--ef--bc--8c--e5--ae--9a--e5--80--bc--e6--97--b6--e6--9c--89--e5--ba--8f--e3--80--82--e5--9b--a0--e6--ad--a4--ef--bc--8c--e5--bd--93--e7--bb--99--e5--ae--9a--e7--9a--84--e8--8c--83--e5--9b--b4--e8--a6--86--e7--9b--96--e7--9a--84--e6--95--b0--e6--8d--ae--e9--87--8f--e5--a4--a7--e8--b6--85--e8--bf--87--e4--b8--80--e5--ae--9a--e9--98--88--e5--80--bc--e6--97--b6--ef--bc--8c--e6--97--a0--e5--ba--8f--e7--9a--84--e8--bf--87--e5--a4--9a--ef--bc--8c--e6--ad--a4--e6--97--b6--e6--97--a0--e6--b3--95--e7--bb--a7--e7--bb--ad--e5--88--a9--e7--94--a8--e7--b4--a2--e5--bc--95--e6--a0--91--e8--bf--9b--e8--a1--8c--e4--ba--8c--e5--88--86--e6--9f--a5--e6--89--be--ef--bc--8c--e5--8d--b3--e7--b4--a2--e5--bc--95--e5--b7--b2--e5--a4--b1--e6--95--88--e3--80--82-&quot;,536873090]],[&quot;^1A&quot;,[459,&quot;^S&quot;,[],536873090]],[&quot;^1A&quot;,[459,&quot;^[&quot;,&quot;深入分析。IX_TIME_USERID是复合索引，此SQL中对`time`列进行了范围查询，由于InnoDB复合索引是一颗B+树，**`userid`列在`time`范围内无序，`time`定值时有序**。因此，当给定的`time`范围覆盖的数据量大超过一定阈值时，无序的`userid`过多，此时无法继续利用索引树进行二分查找，即索引已失效。&quot;,536873090]],[&quot;^1A&quot;,[459,&quot;^W&quot;,&quot;^1H&quot;,536872594]],[&quot;^1A&quot;,[459,&quot;^E&quot;,false,536872594]],[&quot;^1A&quot;,[459,&quot;^K&quot;,458,536872594]],[&quot;^1A&quot;,[459,&quot;^X&quot;,1,536873090]],[&quot;^1A&quot;,[459,&quot;^17&quot;,451,536872594]],[&quot;^1A&quot;,[459,&quot;^13&quot;,455,536872594]],[&quot;^1A&quot;,[459,&quot;^12&quot;,451,536873090]],[&quot;^1A&quot;,[459,&quot;^D&quot;,[&quot;^ &quot;],536873090]],[&quot;^1A&quot;,[459,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;深入分析。IX_TIME_USERID是复合索引，此SQL中对&quot;],[&quot;Code&quot;,&quot;time&quot;],[&quot;Plain&quot;,&quot;列进行了范围查询，由于InnoDB复合索引是一颗B+树，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;userid&quot;],[&quot;Plain&quot;,&quot;列在&quot;],[&quot;Code&quot;,&quot;time&quot;],[&quot;Plain&quot;,&quot;范围内无序，&quot;],[&quot;Code&quot;,&quot;time&quot;],[&quot;Plain&quot;,&quot;定值时有序&quot;]]]],[&quot;Plain&quot;,&quot;。因此，当给定的&quot;],[&quot;Code&quot;,&quot;time&quot;],[&quot;Plain&quot;,&quot;范围覆盖的数据量大超过一定阈值时，无序的&quot;],[&quot;Code&quot;,&quot;userid&quot;],[&quot;Plain&quot;,&quot;过多，此时无法继续利用索引树进行二分查找，即索引已失效。&quot;]],536873090]],[&quot;^1A&quot;,[459,&quot;^1D&quot;,true,536872594]],[&quot;^1A&quot;,[459,&quot;^?&quot;,&quot;~u61501cef-b58a-4d7e-86af-c73e78505f6e&quot;,536872594]],[&quot;^1A&quot;,[460,&quot;^1E&quot;,&quot;-e7--bb--99--e5--87--ba--e8--a7--a3--e5--86--b3--e6--96--b9--e6--a1--88--e3--80--82--e5--bb--ba--e7--ab--8b--e7--b4--a2--e5--bc--95--e3--80--82-&quot;,536873094]],[&quot;^1A&quot;,[460,&quot;^S&quot;,[],536873098]],[&quot;^1A&quot;,[460,&quot;^[&quot;,&quot;给出解决方案。建立`(userid, time)`索引。&quot;,536873094]],[&quot;^1A&quot;,[460,&quot;^W&quot;,&quot;^1H&quot;,536872770]],[&quot;^1A&quot;,[460,&quot;^E&quot;,false,536872770]],[&quot;^1A&quot;,[460,&quot;^K&quot;,459,536872770]],[&quot;^1A&quot;,[460,&quot;^X&quot;,1,536873098]],[&quot;^1A&quot;,[460,&quot;^17&quot;,451,536872770]],[&quot;^1A&quot;,[460,&quot;^13&quot;,455,536872770]],[&quot;^1A&quot;,[460,&quot;^12&quot;,451,536873098]],[&quot;^1A&quot;,[460,&quot;^D&quot;,[&quot;^ &quot;],536873098]],[&quot;^1A&quot;,[460,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;给出解决方案。建立&quot;],[&quot;Code&quot;,&quot;(userid, time)&quot;],[&quot;Plain&quot;,&quot;索引。&quot;]],536873098]],[&quot;^1A&quot;,[460,&quot;^1D&quot;,true,536872770]],[&quot;^1A&quot;,[460,&quot;^?&quot;,&quot;~u61501dc4-8f98-4aa7-b19c-9814f677863b&quot;,536872770]],[&quot;^1A&quot;,[461,&quot;^1E&quot;,&quot;-e5--bc--95--e7--94--b3--e6--80--9d--e8--80--83-&quot;,536872829]],[&quot;^1A&quot;,[461,&quot;^S&quot;,[],536872833]],[&quot;^1A&quot;,[461,&quot;^[&quot;,&quot;引申思考&quot;,536872829]],[&quot;^1A&quot;,[461,&quot;^W&quot;,&quot;^1H&quot;,536872820]],[&quot;^1A&quot;,[461,&quot;^E&quot;,false,536872820]],[&quot;^1A&quot;,[461,&quot;^K&quot;,455,536872825]],[&quot;^1A&quot;,[461,&quot;^X&quot;,1,536872833]],[&quot;^1A&quot;,[461,&quot;^17&quot;,451,536872820]],[&quot;^1A&quot;,[461,&quot;^13&quot;,451,536872825]],[&quot;^1A&quot;,[461,&quot;^12&quot;,451,536872833]],[&quot;^1A&quot;,[461,&quot;^D&quot;,[&quot;^ &quot;],536872833]],[&quot;^1A&quot;,[461,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;引申思考&quot;]],536872833]],[&quot;^1A&quot;,[461,&quot;^1D&quot;,true,536872820]],[&quot;^1A&quot;,[461,&quot;^?&quot;,&quot;~u61501e0e-3837-431f-9794-fc39994918fc&quot;,536872820]],[&quot;^1A&quot;,[462,&quot;^1E&quot;,&quot;-e5--9f--ba--e6--95--b0--e6--98--af--e5--90--a6--e5--86--b3--e5--ae--9a--e5--a4--8d--e5--90--88--e7--b4--a2--e5--bc--95--e7--9a--84--e9--a1--ba--e5--ba--8f--ef--bc--9f--e4--b8--8d--e4--b8--80--e5--ae--9a--ef--bc--8c--e5--b8--b8--e8--a7--81--e6--98--af--e5--9f--ba--e6--95--b0--e9--ab--98--e7--9a--84--e5--88--97--e5--9c--a8--e5--89--8d--ef--bc--8c--e4--bd--8e--e7--9a--84--e5--9c--a8--e5--90--8e--ef--bc--8c--e4--bd--86--e8--bf--98--e6--98--af--e8--a6--81--e6--a0--b9--e6--8d--ae--e6--9f--a5--e8--af--a2--e5--9c--ba--e6--99--af--e5--88--86--e6--9e--90--e3--80--82-&quot;,536872911]],[&quot;^1A&quot;,[462,&quot;^S&quot;,[],536872913]],[&quot;^1A&quot;,[462,&quot;^[&quot;,&quot;基数是否决定复合索引的顺序？不一定，常见是基数高的列在前，低的在后，但还是要根据查询场景分析。&quot;,536872911]],[&quot;^1A&quot;,[462,&quot;^W&quot;,&quot;^1H&quot;,536872834]],[&quot;^1A&quot;,[462,&quot;^E&quot;,false,536872834]],[&quot;^1A&quot;,[462,&quot;^K&quot;,461,536872834]],[&quot;^1A&quot;,[462,&quot;^X&quot;,1,536872913]],[&quot;^1A&quot;,[462,&quot;^17&quot;,451,536872834]],[&quot;^1A&quot;,[462,&quot;^13&quot;,461,536872837]],[&quot;^1A&quot;,[462,&quot;^12&quot;,451,536872913]],[&quot;^1A&quot;,[462,&quot;^D&quot;,[&quot;^ &quot;],536872913]],[&quot;^1A&quot;,[462,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;基数是否决定复合索引的顺序？不一定，常见是基数高的列在前，低的在后，但还是要根据查询场景分析。&quot;]],536872913]],[&quot;^1A&quot;,[462,&quot;^1D&quot;,true,536872834]],[&quot;^1A&quot;,[462,&quot;^?&quot;,&quot;~u61501e13-20cc-409e-91f7-50de1974ec0a&quot;,536872834]],[&quot;^1A&quot;,[463,&quot;^1E&quot;,&quot;-e5--bd--93--e5--bf--83-SQL-e9--80--80--e5--8c--96--e3--80--82--e5--ae--9e--e9--99--85--e4--b8--8a--ef--bc--8c--e5--a5--bd--e7--9a--84--e7--b4--a2--e5--bc--95--e4--b8--80--e5--ae--9a--e6--98--af--e5--a4--8d--e5--90--88--e4--ba--ba--e7--9b--b4--e8--a7--89--e7--9a--84--ef--bc--8c--e6--af--95--e7--ab--9f--e7--b4--a2--e5--bc--95--e6--a0--91--e6--98--af--e4--b8--80--e6--a3--b5--e5--8f--aa--e4--bc--9a--e4--ba--8c--e5--88--86--e7--9a--84--e6--95--b0--e6--8d--ae--e7--bb--93--e6--9e--84--e3--80--82--e8--bf--99--e4--b8--aa--e9--97--ae--e9--a2--98--e7--b4--a2--e5--bc--95--ef--bc--8c--e5--b0--b1--e4--b8--8d--e5--a4--aa--e7--ac--a6--e5--90--88--e4--ba--ba--e6--80--9d--e8--80--83--e7--9a--84--e6--96--b9--e5--bc--8f--e3--80--82-&quot;,536873001]],[&quot;^1A&quot;,[463,&quot;^S&quot;,[],536873001]],[&quot;^1A&quot;,[463,&quot;^[&quot;,&quot;当心SQL退化。实际上，好的索引一定是复合人直觉的，毕竟索引树是一棵只会二分的数据结构。这个问题索引，就不太符合人思考的方式。&quot;,536873001]],[&quot;^1A&quot;,[463,&quot;^W&quot;,&quot;^1H&quot;,536872914]],[&quot;^1A&quot;,[463,&quot;^E&quot;,false,536872914]],[&quot;^1A&quot;,[463,&quot;^K&quot;,462,536872914]],[&quot;^1A&quot;,[463,&quot;^X&quot;,1,536873001]],[&quot;^1A&quot;,[463,&quot;^17&quot;,451,536872914]],[&quot;^1A&quot;,[463,&quot;^13&quot;,461,536872914]],[&quot;^1A&quot;,[463,&quot;^12&quot;,451,536873001]],[&quot;^1A&quot;,[463,&quot;^D&quot;,[&quot;^ &quot;],536873001]],[&quot;^1A&quot;,[463,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;当心SQL退化。实际上，好的索引一定是复合人直觉的，毕竟索引树是一棵只会二分的数据结构。这个问题索引，就不太符合人思考的方式。&quot;]],536873001]],[&quot;^1A&quot;,[463,&quot;^1D&quot;,true,536872914]],[&quot;^1A&quot;,[463,&quot;^?&quot;,&quot;~u61501e65-bfa8-42ef-9bb2-89a573e2d6c7&quot;,536872914]],[&quot;^1A&quot;,[464,&quot;^1E&quot;,&quot;-e8--bf--9b--e8--a1--8c--e7--ba--bf--e4--b8--8b--e6--b5--8b--e8--af--95--e3--80--82--e8--87--aa--e5--8a--a8--e5--8c--96--e6--b5--8b--e8--af--95--e5--8e--9f--e6--93--8d--e4--bd--9c--e5--85--a5--e5--8f--a3--ef--bc--8c--e5--bc--84--e4--b8--aa-H2-e5--b0--b1--e8--83--bd--e6--8a--8a-benchmark-e8--b7--91--e5--87--ba--e6--9d--a5--ef--bc--8c--e5--85--a8--e8--a1--a8--e6--89--ab--e6--8f--8f--e7--9a--84--e6--80--a7--e8--83--bd--e6--81--b6--e5--8c--96--e5--8d--b3--e4--bd--bf--e5--9c--a8--e5--b0--8f--e6--95--b0--e6--8d--ae--e9--9b--86--e4--b9--9f--e8--a1--a8--e7--8e--b0--e5--be--97--e5--be--88--e6--98--8e--e6--98--be--e3--80--82-&quot;,536873208]],[&quot;^1A&quot;,[464,&quot;^S&quot;,[],536873208]],[&quot;^1A&quot;,[464,&quot;^[&quot;,&quot;进行线下测试。自动化测试原操作入口，弄个H2就能把benchmark跑出来，全表扫描的性能恶化即使在小数据集也表现得很明显。&quot;,536873208]],[&quot;^1A&quot;,[464,&quot;^W&quot;,&quot;^1H&quot;,536873099]],[&quot;^1A&quot;,[464,&quot;^E&quot;,false,536873099]],[&quot;^1A&quot;,[464,&quot;^K&quot;,460,536873099]],[&quot;^1A&quot;,[464,&quot;^X&quot;,1,536873208]],[&quot;^1A&quot;,[464,&quot;^17&quot;,451,536873099]],[&quot;^1A&quot;,[464,&quot;^13&quot;,455,536873099]],[&quot;^1A&quot;,[464,&quot;^12&quot;,451,536873208]],[&quot;^1A&quot;,[464,&quot;^D&quot;,[&quot;^ &quot;],536873208]],[&quot;^1A&quot;,[464,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;进行线下测试。自动化测试原操作入口，弄个H2就能把benchmark跑出来，全表扫描的性能恶化即使在小数据集也表现得很明显。&quot;]],536873208]],[&quot;^1A&quot;,[464,&quot;^1D&quot;,true,536873099]],[&quot;^1A&quot;,[464,&quot;^?&quot;,&quot;~u6150201d-676d-40e6-9c54-c9ed7f987341&quot;,536873099]],[&quot;^1A&quot;,[466,&quot;^1E&quot;,&quot;Overview&quot;,536873248]],[&quot;^1A&quot;,[466,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627455788047_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627455788047_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]]]],536873254]],[&quot;^1A&quot;,[466,&quot;^[&quot;,&quot;## Overview\\n![image.png](../assets/image_1627455788047_0.png)&quot;,536873254]],[&quot;^1A&quot;,[466,&quot;^W&quot;,&quot;^1H&quot;,536873248]],[&quot;^1A&quot;,[466,&quot;^14&quot;,2,536873254]],[&quot;^1A&quot;,[466,&quot;^K&quot;,195,536873248]],[&quot;^1A&quot;,[466,&quot;^X&quot;,1,536873254]],[&quot;^1A&quot;,[466,&quot;^17&quot;,75,536873248]],[&quot;^1A&quot;,[466,&quot;^13&quot;,195,536873248]],[&quot;^1A&quot;,[466,&quot;^12&quot;,75,536873254]],[&quot;^1A&quot;,[466,&quot;^D&quot;,[&quot;^ &quot;],536873254]],[&quot;^1A&quot;,[466,&quot;^1M&quot;,2,536873248]],[&quot;^1A&quot;,[466,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Overview&quot;]],536873254]],[&quot;^1A&quot;,[466,&quot;^15&quot;,&quot;^1N&quot;,536873254]],[&quot;^1A&quot;,[466,&quot;^1D&quot;,true,536873248]],[&quot;^1A&quot;,[466,&quot;^?&quot;,&quot;~u6152874a-e37e-4679-bd0a-8398e61e16cd&quot;,536873248]],[&quot;^1A&quot;,[468,&quot;^E&quot;,false,536873401]],[&quot;^1A&quot;,[468,&quot;^19&quot;,&quot;my&quot;,536873401]],[&quot;^1A&quot;,[468,&quot;^1=&quot;,&quot;my&quot;,536873401]],[&quot;^1A&quot;,[468,&quot;^?&quot;,&quot;~u61540645-a484-4303-8cc3-b877bcbf685b&quot;,536873401]],[&quot;^1A&quot;,[478,&quot;^1E&quot;,&quot;SQL-e6--95--b0--e6--8d--ae--e7--b1--bb--e5--9e--8b-&quot;,536873743]],[&quot;^1A&quot;,[478,&quot;^S&quot;,[],536884162]],[&quot;^1A&quot;,[478,&quot;^[&quot;,&quot;## [[SQL数据类型]]&quot;,536884162]],[&quot;^1A&quot;,[478,&quot;^W&quot;,&quot;^1H&quot;,536873730]],[&quot;^1A&quot;,[478,&quot;^14&quot;,2,536884162]],[&quot;^1A&quot;,[478,&quot;^K&quot;,223,536884064]],[&quot;^1A&quot;,[478,&quot;^X&quot;,1,536884162]],[&quot;^1A&quot;,[478,&quot;^17&quot;,54,536873730]],[&quot;^1A&quot;,[478,&quot;^13&quot;,54,536873739]],[&quot;^1A&quot;,[478,&quot;^12&quot;,54,536884162]],[&quot;^1A&quot;,[478,&quot;^12&quot;,909,536884162]],[&quot;^1A&quot;,[478,&quot;^D&quot;,[&quot;^ &quot;],536884162]],[&quot;^1A&quot;,[478,&quot;^L&quot;,909,536884162]],[&quot;^1A&quot;,[478,&quot;^1M&quot;,2,536873743]],[&quot;^1A&quot;,[478,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;SQL数据类型&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[SQL数据类型]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536884162]],[&quot;^1A&quot;,[478,&quot;^15&quot;,&quot;^1N&quot;,536884162]],[&quot;^1A&quot;,[478,&quot;^1D&quot;,false,536884159]],[&quot;^1A&quot;,[478,&quot;^?&quot;,&quot;~u61540a4c-0fb9-4f19-bd57-2800fe140315&quot;,536873730]],[&quot;^1A&quot;,[522,&quot;^S&quot;,[],536884236]],[&quot;^1A&quot;,[522,&quot;^[&quot;,&quot;## [[事务]]&quot;,536884182]],[&quot;^1A&quot;,[522,&quot;^W&quot;,&quot;^1H&quot;,536875731]],[&quot;^1A&quot;,[522,&quot;^14&quot;,2,536884236]],[&quot;^1A&quot;,[522,&quot;^K&quot;,478,536875744]],[&quot;^1A&quot;,[522,&quot;^X&quot;,1,536884236]],[&quot;^1A&quot;,[522,&quot;^17&quot;,54,536875731]],[&quot;^1A&quot;,[522,&quot;^13&quot;,54,536875744]],[&quot;^1A&quot;,[522,&quot;^12&quot;,54,536884236]],[&quot;^1A&quot;,[522,&quot;^12&quot;,699,536884236]],[&quot;^1A&quot;,[522,&quot;^D&quot;,[&quot;^ &quot;],536884236]],[&quot;^1A&quot;,[522,&quot;^L&quot;,699,536884236]],[&quot;^1A&quot;,[522,&quot;^1M&quot;,2,536875748]],[&quot;^1A&quot;,[522,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;事务&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[事务]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536884236]],[&quot;^1A&quot;,[522,&quot;^15&quot;,&quot;^1N&quot;,536884236]],[&quot;^1A&quot;,[522,&quot;^1D&quot;,false,536884179]],[&quot;^1A&quot;,[522,&quot;^?&quot;,&quot;~u615ff6ad-b3ec-46e9-a3b7-ba469be6ea43&quot;,536875731]],[&quot;^1A&quot;,[567,&quot;^S&quot;,[],536884298]],[&quot;^1A&quot;,[567,&quot;^[&quot;,&quot;## [[存储和文件结构]]&quot;,536884298]],[&quot;^1A&quot;,[567,&quot;^W&quot;,&quot;^1H&quot;,536877521]],[&quot;^1A&quot;,[567,&quot;^14&quot;,2,536884298]],[&quot;^1A&quot;,[567,&quot;^K&quot;,996,536884237]],[&quot;^1A&quot;,[567,&quot;^X&quot;,1,536884298]],[&quot;^1A&quot;,[567,&quot;^17&quot;,54,536877521]],[&quot;^1A&quot;,[567,&quot;^13&quot;,54,536877521]],[&quot;^1A&quot;,[567,&quot;^12&quot;,54,536884298]],[&quot;^1A&quot;,[567,&quot;^12&quot;,1032,536884298]],[&quot;^1A&quot;,[567,&quot;^D&quot;,[&quot;^ &quot;],536884298]],[&quot;^1A&quot;,[567,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2D&quot;]],536882885]],[&quot;^1A&quot;,[567,&quot;^L&quot;,1032,536884298]],[&quot;^1A&quot;,[567,&quot;^1M&quot;,2,536877532]],[&quot;^1A&quot;,[567,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;存储和文件结构&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[存储和文件结构]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536884298]],[&quot;^1A&quot;,[567,&quot;^15&quot;,&quot;^1N&quot;,536884298]],[&quot;^1A&quot;,[567,&quot;^1D&quot;,false,536884295]],[&quot;^1A&quot;,[567,&quot;^?&quot;,&quot;~u61610bfb-2852-4188-a334-d6b0e3fa4244&quot;,536877521]],[&quot;^1A&quot;,[571,&quot;^W&quot;,&quot;^1H&quot;,536877682]],[&quot;^1A&quot;,[571,&quot;^V&quot;,20211009,536877682]],[&quot;^1A&quot;,[571,&quot;^E&quot;,true,536877682]],[&quot;^1A&quot;,[571,&quot;^19&quot;,&quot;oct 9th, 2021&quot;,536877682]],[&quot;^1A&quot;,[571,&quot;^1=&quot;,&quot;Oct 9th, 2021&quot;,536877682]],[&quot;^1A&quot;,[571,&quot;^?&quot;,&quot;~u61614aea-2dfe-4681-9083-8828dd1f867e&quot;,536877682]],[&quot;^1A&quot;,[572,&quot;^S&quot;,[],536877683]],[&quot;^1A&quot;,[572,&quot;^[&quot;,&quot;&quot;,536877683]],[&quot;^1A&quot;,[572,&quot;^W&quot;,&quot;^1H&quot;,536877683]],[&quot;^1A&quot;,[572,&quot;^V&quot;,20211009,536877683]],[&quot;^1A&quot;,[572,&quot;^E&quot;,true,536877683]],[&quot;^1A&quot;,[572,&quot;^K&quot;,571,536877683]],[&quot;^1A&quot;,[572,&quot;^X&quot;,1,536877683]],[&quot;^1A&quot;,[572,&quot;^17&quot;,571,536877683]],[&quot;^1A&quot;,[572,&quot;^13&quot;,571,536877683]],[&quot;^1A&quot;,[572,&quot;^D&quot;,[&quot;^ &quot;],536877683]],[&quot;^1A&quot;,[572,&quot;^Z&quot;,[],536877683]],[&quot;^1A&quot;,[572,&quot;^1D&quot;,true,536877683]],[&quot;^1A&quot;,[572,&quot;^?&quot;,&quot;~u61614aea-b932-4457-9abd-2eb5c668208b&quot;,536877683]],[&quot;^1A&quot;,[580,&quot;^E&quot;,false,536877845]],[&quot;^1A&quot;,[580,&quot;^19&quot;,&quot;draws/2021-10-09-16-51-23.excalidraw&quot;,536877845]],[&quot;^1A&quot;,[580,&quot;^1=&quot;,&quot;draws/2021-10-09-16-51-23.excalidraw&quot;,536877846]],[&quot;^1A&quot;,[584,&quot;^E&quot;,false,536877944]],[&quot;^1A&quot;,[584,&quot;^19&quot;,&quot;alpacino&quot;,536877944]],[&quot;^1A&quot;,[584,&quot;^1=&quot;,&quot;alpacino&quot;,536877944]],[&quot;^1A&quot;,[584,&quot;^?&quot;,&quot;~u61615a03-9325-4e7f-a74f-e571aa8e6ac9&quot;,536877944]],[&quot;^1A&quot;,[585,&quot;^E&quot;,false,536877950]],[&quot;^1A&quot;,[585,&quot;^19&quot;,&quot;god&quot;,536877950]],[&quot;^1A&quot;,[585,&quot;^1=&quot;,&quot;god&quot;,536877950]],[&quot;^1A&quot;,[585,&quot;^?&quot;,&quot;~u61615a10-511f-4407-a044-9eadda390900&quot;,536877950]],[&quot;^1A&quot;,[586,&quot;^S&quot;,[],536877953]],[&quot;^1A&quot;,[586,&quot;^[&quot;,&quot;&quot;,536877953]],[&quot;^1A&quot;,[586,&quot;^W&quot;,&quot;^1H&quot;,536877953]],[&quot;^1A&quot;,[586,&quot;^E&quot;,false,536877953]],[&quot;^1A&quot;,[586,&quot;^K&quot;,584,536877953]],[&quot;^1A&quot;,[586,&quot;^X&quot;,1,536877953]],[&quot;^1A&quot;,[586,&quot;^17&quot;,584,536877953]],[&quot;^1A&quot;,[586,&quot;^13&quot;,584,536877953]],[&quot;^1A&quot;,[586,&quot;^D&quot;,[&quot;^ &quot;],536877953]],[&quot;^1A&quot;,[586,&quot;^Z&quot;,[],536877953]],[&quot;^1A&quot;,[586,&quot;^1D&quot;,true,536877953]],[&quot;^1A&quot;,[586,&quot;^?&quot;,&quot;~u61615a96-42f0-47c6-807f-f2d1897a3a80&quot;,536877953]],[&quot;^1A&quot;,[587,&quot;^S&quot;,[],536877954]],[&quot;^1A&quot;,[587,&quot;^[&quot;,&quot;&quot;,536877954]],[&quot;^1A&quot;,[587,&quot;^W&quot;,&quot;^1H&quot;,536877954]],[&quot;^1A&quot;,[587,&quot;^E&quot;,false,536877954]],[&quot;^1A&quot;,[587,&quot;^K&quot;,585,536877954]],[&quot;^1A&quot;,[587,&quot;^X&quot;,1,536877954]],[&quot;^1A&quot;,[587,&quot;^17&quot;,585,536877954]],[&quot;^1A&quot;,[587,&quot;^13&quot;,585,536877954]],[&quot;^1A&quot;,[587,&quot;^D&quot;,[&quot;^ &quot;],536877954]],[&quot;^1A&quot;,[587,&quot;^Z&quot;,[],536877954]],[&quot;^1A&quot;,[587,&quot;^1D&quot;,true,536877954]],[&quot;^1A&quot;,[587,&quot;^?&quot;,&quot;~u61615a98-2a58-4d68-85e1-f5b317083a98&quot;,536877954]],[&quot;^1A&quot;,[588,&quot;^S&quot;,[],536880814]],[&quot;^1A&quot;,[588,&quot;^[&quot;,&quot;## 🔨其他\\nid:: 61615b15-50c3-4013-9f19-1c149525fed0&quot;,536880814]],[&quot;^1A&quot;,[588,&quot;^W&quot;,&quot;^1H&quot;,536877984]],[&quot;^1A&quot;,[588,&quot;^14&quot;,2,536880814]],[&quot;^1A&quot;,[588,&quot;^K&quot;,598,536878739]],[&quot;^1A&quot;,[588,&quot;^X&quot;,1,536880814]],[&quot;^1A&quot;,[588,&quot;^17&quot;,56,536877984]],[&quot;^1A&quot;,[588,&quot;^13&quot;,617,536878906]],[&quot;^1A&quot;,[588,&quot;^12&quot;,56,536880814]],[&quot;^1A&quot;,[588,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;61615b15-50c3-4013-9f19-1c149525fed0&quot;],536880814]],[&quot;^1A&quot;,[588,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536880814]],[&quot;^1A&quot;,[588,&quot;^1M&quot;,2,536878509]],[&quot;^1A&quot;,[588,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;🔨其他&quot;]],536880814]],[&quot;^1A&quot;,[588,&quot;^15&quot;,&quot;^1N&quot;,536880814]],[&quot;^1A&quot;,[588,&quot;^1D&quot;,true,536878890]],[&quot;^1A&quot;,[588,&quot;^?&quot;,&quot;~u61615b15-50c3-4013-9f19-1c149525fed0&quot;,536877984]],[&quot;^1A&quot;,[591,&quot;^S&quot;,[[&quot;Custom&quot;,&quot;center&quot;,null,[[&quot;Paragraph&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1633769806940_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1633769806940_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;alpacino&quot;],[&quot;Plain&quot;,&quot; &quot;],[&quot;Code&quot;,&quot;godfather&quot;],[&quot;Break_Line&quot;]]]],&quot;![image.png](../assets/image_1633769806940_0.png) `alpacino` `godfather`\\n&quot;]],536884628]],[&quot;^1A&quot;,[591,&quot;^[&quot;,&quot;#+BEGIN_CENTER\\n ![image.png](../assets/image_1633769806940_0.png) `alpacino` `godfather`\\n#+END_CENTER&quot;,536878677]],[&quot;^1A&quot;,[591,&quot;^W&quot;,&quot;^1H&quot;,536878023]],[&quot;^1A&quot;,[591,&quot;^K&quot;,56,536884628]],[&quot;^1A&quot;,[591,&quot;^X&quot;,1,536884628]],[&quot;^1A&quot;,[591,&quot;^17&quot;,56,536878023]],[&quot;^1A&quot;,[591,&quot;^13&quot;,56,536878023]],[&quot;^1A&quot;,[591,&quot;^12&quot;,56,536884628]],[&quot;^1A&quot;,[591,&quot;^D&quot;,[&quot;^ &quot;],536884628]],[&quot;^1A&quot;,[591,&quot;^1M&quot;,1,536878023]],[&quot;^1A&quot;,[591,&quot;^Z&quot;,[],536884628]],[&quot;^1A&quot;,[591,&quot;^1D&quot;,true,536878677]],[&quot;^1A&quot;,[591,&quot;^?&quot;,&quot;~u5391c0c0-1f73-4812-b681-9c40795f2d65&quot;,536878023]],[&quot;^1A&quot;,[592,&quot;^S&quot;,[],536880805]],[&quot;^1A&quot;,[592,&quot;^[&quot;,&quot;## 🗂️ 数据库\\nid:: 616160a2-40e3-442c-aeea-007d60469f10&quot;,536880805]],[&quot;^1A&quot;,[592,&quot;^W&quot;,&quot;^1H&quot;,536878217]],[&quot;^1A&quot;,[592,&quot;^14&quot;,2,536880805]],[&quot;^1A&quot;,[592,&quot;^K&quot;,622,536878757]],[&quot;^1A&quot;,[592,&quot;^X&quot;,1,536880805]],[&quot;^1A&quot;,[592,&quot;^17&quot;,56,536878217]],[&quot;^1A&quot;,[592,&quot;^13&quot;,617,536878906]],[&quot;^1A&quot;,[592,&quot;^12&quot;,56,536880805]],[&quot;^1A&quot;,[592,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;616160a2-40e3-442c-aeea-007d60469f10&quot;],536880805]],[&quot;^1A&quot;,[592,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536880805]],[&quot;^1A&quot;,[592,&quot;^1M&quot;,2,536878656]],[&quot;^1A&quot;,[592,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;🗂️ 数据库&quot;]],536880805]],[&quot;^1A&quot;,[592,&quot;^15&quot;,&quot;^1N&quot;,536880805]],[&quot;^1A&quot;,[592,&quot;^1D&quot;,true,536878830]],[&quot;^1A&quot;,[592,&quot;^?&quot;,&quot;~u616160a2-40e3-442c-aeea-007d60469f10&quot;,536878217]],[&quot;^1A&quot;,[593,&quot;^E&quot;,false,536878332]],[&quot;^1A&quot;,[593,&quot;^19&quot;,&quot;database&quot;,536878332]],[&quot;^1A&quot;,[593,&quot;^1=&quot;,&quot;database&quot;,536878332]],[&quot;^1A&quot;,[593,&quot;^?&quot;,&quot;~u616162e3-5e86-4094-8cb2-cdc23e889a60&quot;,536878332]],[&quot;^1A&quot;,[594,&quot;^S&quot;,[],536878792]],[&quot;^1A&quot;,[594,&quot;^[&quot;,&quot;[[rdbms]]&quot;,536883491]],[&quot;^1A&quot;,[594,&quot;^W&quot;,&quot;^1H&quot;,536878345]],[&quot;^1A&quot;,[594,&quot;^K&quot;,592,536878345]],[&quot;^1A&quot;,[594,&quot;^X&quot;,1,536878792]],[&quot;^1A&quot;,[594,&quot;^17&quot;,56,536878345]],[&quot;^1A&quot;,[594,&quot;^13&quot;,592,536878346]],[&quot;^1A&quot;,[594,&quot;^12&quot;,54,536878792]],[&quot;^1A&quot;,[594,&quot;^12&quot;,56,536878792]],[&quot;^1A&quot;,[594,&quot;^12&quot;,593,536878792]],[&quot;^1A&quot;,[594,&quot;^D&quot;,[&quot;^ &quot;],536878792]],[&quot;^1A&quot;,[594,&quot;^L&quot;,54,536878792]],[&quot;^1A&quot;,[594,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;rdbms&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[rdbms]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536883491]],[&quot;^1A&quot;,[594,&quot;^1D&quot;,true,536878345]],[&quot;^1A&quot;,[594,&quot;^?&quot;,&quot;~u616162ec-dfd0-47ca-8ab1-b9852075c748&quot;,536878345]],[&quot;^1A&quot;,[595,&quot;^S&quot;,[],536878383]],[&quot;^1A&quot;,[595,&quot;^[&quot;,&quot;[[hbase]]&quot;,536878377]],[&quot;^1A&quot;,[595,&quot;^W&quot;,&quot;^1H&quot;,536878371]],[&quot;^1A&quot;,[595,&quot;^K&quot;,594,536878371]],[&quot;^1A&quot;,[595,&quot;^X&quot;,1,536878383]],[&quot;^1A&quot;,[595,&quot;^17&quot;,56,536878371]],[&quot;^1A&quot;,[595,&quot;^13&quot;,592,536878371]],[&quot;^1A&quot;,[595,&quot;^12&quot;,56,536878383]],[&quot;^1A&quot;,[595,&quot;^12&quot;,403,536878383]],[&quot;^1A&quot;,[595,&quot;^12&quot;,593,536878383]],[&quot;^1A&quot;,[595,&quot;^D&quot;,[&quot;^ &quot;],536878383]],[&quot;^1A&quot;,[595,&quot;^L&quot;,403,536878383]],[&quot;^1A&quot;,[595,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;hbase&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[hbase]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878383]],[&quot;^1A&quot;,[595,&quot;^1D&quot;,true,536878371]],[&quot;^1A&quot;,[595,&quot;^?&quot;,&quot;~u6161633a-b38c-479f-accd-a9cf686dc660&quot;,536878371]],[&quot;^1A&quot;,[596,&quot;^S&quot;,[],536878400]],[&quot;^1A&quot;,[596,&quot;^[&quot;,&quot;[[mongodb]]&quot;,536878387]],[&quot;^1A&quot;,[596,&quot;^W&quot;,&quot;^1H&quot;,536878384]],[&quot;^1A&quot;,[596,&quot;^K&quot;,595,536878384]],[&quot;^1A&quot;,[596,&quot;^X&quot;,1,536878400]],[&quot;^1A&quot;,[596,&quot;^17&quot;,56,536878384]],[&quot;^1A&quot;,[596,&quot;^13&quot;,592,536878384]],[&quot;^1A&quot;,[596,&quot;^12&quot;,56,536878400]],[&quot;^1A&quot;,[596,&quot;^12&quot;,59,536878400]],[&quot;^1A&quot;,[596,&quot;^12&quot;,593,536878400]],[&quot;^1A&quot;,[596,&quot;^D&quot;,[&quot;^ &quot;],536878400]],[&quot;^1A&quot;,[596,&quot;^L&quot;,59,536878400]],[&quot;^1A&quot;,[596,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;mongodb&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[mongodb]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878400]],[&quot;^1A&quot;,[596,&quot;^1D&quot;,true,536878384]],[&quot;^1A&quot;,[596,&quot;^?&quot;,&quot;~u61616342-698d-4665-be89-bc31cdc5564d&quot;,536878384]],[&quot;^1A&quot;,[597,&quot;^S&quot;,[],536878481]],[&quot;^1A&quot;,[597,&quot;^[&quot;,&quot;[[redis]]&quot;,536878404]],[&quot;^1A&quot;,[597,&quot;^W&quot;,&quot;^1H&quot;,536878401]],[&quot;^1A&quot;,[597,&quot;^K&quot;,596,536878401]],[&quot;^1A&quot;,[597,&quot;^X&quot;,1,536878481]],[&quot;^1A&quot;,[597,&quot;^17&quot;,56,536878401]],[&quot;^1A&quot;,[597,&quot;^13&quot;,592,536878401]],[&quot;^1A&quot;,[597,&quot;^12&quot;,56,536878481]],[&quot;^1A&quot;,[597,&quot;^12&quot;,79,536878481]],[&quot;^1A&quot;,[597,&quot;^12&quot;,593,536878481]],[&quot;^1A&quot;,[597,&quot;^D&quot;,[&quot;^ &quot;],536878481]],[&quot;^1A&quot;,[597,&quot;^L&quot;,79,536878481]],[&quot;^1A&quot;,[597,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;redis&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[redis]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878481]],[&quot;^1A&quot;,[597,&quot;^1D&quot;,true,536878401]],[&quot;^1A&quot;,[597,&quot;^?&quot;,&quot;~u6161634e-7a51-4bbb-b793-3f021a02ac0a&quot;,536878401]],[&quot;^1A&quot;,[598,&quot;^S&quot;,[],536880811]],[&quot;^1A&quot;,[598,&quot;^[&quot;,&quot;## 📩消息队列\\nid:: 61616360-1c79-4fe2-9341-e3a630949634&quot;,536880811]],[&quot;^1A&quot;,[598,&quot;^W&quot;,&quot;^1H&quot;,536878411]],[&quot;^1A&quot;,[598,&quot;^14&quot;,2,536880811]],[&quot;^1A&quot;,[598,&quot;^K&quot;,609,536878489]],[&quot;^1A&quot;,[598,&quot;^X&quot;,1,536880811]],[&quot;^1A&quot;,[598,&quot;^17&quot;,56,536878411]],[&quot;^1A&quot;,[598,&quot;^13&quot;,617,536878906]],[&quot;^1A&quot;,[598,&quot;^12&quot;,56,536880811]],[&quot;^1A&quot;,[598,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;61616360-1c79-4fe2-9341-e3a630949634&quot;],536880811]],[&quot;^1A&quot;,[598,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536880811]],[&quot;^1A&quot;,[598,&quot;^1M&quot;,2,536878417]],[&quot;^1A&quot;,[598,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;📩消息队列&quot;]],536880811]],[&quot;^1A&quot;,[598,&quot;^15&quot;,&quot;^1N&quot;,536880811]],[&quot;^1A&quot;,[598,&quot;^1D&quot;,true,536878880]],[&quot;^1A&quot;,[598,&quot;^?&quot;,&quot;~u61616360-1c79-4fe2-9341-e3a630949634&quot;,536878411]],[&quot;^1A&quot;,[599,&quot;^E&quot;,false,536878423]],[&quot;^1A&quot;,[599,&quot;^19&quot;,&quot;message-queue&quot;,536878423]],[&quot;^1A&quot;,[599,&quot;^1=&quot;,&quot;message-queue&quot;,536878423]],[&quot;^1A&quot;,[599,&quot;^?&quot;,&quot;~u6161638f-21cb-44f6-8ff4-86d3e7e3dca0&quot;,536878423]],[&quot;^1A&quot;,[600,&quot;^E&quot;,false,536878426]],[&quot;^1A&quot;,[600,&quot;^19&quot;,&quot;messagequeue&quot;,536878426]],[&quot;^1A&quot;,[600,&quot;^1=&quot;,&quot;messagequeue&quot;,536878426]],[&quot;^1A&quot;,[600,&quot;^?&quot;,&quot;~u6161639b-9886-45e8-8ffd-f02a63d6232e&quot;,536878426]],[&quot;^1A&quot;,[601,&quot;^S&quot;,[],536878588]],[&quot;^1A&quot;,[601,&quot;^[&quot;,&quot;[[kafka]]&quot;,536878437]],[&quot;^1A&quot;,[601,&quot;^W&quot;,&quot;^1H&quot;,536878430]],[&quot;^1A&quot;,[601,&quot;^K&quot;,598,536878430]],[&quot;^1A&quot;,[601,&quot;^X&quot;,1,536878588]],[&quot;^1A&quot;,[601,&quot;^17&quot;,56,536878430]],[&quot;^1A&quot;,[601,&quot;^13&quot;,598,536878431]],[&quot;^1A&quot;,[601,&quot;^12&quot;,56,536878588]],[&quot;^1A&quot;,[601,&quot;^12&quot;,75,536878588]],[&quot;^1A&quot;,[601,&quot;^D&quot;,[&quot;^ &quot;],536878588]],[&quot;^1A&quot;,[601,&quot;^L&quot;,75,536878588]],[&quot;^1A&quot;,[601,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;kafka&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[kafka]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878588]],[&quot;^1A&quot;,[601,&quot;^1D&quot;,true,536878430]],[&quot;^1A&quot;,[601,&quot;^?&quot;,&quot;~u616163a2-d8fc-4f78-93d8-48413e4bc6cd&quot;,536878430]],[&quot;^1A&quot;,[603,&quot;^E&quot;,false,536878453]],[&quot;^1A&quot;,[603,&quot;^19&quot;,&quot;language&quot;,536878453]],[&quot;^1A&quot;,[603,&quot;^1=&quot;,&quot;language&quot;,536878453]],[&quot;^1A&quot;,[603,&quot;^?&quot;,&quot;~u61616412-0863-4f87-84dc-eaa99ecf40f5&quot;,536878453]],[&quot;^1A&quot;,[606,&quot;^E&quot;,false,536878470]],[&quot;^1A&quot;,[606,&quot;^19&quot;,&quot;clojure&quot;,536878470]],[&quot;^1A&quot;,[606,&quot;^1=&quot;,&quot;clojure&quot;,536878470]],[&quot;^1A&quot;,[606,&quot;^?&quot;,&quot;~u61616425-f26e-471b-afa1-a50840b914c6&quot;,536878470]],[&quot;^1A&quot;,[607,&quot;^S&quot;,[],536878477]],[&quot;^1A&quot;,[607,&quot;^[&quot;,&quot;&quot;,536878477]],[&quot;^1A&quot;,[607,&quot;^W&quot;,&quot;^1H&quot;,536878477]],[&quot;^1A&quot;,[607,&quot;^E&quot;,false,536878477]],[&quot;^1A&quot;,[607,&quot;^K&quot;,593,536878477]],[&quot;^1A&quot;,[607,&quot;^X&quot;,1,536878477]],[&quot;^1A&quot;,[607,&quot;^17&quot;,593,536878477]],[&quot;^1A&quot;,[607,&quot;^13&quot;,593,536878477]],[&quot;^1A&quot;,[607,&quot;^D&quot;,[&quot;^ &quot;],536878477]],[&quot;^1A&quot;,[607,&quot;^Z&quot;,[],536878477]],[&quot;^1A&quot;,[607,&quot;^1D&quot;,true,536878477]],[&quot;^1A&quot;,[607,&quot;^?&quot;,&quot;~u61616481-9249-450b-9813-d9fb4bcd57bd&quot;,536878477]],[&quot;^1A&quot;,[609,&quot;^S&quot;,[],536880808]],[&quot;^1A&quot;,[609,&quot;^[&quot;,&quot;## 📜编程语言\\nid:: 493a570f-0b56-44d3-946d-b344e88383d6&quot;,536880808]],[&quot;^1A&quot;,[609,&quot;^W&quot;,&quot;^1H&quot;,536878489]],[&quot;^1A&quot;,[609,&quot;^14&quot;,2,536880808]],[&quot;^1A&quot;,[609,&quot;^K&quot;,592,536878490]],[&quot;^1A&quot;,[609,&quot;^X&quot;,1,536880808]],[&quot;^1A&quot;,[609,&quot;^17&quot;,56,536878489]],[&quot;^1A&quot;,[609,&quot;^13&quot;,617,536878906]],[&quot;^1A&quot;,[609,&quot;^12&quot;,56,536880808]],[&quot;^1A&quot;,[609,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;493a570f-0b56-44d3-946d-b344e88383d6&quot;],536880808]],[&quot;^1A&quot;,[609,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536880808]],[&quot;^1A&quot;,[609,&quot;^1M&quot;,2,536878489]],[&quot;^1A&quot;,[609,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;📜编程语言&quot;]],536880808]],[&quot;^1A&quot;,[609,&quot;^15&quot;,&quot;^1N&quot;,536880808]],[&quot;^1A&quot;,[609,&quot;^1D&quot;,true,536878870]],[&quot;^1A&quot;,[609,&quot;^?&quot;,&quot;~u493a570f-0b56-44d3-946d-b344e88383d6&quot;,536878489]],[&quot;^1A&quot;,[610,&quot;^S&quot;,[],536878489]],[&quot;^1A&quot;,[610,&quot;^[&quot;,&quot;[[java]]&quot;,536878489]],[&quot;^1A&quot;,[610,&quot;^W&quot;,&quot;^1H&quot;,536878489]],[&quot;^1A&quot;,[610,&quot;^K&quot;,609,536878489]],[&quot;^1A&quot;,[610,&quot;^X&quot;,1,536878489]],[&quot;^1A&quot;,[610,&quot;^17&quot;,56,536878489]],[&quot;^1A&quot;,[610,&quot;^13&quot;,609,536878489]],[&quot;^1A&quot;,[610,&quot;^12&quot;,56,536878489]],[&quot;^1A&quot;,[610,&quot;^12&quot;,64,536878489]],[&quot;^1A&quot;,[610,&quot;^12&quot;,603,536878489]],[&quot;^1A&quot;,[610,&quot;^D&quot;,[&quot;^ &quot;],536878489]],[&quot;^1A&quot;,[610,&quot;^L&quot;,64,536878489]],[&quot;^1A&quot;,[610,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;java&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[java]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878489]],[&quot;^1A&quot;,[610,&quot;^1D&quot;,true,536878489]],[&quot;^1A&quot;,[610,&quot;^?&quot;,&quot;~u5c859e5e-4100-4d7c-b579-8119566280fe&quot;,536878489]],[&quot;^1A&quot;,[611,&quot;^S&quot;,[],536878489]],[&quot;^1A&quot;,[611,&quot;^[&quot;,&quot;[[clojure]]&quot;,536878489]],[&quot;^1A&quot;,[611,&quot;^W&quot;,&quot;^1H&quot;,536878489]],[&quot;^1A&quot;,[611,&quot;^K&quot;,610,536878489]],[&quot;^1A&quot;,[611,&quot;^X&quot;,1,536878489]],[&quot;^1A&quot;,[611,&quot;^17&quot;,56,536878489]],[&quot;^1A&quot;,[611,&quot;^13&quot;,609,536878489]],[&quot;^1A&quot;,[611,&quot;^12&quot;,56,536878489]],[&quot;^1A&quot;,[611,&quot;^12&quot;,603,536878489]],[&quot;^1A&quot;,[611,&quot;^12&quot;,606,536878489]],[&quot;^1A&quot;,[611,&quot;^D&quot;,[&quot;^ &quot;],536878489]],[&quot;^1A&quot;,[611,&quot;^L&quot;,606,536878489]],[&quot;^1A&quot;,[611,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;clojure&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[clojure]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878489]],[&quot;^1A&quot;,[611,&quot;^1D&quot;,true,536878489]],[&quot;^1A&quot;,[611,&quot;^?&quot;,&quot;~u872a464d-4693-44f8-9bc3-48e20c0c6da3&quot;,536878489]],[&quot;^1A&quot;,[612,&quot;^S&quot;,[[&quot;Custom&quot;,&quot;pinned&quot;,null,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;nickyadance 09.10.2021@powered by &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Complex&quot;,[&quot;^ &quot;,&quot;^1Y&quot;,&quot;https&quot;,&quot;^1Z&quot;,&quot;github.com/logseq/logseq&quot;]],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;logseq&quot;]],&quot;^1W&quot;,&quot;[logseq](https://github.com/logseq/logseq)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]],&quot;nickyadance 09.10.2021@powered by [logseq](https://github.com/logseq/logseq)\\n&quot;]],536878906]],[&quot;^1A&quot;,[612,&quot;^[&quot;,&quot;#+BEGIN_PINNED\\nnickyadance 09.10.2021@powered by [logseq](https://github.com/logseq/logseq)\\n#+END_PINNED&quot;,536878585]],[&quot;^1A&quot;,[612,&quot;^W&quot;,&quot;^1H&quot;,536878503]],[&quot;^1A&quot;,[612,&quot;^K&quot;,617,536878906]],[&quot;^1A&quot;,[612,&quot;^X&quot;,1,536878906]],[&quot;^1A&quot;,[612,&quot;^17&quot;,56,536878503]],[&quot;^1A&quot;,[612,&quot;^13&quot;,56,536878503]],[&quot;^1A&quot;,[612,&quot;^12&quot;,56,536878906]],[&quot;^1A&quot;,[612,&quot;^D&quot;,[&quot;^ &quot;],536878906]],[&quot;^1A&quot;,[612,&quot;^Z&quot;,[],536878906]],[&quot;^1A&quot;,[612,&quot;^1D&quot;,true,536878503]],[&quot;^1A&quot;,[612,&quot;^?&quot;,&quot;~u616164ae-8311-420f-9a21-d7aac84b03d2&quot;,536878503]],[&quot;^1A&quot;,[613,&quot;^E&quot;,false,536878527]],[&quot;^1A&quot;,[613,&quot;^19&quot;,&quot;essagequeue&quot;,536878527]],[&quot;^1A&quot;,[613,&quot;^1=&quot;,&quot;essagequeue&quot;,536878527]],[&quot;^1A&quot;,[613,&quot;^?&quot;,&quot;~u616164d8-4ce1-440e-8384-b2300957f5d3&quot;,536878527]],[&quot;^1A&quot;,[617,&quot;^S&quot;,[],536878743]],[&quot;^1A&quot;,[617,&quot;^[&quot;,&quot;# Welcome to `Nicky` logseqs &quot;,536878685]],[&quot;^1A&quot;,[617,&quot;^W&quot;,&quot;^1H&quot;,536878685]],[&quot;^1A&quot;,[617,&quot;^14&quot;,1,536878743]],[&quot;^1A&quot;,[617,&quot;^K&quot;,591,536878686]],[&quot;^1A&quot;,[617,&quot;^X&quot;,1,536878743]],[&quot;^1A&quot;,[617,&quot;^17&quot;,56,536878685]],[&quot;^1A&quot;,[617,&quot;^13&quot;,56,536878685]],[&quot;^1A&quot;,[617,&quot;^12&quot;,56,536878743]],[&quot;^1A&quot;,[617,&quot;^1M&quot;,1,536878685]],[&quot;^1A&quot;,[617,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;Welcome to &quot;],[&quot;Code&quot;,&quot;Nicky&quot;],[&quot;Plain&quot;,&quot; logseqs &quot;]],536878743]],[&quot;^1A&quot;,[617,&quot;^15&quot;,&quot;^1N&quot;,536878743]],[&quot;^1A&quot;,[617,&quot;^1D&quot;,false,536878686]],[&quot;^1A&quot;,[617,&quot;^?&quot;,&quot;~u1ab8622c-d17e-458b-8656-7316333e3551&quot;,536878685]],[&quot;^1A&quot;,[618,&quot;^S&quot;,[],536878906]],[&quot;^1A&quot;,[618,&quot;^[&quot;,&quot;## 🎩 关于我\\nid:: 616166d0-86d9-4270-81c8-34b5404119a4&quot;,536878900]],[&quot;^1A&quot;,[618,&quot;^W&quot;,&quot;^1H&quot;,536878702]],[&quot;^1A&quot;,[618,&quot;^14&quot;,2,536878906]],[&quot;^1A&quot;,[618,&quot;^K&quot;,588,536878703]],[&quot;^1A&quot;,[618,&quot;^X&quot;,1,536878906]],[&quot;^1A&quot;,[618,&quot;^17&quot;,56,536878702]],[&quot;^1A&quot;,[618,&quot;^13&quot;,617,536878906]],[&quot;^1A&quot;,[618,&quot;^12&quot;,56,536878906]],[&quot;^1A&quot;,[618,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;616166d0-86d9-4270-81c8-34b5404119a4&quot;],536878906]],[&quot;^1A&quot;,[618,&quot;^1M&quot;,2,536878706]],[&quot;^1A&quot;,[618,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;🎩 关于我&quot;]],536878906]],[&quot;^1A&quot;,[618,&quot;^15&quot;,&quot;^1N&quot;,536878906]],[&quot;^1A&quot;,[618,&quot;^1D&quot;,true,536878900]],[&quot;^1A&quot;,[618,&quot;^?&quot;,&quot;~u616166d0-86d9-4270-81c8-34b5404119a4&quot;,536878702]],[&quot;^1A&quot;,[619,&quot;^S&quot;,[],536878735]],[&quot;^1A&quot;,[619,&quot;^[&quot;,&quot;[[about]]&quot;,536878735]],[&quot;^1A&quot;,[619,&quot;^W&quot;,&quot;^1H&quot;,536878725]],[&quot;^1A&quot;,[619,&quot;^K&quot;,618,536878725]],[&quot;^1A&quot;,[619,&quot;^X&quot;,1,536878735]],[&quot;^1A&quot;,[619,&quot;^17&quot;,56,536878725]],[&quot;^1A&quot;,[619,&quot;^13&quot;,618,536878726]],[&quot;^1A&quot;,[619,&quot;^12&quot;,56,536878735]],[&quot;^1A&quot;,[619,&quot;^12&quot;,620,536878735]],[&quot;^1A&quot;,[619,&quot;^D&quot;,[&quot;^ &quot;],536878735]],[&quot;^1A&quot;,[619,&quot;^L&quot;,620,536878735]],[&quot;^1A&quot;,[619,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;about&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[about]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878735]],[&quot;^1A&quot;,[619,&quot;^1D&quot;,true,536878725]],[&quot;^1A&quot;,[619,&quot;^?&quot;,&quot;~u6161671e-e3a8-4d44-9b32-653a2a4516a9&quot;,536878725]],[&quot;^1A&quot;,[620,&quot;^E&quot;,false,536878735]],[&quot;^1A&quot;,[620,&quot;^19&quot;,&quot;about&quot;,536878735]],[&quot;^1A&quot;,[620,&quot;^1=&quot;,&quot;about&quot;,536878735]],[&quot;^1A&quot;,[620,&quot;^?&quot;,&quot;~u61616729-2b54-4b8f-948d-51fa7651359c&quot;,536878735]],[&quot;^1A&quot;,[622,&quot;^S&quot;,[],536884618]],[&quot;^1A&quot;,[622,&quot;^[&quot;,&quot;## 📚博客\\nid:: 2038de82-8f44-4b1b-baff-e16cb9e5f794&quot;,536884618]],[&quot;^1A&quot;,[622,&quot;^W&quot;,&quot;^1H&quot;,536878748]],[&quot;^1A&quot;,[622,&quot;^14&quot;,2,536884618]],[&quot;^1A&quot;,[622,&quot;^K&quot;,617,536878749]],[&quot;^1A&quot;,[622,&quot;^X&quot;,1,536884618]],[&quot;^1A&quot;,[622,&quot;^17&quot;,56,536878748]],[&quot;^1A&quot;,[622,&quot;^13&quot;,617,536878906]],[&quot;^1A&quot;,[622,&quot;^12&quot;,56,536884618]],[&quot;^1A&quot;,[622,&quot;^D&quot;,[&quot;^ &quot;,&quot;^25&quot;,&quot;2038de82-8f44-4b1b-baff-e16cb9e5f794&quot;],536884618]],[&quot;^1A&quot;,[622,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536884618]],[&quot;^1A&quot;,[622,&quot;^1M&quot;,2,536878748]],[&quot;^1A&quot;,[622,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;📚博客&quot;]],536884618]],[&quot;^1A&quot;,[622,&quot;^15&quot;,&quot;^1N&quot;,536884618]],[&quot;^1A&quot;,[622,&quot;^1D&quot;,true,536878805]],[&quot;^1A&quot;,[622,&quot;^?&quot;,&quot;~u2038de82-8f44-4b1b-baff-e16cb9e5f794&quot;,536878748]],[&quot;^1A&quot;,[623,&quot;^S&quot;,[[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;页面迁移中&quot;],[&quot;Break_Line&quot;]]]]]],536878784]],[&quot;^1A&quot;,[623,&quot;^[&quot;,&quot;&gt; 页面迁移中&quot;,536878784]],[&quot;^1A&quot;,[623,&quot;^W&quot;,&quot;^1H&quot;,536878756]],[&quot;^1A&quot;,[623,&quot;^K&quot;,622,536878756]],[&quot;^1A&quot;,[623,&quot;^X&quot;,1,536878784]],[&quot;^1A&quot;,[623,&quot;^17&quot;,56,536878756]],[&quot;^1A&quot;,[623,&quot;^13&quot;,622,536878757]],[&quot;^1A&quot;,[623,&quot;^12&quot;,56,536878784]],[&quot;^1A&quot;,[623,&quot;^D&quot;,[&quot;^ &quot;],536878784]],[&quot;^1A&quot;,[623,&quot;^Z&quot;,[],536878784]],[&quot;^1A&quot;,[623,&quot;^1D&quot;,true,536878756]],[&quot;^1A&quot;,[623,&quot;^?&quot;,&quot;~u61616763-3dc5-45b4-9e28-2a22b9ec0aa1&quot;,536878756]],[&quot;^1A&quot;,[624,&quot;^S&quot;,[],536878866]],[&quot;^1A&quot;,[624,&quot;^[&quot;,&quot;((616160a2-40e3-442c-aeea-007d60469f10))&quot;,536878863]],[&quot;^1A&quot;,[624,&quot;^W&quot;,&quot;^1H&quot;,536878812]],[&quot;^1A&quot;,[624,&quot;^K&quot;,133,536878812]],[&quot;^1A&quot;,[624,&quot;^X&quot;,1,536878866]],[&quot;^1A&quot;,[624,&quot;^17&quot;,71,536878812]],[&quot;^1A&quot;,[624,&quot;^13&quot;,71,536878812]],[&quot;^1A&quot;,[624,&quot;^12&quot;,71,536878866]],[&quot;^1A&quot;,[624,&quot;^D&quot;,[&quot;^ &quot;],536878866]],[&quot;^1A&quot;,[624,&quot;^L&quot;,592,536878866]],[&quot;^1A&quot;,[624,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;616160a2-40e3-442c-aeea-007d60469f10&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((616160a2-40e3-442c-aeea-007d60469f10))&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878866]],[&quot;^1A&quot;,[624,&quot;^1D&quot;,true,536878812]],[&quot;^1A&quot;,[624,&quot;^?&quot;,&quot;~u616167cb-25b8-4867-94e7-963c6393296c&quot;,536878812]],[&quot;^1A&quot;,[625,&quot;^S&quot;,[],536878876]],[&quot;^1A&quot;,[625,&quot;^[&quot;,&quot;((493a570f-0b56-44d3-946d-b344e88383d6))&quot;,536878871]],[&quot;^1A&quot;,[625,&quot;^W&quot;,&quot;^1H&quot;,536878867]],[&quot;^1A&quot;,[625,&quot;^K&quot;,624,536878867]],[&quot;^1A&quot;,[625,&quot;^X&quot;,1,536878876]],[&quot;^1A&quot;,[625,&quot;^17&quot;,71,536878867]],[&quot;^1A&quot;,[625,&quot;^13&quot;,71,536878867]],[&quot;^1A&quot;,[625,&quot;^12&quot;,71,536878876]],[&quot;^1A&quot;,[625,&quot;^D&quot;,[&quot;^ &quot;],536878876]],[&quot;^1A&quot;,[625,&quot;^L&quot;,609,536878876]],[&quot;^1A&quot;,[625,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;493a570f-0b56-44d3-946d-b344e88383d6&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((493a570f-0b56-44d3-946d-b344e88383d6))&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878876]],[&quot;^1A&quot;,[625,&quot;^1D&quot;,true,536878867]],[&quot;^1A&quot;,[625,&quot;^?&quot;,&quot;~u61616866-d360-4492-9e47-823e4a16d96c&quot;,536878867]],[&quot;^1A&quot;,[626,&quot;^S&quot;,[],536878886]],[&quot;^1A&quot;,[626,&quot;^[&quot;,&quot;((61616360-1c79-4fe2-9341-e3a630949634))&quot;,536878881]],[&quot;^1A&quot;,[626,&quot;^W&quot;,&quot;^1H&quot;,536878877]],[&quot;^1A&quot;,[626,&quot;^K&quot;,625,536878877]],[&quot;^1A&quot;,[626,&quot;^X&quot;,1,536878886]],[&quot;^1A&quot;,[626,&quot;^17&quot;,71,536878877]],[&quot;^1A&quot;,[626,&quot;^13&quot;,71,536878877]],[&quot;^1A&quot;,[626,&quot;^12&quot;,71,536878886]],[&quot;^1A&quot;,[626,&quot;^D&quot;,[&quot;^ &quot;],536878886]],[&quot;^1A&quot;,[626,&quot;^L&quot;,598,536878886]],[&quot;^1A&quot;,[626,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;61616360-1c79-4fe2-9341-e3a630949634&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((61616360-1c79-4fe2-9341-e3a630949634))&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878886]],[&quot;^1A&quot;,[626,&quot;^1D&quot;,true,536878877]],[&quot;^1A&quot;,[626,&quot;^?&quot;,&quot;~u61616871-e1e2-49f2-b7ca-f3c7918c48e5&quot;,536878877]],[&quot;^1A&quot;,[627,&quot;^S&quot;,[],536878896]],[&quot;^1A&quot;,[627,&quot;^[&quot;,&quot;((61615b15-50c3-4013-9f19-1c149525fed0))&quot;,536878893]],[&quot;^1A&quot;,[627,&quot;^W&quot;,&quot;^1H&quot;,536878887]],[&quot;^1A&quot;,[627,&quot;^K&quot;,626,536878887]],[&quot;^1A&quot;,[627,&quot;^X&quot;,1,536878896]],[&quot;^1A&quot;,[627,&quot;^17&quot;,71,536878887]],[&quot;^1A&quot;,[627,&quot;^13&quot;,71,536878887]],[&quot;^1A&quot;,[627,&quot;^12&quot;,71,536878896]],[&quot;^1A&quot;,[627,&quot;^D&quot;,[&quot;^ &quot;],536878896]],[&quot;^1A&quot;,[627,&quot;^L&quot;,588,536878896]],[&quot;^1A&quot;,[627,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;61615b15-50c3-4013-9f19-1c149525fed0&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((61615b15-50c3-4013-9f19-1c149525fed0))&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878896]],[&quot;^1A&quot;,[627,&quot;^1D&quot;,true,536878887]],[&quot;^1A&quot;,[627,&quot;^?&quot;,&quot;~u6161687e-afb2-4133-8161-857af90eb02f&quot;,536878887]],[&quot;^1A&quot;,[628,&quot;^S&quot;,[],536878901]],[&quot;^1A&quot;,[628,&quot;^[&quot;,&quot;((616166d0-86d9-4270-81c8-34b5404119a4))&quot;,536878901]],[&quot;^1A&quot;,[628,&quot;^W&quot;,&quot;^1H&quot;,536878897]],[&quot;^1A&quot;,[628,&quot;^K&quot;,627,536878897]],[&quot;^1A&quot;,[628,&quot;^X&quot;,1,536878901]],[&quot;^1A&quot;,[628,&quot;^17&quot;,71,536878897]],[&quot;^1A&quot;,[628,&quot;^13&quot;,71,536878897]],[&quot;^1A&quot;,[628,&quot;^12&quot;,71,536878901]],[&quot;^1A&quot;,[628,&quot;^D&quot;,[&quot;^ &quot;],536878901]],[&quot;^1A&quot;,[628,&quot;^L&quot;,618,536878901]],[&quot;^1A&quot;,[628,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;616166d0-86d9-4270-81c8-34b5404119a4&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((616166d0-86d9-4270-81c8-34b5404119a4))&quot;,&quot;^1X&quot;,&quot;&quot;]]],536878901]],[&quot;^1A&quot;,[628,&quot;^1D&quot;,true,536878897]],[&quot;^1A&quot;,[628,&quot;^?&quot;,&quot;~u61616899-2473-408d-94da-95d30d15bc07&quot;,536878897]],[&quot;^1A&quot;,[630,&quot;^E&quot;,false,536878920]],[&quot;^1A&quot;,[630,&quot;^19&quot;,&quot;cards&quot;,536878920]],[&quot;^1A&quot;,[630,&quot;^1=&quot;,&quot;cards&quot;,536878920]],[&quot;^1A&quot;,[630,&quot;^?&quot;,&quot;~u6163a296-9903-40b8-95dc-47233865af5a&quot;,536878920]],[&quot;^1A&quot;,[631,&quot;^S&quot;,[],536878930]],[&quot;^1A&quot;,[631,&quot;^[&quot;,&quot;&quot;,536878930]],[&quot;^1A&quot;,[631,&quot;^W&quot;,&quot;^1H&quot;,536878930]],[&quot;^1A&quot;,[631,&quot;^E&quot;,false,536878930]],[&quot;^1A&quot;,[631,&quot;^K&quot;,630,536878930]],[&quot;^1A&quot;,[631,&quot;^X&quot;,1,536878930]],[&quot;^1A&quot;,[631,&quot;^17&quot;,630,536878930]],[&quot;^1A&quot;,[631,&quot;^13&quot;,630,536878930]],[&quot;^1A&quot;,[631,&quot;^D&quot;,[&quot;^ &quot;],536878930]],[&quot;^1A&quot;,[631,&quot;^Z&quot;,[],536878930]],[&quot;^1A&quot;,[631,&quot;^1D&quot;,true,536878930]],[&quot;^1A&quot;,[631,&quot;^?&quot;,&quot;~u6163a34e-be7e-4aa3-9c9a-7278fd123805&quot;,536878930]],[&quot;^1A&quot;,[632,&quot;^E&quot;,false,536878934]],[&quot;^1A&quot;,[632,&quot;^19&quot;,&quot;card&quot;,536878934]],[&quot;^1A&quot;,[632,&quot;^1=&quot;,&quot;card&quot;,536878934]],[&quot;^1A&quot;,[632,&quot;^?&quot;,&quot;~u6163a358-eab5-4864-9bab-4a2f2b43ef26&quot;,536878934]],[&quot;^1A&quot;,[635,&quot;^E&quot;,false,536879025]],[&quot;^1A&quot;,[635,&quot;^19&quot;,&quot;sql允许定义`虚关系`&quot;,536879025]],[&quot;^1A&quot;,[635,&quot;^1=&quot;,&quot;SQL允许定义`虚关系`&quot;,536879025]],[&quot;^1A&quot;,[635,&quot;^?&quot;,&quot;~u6163a6df-695f-4acd-96b4-9ae9b4d57c0f&quot;,536879025]],[&quot;^1A&quot;,[636,&quot;^E&quot;,false,536879025]],[&quot;^1A&quot;,[636,&quot;^19&quot;,&quot;在概念上包含查询的结果&quot;,536879025]],[&quot;^1A&quot;,[636,&quot;^1=&quot;,&quot;在概念上包含查询的结果&quot;,536879025]],[&quot;^1A&quot;,[636,&quot;^?&quot;,&quot;~u6163a6df-6ec1-4bcd-92c5-ead23e546de3&quot;,536879025]],[&quot;^1A&quot;,[637,&quot;^E&quot;,false,536879025]],[&quot;^1A&quot;,[637,&quot;^19&quot;,&quot;但实际上不存储查询结果&quot;,536879025]],[&quot;^1A&quot;,[637,&quot;^1=&quot;,&quot;但实际上不存储查询结果&quot;,536879025]],[&quot;^1A&quot;,[637,&quot;^?&quot;,&quot;~u6163a6df-2ef2-4b13-87b7-07cea651ce4a&quot;,536879025]],[&quot;^1A&quot;,[638,&quot;^E&quot;,false,536879025]],[&quot;^1A&quot;,[638,&quot;^19&quot;,&quot;而是当使用`虚关系`时才通过执行查询被计算出来。&quot;,536879025]],[&quot;^1A&quot;,[638,&quot;^1=&quot;,&quot;而是当使用`虚关系`时才通过执行查询被计算出来。&quot;,536879025]],[&quot;^1A&quot;,[638,&quot;^?&quot;,&quot;~u6163a6df-7e4b-4a1b-b88b-e3e1574cdcd4&quot;,536879025]],[&quot;^1A&quot;,[639,&quot;^S&quot;,[],536879029]],[&quot;^1A&quot;,[639,&quot;^[&quot;,&quot;&quot;,536879029]],[&quot;^1A&quot;,[639,&quot;^W&quot;,&quot;^1H&quot;,536879029]],[&quot;^1A&quot;,[639,&quot;^E&quot;,false,536879029]],[&quot;^1A&quot;,[639,&quot;^K&quot;,635,536879029]],[&quot;^1A&quot;,[639,&quot;^X&quot;,1,536879029]],[&quot;^1A&quot;,[639,&quot;^17&quot;,635,536879029]],[&quot;^1A&quot;,[639,&quot;^13&quot;,635,536879029]],[&quot;^1A&quot;,[639,&quot;^D&quot;,[&quot;^ &quot;],536879029]],[&quot;^1A&quot;,[639,&quot;^Z&quot;,[],536879029]],[&quot;^1A&quot;,[639,&quot;^1D&quot;,true,536879029]],[&quot;^1A&quot;,[639,&quot;^?&quot;,&quot;~u6163a6e2-868d-48bc-917d-7b916b720868&quot;,536879029]],[&quot;^1A&quot;,[640,&quot;^E&quot;,false,536879039]],[&quot;^1A&quot;,[640,&quot;^19&quot;,&quot;而是当使用`虚关系`时才通过执行查询被计算出来。::&quot;,536879039]],[&quot;^1A&quot;,[640,&quot;^1=&quot;,&quot;而是当使用`虚关系`时才通过执行查询被计算出来。::&quot;,536879039]],[&quot;^1A&quot;,[640,&quot;^?&quot;,&quot;~u6163a6fa-2841-4180-83fa-46d62b1fad54&quot;,536879039]],[&quot;^1A&quot;,[642,&quot;^E&quot;,false,536879124]],[&quot;^1A&quot;,[642,&quot;^19&quot;,&quot;\\&quot;sql允许定义`虚关系`&quot;,536879124]],[&quot;^1A&quot;,[642,&quot;^1=&quot;,&quot;\\&quot;SQL允许定义`虚关系`&quot;,536879124]],[&quot;^1A&quot;,[642,&quot;^?&quot;,&quot;~u6163a846-173a-4d66-9aad-7a41e52413ed&quot;,536879124]],[&quot;^1A&quot;,[650,&quot;^E&quot;,false,536879357]],[&quot;^1A&quot;,[650,&quot;^19&quot;,&quot;视图&quot;,536879357]],[&quot;^1A&quot;,[650,&quot;^1=&quot;,&quot;视图&quot;,536879357]],[&quot;^1A&quot;,[650,&quot;^?&quot;,&quot;~u6163afe6-8b0e-43ab-a200-1cda321efd66&quot;,536879357]],[&quot;^1A&quot;,[652,&quot;^E&quot;,false,536879410]],[&quot;^1A&quot;,[652,&quot;^19&quot;,&quot;]&quot;,536879410]],[&quot;^1A&quot;,[652,&quot;^1=&quot;,&quot;]&quot;,536879410]],[&quot;^1A&quot;,[652,&quot;^?&quot;,&quot;~u6163b140-6381-4deb-873f-5ee4d69c6a6f&quot;,536879410]],[&quot;^1A&quot;,[653,&quot;^E&quot;,false,536879413]],[&quot;^1A&quot;,[653,&quot;^19&quot;,&quot;视图]&quot;,536879413]],[&quot;^1A&quot;,[653,&quot;^1=&quot;,&quot;视图]&quot;,536879413]],[&quot;^1A&quot;,[653,&quot;^?&quot;,&quot;~u6163b141-5942-439e-98fa-a863c1e6c740&quot;,536879413]],[&quot;^1A&quot;,[654,&quot;^E&quot;,false,536879420]],[&quot;^1A&quot;,[654,&quot;^19&quot;,&quot;f&quot;,536879420]],[&quot;^1A&quot;,[654,&quot;^1=&quot;,&quot;F&quot;,536879420]],[&quot;^1A&quot;,[654,&quot;^?&quot;,&quot;~u6163b14b-4b93-4326-94f3-28033114846c&quot;,536879420]],[&quot;^1A&quot;,[655,&quot;^E&quot;,false,536879449]],[&quot;^1A&quot;,[655,&quot;^19&quot;,&quot;物化视图&quot;,536879449]],[&quot;^1A&quot;,[655,&quot;^1=&quot;,&quot;物化视图&quot;,536879449]],[&quot;^1A&quot;,[655,&quot;^?&quot;,&quot;~u6163b243-5972-43db-8973-6bafc6d1a94d&quot;,536879449]],[&quot;^1A&quot;,[658,&quot;^E&quot;,false,536879568]],[&quot;^1A&quot;,[658,&quot;^19&quot;,&quot;带参数的视图&quot;,536879568]],[&quot;^1A&quot;,[658,&quot;^1=&quot;,&quot;带参数的视图&quot;,536879568]],[&quot;^1A&quot;,[658,&quot;^?&quot;,&quot;~u6163b3ef-034a-4d15-b63e-b1dc112c0faf&quot;,536879568]],[&quot;^1A&quot;,[664,&quot;^S&quot;,[],536879613]],[&quot;^1A&quot;,[664,&quot;^[&quot;,&quot;&quot;,536879613]],[&quot;^1A&quot;,[664,&quot;^W&quot;,&quot;^1H&quot;,536879613]],[&quot;^1A&quot;,[664,&quot;^E&quot;,false,536879613]],[&quot;^1A&quot;,[664,&quot;^K&quot;,658,536879613]],[&quot;^1A&quot;,[664,&quot;^X&quot;,1,536879613]],[&quot;^1A&quot;,[664,&quot;^17&quot;,658,536879613]],[&quot;^1A&quot;,[664,&quot;^13&quot;,658,536879613]],[&quot;^1A&quot;,[664,&quot;^D&quot;,[&quot;^ &quot;],536879613]],[&quot;^1A&quot;,[664,&quot;^Z&quot;,[],536879613]],[&quot;^1A&quot;,[664,&quot;^1D&quot;,true,536879613]],[&quot;^1A&quot;,[664,&quot;^?&quot;,&quot;~u6163b51e-eff1-4885-8a86-3030ba85d1ea&quot;,536879613]],[&quot;^1A&quot;,[665,&quot;^E&quot;,false,536879614]],[&quot;^1A&quot;,[665,&quot;^19&quot;,&quot;**带参数的视图&quot;,536879614]],[&quot;^1A&quot;,[665,&quot;^1=&quot;,&quot;**带参数的视图&quot;,536879614]],[&quot;^1A&quot;,[665,&quot;^?&quot;,&quot;~u6163b525-2cc1-4df3-81f5-96fad1b83a5e&quot;,536879614]],[&quot;^1A&quot;,[666,&quot;^E&quot;,false,536879617]],[&quot;^1A&quot;,[666,&quot;^19&quot;,&quot;**带参数的视图**&quot;,536879617]],[&quot;^1A&quot;,[666,&quot;^1=&quot;,&quot;**带参数的视图**&quot;,536879617]],[&quot;^1A&quot;,[666,&quot;^?&quot;,&quot;~u6163b52c-b38c-40f5-a33a-bd517d27c9ac&quot;,536879617]],[&quot;^1A&quot;,[667,&quot;^S&quot;,[],536879645]],[&quot;^1A&quot;,[667,&quot;^[&quot;,&quot;&quot;,536879645]],[&quot;^1A&quot;,[667,&quot;^W&quot;,&quot;^1H&quot;,536879645]],[&quot;^1A&quot;,[667,&quot;^E&quot;,false,536879645]],[&quot;^1A&quot;,[667,&quot;^K&quot;,650,536879645]],[&quot;^1A&quot;,[667,&quot;^X&quot;,1,536879645]],[&quot;^1A&quot;,[667,&quot;^17&quot;,650,536879645]],[&quot;^1A&quot;,[667,&quot;^13&quot;,650,536879645]],[&quot;^1A&quot;,[667,&quot;^D&quot;,[&quot;^ &quot;],536879645]],[&quot;^1A&quot;,[667,&quot;^Z&quot;,[],536879645]],[&quot;^1A&quot;,[667,&quot;^1D&quot;,true,536879645]],[&quot;^1A&quot;,[667,&quot;^?&quot;,&quot;~u6163b58a-d880-49ed-9736-499543dda439&quot;,536879645]],[&quot;^1A&quot;,[668,&quot;^S&quot;,[],536879649]],[&quot;^1A&quot;,[668,&quot;^[&quot;,&quot;&quot;,536879649]],[&quot;^1A&quot;,[668,&quot;^W&quot;,&quot;^1H&quot;,536879649]],[&quot;^1A&quot;,[668,&quot;^E&quot;,false,536879649]],[&quot;^1A&quot;,[668,&quot;^K&quot;,655,536879649]],[&quot;^1A&quot;,[668,&quot;^X&quot;,1,536879649]],[&quot;^1A&quot;,[668,&quot;^17&quot;,655,536879649]],[&quot;^1A&quot;,[668,&quot;^13&quot;,655,536879649]],[&quot;^1A&quot;,[668,&quot;^D&quot;,[&quot;^ &quot;],536879649]],[&quot;^1A&quot;,[668,&quot;^Z&quot;,[],536879649]],[&quot;^1A&quot;,[668,&quot;^1D&quot;,true,536879649]],[&quot;^1A&quot;,[668,&quot;^?&quot;,&quot;~u6163b5ad-ede1-4362-a1ae-201c2ec0177e&quot;,536879649]],[&quot;^1A&quot;,[670,&quot;^S&quot;,[],536879880]],[&quot;^1A&quot;,[670,&quot;^[&quot;,&quot;[[博客格式定义]]&quot;,536879951]],[&quot;^1A&quot;,[670,&quot;^W&quot;,&quot;^1H&quot;,536879877]],[&quot;^1A&quot;,[670,&quot;^K&quot;,418,536879877]],[&quot;^1A&quot;,[670,&quot;^X&quot;,1,536879880]],[&quot;^1A&quot;,[670,&quot;^17&quot;,56,536879877]],[&quot;^1A&quot;,[670,&quot;^13&quot;,588,536879877]],[&quot;^1A&quot;,[670,&quot;^12&quot;,56,536879880]],[&quot;^1A&quot;,[670,&quot;^12&quot;,671,536879880]],[&quot;^1A&quot;,[670,&quot;^D&quot;,[&quot;^ &quot;],536879880]],[&quot;^1A&quot;,[670,&quot;^L&quot;,671,536879880]],[&quot;^1A&quot;,[670,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;博客格式定义&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[博客格式定义]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536879951]],[&quot;^1A&quot;,[670,&quot;^1D&quot;,true,536879877]],[&quot;^1A&quot;,[670,&quot;^?&quot;,&quot;~u6163ceb7-d1fb-4a37-ac89-a928f57ec2ae&quot;,536879877]],[&quot;^1A&quot;,[671,&quot;^Q&quot;,1633930947797,536880565]],[&quot;^1A&quot;,[671,&quot;^E&quot;,false,536879880]],[&quot;^1A&quot;,[671,&quot;^19&quot;,&quot;博客格式定义&quot;,536879949]],[&quot;^1A&quot;,[671,&quot;^1=&quot;,&quot;博客格式定义&quot;,536879949]],[&quot;^1A&quot;,[671,&quot;^1D&quot;,true,536880565]],[&quot;^1A&quot;,[671,&quot;^G&quot;,1634020380354,536883753]],[&quot;^1A&quot;,[671,&quot;^?&quot;,&quot;~u6163ceba-2268-4b82-bb40-c40569cfe5ec&quot;,536879880]],[&quot;^1A&quot;,[672,&quot;^S&quot;,[],536880825]],[&quot;^1A&quot;,[672,&quot;^[&quot;,&quot;术语模板&quot;,536880615]],[&quot;^1A&quot;,[672,&quot;^W&quot;,&quot;^1H&quot;,536879884]],[&quot;^1A&quot;,[672,&quot;^E&quot;,false,536879884]],[&quot;^1A&quot;,[672,&quot;^K&quot;,757,536880825]],[&quot;^1A&quot;,[672,&quot;^X&quot;,1,536880825]],[&quot;^1A&quot;,[672,&quot;^17&quot;,671,536879884]],[&quot;^1A&quot;,[672,&quot;^13&quot;,671,536879884]],[&quot;^1A&quot;,[672,&quot;^12&quot;,671,536880825]],[&quot;^1A&quot;,[672,&quot;^D&quot;,[&quot;^ &quot;],536880825]],[&quot;^1A&quot;,[672,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;术语模板&quot;]],536880825]],[&quot;^1A&quot;,[672,&quot;^1D&quot;,true,536879884]],[&quot;^1A&quot;,[672,&quot;^?&quot;,&quot;~u6163cebb-2528-4062-b684-8ca997517847&quot;,536879884]],[&quot;^1A&quot;,[674,&quot;^S&quot;,[],536883753]],[&quot;^1A&quot;,[674,&quot;^[&quot;,&quot;**`t`** 1。\\ntemplate:: fWord&quot;,536883753]],[&quot;^1A&quot;,[674,&quot;^W&quot;,&quot;^1H&quot;,536879890]],[&quot;^1A&quot;,[674,&quot;^E&quot;,false,536879890]],[&quot;^1A&quot;,[674,&quot;^K&quot;,672,536879890]],[&quot;^1A&quot;,[674,&quot;^X&quot;,1,536883753]],[&quot;^1A&quot;,[674,&quot;^17&quot;,671,536879890]],[&quot;^1A&quot;,[674,&quot;^13&quot;,672,536879891]],[&quot;^1A&quot;,[674,&quot;^12&quot;,671,536883753]],[&quot;^1A&quot;,[674,&quot;^D&quot;,[&quot;^ &quot;,&quot;~:template&quot;,&quot;fWord&quot;],536883753]],[&quot;^1A&quot;,[674,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^2E&quot;]],536879925]],[&quot;^1A&quot;,[674,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;t&quot;]]]],[&quot;Plain&quot;,&quot; 1。&quot;]],536883753]],[&quot;^1A&quot;,[674,&quot;^1D&quot;,true,536879890]],[&quot;^1A&quot;,[674,&quot;^?&quot;,&quot;~u6163cec4-a3bd-4da1-9734-577c9f48d96a&quot;,536879890]],[&quot;^1A&quot;,[676,&quot;^S&quot;,[],536879933]],[&quot;^1A&quot;,[676,&quot;^[&quot;,&quot;&quot;,536879933]],[&quot;^1A&quot;,[676,&quot;^W&quot;,&quot;^1H&quot;,536879929]],[&quot;^1A&quot;,[676,&quot;^K&quot;,674,536879930]],[&quot;^1A&quot;,[676,&quot;^X&quot;,1,536879933]],[&quot;^1A&quot;,[676,&quot;^17&quot;,671,536879929]],[&quot;^1A&quot;,[676,&quot;^13&quot;,672,536879929]],[&quot;^1A&quot;,[676,&quot;^12&quot;,671,536879933]],[&quot;^1A&quot;,[676,&quot;^D&quot;,[&quot;^ &quot;],536879933]],[&quot;^1A&quot;,[676,&quot;~:block/repo&quot;,&quot;logseq_local_/Users/wuyi/Nicky/mygithub/logseq&quot;,536879929]],[&quot;^1A&quot;,[676,&quot;^Z&quot;,[],536879933]],[&quot;^1A&quot;,[676,&quot;^1D&quot;,true,536879929]],[&quot;^1A&quot;,[676,&quot;^?&quot;,&quot;~udb32f50e-5f95-4092-8f58-64d87be5fdf1&quot;,536879929]],[&quot;^1A&quot;,[677,&quot;^S&quot;,[],536879969]],[&quot;^1A&quot;,[677,&quot;^[&quot;,&quot;&quot;,536879969]],[&quot;^1A&quot;,[677,&quot;^W&quot;,&quot;^1H&quot;,536879969]],[&quot;^1A&quot;,[677,&quot;^E&quot;,false,536879969]],[&quot;^1A&quot;,[677,&quot;^K&quot;,606,536879969]],[&quot;^1A&quot;,[677,&quot;^X&quot;,1,536879969]],[&quot;^1A&quot;,[677,&quot;^17&quot;,606,536879969]],[&quot;^1A&quot;,[677,&quot;^13&quot;,606,536879969]],[&quot;^1A&quot;,[677,&quot;^D&quot;,[&quot;^ &quot;],536879969]],[&quot;^1A&quot;,[677,&quot;^Z&quot;,[],536879969]],[&quot;^1A&quot;,[677,&quot;^1D&quot;,true,536879969]],[&quot;^1A&quot;,[677,&quot;^?&quot;,&quot;~u6163d068-2eed-4267-8036-e2bde87e2cbc&quot;,536879969]],[&quot;^1A&quot;,[692,&quot;^E&quot;,false,536880384]],[&quot;^1A&quot;,[692,&quot;^19&quot;,&quot;tag&quot;,536880384]],[&quot;^1A&quot;,[692,&quot;^1=&quot;,&quot;tag&quot;,536880384]],[&quot;^1A&quot;,[692,&quot;^?&quot;,&quot;~u6163d392-4988-46ac-9b0e-3a91675b6902&quot;,536880384]],[&quot;^1A&quot;,[693,&quot;^E&quot;,false,536880390]],[&quot;^1A&quot;,[693,&quot;^19&quot;,&quot;nothing&quot;,536880390]],[&quot;^1A&quot;,[693,&quot;^1=&quot;,&quot;nothing&quot;,536880390]],[&quot;^1A&quot;,[693,&quot;^?&quot;,&quot;~u6163d3a7-df55-450d-bea1-fd98587601ff&quot;,536880390]],[&quot;^1A&quot;,[694,&quot;^S&quot;,[],536880409]],[&quot;^1A&quot;,[694,&quot;^[&quot;,&quot;&quot;,536880409]],[&quot;^1A&quot;,[694,&quot;^W&quot;,&quot;^1H&quot;,536880409]],[&quot;^1A&quot;,[694,&quot;^E&quot;,false,536880409]],[&quot;^1A&quot;,[694,&quot;^K&quot;,693,536880409]],[&quot;^1A&quot;,[694,&quot;^X&quot;,1,536880409]],[&quot;^1A&quot;,[694,&quot;^17&quot;,693,536880409]],[&quot;^1A&quot;,[694,&quot;^13&quot;,693,536880409]],[&quot;^1A&quot;,[694,&quot;^D&quot;,[&quot;^ &quot;],536880409]],[&quot;^1A&quot;,[694,&quot;^Z&quot;,[],536880409]],[&quot;^1A&quot;,[694,&quot;^1D&quot;,true,536880409]],[&quot;^1A&quot;,[694,&quot;^?&quot;,&quot;~u6163d3b9-0e6e-46d6-8ab7-680679bd796b&quot;,536880409]],[&quot;^1A&quot;,[699,&quot;^Q&quot;,1634021711098,536884187]],[&quot;^1A&quot;,[699,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[699,&quot;^19&quot;,&quot;事务&quot;,536880424]],[&quot;^1A&quot;,[699,&quot;^1=&quot;,&quot;事务&quot;,536880424]],[&quot;^1A&quot;,[699,&quot;^G&quot;,1634022369462,536884354]],[&quot;^1A&quot;,[699,&quot;^?&quot;,&quot;~u6163d43e-10df-4956-a94c-8fb9087235b7&quot;,536880424]],[&quot;^1A&quot;,[701,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[701,&quot;^19&quot;,&quot;事务调度&quot;,536880424]],[&quot;^1A&quot;,[701,&quot;^1=&quot;,&quot;事务调度&quot;,536880424]],[&quot;^1A&quot;,[701,&quot;^?&quot;,&quot;~u6163d43e-241b-4895-853f-663687c55df5&quot;,536880424]],[&quot;^1A&quot;,[703,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[703,&quot;^19&quot;,&quot;可串行化&quot;,536880424]],[&quot;^1A&quot;,[703,&quot;^1=&quot;,&quot;可串行化&quot;,536880424]],[&quot;^1A&quot;,[703,&quot;^?&quot;,&quot;~u6163d43e-4d69-40ae-9551-08f8988fe447&quot;,536880424]],[&quot;^1A&quot;,[705,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[705,&quot;^19&quot;,&quot;隐式事务&quot;,536880424]],[&quot;^1A&quot;,[705,&quot;^1=&quot;,&quot;隐式事务&quot;,536880424]],[&quot;^1A&quot;,[705,&quot;^?&quot;,&quot;~u6163d43e-3cf9-4b79-af34-6a82400be300&quot;,536880424]],[&quot;^1A&quot;,[707,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[707,&quot;^19&quot;,&quot;完整性约束&quot;,536880424]],[&quot;^1A&quot;,[707,&quot;^1=&quot;,&quot;完整性约束&quot;,536880424]],[&quot;^1A&quot;,[707,&quot;^?&quot;,&quot;~u6163d43e-da34-4fa9-86aa-9039cfd6dbfc&quot;,536880424]],[&quot;^1A&quot;,[709,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[709,&quot;^19&quot;,&quot;迭代计算传递闭包&quot;,536880424]],[&quot;^1A&quot;,[709,&quot;^1=&quot;,&quot;迭代计算传递闭包&quot;,536880424]],[&quot;^1A&quot;,[709,&quot;^?&quot;,&quot;~u6163d43e-6b2d-4319-b5ec-f2a743ad192b&quot;,536880424]],[&quot;^1A&quot;,[711,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[711,&quot;^19&quot;,&quot;高级聚集特性-分窗&quot;,536880424]],[&quot;^1A&quot;,[711,&quot;^1=&quot;,&quot;高级聚集特性-分窗&quot;,536880424]],[&quot;^1A&quot;,[711,&quot;^?&quot;,&quot;~u6163d43e-00ce-4672-801c-fad6b6d142c7&quot;,536880424]],[&quot;^1A&quot;,[713,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[713,&quot;^19&quot;,&quot;高级聚集特性-排名&quot;,536880424]],[&quot;^1A&quot;,[713,&quot;^1=&quot;,&quot;高级聚集特性-排名&quot;,536880424]],[&quot;^1A&quot;,[713,&quot;^?&quot;,&quot;~u6163d43e-d245-44a1-a3eb-f43bf7ab45fd&quot;,536880424]],[&quot;^1A&quot;,[715,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[715,&quot;^19&quot;,&quot;实体-关系设计&quot;,536880424]],[&quot;^1A&quot;,[715,&quot;^1=&quot;,&quot;实体-关系设计&quot;,536880424]],[&quot;^1A&quot;,[715,&quot;^?&quot;,&quot;~u6163d43e-b084-4b59-99ce-ddbfd6b9e28d&quot;,536880424]],[&quot;^1A&quot;,[717,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[717,&quot;^19&quot;,&quot;关系设计&quot;,536880424]],[&quot;^1A&quot;,[717,&quot;^1=&quot;,&quot;关系设计&quot;,536880424]],[&quot;^1A&quot;,[717,&quot;^?&quot;,&quot;~u6163d43e-be19-413f-810b-92e24a7711f2&quot;,536880424]],[&quot;^1A&quot;,[719,&quot;^E&quot;,false,536880424]],[&quot;^1A&quot;,[719,&quot;^19&quot;,&quot;范式&quot;,536880424]],[&quot;^1A&quot;,[719,&quot;^1=&quot;,&quot;范式&quot;,536880424]],[&quot;^1A&quot;,[719,&quot;^?&quot;,&quot;~u6163d43e-e1f6-4631-a14f-94a0174b687f&quot;,536880424]],[&quot;^1A&quot;,[720,&quot;^E&quot;,false,536880434]],[&quot;^1A&quot;,[720,&quot;^19&quot;,&quot;t&quot;,536880434]],[&quot;^1A&quot;,[720,&quot;^1=&quot;,&quot;t&quot;,536880434]],[&quot;^1A&quot;,[720,&quot;^?&quot;,&quot;~u6163d456-99c0-4563-93f2-79a9f661e930&quot;,536880434]],[&quot;^1A&quot;,[721,&quot;^S&quot;,[],536880449]],[&quot;^1A&quot;,[721,&quot;^[&quot;,&quot;&quot;,536880449]],[&quot;^1A&quot;,[721,&quot;^W&quot;,&quot;^1H&quot;,536880449]],[&quot;^1A&quot;,[721,&quot;^E&quot;,false,536880449]],[&quot;^1A&quot;,[721,&quot;^K&quot;,703,536880449]],[&quot;^1A&quot;,[721,&quot;^X&quot;,1,536880449]],[&quot;^1A&quot;,[721,&quot;^17&quot;,703,536880449]],[&quot;^1A&quot;,[721,&quot;^13&quot;,703,536880449]],[&quot;^1A&quot;,[721,&quot;^D&quot;,[&quot;^ &quot;],536880449]],[&quot;^1A&quot;,[721,&quot;^Z&quot;,[],536880449]],[&quot;^1A&quot;,[721,&quot;^1D&quot;,true,536880449]],[&quot;^1A&quot;,[721,&quot;^?&quot;,&quot;~u6163d49e-5a48-4937-9a0f-d481419eb25f&quot;,536880449]],[&quot;^1A&quot;,[722,&quot;^E&quot;,false,536880451]],[&quot;^1A&quot;,[722,&quot;^19&quot;,&quot;一致性&quot;,536880451]],[&quot;^1A&quot;,[722,&quot;^1=&quot;,&quot;一致性&quot;,536880451]],[&quot;^1A&quot;,[722,&quot;^?&quot;,&quot;~u6163d4bd-e96d-4603-9ab0-bdbe1bc4ea1a&quot;,536880451]],[&quot;^1A&quot;,[723,&quot;^E&quot;,false,536880457]],[&quot;^1A&quot;,[723,&quot;^19&quot;,&quot;原子性&quot;,536880457]],[&quot;^1A&quot;,[723,&quot;^1=&quot;,&quot;原子性&quot;,536880457]],[&quot;^1A&quot;,[723,&quot;^?&quot;,&quot;~u6163d4c3-8d7a-44d9-8e56-f29ff1ebd745&quot;,536880457]],[&quot;^1A&quot;,[724,&quot;^E&quot;,false,536880463]],[&quot;^1A&quot;,[724,&quot;^19&quot;,&quot;隔离性&quot;,536880463]],[&quot;^1A&quot;,[724,&quot;^1=&quot;,&quot;隔离性&quot;,536880463]],[&quot;^1A&quot;,[724,&quot;^?&quot;,&quot;~u6163d4c8-927a-4aee-8b08-03e5ed20bc58&quot;,536880463]],[&quot;^1A&quot;,[725,&quot;^E&quot;,false,536880469]],[&quot;^1A&quot;,[725,&quot;^19&quot;,&quot;可重复读&quot;,536880469]],[&quot;^1A&quot;,[725,&quot;^1=&quot;,&quot;可重复读&quot;,536880469]],[&quot;^1A&quot;,[725,&quot;^?&quot;,&quot;~u6163d500-224b-441c-8b1f-f61237679541&quot;,536880469]],[&quot;^1A&quot;,[726,&quot;^E&quot;,false,536880472]],[&quot;^1A&quot;,[726,&quot;^19&quot;,&quot;已提交读&quot;,536880472]],[&quot;^1A&quot;,[726,&quot;^1=&quot;,&quot;已提交读&quot;,536880472]],[&quot;^1A&quot;,[726,&quot;^?&quot;,&quot;~u6163d506-7443-4f8d-a096-d3bff5001f0c&quot;,536880472]],[&quot;^1A&quot;,[728,&quot;^E&quot;,false,536880481]],[&quot;^1A&quot;,[728,&quot;^19&quot;,&quot;未提交读&quot;,536880481]],[&quot;^1A&quot;,[728,&quot;^1=&quot;,&quot;未提交读&quot;,536880481]],[&quot;^1A&quot;,[728,&quot;^?&quot;,&quot;~u6163d510-6b6c-4ea0-b4bb-71462d4dc40f&quot;,536880481]],[&quot;^1A&quot;,[729,&quot;^E&quot;,false,536880491]],[&quot;^1A&quot;,[729,&quot;^19&quot;,&quot;servlet&quot;,536880491]],[&quot;^1A&quot;,[729,&quot;^1=&quot;,&quot;servlet&quot;,536880491]],[&quot;^1A&quot;,[729,&quot;^?&quot;,&quot;~u6163d527-8455-4c34-8ac7-77660b6975bb&quot;,536880491]],[&quot;^1A&quot;,[730,&quot;^E&quot;,false,536880494]],[&quot;^1A&quot;,[730,&quot;^19&quot;,&quot;servlet生命周期&quot;,536880494]],[&quot;^1A&quot;,[730,&quot;^1=&quot;,&quot;servlet生命周期&quot;,536880494]],[&quot;^1A&quot;,[730,&quot;^?&quot;,&quot;~u6163d52f-19f0-4da0-9317-61c1c0f24301&quot;,536880494]],[&quot;^1A&quot;,[731,&quot;^E&quot;,false,536880497]],[&quot;^1A&quot;,[731,&quot;^19&quot;,&quot;对象-关系映射&quot;,536880497]],[&quot;^1A&quot;,[731,&quot;^1=&quot;,&quot;对象-关系映射&quot;,536880497]],[&quot;^1A&quot;,[731,&quot;^?&quot;,&quot;~u6163d536-31e7-4e5c-ae2e-58edd9aea19e&quot;,536880497]],[&quot;^1A&quot;,[732,&quot;^E&quot;,false,536880521]],[&quot;^1A&quot;,[732,&quot;^19&quot;,&quot;两阶段封锁&quot;,536880521]],[&quot;^1A&quot;,[732,&quot;^1=&quot;,&quot;两阶段封锁&quot;,536880521]],[&quot;^1A&quot;,[732,&quot;^?&quot;,&quot;~u6163d58c-0a4e-4b92-8a99-46a49475c551&quot;,536880521]],[&quot;^1A&quot;,[733,&quot;^E&quot;,false,536880536]],[&quot;^1A&quot;,[733,&quot;^19&quot;,&quot;多版本和快照隔离。&quot;,536880536]],[&quot;^1A&quot;,[733,&quot;^1=&quot;,&quot;多版本和快照隔离。&quot;,536880536]],[&quot;^1A&quot;,[733,&quot;^?&quot;,&quot;~u6163d5ae-4a1d-40e7-8e4e-0a011219737d&quot;,536880536]],[&quot;^1A&quot;,[734,&quot;^E&quot;,false,536880539]],[&quot;^1A&quot;,[734,&quot;^19&quot;,&quot;多版本&quot;,536880539]],[&quot;^1A&quot;,[734,&quot;^1=&quot;,&quot;多版本&quot;,536880539]],[&quot;^1A&quot;,[734,&quot;^?&quot;,&quot;~u6163d5b0-dfb6-41dc-aa5b-70727c215829&quot;,536880539]],[&quot;^1A&quot;,[735,&quot;^E&quot;,false,536880542]],[&quot;^1A&quot;,[735,&quot;^19&quot;,&quot;快照隔离。&quot;,536880542]],[&quot;^1A&quot;,[735,&quot;^1=&quot;,&quot;快照隔离。&quot;,536880542]],[&quot;^1A&quot;,[735,&quot;^?&quot;,&quot;~u6163d5b1-276a-4ea5-9994-730910befa74&quot;,536880542]],[&quot;^1A&quot;,[737,&quot;^E&quot;,false,536880552]],[&quot;^1A&quot;,[737,&quot;^19&quot;,&quot;快照隔离&quot;,536880552]],[&quot;^1A&quot;,[737,&quot;^1=&quot;,&quot;快照隔离&quot;,536880552]],[&quot;^1A&quot;,[737,&quot;^?&quot;,&quot;~u6163d5ba-3fd7-4cfb-8759-f9cb2ca5cf82&quot;,536880552]],[&quot;^1A&quot;,[738,&quot;^E&quot;,false,536880555]],[&quot;^1A&quot;,[738,&quot;^19&quot;,&quot;时间戳&quot;,536880555]],[&quot;^1A&quot;,[738,&quot;^1=&quot;,&quot;时间戳&quot;,536880555]],[&quot;^1A&quot;,[738,&quot;^?&quot;,&quot;~u6163d5c0-7b9b-4928-85bc-14b0b121f54d&quot;,536880555]],[&quot;^1A&quot;,[739,&quot;^S&quot;,[],536880871]],[&quot;^1A&quot;,[739,&quot;^[&quot;,&quot;段落格式&quot;,536880569]],[&quot;^1A&quot;,[739,&quot;^W&quot;,&quot;^1H&quot;,536880566]],[&quot;^1A&quot;,[739,&quot;^E&quot;,false,536880566]],[&quot;^1A&quot;,[739,&quot;^K&quot;,671,536880566]],[&quot;^1A&quot;,[739,&quot;^X&quot;,1,536880871]],[&quot;^1A&quot;,[739,&quot;^17&quot;,671,536880566]],[&quot;^1A&quot;,[739,&quot;^13&quot;,671,536880566]],[&quot;^1A&quot;,[739,&quot;^12&quot;,671,536880871]],[&quot;^1A&quot;,[739,&quot;^D&quot;,[&quot;^ &quot;],536880871]],[&quot;^1A&quot;,[739,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;段落格式&quot;]],536880871]],[&quot;^1A&quot;,[739,&quot;^1D&quot;,true,536880566]],[&quot;^1A&quot;,[739,&quot;^?&quot;,&quot;~u6163d605-ec5f-4ab7-a6f4-f7885db3ae6e&quot;,536880566]],[&quot;^1A&quot;,[740,&quot;^S&quot;,[],536880885]],[&quot;^1A&quot;,[740,&quot;^[&quot;,&quot;长句加重使用加重下划线：==xxx==&quot;,536880587]],[&quot;^1A&quot;,[740,&quot;^W&quot;,&quot;^1H&quot;,536880571]],[&quot;^1A&quot;,[740,&quot;^E&quot;,false,536880571]],[&quot;^1A&quot;,[740,&quot;^K&quot;,763,536880885]],[&quot;^1A&quot;,[740,&quot;^X&quot;,1,536880885]],[&quot;^1A&quot;,[740,&quot;^17&quot;,671,536880571]],[&quot;^1A&quot;,[740,&quot;^13&quot;,739,536880572]],[&quot;^1A&quot;,[740,&quot;^12&quot;,671,536880885]],[&quot;^1A&quot;,[740,&quot;^D&quot;,[&quot;^ &quot;],536880885]],[&quot;^1A&quot;,[740,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;长句加重使用加重下划线：&quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;xxx&quot;]]]]],536880885]],[&quot;^1A&quot;,[740,&quot;^1D&quot;,true,536880571]],[&quot;^1A&quot;,[740,&quot;^?&quot;,&quot;~u6163d609-ace1-4c98-956a-fd4fbb7ca226&quot;,536880571]],[&quot;^1A&quot;,[741,&quot;^S&quot;,[],536880818]],[&quot;^1A&quot;,[741,&quot;^[&quot;,&quot;单词加重使用加重：**word**&quot;,536880612]],[&quot;^1A&quot;,[741,&quot;^W&quot;,&quot;^1H&quot;,536880591]],[&quot;^1A&quot;,[741,&quot;^E&quot;,false,536880591]],[&quot;^1A&quot;,[741,&quot;^K&quot;,740,536880591]],[&quot;^1A&quot;,[741,&quot;^X&quot;,1,536880818]],[&quot;^1A&quot;,[741,&quot;^17&quot;,671,536880591]],[&quot;^1A&quot;,[741,&quot;^13&quot;,739,536880591]],[&quot;^1A&quot;,[741,&quot;^12&quot;,671,536880818]],[&quot;^1A&quot;,[741,&quot;^D&quot;,[&quot;^ &quot;],536880818]],[&quot;^1A&quot;,[741,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;单词加重使用加重：&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;word&quot;]]]]],536880818]],[&quot;^1A&quot;,[741,&quot;^1D&quot;,true,536880591]],[&quot;^1A&quot;,[741,&quot;^?&quot;,&quot;~u6163d621-0c66-4885-a821-921a1f0e2bde&quot;,536880591]],[&quot;^1A&quot;,[742,&quot;^E&quot;,false,536880619]],[&quot;^1A&quot;,[742,&quot;^19&quot;,&quot;可串行化是一个有用的概念，但是保证可串行性可能只允许极小的并发度，因此sql标准允许一个事务：可以以一种与其他事务不可串行化的方式执行。这称为事务的隔离级别，包括以下4种：&quot;,536880619]],[&quot;^1A&quot;,[742,&quot;^1=&quot;,&quot;可串行化是一个有用的概念，但是保证可串行性可能只允许极小的并发度，因此SQL标准允许一个事务：可以以一种与其他事务不可串行化的方式执行。这称为事务的隔离级别，包括以下4种：&quot;,536880619]],[&quot;^1A&quot;,[742,&quot;^?&quot;,&quot;~u6163d673-e1b2-4ee4-b03a-7c1c8a20012a&quot;,536880619]],[&quot;^1A&quot;,[743,&quot;^E&quot;,false,536880709]],[&quot;^1A&quot;,[743,&quot;^19&quot;,&quot;acid&quot;,536880709]],[&quot;^1A&quot;,[743,&quot;^1=&quot;,&quot;ACID&quot;,536880709]],[&quot;^1A&quot;,[743,&quot;^?&quot;,&quot;~u6163d731-6a36-47eb-8fed-bb42045a1b79&quot;,536880709]],[&quot;^1A&quot;,[744,&quot;^S&quot;,[],536880722]],[&quot;^1A&quot;,[744,&quot;^[&quot;,&quot;&quot;,536880722]],[&quot;^1A&quot;,[744,&quot;^W&quot;,&quot;^1H&quot;,536880722]],[&quot;^1A&quot;,[744,&quot;^E&quot;,false,536880722]],[&quot;^1A&quot;,[744,&quot;^K&quot;,743,536880722]],[&quot;^1A&quot;,[744,&quot;^X&quot;,1,536880722]],[&quot;^1A&quot;,[744,&quot;^17&quot;,743,536880722]],[&quot;^1A&quot;,[744,&quot;^13&quot;,743,536880722]],[&quot;^1A&quot;,[744,&quot;^D&quot;,[&quot;^ &quot;],536880722]],[&quot;^1A&quot;,[744,&quot;^Z&quot;,[],536880722]],[&quot;^1A&quot;,[744,&quot;^1D&quot;,true,536880722]],[&quot;^1A&quot;,[744,&quot;^?&quot;,&quot;~u6163d79b-a9ca-4237-be35-68c23430ad03&quot;,536880722]],[&quot;^1A&quot;,[745,&quot;^S&quot;,[],536880723]],[&quot;^1A&quot;,[745,&quot;^[&quot;,&quot;&quot;,536880723]],[&quot;^1A&quot;,[745,&quot;^W&quot;,&quot;^1H&quot;,536880723]],[&quot;^1A&quot;,[745,&quot;^E&quot;,false,536880723]],[&quot;^1A&quot;,[745,&quot;^K&quot;,724,536880723]],[&quot;^1A&quot;,[745,&quot;^X&quot;,1,536880723]],[&quot;^1A&quot;,[745,&quot;^17&quot;,724,536880723]],[&quot;^1A&quot;,[745,&quot;^13&quot;,724,536880723]],[&quot;^1A&quot;,[745,&quot;^D&quot;,[&quot;^ &quot;],536880723]],[&quot;^1A&quot;,[745,&quot;^Z&quot;,[],536880723]],[&quot;^1A&quot;,[745,&quot;^1D&quot;,true,536880723]],[&quot;^1A&quot;,[745,&quot;^?&quot;,&quot;~u6163d7f7-3513-4e50-b830-4143708da887&quot;,536880723]],[&quot;^1A&quot;,[746,&quot;^S&quot;,[],536880727]],[&quot;^1A&quot;,[746,&quot;^[&quot;,&quot;&quot;,536880727]],[&quot;^1A&quot;,[746,&quot;^W&quot;,&quot;^1H&quot;,536880727]],[&quot;^1A&quot;,[746,&quot;^E&quot;,false,536880727]],[&quot;^1A&quot;,[746,&quot;^K&quot;,732,536880727]],[&quot;^1A&quot;,[746,&quot;^X&quot;,1,536880727]],[&quot;^1A&quot;,[746,&quot;^17&quot;,732,536880727]],[&quot;^1A&quot;,[746,&quot;^13&quot;,732,536880727]],[&quot;^1A&quot;,[746,&quot;^D&quot;,[&quot;^ &quot;],536880727]],[&quot;^1A&quot;,[746,&quot;^Z&quot;,[],536880727]],[&quot;^1A&quot;,[746,&quot;^1D&quot;,true,536880727]],[&quot;^1A&quot;,[746,&quot;^?&quot;,&quot;~u6163d82e-085a-498a-b1b3-b43347513878&quot;,536880727]],[&quot;^1A&quot;,[747,&quot;^E&quot;,false,536880740]],[&quot;^1A&quot;,[747,&quot;^19&quot;,&quot;饿死现象&quot;,536880740]],[&quot;^1A&quot;,[747,&quot;^1=&quot;,&quot;饿死现象&quot;,536880740]],[&quot;^1A&quot;,[747,&quot;^?&quot;,&quot;~u6163d892-65e2-41b7-801f-8b7c03b042a0&quot;,536880740]],[&quot;^1A&quot;,[748,&quot;^S&quot;,[],536880753]],[&quot;^1A&quot;,[748,&quot;^[&quot;,&quot;&quot;,536880753]],[&quot;^1A&quot;,[748,&quot;^W&quot;,&quot;^1H&quot;,536880753]],[&quot;^1A&quot;,[748,&quot;^E&quot;,false,536880753]],[&quot;^1A&quot;,[748,&quot;^K&quot;,747,536880753]],[&quot;^1A&quot;,[748,&quot;^X&quot;,1,536880753]],[&quot;^1A&quot;,[748,&quot;^17&quot;,747,536880753]],[&quot;^1A&quot;,[748,&quot;^13&quot;,747,536880753]],[&quot;^1A&quot;,[748,&quot;^D&quot;,[&quot;^ &quot;],536880753]],[&quot;^1A&quot;,[748,&quot;^Z&quot;,[],536880753]],[&quot;^1A&quot;,[748,&quot;^1D&quot;,true,536880753]],[&quot;^1A&quot;,[748,&quot;^?&quot;,&quot;~u6163d8aa-13f7-4b8e-b638-2781492af13b&quot;,536880753]],[&quot;^1A&quot;,[749,&quot;^S&quot;,[],536880761]],[&quot;^1A&quot;,[749,&quot;^[&quot;,&quot;&quot;,536880761]],[&quot;^1A&quot;,[749,&quot;^W&quot;,&quot;^1H&quot;,536880761]],[&quot;^1A&quot;,[749,&quot;^E&quot;,false,536880761]],[&quot;^1A&quot;,[749,&quot;^K&quot;,734,536880761]],[&quot;^1A&quot;,[749,&quot;^X&quot;,1,536880761]],[&quot;^1A&quot;,[749,&quot;^17&quot;,734,536880761]],[&quot;^1A&quot;,[749,&quot;^13&quot;,734,536880761]],[&quot;^1A&quot;,[749,&quot;^D&quot;,[&quot;^ &quot;],536880761]],[&quot;^1A&quot;,[749,&quot;^Z&quot;,[],536880761]],[&quot;^1A&quot;,[749,&quot;^1D&quot;,true,536880761]],[&quot;^1A&quot;,[749,&quot;^?&quot;,&quot;~u6163d8c2-2333-4c07-8f66-d169b8c01aa2&quot;,536880761]],[&quot;^1A&quot;,[750,&quot;^E&quot;,false,536880772]],[&quot;^1A&quot;,[750,&quot;^19&quot;,&quot;多版本两阶段封锁&quot;,536880772]],[&quot;^1A&quot;,[750,&quot;^1=&quot;,&quot;多版本两阶段封锁&quot;,536880772]],[&quot;^1A&quot;,[750,&quot;^?&quot;,&quot;~u6163d90e-a8ba-4c3d-b640-2638e816cb1f&quot;,536880772]],[&quot;^1A&quot;,[753,&quot;^E&quot;,false,536880787]],[&quot;^1A&quot;,[753,&quot;^19&quot;,&quot;锁表&quot;,536880787]],[&quot;^1A&quot;,[753,&quot;^1=&quot;,&quot;锁表&quot;,536880787]],[&quot;^1A&quot;,[753,&quot;^?&quot;,&quot;~u6163d965-7dd9-42aa-8384-838cf388a9f7&quot;,536880787]],[&quot;^1A&quot;,[754,&quot;^E&quot;,false,536880790]],[&quot;^1A&quot;,[754,&quot;^19&quot;,&quot;多粒度&quot;,536880790]],[&quot;^1A&quot;,[754,&quot;^1=&quot;,&quot;多粒度&quot;,536880790]],[&quot;^1A&quot;,[754,&quot;^?&quot;,&quot;~u6163d978-f988-4a51-a992-063e87e58fcd&quot;,536880790]],[&quot;^1A&quot;,[755,&quot;^E&quot;,false,536880799]],[&quot;^1A&quot;,[755,&quot;^19&quot;,&quot;幻象问题&quot;,536880799]],[&quot;^1A&quot;,[755,&quot;^1=&quot;,&quot;幻象问题&quot;,536880799]],[&quot;^1A&quot;,[755,&quot;^?&quot;,&quot;~u6163d9a8-3e14-4689-9a4a-4470954d3c08&quot;,536880799]],[&quot;^1A&quot;,[756,&quot;^S&quot;,[],536880803]],[&quot;^1A&quot;,[756,&quot;^[&quot;,&quot;&quot;,536880803]],[&quot;^1A&quot;,[756,&quot;^W&quot;,&quot;^1H&quot;,536880803]],[&quot;^1A&quot;,[756,&quot;^E&quot;,false,536880803]],[&quot;^1A&quot;,[756,&quot;^K&quot;,755,536880803]],[&quot;^1A&quot;,[756,&quot;^X&quot;,1,536880803]],[&quot;^1A&quot;,[756,&quot;^17&quot;,755,536880803]],[&quot;^1A&quot;,[756,&quot;^13&quot;,755,536880803]],[&quot;^1A&quot;,[756,&quot;^D&quot;,[&quot;^ &quot;],536880803]],[&quot;^1A&quot;,[756,&quot;^Z&quot;,[],536880803]],[&quot;^1A&quot;,[756,&quot;^1D&quot;,true,536880803]],[&quot;^1A&quot;,[756,&quot;^?&quot;,&quot;~u6163d9aa-8787-45dc-bfbe-902e632a353a&quot;,536880803]],[&quot;^1A&quot;,[757,&quot;^S&quot;,[],536880823]],[&quot;^1A&quot;,[757,&quot;^[&quot;,&quot;内容格式&quot;,536880823]],[&quot;^1A&quot;,[757,&quot;^W&quot;,&quot;^1H&quot;,536880819]],[&quot;^1A&quot;,[757,&quot;^E&quot;,false,536880819]],[&quot;^1A&quot;,[757,&quot;^K&quot;,739,536880820]],[&quot;^1A&quot;,[757,&quot;^X&quot;,1,536880823]],[&quot;^1A&quot;,[757,&quot;^17&quot;,671,536880819]],[&quot;^1A&quot;,[757,&quot;^13&quot;,671,536880820]],[&quot;^1A&quot;,[757,&quot;^12&quot;,671,536880823]],[&quot;^1A&quot;,[757,&quot;^D&quot;,[&quot;^ &quot;],536880823]],[&quot;^1A&quot;,[757,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;内容格式&quot;]],536880823]],[&quot;^1A&quot;,[757,&quot;^1D&quot;,true,536880819]],[&quot;^1A&quot;,[757,&quot;^?&quot;,&quot;~u6163da1c-9d31-44e8-8dd9-2a438cbe01eb&quot;,536880819]],[&quot;^1A&quot;,[758,&quot;^S&quot;,[],536880868]],[&quot;^1A&quot;,[758,&quot;^[&quot;,&quot;带介绍的技术名词使用标签： #技术名词&quot;,536880868]],[&quot;^1A&quot;,[758,&quot;^W&quot;,&quot;^1H&quot;,536880824]],[&quot;^1A&quot;,[758,&quot;^E&quot;,false,536880824]],[&quot;^1A&quot;,[758,&quot;^K&quot;,757,536880824]],[&quot;^1A&quot;,[758,&quot;^X&quot;,1,536880868]],[&quot;^1A&quot;,[758,&quot;^17&quot;,671,536880824]],[&quot;^1A&quot;,[758,&quot;^13&quot;,757,536880825]],[&quot;^1A&quot;,[758,&quot;^12&quot;,671,536880868]],[&quot;^1A&quot;,[758,&quot;^12&quot;,761,536880868]],[&quot;^1A&quot;,[758,&quot;^D&quot;,[&quot;^ &quot;],536880868]],[&quot;^1A&quot;,[758,&quot;^L&quot;,761,536880868]],[&quot;^1A&quot;,[758,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;带介绍的技术名词使用标签： &quot;],[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;技术名词&quot;]]]],536880868]],[&quot;^1A&quot;,[758,&quot;^1D&quot;,true,536880824]],[&quot;^1A&quot;,[758,&quot;^?&quot;,&quot;~u6163da20-85f8-422b-b81f-85cfafaf4543&quot;,536880824]],[&quot;^1A&quot;,[759,&quot;^S&quot;,[],536880853]],[&quot;^1A&quot;,[759,&quot;^[&quot;,&quot;&quot;,536880853]],[&quot;^1A&quot;,[759,&quot;^W&quot;,&quot;^1H&quot;,536880853]],[&quot;^1A&quot;,[759,&quot;^E&quot;,false,536880853]],[&quot;^1A&quot;,[759,&quot;^K&quot;,758,536880853]],[&quot;^1A&quot;,[759,&quot;^X&quot;,1,536880853]],[&quot;^1A&quot;,[759,&quot;^17&quot;,671,536880853]],[&quot;^1A&quot;,[759,&quot;^13&quot;,757,536880853]],[&quot;^1A&quot;,[759,&quot;^12&quot;,671,536880853]],[&quot;^1A&quot;,[759,&quot;^D&quot;,[&quot;^ &quot;],536880853]],[&quot;^1A&quot;,[759,&quot;^Z&quot;,[],536880853]],[&quot;^1A&quot;,[759,&quot;^1D&quot;,true,536880853]],[&quot;^1A&quot;,[759,&quot;^?&quot;,&quot;~u6163da63-25ae-4c43-881b-df50f65fbc7e&quot;,536880853]],[&quot;^1A&quot;,[760,&quot;^E&quot;,false,536880865]],[&quot;^1A&quot;,[760,&quot;^19&quot;,&quot;hey&quot;,536880865]],[&quot;^1A&quot;,[760,&quot;^1=&quot;,&quot;hey&quot;,536880865]],[&quot;^1A&quot;,[760,&quot;^?&quot;,&quot;~u6163da75-c580-4efb-b2d9-888462a7b140&quot;,536880865]],[&quot;^1A&quot;,[761,&quot;^E&quot;,false,536880868]],[&quot;^1A&quot;,[761,&quot;^19&quot;,&quot;技术名词&quot;,536880868]],[&quot;^1A&quot;,[761,&quot;^1=&quot;,&quot;技术名词&quot;,536880868]],[&quot;^1A&quot;,[761,&quot;^?&quot;,&quot;~u6163da7a-97df-47c1-9f89-118f63c63a6b&quot;,536880868]],[&quot;^1A&quot;,[762,&quot;^S&quot;,[],536880884]],[&quot;^1A&quot;,[762,&quot;^[&quot;,&quot;顶格头使用 h2&quot;,536880884]],[&quot;^1A&quot;,[762,&quot;^W&quot;,&quot;^1H&quot;,536880872]],[&quot;^1A&quot;,[762,&quot;^E&quot;,false,536880872]],[&quot;^1A&quot;,[762,&quot;^K&quot;,739,536880872]],[&quot;^1A&quot;,[762,&quot;^X&quot;,1,536880884]],[&quot;^1A&quot;,[762,&quot;^17&quot;,671,536880872]],[&quot;^1A&quot;,[762,&quot;^13&quot;,739,536880872]],[&quot;^1A&quot;,[762,&quot;^12&quot;,671,536880884]],[&quot;^1A&quot;,[762,&quot;^D&quot;,[&quot;^ &quot;],536880884]],[&quot;^1A&quot;,[762,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;顶格头使用 h2&quot;]],536880884]],[&quot;^1A&quot;,[762,&quot;^1D&quot;,true,536880872]],[&quot;^1A&quot;,[762,&quot;^?&quot;,&quot;~u6163da85-75d2-4064-9a86-ced21f396ac1&quot;,536880872]],[&quot;^1A&quot;,[763,&quot;^S&quot;,[],536880888]],[&quot;^1A&quot;,[763,&quot;^[&quot;,&quot;次顶格直接换行block，不使用任何格式(除打标)&quot;,536880888]],[&quot;^1A&quot;,[763,&quot;^W&quot;,&quot;^1H&quot;,536880885]],[&quot;^1A&quot;,[763,&quot;^E&quot;,false,536880885]],[&quot;^1A&quot;,[763,&quot;^K&quot;,762,536880885]],[&quot;^1A&quot;,[763,&quot;^X&quot;,1,536880888]],[&quot;^1A&quot;,[763,&quot;^17&quot;,671,536880885]],[&quot;^1A&quot;,[763,&quot;^13&quot;,739,536880885]],[&quot;^1A&quot;,[763,&quot;^12&quot;,671,536880888]],[&quot;^1A&quot;,[763,&quot;^D&quot;,[&quot;^ &quot;],536880888]],[&quot;^1A&quot;,[763,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;次顶格直接换行block，不使用任何格式(除打标)&quot;]],536880888]],[&quot;^1A&quot;,[763,&quot;^1D&quot;,true,536880885]],[&quot;^1A&quot;,[763,&quot;^?&quot;,&quot;~u6163daa6-2f9a-40aa-a5e7-fcfdd0b33157&quot;,536880885]],[&quot;^1A&quot;,[765,&quot;^E&quot;,false,536880905]],[&quot;^1A&quot;,[765,&quot;^19&quot;,&quot;空闲列表&quot;,536880905]],[&quot;^1A&quot;,[765,&quot;^1=&quot;,&quot;空闲列表&quot;,536880905]],[&quot;^1A&quot;,[765,&quot;^?&quot;,&quot;~u6163dcaa-2602-4297-b4b2-53977d35a08b&quot;,536880905]],[&quot;^1A&quot;,[773,&quot;^S&quot;,[],536881217]],[&quot;^1A&quot;,[773,&quot;^[&quot;,&quot;&quot;,536881217]],[&quot;^1A&quot;,[773,&quot;^W&quot;,&quot;^1H&quot;,536881217]],[&quot;^1A&quot;,[773,&quot;^E&quot;,false,536881217]],[&quot;^1A&quot;,[773,&quot;^K&quot;,730,536881217]],[&quot;^1A&quot;,[773,&quot;^X&quot;,1,536881217]],[&quot;^1A&quot;,[773,&quot;^17&quot;,730,536881217]],[&quot;^1A&quot;,[773,&quot;^13&quot;,730,536881217]],[&quot;^1A&quot;,[773,&quot;^D&quot;,[&quot;^ &quot;],536881217]],[&quot;^1A&quot;,[773,&quot;^Z&quot;,[],536881217]],[&quot;^1A&quot;,[773,&quot;^1D&quot;,true,536881217]],[&quot;^1A&quot;,[773,&quot;^?&quot;,&quot;~u6163f1f2-fc69-4a02-9244-f9b26954749a&quot;,536881217]],[&quot;^1A&quot;,[791,&quot;^S&quot;,[],536881273]],[&quot;^1A&quot;,[791,&quot;^[&quot;,&quot;&quot;,536881273]],[&quot;^1A&quot;,[791,&quot;^W&quot;,&quot;^1H&quot;,536881273]],[&quot;^1A&quot;,[791,&quot;^E&quot;,false,536881273]],[&quot;^1A&quot;,[791,&quot;^K&quot;,761,536881273]],[&quot;^1A&quot;,[791,&quot;^X&quot;,1,536881273]],[&quot;^1A&quot;,[791,&quot;^17&quot;,761,536881273]],[&quot;^1A&quot;,[791,&quot;^13&quot;,761,536881273]],[&quot;^1A&quot;,[791,&quot;^D&quot;,[&quot;^ &quot;],536881273]],[&quot;^1A&quot;,[791,&quot;^Z&quot;,[],536881273]],[&quot;^1A&quot;,[791,&quot;^1D&quot;,true,536881273]],[&quot;^1A&quot;,[791,&quot;^?&quot;,&quot;~u6163f252-b29a-4c48-a27d-7647a22dd640&quot;,536881273]],[&quot;^1A&quot;,[792,&quot;^S&quot;,[],536881386]],[&quot;^1A&quot;,[792,&quot;^[&quot;,&quot;数据库索引与书籍的索引类似，有了索引就不需要翻整本书来找到感兴趣的内容。数据库可以直接在索引中查找，在索引中找到条目以后，就可以直接跳转到目标文档的位置，这能使查找速度提高几个数量级。有两种基本的索引类型：&quot;,536881386]],[&quot;^1A&quot;,[792,&quot;^W&quot;,&quot;^1H&quot;,536881301]],[&quot;^1A&quot;,[792,&quot;^K&quot;,360,536881301]],[&quot;^1A&quot;,[792,&quot;^X&quot;,1,536881386]],[&quot;^1A&quot;,[792,&quot;^17&quot;,82,536881301]],[&quot;^1A&quot;,[792,&quot;^13&quot;,360,536881302]],[&quot;^1A&quot;,[792,&quot;^12&quot;,82,536881386]],[&quot;^1A&quot;,[792,&quot;^D&quot;,[&quot;^ &quot;],536881386]],[&quot;^1A&quot;,[792,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;数据库索引与书籍的索引类似，有了索引就不需要翻整本书来找到感兴趣的内容。数据库可以直接在索引中查找，在索引中找到条目以后，就可以直接跳转到目标文档的位置，这能使查找速度提高几个数量级。有两种基本的索引类型：&quot;]],536881386]],[&quot;^1A&quot;,[792,&quot;^1D&quot;,true,536881301]],[&quot;^1A&quot;,[792,&quot;^?&quot;,&quot;~u6163f415-718f-4af7-aed8-b550d63d4d96&quot;,536881301]],[&quot;^1A&quot;,[794,&quot;^S&quot;,[],536881341]],[&quot;^1A&quot;,[794,&quot;^[&quot;,&quot;**`顺序索引`** 基于值的顺序排序&quot;,536881340]],[&quot;^1A&quot;,[794,&quot;^W&quot;,&quot;^1H&quot;,536881327]],[&quot;^1A&quot;,[794,&quot;^K&quot;,792,536881328]],[&quot;^1A&quot;,[794,&quot;^X&quot;,1,536881341]],[&quot;^1A&quot;,[794,&quot;^17&quot;,82,536881327]],[&quot;^1A&quot;,[794,&quot;^13&quot;,792,536881327]],[&quot;^1A&quot;,[794,&quot;^12&quot;,82,536881341]],[&quot;^1A&quot;,[794,&quot;^D&quot;,[&quot;^ &quot;],536881341]],[&quot;^1A&quot;,[794,&quot;^2F&quot;,&quot;logseq_local_/Users/wuyi/Nicky/mygithub/logseq&quot;,536881327]],[&quot;^1A&quot;,[794,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;顺序索引&quot;]]]],[&quot;Plain&quot;,&quot; 基于值的顺序排序&quot;]],536881341]],[&quot;^1A&quot;,[794,&quot;^1D&quot;,true,536881327]],[&quot;^1A&quot;,[794,&quot;^?&quot;,&quot;~u81707e93-4007-4eee-943f-d14532441835&quot;,536881327]],[&quot;^1A&quot;,[796,&quot;^S&quot;,[],536881389]],[&quot;^1A&quot;,[796,&quot;^[&quot;,&quot;**`散列索引`** 将值平均分布到若干散列桶中&quot;,536881362]],[&quot;^1A&quot;,[796,&quot;^W&quot;,&quot;^1H&quot;,536881346]],[&quot;^1A&quot;,[796,&quot;^K&quot;,794,536881347]],[&quot;^1A&quot;,[796,&quot;^X&quot;,1,536881389]],[&quot;^1A&quot;,[796,&quot;^17&quot;,82,536881346]],[&quot;^1A&quot;,[796,&quot;^13&quot;,792,536881346]],[&quot;^1A&quot;,[796,&quot;^12&quot;,82,536881389]],[&quot;^1A&quot;,[796,&quot;^D&quot;,[&quot;^ &quot;],536881389]],[&quot;^1A&quot;,[796,&quot;^2F&quot;,&quot;logseq_local_/Users/wuyi/Nicky/mygithub/logseq&quot;,536881346]],[&quot;^1A&quot;,[796,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;散列索引&quot;]]]],[&quot;Plain&quot;,&quot; 将值平均分布到若干散列桶中&quot;]],536881389]],[&quot;^1A&quot;,[796,&quot;^1D&quot;,true,536881346]],[&quot;^1A&quot;,[796,&quot;^?&quot;,&quot;~u28ebe3c6-c6c2-4b48-9769-8b6c061f58fe&quot;,536881346]],[&quot;^1A&quot;,[797,&quot;^S&quot;,[],536882644]],[&quot;^1A&quot;,[797,&quot;^[&quot;,&quot;## 索引性质&quot;,536882644]],[&quot;^1A&quot;,[797,&quot;^W&quot;,&quot;^1H&quot;,536881390]],[&quot;^1A&quot;,[797,&quot;^14&quot;,2,536882644]],[&quot;^1A&quot;,[797,&quot;^K&quot;,360,536881394]],[&quot;^1A&quot;,[797,&quot;^X&quot;,1,536882644]],[&quot;^1A&quot;,[797,&quot;^17&quot;,82,536881390]],[&quot;^1A&quot;,[797,&quot;^13&quot;,82,536881394]],[&quot;^1A&quot;,[797,&quot;^12&quot;,82,536882644]],[&quot;^1A&quot;,[797,&quot;^D&quot;,[&quot;^ &quot;],536882644]],[&quot;^1A&quot;,[797,&quot;^1M&quot;,2,536881404]],[&quot;^1A&quot;,[797,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;索引性质&quot;]],536882644]],[&quot;^1A&quot;,[797,&quot;^15&quot;,&quot;^1N&quot;,536882644]],[&quot;^1A&quot;,[797,&quot;^1D&quot;,false,536881404]],[&quot;^1A&quot;,[797,&quot;^?&quot;,&quot;~u6163f58c-9562-431c-a4ce-1a13b1d9b720&quot;,536881390]],[&quot;^1A&quot;,[798,&quot;^S&quot;,[],536882648]],[&quot;^1A&quot;,[798,&quot;^[&quot;,&quot;#聚集索引 #聚簇索引 如果包含记录的文件按照某个搜索码指定的顺序排序，那么该搜索码对应的索引为聚集索引。聚集索引也称为**主索引**。&quot;,536882648]],[&quot;^1A&quot;,[798,&quot;^W&quot;,&quot;^1H&quot;,536881409]],[&quot;^1A&quot;,[798,&quot;^K&quot;,797,536881409]],[&quot;^1A&quot;,[798,&quot;^X&quot;,1,536882648]],[&quot;^1A&quot;,[798,&quot;^17&quot;,82,536881409]],[&quot;^1A&quot;,[798,&quot;^13&quot;,797,536881412]],[&quot;^1A&quot;,[798,&quot;^12&quot;,82,536882648]],[&quot;^1A&quot;,[798,&quot;^12&quot;,799,536882648]],[&quot;^1A&quot;,[798,&quot;^12&quot;,827,536882648]],[&quot;^1A&quot;,[798,&quot;^D&quot;,[&quot;^ &quot;],536882648]],[&quot;^1A&quot;,[798,&quot;^L&quot;,799,536882648]],[&quot;^1A&quot;,[798,&quot;^L&quot;,827,536882648]],[&quot;^1A&quot;,[798,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;聚集索引&quot;]]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;聚簇索引&quot;]]],[&quot;Plain&quot;,&quot; 如果包含记录的文件按照某个搜索码指定的顺序排序，那么该搜索码对应的索引为聚集索引。聚集索引也称为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;主索引&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;]],536882648]],[&quot;^1A&quot;,[798,&quot;^1D&quot;,true,536881409]],[&quot;^1A&quot;,[798,&quot;^?&quot;,&quot;~u6163f669-5678-4ab3-b3e3-8e6d2c93a3de&quot;,536881409]],[&quot;^1A&quot;,[799,&quot;^E&quot;,false,536881415]],[&quot;^1A&quot;,[799,&quot;^19&quot;,&quot;聚集索引&quot;,536881415]],[&quot;^1A&quot;,[799,&quot;^1=&quot;,&quot;聚集索引&quot;,536881415]],[&quot;^1A&quot;,[799,&quot;^?&quot;,&quot;~u6163f688-0ed9-410c-a17d-b2f81714ff83&quot;,536881415]],[&quot;^1A&quot;,[800,&quot;^S&quot;,[],536881495]],[&quot;^1A&quot;,[800,&quot;^[&quot;,&quot;#稠密索引 在稠密索引中，文件中的每一个搜索码都有一个索引项。&quot;,536881492]],[&quot;^1A&quot;,[800,&quot;^W&quot;,&quot;^1H&quot;,536881443]],[&quot;^1A&quot;,[800,&quot;^K&quot;,798,536881448]],[&quot;^1A&quot;,[800,&quot;^X&quot;,1,536881495]],[&quot;^1A&quot;,[800,&quot;^17&quot;,82,536881443]],[&quot;^1A&quot;,[800,&quot;^13&quot;,797,536881443]],[&quot;^1A&quot;,[800,&quot;^12&quot;,82,536881495]],[&quot;^1A&quot;,[800,&quot;^12&quot;,803,536881495]],[&quot;^1A&quot;,[800,&quot;^D&quot;,[&quot;^ &quot;],536881495]],[&quot;^1A&quot;,[800,&quot;^L&quot;,803,536881495]],[&quot;^1A&quot;,[800,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;稠密索引&quot;]]],[&quot;Plain&quot;,&quot; 在稠密索引中，文件中的每一个搜索码都有一个索引项。&quot;]],536881495]],[&quot;^1A&quot;,[800,&quot;^1D&quot;,true,536881443]],[&quot;^1A&quot;,[800,&quot;^?&quot;,&quot;~u6163f6c0-84ca-46cb-8cd5-7911b2bba8f0&quot;,536881443]],[&quot;^1A&quot;,[803,&quot;^E&quot;,false,536881479]],[&quot;^1A&quot;,[803,&quot;^19&quot;,&quot;稠密索引&quot;,536881479]],[&quot;^1A&quot;,[803,&quot;^1=&quot;,&quot;稠密索引&quot;,536881479]],[&quot;^1A&quot;,[803,&quot;^?&quot;,&quot;~u6163f727-1d72-47cf-8efa-05d83d692d31&quot;,536881479]],[&quot;^1A&quot;,[804,&quot;^S&quot;,[[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;MongoDB中的稀疏索引只包含具有索引字段的文档的条目，包括索引字段为空的文档。这与一般稀疏索引的定义不同。&quot;],[&quot;Break_Line&quot;]]]]]],536882767]],[&quot;^1A&quot;,[804,&quot;^[&quot;,&quot;#稀疏索引 在稀疏索引中，只为搜索码的**部分值**建立索引项。\\n&gt; MongoDB中的稀疏索引只包含具有索引字段的文档的条目，包括索引字段为空的文档。这与一般稀疏索引的定义不同。&quot;,536882767]],[&quot;^1A&quot;,[804,&quot;^W&quot;,&quot;^1H&quot;,536881496]],[&quot;^1A&quot;,[804,&quot;^K&quot;,800,536881496]],[&quot;^1A&quot;,[804,&quot;^X&quot;,1,536882767]],[&quot;^1A&quot;,[804,&quot;^17&quot;,82,536881496]],[&quot;^1A&quot;,[804,&quot;^13&quot;,797,536881496]],[&quot;^1A&quot;,[804,&quot;^12&quot;,82,536882767]],[&quot;^1A&quot;,[804,&quot;^12&quot;,805,536882767]],[&quot;^1A&quot;,[804,&quot;^D&quot;,[&quot;^ &quot;],536882767]],[&quot;^1A&quot;,[804,&quot;^L&quot;,805,536882767]],[&quot;^1A&quot;,[804,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;稀疏索引&quot;]]],[&quot;Plain&quot;,&quot; 在稀疏索引中，只为搜索码的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;部分值&quot;]]]],[&quot;Plain&quot;,&quot;建立索引项。&quot;]],536882767]],[&quot;^1A&quot;,[804,&quot;^1D&quot;,true,536881496]],[&quot;^1A&quot;,[804,&quot;^?&quot;,&quot;~u6163f738-7aef-4d87-894a-5ca75bb2c8de&quot;,536881496]],[&quot;^1A&quot;,[805,&quot;^E&quot;,false,536881499]],[&quot;^1A&quot;,[805,&quot;^19&quot;,&quot;稀疏索引&quot;,536881499]],[&quot;^1A&quot;,[805,&quot;^1=&quot;,&quot;稀疏索引&quot;,536881499]],[&quot;^1A&quot;,[805,&quot;^?&quot;,&quot;~u6163f77d-d846-4474-9cb1-b782fcce53f3&quot;,536881499]],[&quot;^1A&quot;,[806,&quot;^S&quot;,[],536882239]],[&quot;^1A&quot;,[806,&quot;^[&quot;,&quot;**`多级索引`** 具有两级或两级以上的索引称为多级索引。&quot;,536881530]],[&quot;^1A&quot;,[806,&quot;^W&quot;,&quot;^1H&quot;,536881506]],[&quot;^1A&quot;,[806,&quot;^K&quot;,804,536881506]],[&quot;^1A&quot;,[806,&quot;^X&quot;,1,536882239]],[&quot;^1A&quot;,[806,&quot;^17&quot;,82,536881506]],[&quot;^1A&quot;,[806,&quot;^13&quot;,797,536881506]],[&quot;^1A&quot;,[806,&quot;^12&quot;,82,536882239]],[&quot;^1A&quot;,[806,&quot;^D&quot;,[&quot;^ &quot;],536882239]],[&quot;^1A&quot;,[806,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;多级索引&quot;]]]],[&quot;Plain&quot;,&quot; 具有两级或两级以上的索引称为多级索引。&quot;]],536882239]],[&quot;^1A&quot;,[806,&quot;^1D&quot;,true,536881506]],[&quot;^1A&quot;,[806,&quot;^?&quot;,&quot;~u6163f819-1114-46cd-a9a7-b60d78b985b1&quot;,536881506]],[&quot;^1A&quot;,[807,&quot;^S&quot;,[],536881551]],[&quot;^1A&quot;,[807,&quot;^[&quot;,&quot;## #B+树索引&quot;,536881548]],[&quot;^1A&quot;,[807,&quot;^W&quot;,&quot;^1H&quot;,536881541]],[&quot;^1A&quot;,[807,&quot;^14&quot;,2,536881551]],[&quot;^1A&quot;,[807,&quot;^K&quot;,797,536881542]],[&quot;^1A&quot;,[807,&quot;^X&quot;,1,536881551]],[&quot;^1A&quot;,[807,&quot;^17&quot;,82,536881541]],[&quot;^1A&quot;,[807,&quot;^13&quot;,82,536881542]],[&quot;^1A&quot;,[807,&quot;^12&quot;,82,536881551]],[&quot;^1A&quot;,[807,&quot;^12&quot;,808,536881551]],[&quot;^1A&quot;,[807,&quot;^D&quot;,[&quot;^ &quot;],536881551]],[&quot;^1A&quot;,[807,&quot;^L&quot;,808,536881551]],[&quot;^1A&quot;,[807,&quot;^1M&quot;,2,536881545]],[&quot;^1A&quot;,[807,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;B+树索引&quot;]]]],536881551]],[&quot;^1A&quot;,[807,&quot;^15&quot;,&quot;^1N&quot;,536881551]],[&quot;^1A&quot;,[807,&quot;^1D&quot;,false,536881545]],[&quot;^1A&quot;,[807,&quot;^?&quot;,&quot;~u6163fa9f-c940-49e8-97f1-51185801db6e&quot;,536881541]],[&quot;^1A&quot;,[808,&quot;^E&quot;,false,536881548]],[&quot;^1A&quot;,[808,&quot;^19&quot;,&quot;b+树索引&quot;,536881548]],[&quot;^1A&quot;,[808,&quot;^1=&quot;,&quot;B+树索引&quot;,536881548]],[&quot;^1A&quot;,[808,&quot;^?&quot;,&quot;~u6163faaa-5063-4e61-84ed-77fc147ff2ce&quot;,536881548]],[&quot;^1A&quot;,[809,&quot;^S&quot;,[],536884393]],[&quot;^1A&quot;,[809,&quot;^[&quot;,&quot;B+树索引结构是在数据插入和删除的情况下仍能保持其执行效率的几种使用最广泛的索引结构之一。B+树索引采用平衡树结构，==树根到树叶的每条路径的长度相同==。&quot;,536884393]],[&quot;^1A&quot;,[809,&quot;^W&quot;,&quot;^1H&quot;,536881552]],[&quot;^1A&quot;,[809,&quot;^K&quot;,807,536881552]],[&quot;^1A&quot;,[809,&quot;^X&quot;,1,536884393]],[&quot;^1A&quot;,[809,&quot;^17&quot;,82,536881552]],[&quot;^1A&quot;,[809,&quot;^13&quot;,807,536881553]],[&quot;^1A&quot;,[809,&quot;^12&quot;,82,536884393]],[&quot;^1A&quot;,[809,&quot;^12&quot;,808,536884393]],[&quot;^1A&quot;,[809,&quot;^D&quot;,[&quot;^ &quot;],536884393]],[&quot;^1A&quot;,[809,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;B+树索引结构是在数据插入和删除的情况下仍能保持其执行效率的几种使用最广泛的索引结构之一。B+树索引采用平衡树结构，&quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;树根到树叶的每条路径的长度相同&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;]],536884393]],[&quot;^1A&quot;,[809,&quot;^1D&quot;,true,536881552]],[&quot;^1A&quot;,[809,&quot;^?&quot;,&quot;~u6163faac-251b-4cd9-b253-31f826958ff7&quot;,536881552]],[&quot;^1A&quot;,[810,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Break_Line&quot;]]]],[&quot;Custom&quot;,&quot;center&quot;,null,[[&quot;Displayed_Math&quot;,&quot;P_1 \\\\ K_1 \\\\ P_2  \\\\  K_2  \\\\  ... \\\\   Pn-1 \\\\   Kn-1  \\\\  Pn&quot;]],&quot;$$P_1 \\\\ K_1 \\\\ P_2  \\\\  K_2  \\\\  ... \\\\   Pn-1 \\\\   Kn-1  \\\\  Pn$$\\n&quot;],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;由于&quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;叶结点内搜索码值顺序排列&quot;]]]],[&quot;Plain&quot;,&quot;，可以用二分搜索在结点内快速查找搜索码。同时指针&quot;],[&quot;Latex_Fragment&quot;,[&quot;Inline&quot;,&quot;P_n&quot;]],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;将叶结点顺序串在一起&quot;]]]],[&quot;Plain&quot;,&quot;，方便对范围查询进行高效的顺序处理。&quot;]]]]],536884405]],[&quot;^1A&quot;,[810,&quot;^[&quot;,&quot;典型B+树**叶节点**最多包含 $n - 1$ 个搜索码值 $K_1, K_2, ..., Kn-1$ ，以及 $$n$$ 个指针 $P_1, P_2, ..., P_n$ ，结构示意图如下：\\n\\n#+BEGIN_CENTER\\n$$P_1 \\\\ K_1 \\\\ P_2  \\\\  K_2  \\\\  ... \\\\   Pn-1 \\\\   Kn-1  \\\\  Pn$$\\n#+END_CENTER\\n由于==叶结点内搜索码值顺序排列==，可以用二分搜索在结点内快速查找搜索码。同时指针$P_n$==将叶结点顺序串在一起==，方便对范围查询进行高效的顺序处理。&quot;,536884405]],[&quot;^1A&quot;,[810,&quot;^W&quot;,&quot;^1H&quot;,536881560]],[&quot;^1A&quot;,[810,&quot;^K&quot;,809,536881701]],[&quot;^1A&quot;,[810,&quot;^X&quot;,1,536884405]],[&quot;^1A&quot;,[810,&quot;^17&quot;,82,536881560]],[&quot;^1A&quot;,[810,&quot;^13&quot;,807,536881661]],[&quot;^1A&quot;,[810,&quot;^12&quot;,82,536884405]],[&quot;^1A&quot;,[810,&quot;^12&quot;,808,536884405]],[&quot;^1A&quot;,[810,&quot;^D&quot;,[&quot;^ &quot;],536884405]],[&quot;^1A&quot;,[810,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;典型B+树&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;叶节点&quot;]]]],[&quot;Plain&quot;,&quot;最多包含 &quot;],[&quot;Latex_Fragment&quot;,[&quot;Inline&quot;,&quot;n - 1&quot;]],[&quot;Plain&quot;,&quot; 个搜索码值 &quot;],[&quot;Latex_Fragment&quot;,[&quot;Inline&quot;,&quot;K_1, K_2, ..., Kn-1&quot;]],[&quot;Plain&quot;,&quot; ，以及 &quot;],[&quot;Latex_Fragment&quot;,[&quot;Displayed&quot;,&quot;n&quot;]],[&quot;Plain&quot;,&quot; 个指针 &quot;],[&quot;Latex_Fragment&quot;,[&quot;Inline&quot;,&quot;P_1, P_2, ..., P_n&quot;]],[&quot;Plain&quot;,&quot; ，结构示意图如下：&quot;]],536884405]],[&quot;^1A&quot;,[810,&quot;^1D&quot;,true,536881560]],[&quot;^1A&quot;,[810,&quot;^?&quot;,&quot;~u6163fb3e-22a8-44cc-8aa5-e1c68ede6722&quot;,536881560]],[&quot;^1A&quot;,[814,&quot;^S&quot;,[],536881940]],[&quot;^1A&quot;,[814,&quot;^[&quot;,&quot;B+树的查询分析&quot;,536881939]],[&quot;^1A&quot;,[814,&quot;^W&quot;,&quot;^1H&quot;,536881930]],[&quot;^1A&quot;,[814,&quot;^K&quot;,810,536881930]],[&quot;^1A&quot;,[814,&quot;^X&quot;,1,536881940]],[&quot;^1A&quot;,[814,&quot;^17&quot;,82,536881930]],[&quot;^1A&quot;,[814,&quot;^13&quot;,807,536881930]],[&quot;^1A&quot;,[814,&quot;^12&quot;,82,536881940]],[&quot;^1A&quot;,[814,&quot;^12&quot;,808,536881940]],[&quot;^1A&quot;,[814,&quot;^D&quot;,[&quot;^ &quot;],536881940]],[&quot;^1A&quot;,[814,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;B+树的查询分析&quot;]],536881940]],[&quot;^1A&quot;,[814,&quot;^1D&quot;,true,536881930]],[&quot;^1A&quot;,[814,&quot;^?&quot;,&quot;~u6163feda-9362-4ed5-9d89-5008f8995225&quot;,536881930]],[&quot;^1A&quot;,[815,&quot;^S&quot;,[[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;如果文件中有&quot;],[&quot;Latex_Fragment&quot;,[&quot;Inline&quot;,&quot;N&quot;]],[&quot;Plain&quot;,&quot;个搜索码，路径长度不超过&quot;],[&quot;Latex_Fragment&quot;,[&quot;Inline&quot;,&quot;log_{n/2}(N)&quot;]],[&quot;Break_Line&quot;]]]]]],536882215]],[&quot;^1A&quot;,[815,&quot;^[&quot;,&quot;在处理一个查询的过程中，需要遍历树中从跟到某个叶结点的一条路径。\\n&gt; 如果文件中有$N$个搜索码，路径长度不超过$log_{n/2}(N)$&quot;,536882215]],[&quot;^1A&quot;,[815,&quot;^W&quot;,&quot;^1H&quot;,536881941]],[&quot;^1A&quot;,[815,&quot;^K&quot;,814,536881941]],[&quot;^1A&quot;,[815,&quot;^X&quot;,1,536882215]],[&quot;^1A&quot;,[815,&quot;^17&quot;,82,536881941]],[&quot;^1A&quot;,[815,&quot;^13&quot;,814,536881942]],[&quot;^1A&quot;,[815,&quot;^12&quot;,82,536882215]],[&quot;^1A&quot;,[815,&quot;^12&quot;,808,536882215]],[&quot;^1A&quot;,[815,&quot;^D&quot;,[&quot;^ &quot;],536882215]],[&quot;^1A&quot;,[815,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;在处理一个查询的过程中，需要遍历树中从跟到某个叶结点的一条路径。&quot;]],536882215]],[&quot;^1A&quot;,[815,&quot;^1D&quot;,true,536881941]],[&quot;^1A&quot;,[815,&quot;^?&quot;,&quot;~u6163ff68-f41f-4620-a5ea-02b2ded46b63&quot;,536881941]],[&quot;^1A&quot;,[816,&quot;^S&quot;,[[&quot;Custom&quot;,&quot;center&quot;,null,[[&quot;Displayed_Math&quot;,&quot;设 \\\\ N=10^6, 结点大小=4kb, 码大小=12byte, 指针大小=8byte&quot;],[&quot;Displayed_Math&quot;,&quot;则 \\\\ n=4kb/(12+8) \\\\approx 200&quot;],[&quot;Displayed_Math&quot;,&quot;O_{(n)}=log_{n/2}(N) \\\\approx 4&quot;]],&quot;$$设 \\\\ N=10^6, 结点大小=4kb, 码大小=12byte, 指针大小=8byte$$\\n$$则 \\\\ n=4kb/(12+8) \\\\approx 200$$\\n$$O_{(n)}=log_{n/2}(N) \\\\approx 4$$\\n&quot;]],536884411]],[&quot;^1A&quot;,[816,&quot;^[&quot;,&quot;#+BEGIN_CENTER\\n$$设 \\\\ N=10^6, 结点大小=4kb, 码大小=12byte, 指针大小=8byte$$\\n$$则 \\\\ n=4kb/(12+8) \\\\approx 200$$\\n$$O_{(n)}=log_{n/2}(N) \\\\approx 4$$\\n#+END_CENTER&quot;,536884411]],[&quot;^1A&quot;,[816,&quot;^W&quot;,&quot;^1H&quot;,536882004]],[&quot;^1A&quot;,[816,&quot;^K&quot;,815,536882004]],[&quot;^1A&quot;,[816,&quot;^X&quot;,1,536884411]],[&quot;^1A&quot;,[816,&quot;^17&quot;,82,536882004]],[&quot;^1A&quot;,[816,&quot;^13&quot;,814,536882004]],[&quot;^1A&quot;,[816,&quot;^12&quot;,82,536884411]],[&quot;^1A&quot;,[816,&quot;^12&quot;,808,536884411]],[&quot;^1A&quot;,[816,&quot;^D&quot;,[&quot;^ &quot;],536884411]],[&quot;^1A&quot;,[816,&quot;^Z&quot;,[],536884411]],[&quot;^1A&quot;,[816,&quot;^1D&quot;,true,536882004]],[&quot;^1A&quot;,[816,&quot;^?&quot;,&quot;~u6163ffe3-e069-4309-9d43-ad9c621ddc1e&quot;,536882004]],[&quot;^1A&quot;,[817,&quot;^S&quot;,[],536882293]],[&quot;^1A&quot;,[817,&quot;^[&quot;,&quot;根结点一般在缓冲区，因此一般只需要从磁盘读取三个或更少的磁盘块。&quot;,536882234]],[&quot;^1A&quot;,[817,&quot;^W&quot;,&quot;^1H&quot;,536882219]],[&quot;^1A&quot;,[817,&quot;^K&quot;,816,536882219]],[&quot;^1A&quot;,[817,&quot;^X&quot;,1,536882293]],[&quot;^1A&quot;,[817,&quot;^17&quot;,82,536882219]],[&quot;^1A&quot;,[817,&quot;^13&quot;,814,536882219]],[&quot;^1A&quot;,[817,&quot;^12&quot;,82,536882293]],[&quot;^1A&quot;,[817,&quot;^12&quot;,808,536882293]],[&quot;^1A&quot;,[817,&quot;^D&quot;,[&quot;^ &quot;],536882293]],[&quot;^1A&quot;,[817,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;根结点一般在缓冲区，因此一般只需要从磁盘读取三个或更少的磁盘块。&quot;]],536882293]],[&quot;^1A&quot;,[817,&quot;^1D&quot;,true,536882219]],[&quot;^1A&quot;,[817,&quot;^?&quot;,&quot;~u61640195-2b54-4d66-8f33-ace970056fbd&quot;,536882219]],[&quot;^1A&quot;,[818,&quot;^S&quot;,[],536882238]],[&quot;^1A&quot;,[818,&quot;^[&quot;,&quot;&quot;,536882238]],[&quot;^1A&quot;,[818,&quot;^W&quot;,&quot;^1H&quot;,536882238]],[&quot;^1A&quot;,[818,&quot;^E&quot;,false,536882238]],[&quot;^1A&quot;,[818,&quot;^K&quot;,808,536882238]],[&quot;^1A&quot;,[818,&quot;^X&quot;,1,536882238]],[&quot;^1A&quot;,[818,&quot;^17&quot;,808,536882238]],[&quot;^1A&quot;,[818,&quot;^13&quot;,808,536882238]],[&quot;^1A&quot;,[818,&quot;^D&quot;,[&quot;^ &quot;],536882238]],[&quot;^1A&quot;,[818,&quot;^Z&quot;,[],536882238]],[&quot;^1A&quot;,[818,&quot;^1D&quot;,true,536882238]],[&quot;^1A&quot;,[818,&quot;^?&quot;,&quot;~u616401d1-5820-4ddb-95c7-04514535bf83&quot;,536882238]],[&quot;^1A&quot;,[820,&quot;^S&quot;,[],536882792]],[&quot;^1A&quot;,[820,&quot;^[&quot;,&quot;#覆盖索引 覆盖索引存储一些属性(但不是搜索码属性)的值以及指向记录的指针，有时候使用这些索引上的属性就能实现查询，而不需要找到实际的记录。&quot;,536882792]],[&quot;^1A&quot;,[820,&quot;^W&quot;,&quot;^1H&quot;,536882244]],[&quot;^1A&quot;,[820,&quot;^K&quot;,806,536882245]],[&quot;^1A&quot;,[820,&quot;^X&quot;,1,536882792]],[&quot;^1A&quot;,[820,&quot;^17&quot;,82,536882244]],[&quot;^1A&quot;,[820,&quot;^13&quot;,797,536882244]],[&quot;^1A&quot;,[820,&quot;^12&quot;,82,536882792]],[&quot;^1A&quot;,[820,&quot;^12&quot;,828,536882792]],[&quot;^1A&quot;,[820,&quot;^D&quot;,[&quot;^ &quot;],536882792]],[&quot;^1A&quot;,[820,&quot;^L&quot;,828,536882792]],[&quot;^1A&quot;,[820,&quot;^2F&quot;,&quot;logseq_local_/Users/wuyi/Nicky/mygithub/logseq&quot;,536882244]],[&quot;^1A&quot;,[820,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;覆盖索引&quot;]]],[&quot;Plain&quot;,&quot; 覆盖索引存储一些属性(但不是搜索码属性)的值以及指向记录的指针，有时候使用这些索引上的属性就能实现查询，而不需要找到实际的记录。&quot;]],536882792]],[&quot;^1A&quot;,[820,&quot;^1D&quot;,true,536882244]],[&quot;^1A&quot;,[820,&quot;^?&quot;,&quot;~u92438b15-95ad-4c60-bdaf-38c21eb45b04&quot;,536882244]],[&quot;^1A&quot;,[821,&quot;^S&quot;,[],536882309]],[&quot;^1A&quot;,[821,&quot;^[&quot;,&quot;## #位图索引&quot;,536882306]],[&quot;^1A&quot;,[821,&quot;^W&quot;,&quot;^1H&quot;,536882294]],[&quot;^1A&quot;,[821,&quot;^14&quot;,2,536882309]],[&quot;^1A&quot;,[821,&quot;^K&quot;,807,536882300]],[&quot;^1A&quot;,[821,&quot;^X&quot;,1,536882309]],[&quot;^1A&quot;,[821,&quot;^17&quot;,82,536882294]],[&quot;^1A&quot;,[821,&quot;^13&quot;,82,536882300]],[&quot;^1A&quot;,[821,&quot;^12&quot;,82,536882309]],[&quot;^1A&quot;,[821,&quot;^12&quot;,822,536882309]],[&quot;^1A&quot;,[821,&quot;^D&quot;,[&quot;^ &quot;],536882309]],[&quot;^1A&quot;,[821,&quot;^L&quot;,822,536882309]],[&quot;^1A&quot;,[821,&quot;^1M&quot;,2,536882303]],[&quot;^1A&quot;,[821,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;位图索引&quot;]]]],536882309]],[&quot;^1A&quot;,[821,&quot;^15&quot;,&quot;^1N&quot;,536882309]],[&quot;^1A&quot;,[821,&quot;^1D&quot;,false,536882303]],[&quot;^1A&quot;,[821,&quot;^?&quot;,&quot;~u616406c9-a1e5-4ebc-bdf4-16ec14673f27&quot;,536882294]],[&quot;^1A&quot;,[822,&quot;^E&quot;,false,536882306]],[&quot;^1A&quot;,[822,&quot;^19&quot;,&quot;位图索引&quot;,536882306]],[&quot;^1A&quot;,[822,&quot;^1=&quot;,&quot;位图索引&quot;,536882306]],[&quot;^1A&quot;,[822,&quot;^?&quot;,&quot;~u616406d3-09e9-41ba-b19e-92c54dd0a59d&quot;,536882306]],[&quot;^1A&quot;,[823,&quot;^S&quot;,[[&quot;Table&quot;,[&quot;^ &quot;,&quot;^27&quot;,[[[&quot;Plain&quot;,&quot;id&quot;]],[[&quot;Plain&quot;,&quot;gender&quot;]]],&quot;^28&quot;,[[[[[&quot;Plain&quot;,&quot;0&quot;]],[[&quot;Plain&quot;,&quot;m&quot;]]],[[[&quot;Plain&quot;,&quot;1&quot;]],[[&quot;Plain&quot;,&quot;f&quot;]]],[[[&quot;Plain&quot;,&quot;2&quot;]],[[&quot;Plain&quot;,&quot;m&quot;]]],[[[&quot;Plain&quot;,&quot;3&quot;]],[[&quot;Plain&quot;,&quot;m&quot;]]],[[[&quot;Plain&quot;,&quot;4&quot;]],[[&quot;Plain&quot;,&quot;f&quot;]]]]],&quot;^29&quot;,[2]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;则m和f的位图分别为：&quot;],[&quot;Break_Line&quot;]]]],[&quot;Table&quot;,[&quot;^ &quot;,&quot;^27&quot;,[[[&quot;Plain&quot;,&quot;gender&quot;]],[[&quot;Plain&quot;,&quot;位图&quot;]]],&quot;^28&quot;,[[[[[&quot;Plain&quot;,&quot;m&quot;]],[[&quot;Plain&quot;,&quot;10110&quot;]]],[[[&quot;Plain&quot;,&quot;f&quot;]],[[&quot;Plain&quot;,&quot;01001&quot;]]]]],&quot;^29&quot;,[2]]]],536884447]],[&quot;^1A&quot;,[823,&quot;^[&quot;,&quot;位图索引是一种为多码简单查询设计的特殊索引，**位图(bitmap)**是一个简单的位数组(一般是二进制数组)。位图索引的结构为：==如果序号为i的记录的值为x，则x的位图中的第i位设置为1==。以性别gender为例，假设我们有以下数据：\\n|id|gender|\\n|---|---|\\n|0|m|\\n|1|f|\\n|2|m|\\n|3|m|\\n|4|f|\\n则m和f的位图分别为：\\n|gender|位图|\\n|---|---|\\n|m|10110|\\n|f|01001|&quot;,536884447]],[&quot;^1A&quot;,[823,&quot;^W&quot;,&quot;^1H&quot;,536882310]],[&quot;^1A&quot;,[823,&quot;^K&quot;,821,536882310]],[&quot;^1A&quot;,[823,&quot;^X&quot;,1,536884447]],[&quot;^1A&quot;,[823,&quot;^17&quot;,82,536882310]],[&quot;^1A&quot;,[823,&quot;^13&quot;,821,536882311]],[&quot;^1A&quot;,[823,&quot;^12&quot;,82,536884447]],[&quot;^1A&quot;,[823,&quot;^12&quot;,822,536884447]],[&quot;^1A&quot;,[823,&quot;^D&quot;,[&quot;^ &quot;],536884447]],[&quot;^1A&quot;,[823,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;位图索引是一种为多码简单查询设计的特殊索引，&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;位图(bitmap)&quot;]]]],[&quot;Plain&quot;,&quot;是一个简单的位数组(一般是二进制数组)。位图索引的结构为：&quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;如果序号为i的记录的值为x，则x的位图中的第i位设置为1&quot;]]]],[&quot;Plain&quot;,&quot;。以性别gender为例，假设我们有以下数据：&quot;]],536884447]],[&quot;^1A&quot;,[823,&quot;^1D&quot;,true,536882310]],[&quot;^1A&quot;,[823,&quot;^?&quot;,&quot;~u616406d6-f9f4-4f50-8d89-4b3895d82a54&quot;,536882310]],[&quot;^1A&quot;,[825,&quot;^S&quot;,[],536883301]],[&quot;^1A&quot;,[825,&quot;^[&quot;,&quot;建立位图索引后，==可以使用属性的位图进行快速的逻辑操作==，实现属性的范围查询。&quot;,536882596]],[&quot;^1A&quot;,[825,&quot;^W&quot;,&quot;^1H&quot;,536882557]],[&quot;^1A&quot;,[825,&quot;^K&quot;,823,536882557]],[&quot;^1A&quot;,[825,&quot;^X&quot;,1,536883301]],[&quot;^1A&quot;,[825,&quot;^17&quot;,82,536882557]],[&quot;^1A&quot;,[825,&quot;^13&quot;,821,536882557]],[&quot;^1A&quot;,[825,&quot;^12&quot;,82,536883301]],[&quot;^1A&quot;,[825,&quot;^12&quot;,822,536883301]],[&quot;^1A&quot;,[825,&quot;^D&quot;,[&quot;^ &quot;],536883301]],[&quot;^1A&quot;,[825,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;建立位图索引后，&quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;可以使用属性的位图进行快速的逻辑操作&quot;]]]],[&quot;Plain&quot;,&quot;，实现属性的范围查询。&quot;]],536883301]],[&quot;^1A&quot;,[825,&quot;^1D&quot;,true,536882557]],[&quot;^1A&quot;,[825,&quot;^?&quot;,&quot;~u61640898-344f-446a-b70a-fc38dd64d4da&quot;,536882557]],[&quot;^1A&quot;,[826,&quot;^11&quot;,&quot;~:recent/search&quot;,536882647]],[&quot;^1A&quot;,[827,&quot;^E&quot;,false,536882648]],[&quot;^1A&quot;,[827,&quot;^19&quot;,&quot;聚簇索引&quot;,536882648]],[&quot;^1A&quot;,[827,&quot;^1=&quot;,&quot;聚簇索引&quot;,536882648]],[&quot;^1A&quot;,[827,&quot;^?&quot;,&quot;~u61640a41-a5b7-4f49-ba82-8c924fcc15ef&quot;,536882648]],[&quot;^1A&quot;,[828,&quot;^E&quot;,false,536882654]],[&quot;^1A&quot;,[828,&quot;^19&quot;,&quot;覆盖索引&quot;,536882654]],[&quot;^1A&quot;,[828,&quot;^1=&quot;,&quot;覆盖索引&quot;,536882654]],[&quot;^1A&quot;,[828,&quot;^?&quot;,&quot;~u61640a53-f530-452e-8b88-82b8a0144c68&quot;,536882654]],[&quot;^1A&quot;,[829,&quot;^S&quot;,[],536882821]],[&quot;^1A&quot;,[829,&quot;^[&quot;,&quot;结果集在原集合中所占的比例越大，索引的速度就越慢，因为**使用索引需要进行两次查找**。一次是查找索引条目，一次是根据索引指针去查找相应的文档。在最坏的情况下(全表扫描)，使用索引进行的查找次数会是全表扫描的两倍。&quot;,536882821]],[&quot;^1A&quot;,[829,&quot;^W&quot;,&quot;^1H&quot;,536882793]],[&quot;^1A&quot;,[829,&quot;^K&quot;,820,536882793]],[&quot;^1A&quot;,[829,&quot;^X&quot;,1,536882821]],[&quot;^1A&quot;,[829,&quot;^17&quot;,82,536882793]],[&quot;^1A&quot;,[829,&quot;^13&quot;,820,536882794]],[&quot;^1A&quot;,[829,&quot;^12&quot;,82,536882821]],[&quot;^1A&quot;,[829,&quot;^12&quot;,828,536882821]],[&quot;^1A&quot;,[829,&quot;^D&quot;,[&quot;^ &quot;],536882821]],[&quot;^1A&quot;,[829,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;结果集在原集合中所占的比例越大，索引的速度就越慢，因为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;使用索引需要进行两次查找&quot;]]]],[&quot;Plain&quot;,&quot;。一次是查找索引条目，一次是根据索引指针去查找相应的文档。在最坏的情况下(全表扫描)，使用索引进行的查找次数会是全表扫描的两倍。&quot;]],536882821]],[&quot;^1A&quot;,[829,&quot;^1D&quot;,true,536882793]],[&quot;^1A&quot;,[829,&quot;^?&quot;,&quot;~u61640c90-7a97-4d73-82d0-11ec670504f2&quot;,536882793]],[&quot;^1A&quot;,[830,&quot;^S&quot;,[],536883364]],[&quot;^1A&quot;,[830,&quot;^[&quot;,&quot;## [[索引]]&quot;,536882892]],[&quot;^1A&quot;,[830,&quot;^W&quot;,&quot;^1H&quot;,536882886]],[&quot;^1A&quot;,[830,&quot;^14&quot;,2,536883364]],[&quot;^1A&quot;,[830,&quot;^K&quot;,567,536882886]],[&quot;^1A&quot;,[830,&quot;^X&quot;,1,536883364]],[&quot;^1A&quot;,[830,&quot;^17&quot;,54,536882886]],[&quot;^1A&quot;,[830,&quot;^13&quot;,54,536882886]],[&quot;^1A&quot;,[830,&quot;^12&quot;,54,536883364]],[&quot;^1A&quot;,[830,&quot;^12&quot;,82,536883364]],[&quot;^1A&quot;,[830,&quot;^D&quot;,[&quot;^ &quot;],536883364]],[&quot;^1A&quot;,[830,&quot;^L&quot;,82,536883364]],[&quot;^1A&quot;,[830,&quot;^1M&quot;,2,536882889]],[&quot;^1A&quot;,[830,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;索引&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[索引]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536883364]],[&quot;^1A&quot;,[830,&quot;^15&quot;,&quot;^1N&quot;,536883364]],[&quot;^1A&quot;,[830,&quot;^1D&quot;,false,536882889]],[&quot;^1A&quot;,[830,&quot;^?&quot;,&quot;~u616502d7-2d03-48cf-b6be-1bda0694a2a1&quot;,536882886]],[&quot;^1A&quot;,[833,&quot;^E&quot;,false,536882946]],[&quot;^1A&quot;,[833,&quot;^19&quot;,&quot;sstable&quot;,536882946]],[&quot;^1A&quot;,[833,&quot;^1=&quot;,&quot;SSTable&quot;,536882946]],[&quot;^1A&quot;,[833,&quot;^?&quot;,&quot;~u616503b0-e97f-45f1-8438-503f4124636d&quot;,536882946]],[&quot;^1A&quot;,[844,&quot;^1E&quot;,&quot;LSM-e6--a0--91-&quot;,536883309]],[&quot;^1A&quot;,[844,&quot;^S&quot;,[],536883319]],[&quot;^1A&quot;,[844,&quot;^[&quot;,&quot;## TODO #LSM&quot;,536884450]],[&quot;^1A&quot;,[844,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[844,&quot;^14&quot;,2,536883319]],[&quot;^1A&quot;,[844,&quot;^K&quot;,821,536883310]],[&quot;^1A&quot;,[844,&quot;^X&quot;,1,536883319]],[&quot;^1A&quot;,[844,&quot;^1&lt;&quot;,&quot;TODO&quot;,536883319]],[&quot;^1A&quot;,[844,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[844,&quot;^13&quot;,82,536883309]],[&quot;^1A&quot;,[844,&quot;^12&quot;,2,536883319]],[&quot;^1A&quot;,[844,&quot;^12&quot;,82,536883319]],[&quot;^1A&quot;,[844,&quot;^12&quot;,855,536883319]],[&quot;^1A&quot;,[844,&quot;^D&quot;,[&quot;^ &quot;],536884450]],[&quot;^1A&quot;,[844,&quot;^P&quot;,[&quot;^1@&quot;,[&quot;^25&quot;]],536883309]],[&quot;^1A&quot;,[844,&quot;^L&quot;,2,536883319]],[&quot;^1A&quot;,[844,&quot;^L&quot;,855,536883319]],[&quot;^1A&quot;,[844,&quot;^1M&quot;,2,536883309]],[&quot;^1A&quot;,[844,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;LSM&quot;]]]],536883319]],[&quot;^1A&quot;,[844,&quot;^15&quot;,&quot;^1N&quot;,536883319]],[&quot;^1A&quot;,[844,&quot;^1D&quot;,true,536883348]],[&quot;^1A&quot;,[844,&quot;^?&quot;,&quot;~u963b884c-b546-428e-a515-3ebe51a4068b&quot;,536883309]],[&quot;^1A&quot;,[845,&quot;^S&quot;,[],536883309]],[&quot;^1A&quot;,[845,&quot;^[&quot;,&quot;LSM(Log Structed Merge Tree)树本质上和B+树一样，是一种磁盘数据的索引结构，但和B+树不同的是，LSM树索引对写入请求更友好。因为==无论是何种写入请求，LSM树都会将写入操作处理为一次顺序写==。&quot;,536883309]],[&quot;^1A&quot;,[845,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[845,&quot;^K&quot;,844,536883309]],[&quot;^1A&quot;,[845,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[845,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[845,&quot;^13&quot;,844,536883309]],[&quot;^1A&quot;,[845,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[845,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[845,&quot;^D&quot;,[&quot;^ &quot;],536883309]],[&quot;^1A&quot;,[845,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;LSM(Log Structed Merge Tree)树本质上和B+树一样，是一种磁盘数据的索引结构，但和B+树不同的是，LSM树索引对写入请求更友好。因为&quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;无论是何种写入请求，LSM树都会将写入操作处理为一次顺序写&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;]],536883309]],[&quot;^1A&quot;,[845,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[845,&quot;^?&quot;,&quot;~u4929b42d-4564-474e-a88d-1138cfa1ad5a&quot;,536883309]],[&quot;^1A&quot;,[846,&quot;^S&quot;,[],536883309]],[&quot;^1A&quot;,[846,&quot;^[&quot;,&quot;#SSTable &quot;,536883309]],[&quot;^1A&quot;,[846,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[846,&quot;^K&quot;,845,536883309]],[&quot;^1A&quot;,[846,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[846,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[846,&quot;^13&quot;,844,536883309]],[&quot;^1A&quot;,[846,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[846,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[846,&quot;^12&quot;,833,536883309]],[&quot;^1A&quot;,[846,&quot;^D&quot;,[&quot;^ &quot;],536883309]],[&quot;^1A&quot;,[846,&quot;^L&quot;,833,536883309]],[&quot;^1A&quot;,[846,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;SSTable&quot;]]],[&quot;Plain&quot;,&quot; &quot;]],536883309]],[&quot;^1A&quot;,[846,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[846,&quot;^?&quot;,&quot;~u37e08b42-ee2a-45b7-bcd6-32b5ab4822d4&quot;,536883309]],[&quot;^1A&quot;,[847,&quot;^S&quot;,[],536883309]],[&quot;^1A&quot;,[847,&quot;^[&quot;,&quot;**SSTable**是一种拥==有持久化，有序且不可变==的的键值存储结构，它的key和value都是任意的字节数组，并且了提供了按指定key查找和指定范围的key区间迭代遍历的功能。SSTable内部包含了一系列可配置大小的Block块，典型的大小是64KB，关于这些Block块的index存储在SSTable的尾部，用于帮助快速查找特定的Block。&quot;,536883309]],[&quot;^1A&quot;,[847,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[847,&quot;^K&quot;,846,536883309]],[&quot;^1A&quot;,[847,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[847,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[847,&quot;^13&quot;,846,536883309]],[&quot;^1A&quot;,[847,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[847,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[847,&quot;^12&quot;,833,536883309]],[&quot;^1A&quot;,[847,&quot;^D&quot;,[&quot;^ &quot;],536883309]],[&quot;^1A&quot;,[847,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;SSTable&quot;]]]],[&quot;Plain&quot;,&quot;是一种拥&quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;有持久化，有序且不可变&quot;]]]],[&quot;Plain&quot;,&quot;的的键值存储结构，它的key和value都是任意的字节数组，并且了提供了按指定key查找和指定范围的key区间迭代遍历的功能。SSTable内部包含了一系列可配置大小的Block块，典型的大小是64KB，关于这些Block块的index存储在SSTable的尾部，用于帮助快速查找特定的Block。&quot;]],536883309]],[&quot;^1A&quot;,[847,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[847,&quot;^?&quot;,&quot;~u2671541e-398b-440d-a64b-871560c1a295&quot;,536883309]],[&quot;^1A&quot;,[848,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628237160758_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628237160758_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;HBase LSM Tree&quot;]]]],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;HDFS擅长的正是顺序写（且HDFS不支持随机写），因此基于HDFS实现的HBase采用LSM树作为索引是一种很合适的选择。LSM树的索引一般由两部分组成，一部分是内存部分，一部分是磁盘部分。磁盘部分一般由多个内部KeyValue有序的文件组成。 &quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627957264720_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627957264720_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;type表示这个KeyValue是Put操作，还是Delete操作，或者是其他写入操作。本质上，LSM树中存放的并非数据本身，而是操作记录。这对应了LSM树（Log-Structured Merge-Tree）中Log的含义，即操作日志。&quot;]]]],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;内存部分LSM树一般采用 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Block_ref&quot;,&quot;60fced9d-a7e4-4ba9-a112-22d456758c59&quot;],&quot;^1V&quot;,[],&quot;^1W&quot;,&quot;((60fced9d-a7e4-4ba9-a112-22d456758c59))&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Plain&quot;,&quot; 来维护一个有序的KeyValue集合。HBase中是一个ConcurrentSkipListMap，Key就是前面所说的Key部分，Value是一个字节数组。数据写入时，直接写入MemStore中。随着不断写入，一旦内存占用超过一定的阈值时，就把内存部分的数据导出，形成一个有序的数据文件，存储在磁盘上。&quot;],[&quot;Break_Line&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1627960068858_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1627960068858_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;],[&quot;Plain&quot;,&quot;在整个数据写入过程中，LSM树全部都是使用&quot;],[&quot;Code&quot;,&quot;append&quot;],[&quot;Plain&quot;,&quot;操作（磁盘顺序写）来实现数据写入的，没有使用任何seek+write（磁盘随机写）的方式来写入。无论HDD还是SSD，磁盘的顺序写操作性能和延迟都远好于磁盘随机写。因此LSM树是一种对写入极为友好的索引结构，它能将磁盘的写入带宽利用到极致。&quot;]]]]],536883309]],[&quot;^1A&quot;,[848,&quot;^[&quot;,&quot;当一个SSTable被打开的时候，index会被加载到内存，然后根据key在内存index里面进行一个二分查找，查到该key对应的磁盘的offset之后，然后去磁盘把响应的块数据读取出来。当然如果内存足够大的话，可以直接把SSTable直接通过MMap的技术映射到内存中，从而提供更快的查找。 \\ncollapsed:: true\\n![image.png](../assets/image_1628237160758_0.png) \\n\\n_HBase LSM Tree_\\n\\nHDFS擅长的正是顺序写（且HDFS不支持随机写），因此基于HDFS实现的HBase采用LSM树作为索引是一种很合适的选择。LSM树的索引一般由两部分组成，一部分是内存部分，一部分是磁盘部分。磁盘部分一般由多个内部KeyValue有序的文件组成。 \\n![image.png](../assets/image_1627957264720_0.png)\\n&gt; _type表示这个KeyValue是Put操作，还是Delete操作，或者是其他写入操作。本质上，LSM树中存放的并非数据本身，而是操作记录。这对应了LSM树（Log-Structured Merge-Tree）中Log的含义，即操作日志。_\\n\\n内存部分LSM树一般采用 ((60fced9d-a7e4-4ba9-a112-22d456758c59)) 来维护一个有序的KeyValue集合。HBase中是一个ConcurrentSkipListMap，Key就是前面所说的Key部分，Value是一个字节数组。数据写入时，直接写入MemStore中。随着不断写入，一旦内存占用超过一定的阈值时，就把内存部分的数据导出，形成一个有序的数据文件，存储在磁盘上。\\n![image.png](../assets/image_1627960068858_0.png)\\n在整个数据写入过程中，LSM树全部都是使用`append`操作（磁盘顺序写）来实现数据写入的，没有使用任何seek+write（磁盘随机写）的方式来写入。无论HDD还是SSD，磁盘的顺序写操作性能和延迟都远好于磁盘随机写。因此LSM树是一种对写入极为友好的索引结构，它能将磁盘的写入带宽利用到极致。&quot;,536884456]],[&quot;^1A&quot;,[848,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[848,&quot;^K&quot;,847,536883309]],[&quot;^1A&quot;,[848,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[848,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[848,&quot;^13&quot;,846,536883309]],[&quot;^1A&quot;,[848,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[848,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[848,&quot;^12&quot;,833,536883309]],[&quot;^1A&quot;,[848,&quot;^D&quot;,[&quot;^ &quot;,&quot;^2D&quot;,true],536884456]],[&quot;^1A&quot;,[848,&quot;^L&quot;,344,536883309]],[&quot;^1A&quot;,[848,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;当一个SSTable被打开的时候，index会被加载到内存，然后根据key在内存index里面进行一个二分查找，查到该key对应的磁盘的offset之后，然后去磁盘把响应的块数据读取出来。当然如果内存足够大的话，可以直接把SSTable直接通过MMap的技术映射到内存中，从而提供更快的查找。 &quot;]],536883309]],[&quot;^1A&quot;,[848,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[848,&quot;^?&quot;,&quot;~ubf3596f2-0618-46df-8166-1beae817d0e5&quot;,536883309]],[&quot;^1A&quot;,[849,&quot;^S&quot;,[],536883309]],[&quot;^1A&quot;,[849,&quot;^[&quot;,&quot;LSM-Tree结构 ![image.png](../assets/image_1628237205729_0.png)&quot;,536883309]],[&quot;^1A&quot;,[849,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[849,&quot;^K&quot;,846,536883309]],[&quot;^1A&quot;,[849,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[849,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[849,&quot;^13&quot;,844,536883309]],[&quot;^1A&quot;,[849,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[849,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[849,&quot;^D&quot;,[&quot;^ &quot;],536883309]],[&quot;^1A&quot;,[849,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;LSM-Tree结构 &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1628237205729_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1628237205729_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536883309]],[&quot;^1A&quot;,[849,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[849,&quot;^?&quot;,&quot;~uc1bfcca2-02c6-4683-ab99-424f924e0ba5&quot;,536883309]],[&quot;^1A&quot;,[850,&quot;^S&quot;,[],536883309]],[&quot;^1A&quot;,[850,&quot;^[&quot;,&quot;在LSM-Tree里，SSTable一份在内存，其余多级在磁盘。&quot;,536883309]],[&quot;^1A&quot;,[850,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[850,&quot;^K&quot;,849,536883309]],[&quot;^1A&quot;,[850,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[850,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[850,&quot;^13&quot;,849,536883309]],[&quot;^1A&quot;,[850,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[850,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[850,&quot;^D&quot;,[&quot;^ &quot;],536883309]],[&quot;^1A&quot;,[850,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;在LSM-Tree里，SSTable一份在内存，其余多级在磁盘。&quot;]],536883309]],[&quot;^1A&quot;,[850,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[850,&quot;^?&quot;,&quot;~ub9d408f8-837d-4689-b7ab-ac8969dcca36&quot;,536883309]],[&quot;^1A&quot;,[851,&quot;^S&quot;,[],536883309]],[&quot;^1A&quot;,[851,&quot;^[&quot;,&quot;写请求&quot;,536883309]],[&quot;^1A&quot;,[851,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[851,&quot;^K&quot;,850,536883309]],[&quot;^1A&quot;,[851,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[851,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[851,&quot;^13&quot;,849,536883309]],[&quot;^1A&quot;,[851,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[851,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[851,&quot;^D&quot;,[&quot;^ &quot;],536883309]],[&quot;^1A&quot;,[851,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;写请求&quot;]],536883309]],[&quot;^1A&quot;,[851,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[851,&quot;^?&quot;,&quot;~u64c100fd-6ce0-4e61-8fe6-2d92e45be07a&quot;,536883309]],[&quot;^1A&quot;,[852,&quot;^S&quot;,[[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;当收到一个写请求时，会先把该条数据记录在WAL Log里面，用作故障恢复。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;当写完WAL Log后，会把该条数据写入内存的&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;SSTable&quot;]]]],[&quot;Plain&quot;,&quot;里面，其中删除是墓碑标记，更新是新记录一条的数据，内存里的SSTable也称&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;Memtable&quot;]]]],[&quot;Plain&quot;,&quot;。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true]]],[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;为了维持有序性内存SSTable可能采用红黑树或者跳跃表相关的数据结构&quot;],[&quot;Break_Line&quot;]]]]],[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;当Memtable超过一定的大小后，会在内存里面冻结成不可变Memtable，同时为了不阻塞写操作会新生成一个Memtable继续提供服务。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,3,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;内存不可变Memtable给dump到硬盘上的SSTable层中的过程称为&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;Minor Compaction&quot;]]]],[&quot;Plain&quot;,&quot;，这里需要注意在L0层的SSTable是没有进行合并的，所以这里的key range在多个SSTable中可能会出现重叠，在层数大于0层之后的SSTable，不存在重叠key。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,4,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;当每层的磁盘上的SSTable的体积超过一定的大小或者个数，也会周期的进行合并。此步骤也称为Major Compaction，这个阶段会真正的清除掉被标记删除掉的数据以及多版本数据的合并，避免浪费空间，注意由于SSTable都是有序的，我们可以直接采用&quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;多路归并排序&quot;]]]],[&quot;Plain&quot;,&quot;进行高效合并。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,5,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true]]]],536883309]],[&quot;^1A&quot;,[852,&quot;^[&quot;,&quot;1. 当收到一个写请求时，会先把该条数据记录在WAL Log里面，用作故障恢复。\\n2. 当写完WAL Log后，会把该条数据写入内存的**SSTable**里面，其中删除是墓碑标记，更新是新记录一条的数据，内存里的SSTable也称**Memtable**。\\n&gt; 为了维持有序性内存SSTable可能采用红黑树或者跳跃表相关的数据结构\\n3. 当Memtable超过一定的大小后，会在内存里面冻结成不可变Memtable，同时为了不阻塞写操作会新生成一个Memtable继续提供服务。\\n4. 内存不可变Memtable给dump到硬盘上的SSTable层中的过程称为**Minor Compaction**，这里需要注意在L0层的SSTable是没有进行合并的，所以这里的key range在多个SSTable中可能会出现重叠，在层数大于0层之后的SSTable，不存在重叠key。\\n5. 当每层的磁盘上的SSTable的体积超过一定的大小或者个数，也会周期的进行合并。此步骤也称为Major Compaction，这个阶段会真正的清除掉被标记删除掉的数据以及多版本数据的合并，避免浪费空间，注意由于SSTable都是有序的，我们可以直接采用**多路归并排序**进行高效合并。&quot;,536883309]],[&quot;^1A&quot;,[852,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[852,&quot;^K&quot;,851,536883309]],[&quot;^1A&quot;,[852,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[852,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[852,&quot;^13&quot;,851,536883309]],[&quot;^1A&quot;,[852,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[852,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[852,&quot;^D&quot;,[&quot;^ &quot;],536883309]],[&quot;^1A&quot;,[852,&quot;^Z&quot;,[],536883309]],[&quot;^1A&quot;,[852,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[852,&quot;^?&quot;,&quot;~u26638214-b474-4edc-82d3-5de764215693&quot;,536883309]],[&quot;^1A&quot;,[853,&quot;^S&quot;,[],536883309]],[&quot;^1A&quot;,[853,&quot;^[&quot;,&quot;读请求&quot;,536883309]],[&quot;^1A&quot;,[853,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[853,&quot;^K&quot;,851,536883309]],[&quot;^1A&quot;,[853,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[853,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[853,&quot;^13&quot;,849,536883309]],[&quot;^1A&quot;,[853,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[853,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[853,&quot;^D&quot;,[&quot;^ &quot;],536883309]],[&quot;^1A&quot;,[853,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;读请求&quot;]],536883309]],[&quot;^1A&quot;,[853,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[853,&quot;^?&quot;,&quot;~ubf3c162a-24ab-46ce-b057-f562c133c199&quot;,536883309]],[&quot;^1A&quot;,[854,&quot;^S&quot;,[[&quot;List&quot;,[[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;收到读请求时会先在内存里面查询，如果查询到就返回。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,1,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true],[&quot;^ &quot;,&quot;^1[&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;否则依次下沉，查询所有的Level层得到最终结果。&quot;]]]],&quot;^20&quot;,[],&quot;^21&quot;,2,&quot;^22&quot;,[],&quot;^23&quot;,0,&quot;^24&quot;,true]]]],536883309]],[&quot;^1A&quot;,[854,&quot;^[&quot;,&quot;1. 收到读请求时会先在内存里面查询，如果查询到就返回。\\n2. 否则依次下沉，查询所有的Level层得到最终结果。&quot;,536883309]],[&quot;^1A&quot;,[854,&quot;^W&quot;,&quot;^1H&quot;,536883309]],[&quot;^1A&quot;,[854,&quot;^K&quot;,853,536883309]],[&quot;^1A&quot;,[854,&quot;^X&quot;,1,536883309]],[&quot;^1A&quot;,[854,&quot;^17&quot;,82,536883309]],[&quot;^1A&quot;,[854,&quot;^13&quot;,853,536883309]],[&quot;^1A&quot;,[854,&quot;^12&quot;,65,536883309]],[&quot;^1A&quot;,[854,&quot;^12&quot;,82,536883309]],[&quot;^1A&quot;,[854,&quot;^D&quot;,[&quot;^ &quot;],536883309]],[&quot;^1A&quot;,[854,&quot;^Z&quot;,[],536883309]],[&quot;^1A&quot;,[854,&quot;^1D&quot;,true,536883309]],[&quot;^1A&quot;,[854,&quot;^?&quot;,&quot;~u8a2b20e1-3ee7-4f2b-b0b5-5d932a57222b&quot;,536883309]],[&quot;^1A&quot;,[855,&quot;^E&quot;,false,536883316]],[&quot;^1A&quot;,[855,&quot;^19&quot;,&quot;lsm&quot;,536883316]],[&quot;^1A&quot;,[855,&quot;^1=&quot;,&quot;LSM&quot;,536883316]],[&quot;^1A&quot;,[855,&quot;^?&quot;,&quot;~u6165071a-6b10-467e-a9c0-1ae8c7bd3ba0&quot;,536883316]],[&quot;^1A&quot;,[856,&quot;^S&quot;,[],536883323]],[&quot;^1A&quot;,[856,&quot;^[&quot;,&quot;&quot;,536883323]],[&quot;^1A&quot;,[856,&quot;^W&quot;,&quot;^1H&quot;,536883323]],[&quot;^1A&quot;,[856,&quot;^E&quot;,false,536883323]],[&quot;^1A&quot;,[856,&quot;^K&quot;,65,536883323]],[&quot;^1A&quot;,[856,&quot;^X&quot;,1,536883323]],[&quot;^1A&quot;,[856,&quot;^17&quot;,65,536883323]],[&quot;^1A&quot;,[856,&quot;^13&quot;,65,536883323]],[&quot;^1A&quot;,[856,&quot;^D&quot;,[&quot;^ &quot;],536883323]],[&quot;^1A&quot;,[856,&quot;^Z&quot;,[],536883323]],[&quot;^1A&quot;,[856,&quot;^1D&quot;,true,536883323]],[&quot;^1A&quot;,[856,&quot;^?&quot;,&quot;~u6165072d-eba6-4c67-9dc1-d26625843a3e&quot;,536883323]],[&quot;^1A&quot;,[857,&quot;^S&quot;,[],536884460]],[&quot;^1A&quot;,[857,&quot;^[&quot;,&quot;## [[查询处理]]&quot;,536884324]],[&quot;^1A&quot;,[857,&quot;^W&quot;,&quot;^1H&quot;,536883365]],[&quot;^1A&quot;,[857,&quot;^14&quot;,2,536884460]],[&quot;^1A&quot;,[857,&quot;^K&quot;,830,536883365]],[&quot;^1A&quot;,[857,&quot;^X&quot;,1,536884460]],[&quot;^1A&quot;,[857,&quot;^17&quot;,54,536883365]],[&quot;^1A&quot;,[857,&quot;^13&quot;,54,536883365]],[&quot;^1A&quot;,[857,&quot;^12&quot;,54,536884460]],[&quot;^1A&quot;,[857,&quot;^12&quot;,1040,536884460]],[&quot;^1A&quot;,[857,&quot;^D&quot;,[&quot;^ &quot;],536884460]],[&quot;^1A&quot;,[857,&quot;^L&quot;,1040,536884460]],[&quot;^1A&quot;,[857,&quot;^1M&quot;,2,536883368]],[&quot;^1A&quot;,[857,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;查询处理&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[查询处理]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536884460]],[&quot;^1A&quot;,[857,&quot;^15&quot;,&quot;^1N&quot;,536884460]],[&quot;^1A&quot;,[857,&quot;^1D&quot;,false,536884321]],[&quot;^1A&quot;,[857,&quot;^?&quot;,&quot;~u6165269a-f8f6-44ac-a421-ce37b6062c5f&quot;,536883365]],[&quot;^1A&quot;,[859,&quot;^E&quot;,false,536883377]],[&quot;^1A&quot;,[859,&quot;^19&quot;,&quot;排序&quot;,536883377]],[&quot;^1A&quot;,[859,&quot;^1=&quot;,&quot;排序&quot;,536883377]],[&quot;^1A&quot;,[859,&quot;^?&quot;,&quot;~u616526c4-bcc5-4b8c-999f-8ee3a07c27ad&quot;,536883377]],[&quot;^1A&quot;,[860,&quot;^E&quot;,false,536883383]],[&quot;^1A&quot;,[860,&quot;^19&quot;,&quot;多路归并&quot;,536883383]],[&quot;^1A&quot;,[860,&quot;^1=&quot;,&quot;多路归并&quot;,536883383]],[&quot;^1A&quot;,[860,&quot;^?&quot;,&quot;~u6165271f-80b5-466e-861f-f0e5e909c1eb&quot;,536883383]],[&quot;^1A&quot;,[861,&quot;^Q&quot;,1634019109254,536883391]],[&quot;^1A&quot;,[861,&quot;^E&quot;,false,536883386]],[&quot;^1A&quot;,[861,&quot;^19&quot;,&quot;多路归并排序&quot;,536883386]],[&quot;^1A&quot;,[861,&quot;^1=&quot;,&quot;多路归并排序&quot;,536883386]],[&quot;^1A&quot;,[861,&quot;^G&quot;,1634019177609,536883423]],[&quot;^1A&quot;,[861,&quot;^?&quot;,&quot;~u61652720-c1d2-48e0-96be-4a34b757b28e&quot;,536883386]],[&quot;^1A&quot;,[862,&quot;^S&quot;,[],536883416]],[&quot;^1A&quot;,[862,&quot;^[&quot;,&quot;#外排序 对不能全都放在内存中的数据的排序称为外排序&quot;,536883413]],[&quot;^1A&quot;,[862,&quot;^W&quot;,&quot;^1H&quot;,536883390]],[&quot;^1A&quot;,[862,&quot;^E&quot;,false,536883390]],[&quot;^1A&quot;,[862,&quot;^K&quot;,861,536883390]],[&quot;^1A&quot;,[862,&quot;^X&quot;,1,536883416]],[&quot;^1A&quot;,[862,&quot;^17&quot;,861,536883390]],[&quot;^1A&quot;,[862,&quot;^13&quot;,861,536883390]],[&quot;^1A&quot;,[862,&quot;^12&quot;,861,536883416]],[&quot;^1A&quot;,[862,&quot;^12&quot;,865,536883416]],[&quot;^1A&quot;,[862,&quot;^D&quot;,[&quot;^ &quot;],536883416]],[&quot;^1A&quot;,[862,&quot;^L&quot;,865,536883416]],[&quot;^1A&quot;,[862,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;外排序&quot;]]],[&quot;Plain&quot;,&quot; 对不能全都放在内存中的数据的排序称为外排序&quot;]],536883416]],[&quot;^1A&quot;,[862,&quot;^1D&quot;,true,536883390]],[&quot;^1A&quot;,[862,&quot;^?&quot;,&quot;~u61652722-9e92-4f7d-9de5-867a57e36ba2&quot;,536883390]],[&quot;^1A&quot;,[864,&quot;^E&quot;,false,536883395]],[&quot;^1A&quot;,[864,&quot;^19&quot;,&quot;外部排序&quot;,536883395]],[&quot;^1A&quot;,[864,&quot;^1=&quot;,&quot;外部排序&quot;,536883395]],[&quot;^1A&quot;,[864,&quot;^?&quot;,&quot;~u61652737-0cab-4c58-87ee-b214ea2c67b9&quot;,536883395]],[&quot;^1A&quot;,[865,&quot;^E&quot;,false,536883413]],[&quot;^1A&quot;,[865,&quot;^19&quot;,&quot;外排序&quot;,536883413]],[&quot;^1A&quot;,[865,&quot;^1=&quot;,&quot;外排序&quot;,536883413]],[&quot;^1A&quot;,[865,&quot;^?&quot;,&quot;~u6165274e-6613-4af1-bb66-03dab016eb45&quot;,536883413]],[&quot;^1A&quot;,[866,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1634019177028_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1634019177028_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]]]]],536883423]],[&quot;^1A&quot;,[866,&quot;^[&quot;,&quot;示意图\\n![image.png](../assets/image_1634019177028_0.png)&quot;,536883423]],[&quot;^1A&quot;,[866,&quot;^W&quot;,&quot;^1H&quot;,536883417]],[&quot;^1A&quot;,[866,&quot;^E&quot;,false,536883417]],[&quot;^1A&quot;,[866,&quot;^K&quot;,862,536883417]],[&quot;^1A&quot;,[866,&quot;^X&quot;,1,536883423]],[&quot;^1A&quot;,[866,&quot;^17&quot;,861,536883417]],[&quot;^1A&quot;,[866,&quot;^13&quot;,861,536883417]],[&quot;^1A&quot;,[866,&quot;^12&quot;,861,536883423]],[&quot;^1A&quot;,[866,&quot;^D&quot;,[&quot;^ &quot;],536883423]],[&quot;^1A&quot;,[866,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;示意图&quot;]],536883423]],[&quot;^1A&quot;,[866,&quot;^1D&quot;,true,536883417]],[&quot;^1A&quot;,[866,&quot;^?&quot;,&quot;~u61652751-6280-4b1a-ba4e-b02619682b5b&quot;,536883417]],[&quot;^1A&quot;,[888,&quot;^S&quot;,[],536884117]],[&quot;^1A&quot;,[888,&quot;^[&quot;,&quot;&quot;,536884117]],[&quot;^1A&quot;,[888,&quot;^W&quot;,&quot;^1H&quot;,536884117]],[&quot;^1A&quot;,[888,&quot;^E&quot;,false,536884117]],[&quot;^1A&quot;,[888,&quot;^K&quot;,750,536884117]],[&quot;^1A&quot;,[888,&quot;^X&quot;,1,536884117]],[&quot;^1A&quot;,[888,&quot;^17&quot;,750,536884117]],[&quot;^1A&quot;,[888,&quot;^13&quot;,750,536884117]],[&quot;^1A&quot;,[888,&quot;^D&quot;,[&quot;^ &quot;],536884117]],[&quot;^1A&quot;,[888,&quot;^Z&quot;,[],536884117]],[&quot;^1A&quot;,[888,&quot;^1D&quot;,true,536884117]],[&quot;^1A&quot;,[888,&quot;^?&quot;,&quot;~u61652f07-f646-4ef9-a685-94d7978f212f&quot;,536884117]],[&quot;^1A&quot;,[889,&quot;^Q&quot;,1634021561749,536884140]],[&quot;^1A&quot;,[889,&quot;^E&quot;,false,536884132]],[&quot;^1A&quot;,[889,&quot;^19&quot;,&quot;数据库术语&quot;,536884132]],[&quot;^1A&quot;,[889,&quot;^1=&quot;,&quot;数据库术语&quot;,536884132]],[&quot;^1A&quot;,[889,&quot;^G&quot;,1634021603586,536884152]],[&quot;^1A&quot;,[889,&quot;^?&quot;,&quot;~u616530b5-cc3d-4e93-85bf-b7d1de229f55&quot;,536884132]],[&quot;^1A&quot;,[892,&quot;^S&quot;,[],536884152]],[&quot;^1A&quot;,[892,&quot;^[&quot;,&quot;**`视图`** 视图是一种虚关系，在概念上包含查询的结果，但实际上不存储查询结果，而是当使用虚关系时才通过执行查询被计算出来。&quot;,536884141]],[&quot;^1A&quot;,[892,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[892,&quot;^K&quot;,889,536884152]],[&quot;^1A&quot;,[892,&quot;^X&quot;,2,536884152]],[&quot;^1A&quot;,[892,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[892,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[892,&quot;^12&quot;,889,536884152]],[&quot;^1A&quot;,[892,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;视图&quot;]]]],[&quot;Plain&quot;,&quot; 视图是一种虚关系，在概念上包含查询的结果，但实际上不存储查询结果，而是当使用虚关系时才通过执行查询被计算出来。&quot;]],536884152]],[&quot;^1A&quot;,[892,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[892,&quot;^?&quot;,&quot;~u6da9bade-0b6c-446e-9f48-18c2c70558d1&quot;,536884141]],[&quot;^1A&quot;,[893,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[893,&quot;^[&quot;,&quot;**`物化视图`** 如果用于定义视图的实际关系改变，视图也跟着修改，这样的视图被称为物化视图。&quot;,536884141]],[&quot;^1A&quot;,[893,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[893,&quot;^K&quot;,892,536884141]],[&quot;^1A&quot;,[893,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[893,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[893,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[893,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[893,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;物化视图&quot;]]]],[&quot;Plain&quot;,&quot; 如果用于定义视图的实际关系改变，视图也跟着修改，这样的视图被称为物化视图。&quot;]],536884149]],[&quot;^1A&quot;,[893,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[893,&quot;^?&quot;,&quot;~ue6efff34-67d7-494e-97ad-6a0e54cd75a4&quot;,536884141]],[&quot;^1A&quot;,[894,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[894,&quot;^[&quot;,&quot;**`事务`** 单一逻辑工作单元的操作集合构成称作事务。&quot;,536884141]],[&quot;^1A&quot;,[894,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[894,&quot;^K&quot;,893,536884141]],[&quot;^1A&quot;,[894,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[894,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[894,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[894,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[894,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;事务&quot;]]]],[&quot;Plain&quot;,&quot; 单一逻辑工作单元的操作集合构成称作事务。&quot;]],536884149]],[&quot;^1A&quot;,[894,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[894,&quot;^?&quot;,&quot;~u79006d30-75bb-44b6-93e4-4a0b39a10227&quot;,536884141]],[&quot;^1A&quot;,[895,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[895,&quot;^[&quot;,&quot;**`事务调度`** 表示事务指令在系统中执行的时间顺序。&quot;,536884141]],[&quot;^1A&quot;,[895,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[895,&quot;^K&quot;,894,536884141]],[&quot;^1A&quot;,[895,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[895,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[895,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[895,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[895,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;事务调度&quot;]]]],[&quot;Plain&quot;,&quot; 表示事务指令在系统中执行的时间顺序。&quot;]],536884149]],[&quot;^1A&quot;,[895,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[895,&quot;^?&quot;,&quot;~u9603e95a-d684-4924-9a5f-d957e2a0d368&quot;,536884141]],[&quot;^1A&quot;,[896,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[896,&quot;^[&quot;,&quot;**`可串行化`** 在并发执行中，通过保证所执行的任何调度的效果都与没有并发执行的调度效果一样，可以保证数据库的一致性。也就是说，调度等价于一个串行调度。这种调度成为可串行化调度。&quot;,536884141]],[&quot;^1A&quot;,[896,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[896,&quot;^K&quot;,895,536884141]],[&quot;^1A&quot;,[896,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[896,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[896,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[896,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[896,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;可串行化&quot;]]]],[&quot;Plain&quot;,&quot; 在并发执行中，通过保证所执行的任何调度的效果都与没有并发执行的调度效果一样，可以保证数据库的一致性。也就是说，调度等价于一个串行调度。这种调度成为可串行化调度。&quot;]],536884149]],[&quot;^1A&quot;,[896,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[896,&quot;^?&quot;,&quot;~u19c1d046-1484-4508-940a-56cc8824bf95&quot;,536884141]],[&quot;^1A&quot;,[897,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[897,&quot;^[&quot;,&quot;**`隐式事务`** SQL标准规定当一条SQL被执行，就隐式地开始了一个事务。&quot;,536884141]],[&quot;^1A&quot;,[897,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[897,&quot;^K&quot;,896,536884141]],[&quot;^1A&quot;,[897,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[897,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[897,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[897,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[897,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;隐式事务&quot;]]]],[&quot;Plain&quot;,&quot; SQL标准规定当一条SQL被执行，就隐式地开始了一个事务。&quot;]],536884149]],[&quot;^1A&quot;,[897,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[897,&quot;^?&quot;,&quot;~ub679bfb9-21bf-400e-a3d9-f9336f135911&quot;,536884141]],[&quot;^1A&quot;,[898,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[898,&quot;^[&quot;,&quot;**`完整性约束`** 完整性约束保证授权用户对数据库所做的修改不会破坏数据的一致性。&quot;,536884141]],[&quot;^1A&quot;,[898,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[898,&quot;^K&quot;,897,536884141]],[&quot;^1A&quot;,[898,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[898,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[898,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[898,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[898,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;完整性约束&quot;]]]],[&quot;Plain&quot;,&quot; 完整性约束保证授权用户对数据库所做的修改不会破坏数据的一致性。&quot;]],536884149]],[&quot;^1A&quot;,[898,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[898,&quot;^?&quot;,&quot;~u03c2ead7-de85-46d0-8c4c-6f33f3d2c1fd&quot;,536884141]],[&quot;^1A&quot;,[899,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[899,&quot;^[&quot;,&quot;**`迭代计算传递闭包 查找关系树是一类典型的SQL需求，可以用迭代查询解决。(mysql`** 8.0+)&quot;,536884141]],[&quot;^1A&quot;,[899,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[899,&quot;^K&quot;,898,536884141]],[&quot;^1A&quot;,[899,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[899,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[899,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[899,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[899,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;迭代计算传递闭包 查找关系树是一类典型的SQL需求，可以用迭代查询解决。(mysql&quot;]]]],[&quot;Plain&quot;,&quot; 8.0+)&quot;]],536884149]],[&quot;^1A&quot;,[899,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[899,&quot;^?&quot;,&quot;~u2ad01ed0-49f1-4330-ac67-4af1ffdd2359&quot;,536884141]],[&quot;^1A&quot;,[900,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[900,&quot;^[&quot;,&quot;**`高级聚集特性-分窗`** 与一般聚集函数group不同，分窗不会把聚集后的结果归类到一行里。&quot;,536884141]],[&quot;^1A&quot;,[900,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[900,&quot;^K&quot;,899,536884141]],[&quot;^1A&quot;,[900,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[900,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[900,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[900,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[900,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;高级聚集特性-分窗&quot;]]]],[&quot;Plain&quot;,&quot; 与一般聚集函数group不同，分窗不会把聚集后的结果归类到一行里。&quot;]],536884149]],[&quot;^1A&quot;,[900,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[900,&quot;^?&quot;,&quot;~uf16b029b-b9da-47d5-ad46-4949f9330020&quot;,536884141]],[&quot;^1A&quot;,[901,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[901,&quot;^[&quot;,&quot;**`高级聚集特性-排名`** RANK函数&quot;,536884141]],[&quot;^1A&quot;,[901,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[901,&quot;^K&quot;,900,536884141]],[&quot;^1A&quot;,[901,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[901,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[901,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[901,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[901,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;高级聚集特性-排名&quot;]]]],[&quot;Plain&quot;,&quot; RANK函数&quot;]],536884149]],[&quot;^1A&quot;,[901,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[901,&quot;^?&quot;,&quot;~uc521faf7-d9d6-4f81-9154-4ad3f82fd15a&quot;,536884141]],[&quot;^1A&quot;,[902,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[902,&quot;^[&quot;,&quot;**`实体-关系设计`** 数据库设计中常见一类问题：用实体还是属性来定义数据。例如，手机号一般作为用户的属性。但如果考虑到手机号可以由国际区号、是手机号还是固定电话等因素，则定义成实体更合适。然后用user-phone表表示关系。&quot;,536884141]],[&quot;^1A&quot;,[902,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[902,&quot;^K&quot;,901,536884141]],[&quot;^1A&quot;,[902,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[902,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[902,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[902,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[902,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;实体-关系设计&quot;]]]],[&quot;Plain&quot;,&quot; 数据库设计中常见一类问题：用实体还是属性来定义数据。例如，手机号一般作为用户的属性。但如果考虑到手机号可以由国际区号、是手机号还是固定电话等因素，则定义成实体更合适。然后用user-phone表表示关系。&quot;]],536884149]],[&quot;^1A&quot;,[902,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[902,&quot;^?&quot;,&quot;~ud50cf2a6-af99-43da-9144-433521c0fbf4&quot;,536884141]],[&quot;^1A&quot;,[903,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[903,&quot;^[&quot;,&quot;**`关系设计`** 一般而言，关系数据库的设计的目标是 生成一组关系模式 ，使我们存储信息时避免不必要的冗余。&quot;,536884141]],[&quot;^1A&quot;,[903,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[903,&quot;^K&quot;,902,536884141]],[&quot;^1A&quot;,[903,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[903,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[903,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[903,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[903,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;关系设计&quot;]]]],[&quot;Plain&quot;,&quot; 一般而言，关系数据库的设计的目标是 生成一组关系模式 ，使我们存储信息时避免不必要的冗余。&quot;]],536884149]],[&quot;^1A&quot;,[903,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[903,&quot;^?&quot;,&quot;~u0eb0e238-5436-4a6a-a810-827ada7f9acb&quot;,536884141]],[&quot;^1A&quot;,[904,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[904,&quot;^[&quot;,&quot;**`范式`** 第一范式：如果关系模式R的所有属性的域都是原子的，则称关系模式R属于第一范式，原子的域表示该域的元素是不可分的最小单元。&quot;,536884141]],[&quot;^1A&quot;,[904,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[904,&quot;^K&quot;,903,536884141]],[&quot;^1A&quot;,[904,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[904,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[904,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[904,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[904,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;范式&quot;]]]],[&quot;Plain&quot;,&quot; 第一范式：如果关系模式R的所有属性的域都是原子的，则称关系模式R属于第一范式，原子的域表示该域的元素是不可分的最小单元。&quot;]],536884149]],[&quot;^1A&quot;,[904,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[904,&quot;^?&quot;,&quot;~u59032cb4-79f2-490b-8feb-a9d3639fba92&quot;,536884141]],[&quot;^1A&quot;,[905,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[905,&quot;^[&quot;,&quot;**`servlet`** Java servlet定义了一种Web服务器与应用程序间通信的应用程序编程接口，通常servlet一词指实现了servlet接口的Java程序和类。&quot;,536884141]],[&quot;^1A&quot;,[905,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[905,&quot;^K&quot;,904,536884141]],[&quot;^1A&quot;,[905,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[905,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[905,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[905,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[905,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;servlet&quot;]]]],[&quot;Plain&quot;,&quot; Java servlet定义了一种Web服务器与应用程序间通信的应用程序编程接口，通常servlet一词指实现了servlet接口的Java程序和类。&quot;]],536884149]],[&quot;^1A&quot;,[905,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[905,&quot;^?&quot;,&quot;~u08622d59-1448-4ac0-96ef-31ccb92f8b1e&quot;,536884141]],[&quot;^1A&quot;,[906,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[906,&quot;^[&quot;,&quot;**`servlet生命周期`** ![image.png](../assets/image_1632983754528_0.png)&quot;,536884141]],[&quot;^1A&quot;,[906,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[906,&quot;^K&quot;,905,536884141]],[&quot;^1A&quot;,[906,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[906,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[906,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[906,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[906,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;servlet生命周期&quot;]]]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1632983754528_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1632983754528_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]]],536884149]],[&quot;^1A&quot;,[906,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[906,&quot;^?&quot;,&quot;~u6d99e9a2-e9d8-4248-8f01-6d81ac772f2a&quot;,536884141]],[&quot;^1A&quot;,[907,&quot;^S&quot;,[],536884149]],[&quot;^1A&quot;,[907,&quot;^[&quot;,&quot;**`对象-关系映射`** object-relational mapping&quot;,536884141]],[&quot;^1A&quot;,[907,&quot;^W&quot;,&quot;^1H&quot;,536884141]],[&quot;^1A&quot;,[907,&quot;^K&quot;,906,536884141]],[&quot;^1A&quot;,[907,&quot;^X&quot;,2,536884149]],[&quot;^1A&quot;,[907,&quot;^17&quot;,889,536884141]],[&quot;^1A&quot;,[907,&quot;^13&quot;,889,536884149]],[&quot;^1A&quot;,[907,&quot;^12&quot;,889,536884149]],[&quot;^1A&quot;,[907,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;对象-关系映射&quot;]]]],[&quot;Plain&quot;,&quot; object-relational mapping&quot;]],536884149]],[&quot;^1A&quot;,[907,&quot;^1D&quot;,true,536884141]],[&quot;^1A&quot;,[907,&quot;^?&quot;,&quot;~u24ba433a-db9e-48dd-a477-80d2a0e639d8&quot;,536884141]],[&quot;^1A&quot;,[909,&quot;^Q&quot;,1634021656902,536884167]],[&quot;^1A&quot;,[909,&quot;^E&quot;,false,536884162]],[&quot;^1A&quot;,[909,&quot;^19&quot;,&quot;sql数据类型&quot;,536884162]],[&quot;^1A&quot;,[909,&quot;^1=&quot;,&quot;SQL数据类型&quot;,536884162]],[&quot;^1A&quot;,[909,&quot;^G&quot;,1634021656923,536884169]],[&quot;^1A&quot;,[909,&quot;^?&quot;,&quot;~u61653116-f312-4d63-9e7d-259d900c39e3&quot;,536884162]],[&quot;^1A&quot;,[911,&quot;^1E&quot;,&quot;-e6--97--a5--e6--9c--9f--e5--92--8c--e6--97--b6--e9--97--b4-&quot;,536884168]],[&quot;^1A&quot;,[911,&quot;^S&quot;,[],536884169]],[&quot;^1A&quot;,[911,&quot;^[&quot;,&quot;日期和时间&quot;,536884168]],[&quot;^1A&quot;,[911,&quot;^W&quot;,&quot;^1H&quot;,536884168]],[&quot;^1A&quot;,[911,&quot;^K&quot;,909,536884169]],[&quot;^1A&quot;,[911,&quot;^X&quot;,1,536884169]],[&quot;^1A&quot;,[911,&quot;^17&quot;,909,536884168]],[&quot;^1A&quot;,[911,&quot;^13&quot;,909,536884168]],[&quot;^1A&quot;,[911,&quot;^12&quot;,54,536884169]],[&quot;^1A&quot;,[911,&quot;^12&quot;,909,536884169]],[&quot;^1A&quot;,[911,&quot;^D&quot;,[&quot;^ &quot;],536884169]],[&quot;^1A&quot;,[911,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;日期和时间&quot;]],536884169]],[&quot;^1A&quot;,[911,&quot;^1D&quot;,true,536884168]],[&quot;^1A&quot;,[911,&quot;^?&quot;,&quot;~u38a01ce4-742f-4d2e-bce7-d27e19dae032&quot;,536884168]],[&quot;^1A&quot;,[912,&quot;^1E&quot;,&quot;date-3a-_-e6--97--a5--e5--8e--86--e6--97--a5--e6--9c--9f--ef--bc--8c--e5--8c--85--e6--8b--ac--e5--b9--b4--e6--9c--88--e6--97--a5--e3--80--82-&quot;,536884168]],[&quot;^1A&quot;,[912,&quot;^S&quot;,[],536884168]],[&quot;^1A&quot;,[912,&quot;^[&quot;,&quot;date: 日历日期，包括年月日。&quot;,536884168]],[&quot;^1A&quot;,[912,&quot;^W&quot;,&quot;^1H&quot;,536884168]],[&quot;^1A&quot;,[912,&quot;^K&quot;,911,536884168]],[&quot;^1A&quot;,[912,&quot;^X&quot;,1,536884168]],[&quot;^1A&quot;,[912,&quot;^17&quot;,909,536884168]],[&quot;^1A&quot;,[912,&quot;^13&quot;,911,536884168]],[&quot;^1A&quot;,[912,&quot;^12&quot;,54,536884168]],[&quot;^1A&quot;,[912,&quot;^12&quot;,909,536884168]],[&quot;^1A&quot;,[912,&quot;^D&quot;,[&quot;^ &quot;],536884168]],[&quot;^1A&quot;,[912,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;date: 日历日期，包括年月日。&quot;]],536884168]],[&quot;^1A&quot;,[912,&quot;^1D&quot;,true,536884168]],[&quot;^1A&quot;,[912,&quot;^?&quot;,&quot;~u8cb539da-9922-4947-9479-4ec20f175208&quot;,536884168]],[&quot;^1A&quot;,[913,&quot;^1E&quot;,&quot;time-3a-_-e4--b8--80--e5--a4--a9--e4--b8--ad--e7--9a--84--e6--97--b6--e9--97--b4--ef--bc--8c--e5--8c--85--e6--8b--ac--e6--97--b6--e5--88--86--e7--a7--92--e3--80--82-&quot;,536884168]],[&quot;^1A&quot;,[913,&quot;^S&quot;,[],536884168]],[&quot;^1A&quot;,[913,&quot;^[&quot;,&quot;time: 一天中的时间，包括时分秒。&quot;,536884168]],[&quot;^1A&quot;,[913,&quot;^W&quot;,&quot;^1H&quot;,536884168]],[&quot;^1A&quot;,[913,&quot;^K&quot;,912,536884168]],[&quot;^1A&quot;,[913,&quot;^X&quot;,1,536884168]],[&quot;^1A&quot;,[913,&quot;^17&quot;,909,536884168]],[&quot;^1A&quot;,[913,&quot;^13&quot;,911,536884168]],[&quot;^1A&quot;,[913,&quot;^12&quot;,54,536884168]],[&quot;^1A&quot;,[913,&quot;^12&quot;,909,536884168]],[&quot;^1A&quot;,[913,&quot;^D&quot;,[&quot;^ &quot;],536884168]],[&quot;^1A&quot;,[913,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;time: 一天中的时间，包括时分秒。&quot;]],536884168]],[&quot;^1A&quot;,[913,&quot;^1D&quot;,true,536884168]],[&quot;^1A&quot;,[913,&quot;^?&quot;,&quot;~u92c3a92d-593b-4d3b-a72d-1ac8040839a2&quot;,536884168]],[&quot;^1A&quot;,[914,&quot;^1E&quot;,&quot;timestamp-3a-_-e5--92--8c--e7--9a--84--e7--bb--84--e5--90--88--ef--bc--8c--e5--a6--82--e6--9e--9c--e6--8c--87--e5--ae--9a--ef--bc--8c--e5--88--99--e6--97--b6--e5--8c--ba--e4--bf--a1--e6--81--af--e4--b9--9f--e4--bc--9a--e8--a2--ab--e5--ad--98--e5--82--a8--e3--80--82-&quot;,536884168]],[&quot;^1A&quot;,[914,&quot;^S&quot;,[],536884168]],[&quot;^1A&quot;,[914,&quot;^[&quot;,&quot;timestamp: `date`和`time`的组合，如果指定`with timezone`，则时区信息也会被存储。&quot;,536884168]],[&quot;^1A&quot;,[914,&quot;^W&quot;,&quot;^1H&quot;,536884168]],[&quot;^1A&quot;,[914,&quot;^K&quot;,913,536884168]],[&quot;^1A&quot;,[914,&quot;^X&quot;,1,536884168]],[&quot;^1A&quot;,[914,&quot;^17&quot;,909,536884168]],[&quot;^1A&quot;,[914,&quot;^13&quot;,911,536884168]],[&quot;^1A&quot;,[914,&quot;^12&quot;,54,536884168]],[&quot;^1A&quot;,[914,&quot;^12&quot;,909,536884168]],[&quot;^1A&quot;,[914,&quot;^D&quot;,[&quot;^ &quot;],536884168]],[&quot;^1A&quot;,[914,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;timestamp: &quot;],[&quot;Code&quot;,&quot;date&quot;],[&quot;Plain&quot;,&quot;和&quot;],[&quot;Code&quot;,&quot;time&quot;],[&quot;Plain&quot;,&quot;的组合，如果指定&quot;],[&quot;Code&quot;,&quot;with timezone&quot;],[&quot;Plain&quot;,&quot;，则时区信息也会被存储。&quot;]],536884168]],[&quot;^1A&quot;,[914,&quot;^1D&quot;,true,536884168]],[&quot;^1A&quot;,[914,&quot;^?&quot;,&quot;~u530c537b-10d3-49db-97c9-26d4702bf09b&quot;,536884168]],[&quot;^1A&quot;,[957,&quot;^S&quot;,[],536884201]],[&quot;^1A&quot;,[957,&quot;^[&quot;,&quot;#ACID *atomic, consistency, isolation, durability*&quot;,536884200]],[&quot;^1A&quot;,[957,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[957,&quot;^K&quot;,699,536884201]],[&quot;^1A&quot;,[957,&quot;^X&quot;,1,536884201]],[&quot;^1A&quot;,[957,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[957,&quot;^13&quot;,699,536884200]],[&quot;^1A&quot;,[957,&quot;^12&quot;,699,536884201]],[&quot;^1A&quot;,[957,&quot;^12&quot;,743,536884201]],[&quot;^1A&quot;,[957,&quot;^L&quot;,743,536884201]],[&quot;^1A&quot;,[957,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;ACID&quot;]]],[&quot;Plain&quot;,&quot; &quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;atomic, consistency, isolation, durability&quot;]]]]],536884201]],[&quot;^1A&quot;,[957,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[957,&quot;^?&quot;,&quot;~u30a4e97f-db99-4cc8-a80d-f76c4c3183fd&quot;,536884200]],[&quot;^1A&quot;,[958,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1633673479291_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1633673479291_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536884200]],[&quot;^1A&quot;,[958,&quot;^[&quot;,&quot;以一个简单的事务模型为例，来理解事务的ACID。 假设初始A、B都有100。\\n![image.png](../assets/image_1633673479291_0.png)&quot;,536884200]],[&quot;^1A&quot;,[958,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[958,&quot;^K&quot;,957,536884200]],[&quot;^1A&quot;,[958,&quot;^X&quot;,3,536884200]],[&quot;^1A&quot;,[958,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[958,&quot;^13&quot;,957,536884200]],[&quot;^1A&quot;,[958,&quot;^12&quot;,699,536884200]],[&quot;^1A&quot;,[958,&quot;^12&quot;,743,536884200]],[&quot;^1A&quot;,[958,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;以一个简单的事务模型为例，来理解事务的ACID。 假设初始A、B都有100。&quot;]],536884200]],[&quot;^1A&quot;,[958,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[958,&quot;^?&quot;,&quot;~u663bbbc7-478c-48f1-8370-8e6b43596b6e&quot;,536884200]],[&quot;^1A&quot;,[959,&quot;^S&quot;,[],536884200]],[&quot;^1A&quot;,[959,&quot;^[&quot;,&quot;#一致性 除了完整性约束对账号A、B的要求，一致性还要求 A+B 的和在事务执行前后不被改变。注意到，事务执行到 write(A)语句后时，A+B 的和只有150，此时数据库系统处于短暂的不一致状态，因此需要原子性约束以避免不一致状态反映到事务外。&quot;,536884200]],[&quot;^1A&quot;,[959,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[959,&quot;^K&quot;,958,536884200]],[&quot;^1A&quot;,[959,&quot;^X&quot;,4,536884200]],[&quot;^1A&quot;,[959,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[959,&quot;^13&quot;,958,536884200]],[&quot;^1A&quot;,[959,&quot;^12&quot;,699,536884200]],[&quot;^1A&quot;,[959,&quot;^12&quot;,722,536884200]],[&quot;^1A&quot;,[959,&quot;^12&quot;,743,536884200]],[&quot;^1A&quot;,[959,&quot;^L&quot;,722,536884200]],[&quot;^1A&quot;,[959,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;一致性&quot;]]],[&quot;Plain&quot;,&quot; 除了完整性约束对账号A、B的要求，一致性还要求 A+B 的和在事务执行前后不被改变。注意到，事务执行到 write(A)语句后时，A+B 的和只有150，此时数据库系统处于短暂的不一致状态，因此需要原子性约束以避免不一致状态反映到事务外。&quot;]],536884200]],[&quot;^1A&quot;,[959,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[959,&quot;^?&quot;,&quot;~u569d8981-7462-4dcc-9d9b-8911ccd41340&quot;,536884200]],[&quot;^1A&quot;,[960,&quot;^S&quot;,[],536884200]],[&quot;^1A&quot;,[960,&quot;^[&quot;,&quot;#原子性 如果一个事务或者不开始，或者保证完成，那么不一致状态除了事务中可见，其他时刻是不可见的。因此，如果具有原子性，某个事务的所有动作要么在数据库中全部反映出来，要么全部不反映。保证原子性的基本思路是使用 `操作日志` ，也称作 `恢复系统` 。&quot;,536884200]],[&quot;^1A&quot;,[960,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[960,&quot;^K&quot;,959,536884200]],[&quot;^1A&quot;,[960,&quot;^X&quot;,4,536884200]],[&quot;^1A&quot;,[960,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[960,&quot;^13&quot;,958,536884200]],[&quot;^1A&quot;,[960,&quot;^12&quot;,699,536884200]],[&quot;^1A&quot;,[960,&quot;^12&quot;,723,536884200]],[&quot;^1A&quot;,[960,&quot;^12&quot;,743,536884200]],[&quot;^1A&quot;,[960,&quot;^L&quot;,723,536884200]],[&quot;^1A&quot;,[960,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;原子性&quot;]]],[&quot;Plain&quot;,&quot; 如果一个事务或者不开始，或者保证完成，那么不一致状态除了事务中可见，其他时刻是不可见的。因此，如果具有原子性，某个事务的所有动作要么在数据库中全部反映出来，要么全部不反映。保证原子性的基本思路是使用 &quot;],[&quot;Code&quot;,&quot;操作日志&quot;],[&quot;Plain&quot;,&quot; ，也称作 &quot;],[&quot;Code&quot;,&quot;恢复系统&quot;],[&quot;Plain&quot;,&quot; 。&quot;]],536884200]],[&quot;^1A&quot;,[960,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[960,&quot;^?&quot;,&quot;~ua494f1af-f1d9-4dcd-8c4e-a85526cfdd86&quot;,536884200]],[&quot;^1A&quot;,[961,&quot;^S&quot;,[],536884200]],[&quot;^1A&quot;,[961,&quot;^[&quot;,&quot;#隔离性 当事务并发执行时，不一致状态可能被另一个事务所读取到，从而造成事务最终的不一致状态。避免并发执行事务产生问题的基本途径是串行执行，但是已经有一些方法能更高效的解决事务并发执行的问题，由名为 `并发控制系统` 的部件负责。&quot;,536884200]],[&quot;^1A&quot;,[961,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[961,&quot;^K&quot;,960,536884200]],[&quot;^1A&quot;,[961,&quot;^X&quot;,4,536884200]],[&quot;^1A&quot;,[961,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[961,&quot;^13&quot;,958,536884200]],[&quot;^1A&quot;,[961,&quot;^12&quot;,699,536884200]],[&quot;^1A&quot;,[961,&quot;^12&quot;,724,536884200]],[&quot;^1A&quot;,[961,&quot;^12&quot;,743,536884200]],[&quot;^1A&quot;,[961,&quot;^L&quot;,724,536884200]],[&quot;^1A&quot;,[961,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;隔离性&quot;]]],[&quot;Plain&quot;,&quot; 当事务并发执行时，不一致状态可能被另一个事务所读取到，从而造成事务最终的不一致状态。避免并发执行事务产生问题的基本途径是串行执行，但是已经有一些方法能更高效的解决事务并发执行的问题，由名为 &quot;],[&quot;Code&quot;,&quot;并发控制系统&quot;],[&quot;Plain&quot;,&quot; 的部件负责。&quot;]],536884200]],[&quot;^1A&quot;,[961,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[961,&quot;^?&quot;,&quot;~u5a9c9f7b-20fe-412a-acec-1c478d7e04fb&quot;,536884200]],[&quot;^1A&quot;,[962,&quot;^S&quot;,[],536884217]],[&quot;^1A&quot;,[962,&quot;^[&quot;,&quot;隔离级别&quot;,536884200]],[&quot;^1A&quot;,[962,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[962,&quot;^K&quot;,957,536884217]],[&quot;^1A&quot;,[962,&quot;^X&quot;,2,536884217]],[&quot;^1A&quot;,[962,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[962,&quot;^13&quot;,699,536884217]],[&quot;^1A&quot;,[962,&quot;^12&quot;,699,536884217]],[&quot;^1A&quot;,[962,&quot;^12&quot;,743,536884217]],[&quot;^1A&quot;,[962,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;隔离级别&quot;]],536884217]],[&quot;^1A&quot;,[962,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[962,&quot;^?&quot;,&quot;~u44d81a70-ebb6-4771-ab02-8eade72159d9&quot;,536884200]],[&quot;^1A&quot;,[963,&quot;^S&quot;,[],536884217]],[&quot;^1A&quot;,[963,&quot;^[&quot;,&quot;可串行化是一个有用的概念，但是保证可串行性可能只允许极小的并发度，因此SQL标准允许一个事务可以以一种与其他事务不可串行化的方式执行。这称为事务的隔离级别，包括以下4种：&quot;,536884200]],[&quot;^1A&quot;,[963,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[963,&quot;^K&quot;,962,536884217]],[&quot;^1A&quot;,[963,&quot;^X&quot;,3,536884217]],[&quot;^1A&quot;,[963,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[963,&quot;^13&quot;,962,536884217]],[&quot;^1A&quot;,[963,&quot;^12&quot;,699,536884217]],[&quot;^1A&quot;,[963,&quot;^12&quot;,743,536884217]],[&quot;^1A&quot;,[963,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;可串行化是一个有用的概念，但是保证可串行性可能只允许极小的并发度，因此SQL标准允许一个事务可以以一种与其他事务不可串行化的方式执行。这称为事务的隔离级别，包括以下4种：&quot;]],536884217]],[&quot;^1A&quot;,[963,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[963,&quot;^?&quot;,&quot;~ud4c3d7b5-9bc6-43cc-b44e-509e481c356e&quot;,536884200]],[&quot;^1A&quot;,[964,&quot;^S&quot;,[],536884200]],[&quot;^1A&quot;,[964,&quot;^[&quot;,&quot;#可串行化&quot;,536884200]],[&quot;^1A&quot;,[964,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[964,&quot;^K&quot;,963,536884200]],[&quot;^1A&quot;,[964,&quot;^X&quot;,4,536884200]],[&quot;^1A&quot;,[964,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[964,&quot;^13&quot;,963,536884200]],[&quot;^1A&quot;,[964,&quot;^12&quot;,699,536884200]],[&quot;^1A&quot;,[964,&quot;^12&quot;,703,536884200]],[&quot;^1A&quot;,[964,&quot;^12&quot;,743,536884200]],[&quot;^1A&quot;,[964,&quot;^L&quot;,703,536884200]],[&quot;^1A&quot;,[964,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;可串行化&quot;]]]],536884200]],[&quot;^1A&quot;,[964,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[964,&quot;^?&quot;,&quot;~ue65d77a5-f1bb-4054-ae68-1c992351177d&quot;,536884200]],[&quot;^1A&quot;,[965,&quot;^S&quot;,[],536884200]],[&quot;^1A&quot;,[965,&quot;^[&quot;,&quot;#可重复读 只允许读取已提交数据，且同一个事务两次读取一个数据项期间，其他事务不得更新该数据( ^^其他事务的更新不会堵塞，只是对当前事务不可见^^ )。&quot;,536884200]],[&quot;^1A&quot;,[965,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[965,&quot;^K&quot;,964,536884200]],[&quot;^1A&quot;,[965,&quot;^X&quot;,4,536884200]],[&quot;^1A&quot;,[965,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[965,&quot;^13&quot;,963,536884200]],[&quot;^1A&quot;,[965,&quot;^12&quot;,699,536884200]],[&quot;^1A&quot;,[965,&quot;^12&quot;,725,536884200]],[&quot;^1A&quot;,[965,&quot;^12&quot;,743,536884200]],[&quot;^1A&quot;,[965,&quot;^L&quot;,725,536884200]],[&quot;^1A&quot;,[965,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;可重复读&quot;]]],[&quot;Plain&quot;,&quot; 只允许读取已提交数据，且同一个事务两次读取一个数据项期间，其他事务不得更新该数据( &quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;其他事务的更新不会堵塞，只是对当前事务不可见&quot;]]]],[&quot;Plain&quot;,&quot; )。&quot;]],536884200]],[&quot;^1A&quot;,[965,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[965,&quot;^?&quot;,&quot;~uc912dd1c-dc05-439e-ada3-fa4457e15666&quot;,536884200]],[&quot;^1A&quot;,[966,&quot;^S&quot;,[],536884200]],[&quot;^1A&quot;,[966,&quot;^[&quot;,&quot;#已提交读 只允许读取已提交数据，不要求不可重复读。&quot;,536884200]],[&quot;^1A&quot;,[966,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[966,&quot;^K&quot;,965,536884200]],[&quot;^1A&quot;,[966,&quot;^X&quot;,4,536884200]],[&quot;^1A&quot;,[966,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[966,&quot;^13&quot;,963,536884200]],[&quot;^1A&quot;,[966,&quot;^12&quot;,699,536884200]],[&quot;^1A&quot;,[966,&quot;^12&quot;,726,536884200]],[&quot;^1A&quot;,[966,&quot;^12&quot;,743,536884200]],[&quot;^1A&quot;,[966,&quot;^L&quot;,726,536884200]],[&quot;^1A&quot;,[966,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;已提交读&quot;]]],[&quot;Plain&quot;,&quot; 只允许读取已提交数据，不要求不可重复读。&quot;]],536884200]],[&quot;^1A&quot;,[966,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[966,&quot;^?&quot;,&quot;~u229711b9-7ee4-4140-9e14-8b62581bcd44&quot;,536884200]],[&quot;^1A&quot;,[967,&quot;^S&quot;,[],536884200]],[&quot;^1A&quot;,[967,&quot;^[&quot;,&quot;#未提交读 允许读取未提交数据。&quot;,536884200]],[&quot;^1A&quot;,[967,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[967,&quot;^K&quot;,966,536884200]],[&quot;^1A&quot;,[967,&quot;^X&quot;,4,536884200]],[&quot;^1A&quot;,[967,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[967,&quot;^13&quot;,963,536884200]],[&quot;^1A&quot;,[967,&quot;^12&quot;,699,536884200]],[&quot;^1A&quot;,[967,&quot;^12&quot;,728,536884200]],[&quot;^1A&quot;,[967,&quot;^12&quot;,743,536884200]],[&quot;^1A&quot;,[967,&quot;^L&quot;,728,536884200]],[&quot;^1A&quot;,[967,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;未提交读&quot;]]],[&quot;Plain&quot;,&quot; 允许读取未提交数据。&quot;]],536884200]],[&quot;^1A&quot;,[967,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[967,&quot;^?&quot;,&quot;~uc020d577-a3e7-407d-97a4-f60eb9082fa5&quot;,536884200]],[&quot;^1A&quot;,[968,&quot;^S&quot;,[],536884217]],[&quot;^1A&quot;,[968,&quot;^[&quot;,&quot;~^^以上的隔离级别都不允许脏写^^ 。如果有脏写发生，后执行的命令将会阻塞。&quot;,536884200]],[&quot;^1A&quot;,[968,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[968,&quot;^K&quot;,963,536884200]],[&quot;^1A&quot;,[968,&quot;^X&quot;,3,536884217]],[&quot;^1A&quot;,[968,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[968,&quot;^13&quot;,962,536884217]],[&quot;^1A&quot;,[968,&quot;^12&quot;,699,536884217]],[&quot;^1A&quot;,[968,&quot;^12&quot;,743,536884217]],[&quot;^1A&quot;,[968,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;以上的隔离级别都不允许脏写&quot;]]]],[&quot;Plain&quot;,&quot; 。如果有脏写发生，后执行的命令将会阻塞。&quot;]],536884217]],[&quot;^1A&quot;,[968,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[968,&quot;^?&quot;,&quot;~u3f6d8d9a-e91c-4733-b9f6-07ac66b31dbe&quot;,536884200]],[&quot;^1A&quot;,[969,&quot;^S&quot;,[],536884354]],[&quot;^1A&quot;,[969,&quot;^[&quot;,&quot;常见的并发控制机制&quot;,536884354]],[&quot;^1A&quot;,[969,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[969,&quot;^K&quot;,968,536884200]],[&quot;^1A&quot;,[969,&quot;^X&quot;,1,536884354]],[&quot;^1A&quot;,[969,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[969,&quot;^13&quot;,962,536884217]],[&quot;^1A&quot;,[969,&quot;^12&quot;,699,536884354]],[&quot;^1A&quot;,[969,&quot;^12&quot;,743,536884354]],[&quot;^1A&quot;,[969,&quot;^D&quot;,[&quot;^ &quot;],536884354]],[&quot;^1A&quot;,[969,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;常见的并发控制机制&quot;]],536884354]],[&quot;^1A&quot;,[969,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[969,&quot;^?&quot;,&quot;~u96ae10d0-a11b-41df-bc7a-b207b2336bef&quot;,536884200]],[&quot;^1A&quot;,[970,&quot;^S&quot;,[],536884220]],[&quot;^1A&quot;,[970,&quot;^[&quot;,&quot;#两阶段封锁 传统的并发控制方式&quot;,536884200]],[&quot;^1A&quot;,[970,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[970,&quot;^K&quot;,969,536884200]],[&quot;^1A&quot;,[970,&quot;^X&quot;,3,536884220]],[&quot;^1A&quot;,[970,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[970,&quot;^13&quot;,969,536884220]],[&quot;^1A&quot;,[970,&quot;^12&quot;,699,536884220]],[&quot;^1A&quot;,[970,&quot;^12&quot;,732,536884220]],[&quot;^1A&quot;,[970,&quot;^12&quot;,743,536884220]],[&quot;^1A&quot;,[970,&quot;^L&quot;,732,536884220]],[&quot;^1A&quot;,[970,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;两阶段封锁&quot;]]],[&quot;Plain&quot;,&quot; 传统的并发控制方式&quot;]],536884220]],[&quot;^1A&quot;,[970,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[970,&quot;^?&quot;,&quot;~ua878ad46-62a1-48b9-8207-ece3fcc987c5&quot;,536884200]],[&quot;^1A&quot;,[971,&quot;^S&quot;,[],536884220]],[&quot;^1A&quot;,[971,&quot;^[&quot;,&quot;#时间戳 为每一个事务分配一个时间戳。&quot;,536884200]],[&quot;^1A&quot;,[971,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[971,&quot;^K&quot;,970,536884200]],[&quot;^1A&quot;,[971,&quot;^X&quot;,3,536884220]],[&quot;^1A&quot;,[971,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[971,&quot;^13&quot;,969,536884220]],[&quot;^1A&quot;,[971,&quot;^12&quot;,699,536884220]],[&quot;^1A&quot;,[971,&quot;^12&quot;,738,536884220]],[&quot;^1A&quot;,[971,&quot;^12&quot;,743,536884220]],[&quot;^1A&quot;,[971,&quot;^L&quot;,738,536884220]],[&quot;^1A&quot;,[971,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;时间戳&quot;]]],[&quot;Plain&quot;,&quot; 为每一个事务分配一个时间戳。&quot;]],536884220]],[&quot;^1A&quot;,[971,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[971,&quot;^?&quot;,&quot;~u549636a4-47ac-478f-b931-55f44617c926&quot;,536884200]],[&quot;^1A&quot;,[972,&quot;^S&quot;,[],536884220]],[&quot;^1A&quot;,[972,&quot;^[&quot;,&quot;#多版本&quot;,536884200]],[&quot;^1A&quot;,[972,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[972,&quot;^K&quot;,971,536884200]],[&quot;^1A&quot;,[972,&quot;^X&quot;,3,536884220]],[&quot;^1A&quot;,[972,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[972,&quot;^13&quot;,969,536884220]],[&quot;^1A&quot;,[972,&quot;^12&quot;,699,536884220]],[&quot;^1A&quot;,[972,&quot;^12&quot;,734,536884220]],[&quot;^1A&quot;,[972,&quot;^12&quot;,743,536884220]],[&quot;^1A&quot;,[972,&quot;^L&quot;,734,536884220]],[&quot;^1A&quot;,[972,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;多版本&quot;]]]],536884220]],[&quot;^1A&quot;,[972,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[972,&quot;^?&quot;,&quot;~u92684b3a-72d6-40b4-aa0b-c0557bdad49d&quot;,536884200]],[&quot;^1A&quot;,[973,&quot;^S&quot;,[],536884220]],[&quot;^1A&quot;,[973,&quot;^[&quot;,&quot;#快照隔离&quot;,536884200]],[&quot;^1A&quot;,[973,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[973,&quot;^K&quot;,972,536884200]],[&quot;^1A&quot;,[973,&quot;^X&quot;,3,536884220]],[&quot;^1A&quot;,[973,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[973,&quot;^13&quot;,969,536884220]],[&quot;^1A&quot;,[973,&quot;^12&quot;,699,536884220]],[&quot;^1A&quot;,[973,&quot;^12&quot;,737,536884220]],[&quot;^1A&quot;,[973,&quot;^12&quot;,743,536884220]],[&quot;^1A&quot;,[973,&quot;^L&quot;,737,536884220]],[&quot;^1A&quot;,[973,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;快照隔离&quot;]]]],536884220]],[&quot;^1A&quot;,[973,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[973,&quot;^?&quot;,&quot;~u039426e3-1f60-415f-899e-a81dffccf494&quot;,536884200]],[&quot;^1A&quot;,[974,&quot;^S&quot;,[],536884220]],[&quot;^1A&quot;,[974,&quot;^[&quot;,&quot;#幻象问题&quot;,536884200]],[&quot;^1A&quot;,[974,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[974,&quot;^K&quot;,969,536884220]],[&quot;^1A&quot;,[974,&quot;^X&quot;,2,536884220]],[&quot;^1A&quot;,[974,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[974,&quot;^13&quot;,962,536884217]],[&quot;^1A&quot;,[974,&quot;^12&quot;,699,536884220]],[&quot;^1A&quot;,[974,&quot;^12&quot;,743,536884220]],[&quot;^1A&quot;,[974,&quot;^12&quot;,755,536884220]],[&quot;^1A&quot;,[974,&quot;^L&quot;,755,536884220]],[&quot;^1A&quot;,[974,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;幻象问题&quot;]]]],536884220]],[&quot;^1A&quot;,[974,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[974,&quot;^?&quot;,&quot;~u3fa19096-016f-4ca2-95d8-7bc1fcc87e6c&quot;,536884200]],[&quot;^1A&quot;,[975,&quot;^S&quot;,[],536884223]],[&quot;^1A&quot;,[975,&quot;^[&quot;,&quot;在两个事物的并发执行中，如果一个事务插入了一条记录，另一个事务对此记录所在范围进行查询，查询结果会取决于该插入是先于还是后于查询语句的执行，这种情况称为幻象现象&quot;,536884200]],[&quot;^1A&quot;,[975,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[975,&quot;^K&quot;,974,536884200]],[&quot;^1A&quot;,[975,&quot;^X&quot;,3,536884223]],[&quot;^1A&quot;,[975,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[975,&quot;^13&quot;,974,536884223]],[&quot;^1A&quot;,[975,&quot;^12&quot;,699,536884223]],[&quot;^1A&quot;,[975,&quot;^12&quot;,743,536884223]],[&quot;^1A&quot;,[975,&quot;^12&quot;,755,536884223]],[&quot;^1A&quot;,[975,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;在两个事物的并发执行中，如果一个事务插入了一条记录，另一个事务对此记录所在范围进行查询，查询结果会取决于该插入是先于还是后于查询语句的执行，这种情况称为幻象现象&quot;]],536884223]],[&quot;^1A&quot;,[975,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[975,&quot;^?&quot;,&quot;~uc2e2f297-6dc2-422a-bb5f-c1e173531909&quot;,536884200]],[&quot;^1A&quot;,[976,&quot;^S&quot;,[],536884223]],[&quot;^1A&quot;,[976,&quot;^[&quot;,&quot;简单事务模型要求提供一个具体的元祖以执行在该元组上的操作。然而在SQL语句中，元组可能被 **where** 语句的谓词决定， ^^因此即使是一个事务，多次不同运行中也可能会使用不同的元组^^ 。&quot;,536884200]],[&quot;^1A&quot;,[976,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[976,&quot;^K&quot;,975,536884200]],[&quot;^1A&quot;,[976,&quot;^X&quot;,3,536884223]],[&quot;^1A&quot;,[976,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[976,&quot;^13&quot;,974,536884223]],[&quot;^1A&quot;,[976,&quot;^12&quot;,699,536884223]],[&quot;^1A&quot;,[976,&quot;^12&quot;,743,536884223]],[&quot;^1A&quot;,[976,&quot;^12&quot;,755,536884223]],[&quot;^1A&quot;,[976,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;简单事务模型要求提供一个具体的元祖以执行在该元组上的操作。然而在SQL语句中，元组可能被 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;where&quot;]]]],[&quot;Plain&quot;,&quot; 语句的谓词决定， &quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;因此即使是一个事务，多次不同运行中也可能会使用不同的元组&quot;]]]],[&quot;Plain&quot;,&quot; 。&quot;]],536884223]],[&quot;^1A&quot;,[976,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[976,&quot;^?&quot;,&quot;~u848fdf10-a0cb-4ab4-b9bb-6918d34f97a0&quot;,536884200]],[&quot;^1A&quot;,[977,&quot;^S&quot;,[],536884223]],[&quot;^1A&quot;,[977,&quot;^[&quot;,&quot;思路：事务存在 **谓词读** 时，仅仅封锁访问的元组是不够的，用来找出事务所访问的元组的信息也需要被封锁。&quot;,536884200]],[&quot;^1A&quot;,[977,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[977,&quot;^K&quot;,976,536884200]],[&quot;^1A&quot;,[977,&quot;^X&quot;,3,536884223]],[&quot;^1A&quot;,[977,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[977,&quot;^13&quot;,974,536884223]],[&quot;^1A&quot;,[977,&quot;^12&quot;,699,536884223]],[&quot;^1A&quot;,[977,&quot;^12&quot;,743,536884223]],[&quot;^1A&quot;,[977,&quot;^12&quot;,755,536884223]],[&quot;^1A&quot;,[977,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;思路：事务存在 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;谓词读&quot;]]]],[&quot;Plain&quot;,&quot; 时，仅仅封锁访问的元组是不够的，用来找出事务所访问的元组的信息也需要被封锁。&quot;]],536884223]],[&quot;^1A&quot;,[977,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[977,&quot;^?&quot;,&quot;~u1fd76cb9-1359-4aac-b9f3-cbe94a9b8c9c&quot;,536884200]],[&quot;^1A&quot;,[978,&quot;^S&quot;,[],536884223]],[&quot;^1A&quot;,[978,&quot;^[&quot;,&quot;方案： **索引封锁(index-locking protocol)**&quot;,536884200]],[&quot;^1A&quot;,[978,&quot;^W&quot;,&quot;^1H&quot;,536884200]],[&quot;^1A&quot;,[978,&quot;^K&quot;,977,536884200]],[&quot;^1A&quot;,[978,&quot;^X&quot;,3,536884223]],[&quot;^1A&quot;,[978,&quot;^17&quot;,699,536884200]],[&quot;^1A&quot;,[978,&quot;^13&quot;,974,536884223]],[&quot;^1A&quot;,[978,&quot;^12&quot;,699,536884223]],[&quot;^1A&quot;,[978,&quot;^12&quot;,743,536884223]],[&quot;^1A&quot;,[978,&quot;^12&quot;,755,536884223]],[&quot;^1A&quot;,[978,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;方案： &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;索引封锁(index-locking protocol)&quot;]]]]],536884223]],[&quot;^1A&quot;,[978,&quot;^1D&quot;,true,536884200]],[&quot;^1A&quot;,[978,&quot;^?&quot;,&quot;~u64a417cf-a563-47c2-a11e-18a069ac17de&quot;,536884200]],[&quot;^1A&quot;,[995,&quot;^S&quot;,[],536884232]],[&quot;^1A&quot;,[995,&quot;^[&quot;,&quot;&quot;,536884232]],[&quot;^1A&quot;,[995,&quot;^W&quot;,&quot;^1H&quot;,536884232]],[&quot;^1A&quot;,[995,&quot;^E&quot;,false,536884232]],[&quot;^1A&quot;,[995,&quot;^K&quot;,765,536884232]],[&quot;^1A&quot;,[995,&quot;^X&quot;,1,536884232]],[&quot;^1A&quot;,[995,&quot;^17&quot;,765,536884232]],[&quot;^1A&quot;,[995,&quot;^13&quot;,765,536884232]],[&quot;^1A&quot;,[995,&quot;^D&quot;,[&quot;^ &quot;],536884232]],[&quot;^1A&quot;,[995,&quot;^Z&quot;,[],536884232]],[&quot;^1A&quot;,[995,&quot;^1D&quot;,true,536884232]],[&quot;^1A&quot;,[995,&quot;^?&quot;,&quot;~u61653271-c11c-4b22-9a46-ebbdfa6ad1a6&quot;,536884232]],[&quot;^1A&quot;,[996,&quot;^S&quot;,[],536884240]],[&quot;^1A&quot;,[996,&quot;^[&quot;,&quot;## [[并发控制]]&quot;,536884240]],[&quot;^1A&quot;,[996,&quot;^W&quot;,&quot;^1H&quot;,536884237]],[&quot;^1A&quot;,[996,&quot;^14&quot;,2,536884240]],[&quot;^1A&quot;,[996,&quot;^K&quot;,522,536884237]],[&quot;^1A&quot;,[996,&quot;^X&quot;,1,536884240]],[&quot;^1A&quot;,[996,&quot;^17&quot;,54,536884237]],[&quot;^1A&quot;,[996,&quot;^13&quot;,54,536884237]],[&quot;^1A&quot;,[996,&quot;^12&quot;,54,536884240]],[&quot;^1A&quot;,[996,&quot;^12&quot;,997,536884240]],[&quot;^1A&quot;,[996,&quot;^D&quot;,[&quot;^ &quot;],536884240]],[&quot;^1A&quot;,[996,&quot;^L&quot;,997,536884240]],[&quot;^1A&quot;,[996,&quot;^1M&quot;,2,536884240]],[&quot;^1A&quot;,[996,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;并发控制&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[并发控制]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536884240]],[&quot;^1A&quot;,[996,&quot;^15&quot;,&quot;^1N&quot;,536884240]],[&quot;^1A&quot;,[996,&quot;^1D&quot;,false,536884240]],[&quot;^1A&quot;,[996,&quot;^?&quot;,&quot;~u61653275-5c27-4ac7-9afc-1f502d55383b&quot;,536884237]],[&quot;^1A&quot;,[997,&quot;^Q&quot;,1634022010899,536884245]],[&quot;^1A&quot;,[997,&quot;^E&quot;,false,536884240]],[&quot;^1A&quot;,[997,&quot;^19&quot;,&quot;并发控制&quot;,536884240]],[&quot;^1A&quot;,[997,&quot;^1=&quot;,&quot;并发控制&quot;,536884240]],[&quot;^1A&quot;,[997,&quot;^G&quot;,1634022533994,536884388]],[&quot;^1A&quot;,[997,&quot;^?&quot;,&quot;~u61653279-9d04-4ff1-b199-090af979872e&quot;,536884240]],[&quot;^1A&quot;,[1017,&quot;^S&quot;,[],536884277]],[&quot;^1A&quot;,[1017,&quot;^[&quot;,&quot;#两阶段封锁&quot;,536884276]],[&quot;^1A&quot;,[1017,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1017,&quot;^K&quot;,997,536884277]],[&quot;^1A&quot;,[1017,&quot;^X&quot;,1,536884277]],[&quot;^1A&quot;,[1017,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1017,&quot;^13&quot;,997,536884276]],[&quot;^1A&quot;,[1017,&quot;^12&quot;,732,536884277]],[&quot;^1A&quot;,[1017,&quot;^12&quot;,997,536884277]],[&quot;^1A&quot;,[1017,&quot;^L&quot;,732,536884277]],[&quot;^1A&quot;,[1017,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;两阶段封锁&quot;]]]],536884277]],[&quot;^1A&quot;,[1017,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1017,&quot;^?&quot;,&quot;~ue3f07076-b126-4682-b4bf-5ae7764d6d88&quot;,536884276]],[&quot;^1A&quot;,[1018,&quot;^S&quot;,[[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;为什么需要封锁协议?&quot;],[&quot;Break_Line&quot;]]]]],[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;考虑并发控制机制为事务中的语句解锁，如果解锁过早，事务将不可串行化。如果解锁过晚，可能出现死锁。&quot;],[&quot;Break_Line&quot;],[&quot;Break_Line&quot;]]]]],536884276]],[&quot;^1A&quot;,[1018,&quot;^[&quot;,&quot;**封锁协议(locking protocol)** 规定事务何时对数据项们进行加锁、解锁。封锁协议限制了可能的调度数目，这些调度组成的集合是所有可能的可串行化调度的一个真子集。 \\n&gt; 为什么需要封锁协议?\\n考虑并发控制机制为事务中的语句解锁，如果解锁过早，事务将不可串行化。如果解锁过晚，可能出现死锁。&quot;,536884276]],[&quot;^1A&quot;,[1018,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1018,&quot;^K&quot;,1017,536884276]],[&quot;^1A&quot;,[1018,&quot;^X&quot;,3,536884276]],[&quot;^1A&quot;,[1018,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1018,&quot;^13&quot;,1017,536884276]],[&quot;^1A&quot;,[1018,&quot;^12&quot;,732,536884276]],[&quot;^1A&quot;,[1018,&quot;^12&quot;,997,536884276]],[&quot;^1A&quot;,[1018,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;封锁协议(locking protocol)&quot;]]]],[&quot;Plain&quot;,&quot; 规定事务何时对数据项们进行加锁、解锁。封锁协议限制了可能的调度数目，这些调度组成的集合是所有可能的可串行化调度的一个真子集。 &quot;]],536884276]],[&quot;^1A&quot;,[1018,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1018,&quot;^?&quot;,&quot;~u583ecae2-0913-4bb6-845a-a4edd4c7e5bb&quot;,536884276]],[&quot;^1A&quot;,[1019,&quot;^S&quot;,[[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;可以证明两阶段封锁协议能保证冲突可串行化。&quot;]]]],[&quot;Break_Line&quot;]]]]]],536884276]],[&quot;^1A&quot;,[1019,&quot;^[&quot;,&quot;两阶段\\n&gt; *可以证明两阶段封锁协议能保证冲突可串行化。*&quot;,536884276]],[&quot;^1A&quot;,[1019,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1019,&quot;^K&quot;,1018,536884276]],[&quot;^1A&quot;,[1019,&quot;^X&quot;,3,536884276]],[&quot;^1A&quot;,[1019,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1019,&quot;^13&quot;,1017,536884276]],[&quot;^1A&quot;,[1019,&quot;^12&quot;,732,536884276]],[&quot;^1A&quot;,[1019,&quot;^12&quot;,997,536884276]],[&quot;^1A&quot;,[1019,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;两阶段&quot;]],536884276]],[&quot;^1A&quot;,[1019,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1019,&quot;^?&quot;,&quot;~uf3f78a20-2a53-44ca-b232-69229fa092eb&quot;,536884276]],[&quot;^1A&quot;,[1020,&quot;^S&quot;,[],536884276]],[&quot;^1A&quot;,[1020,&quot;^[&quot;,&quot;增长阶段：事务只能加锁，不能解锁。&quot;,536884276]],[&quot;^1A&quot;,[1020,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1020,&quot;^K&quot;,1019,536884276]],[&quot;^1A&quot;,[1020,&quot;^X&quot;,4,536884276]],[&quot;^1A&quot;,[1020,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1020,&quot;^13&quot;,1019,536884276]],[&quot;^1A&quot;,[1020,&quot;^12&quot;,732,536884276]],[&quot;^1A&quot;,[1020,&quot;^12&quot;,997,536884276]],[&quot;^1A&quot;,[1020,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;增长阶段：事务只能加锁，不能解锁。&quot;]],536884276]],[&quot;^1A&quot;,[1020,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1020,&quot;^?&quot;,&quot;~u216a44a8-3fb0-4600-baac-81be13d44687&quot;,536884276]],[&quot;^1A&quot;,[1021,&quot;^S&quot;,[],536884276]],[&quot;^1A&quot;,[1021,&quot;^[&quot;,&quot;缩减阶段：事务只能解锁，不能加锁。&quot;,536884276]],[&quot;^1A&quot;,[1021,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1021,&quot;^K&quot;,1020,536884276]],[&quot;^1A&quot;,[1021,&quot;^X&quot;,4,536884276]],[&quot;^1A&quot;,[1021,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1021,&quot;^13&quot;,1019,536884276]],[&quot;^1A&quot;,[1021,&quot;^12&quot;,732,536884276]],[&quot;^1A&quot;,[1021,&quot;^12&quot;,997,536884276]],[&quot;^1A&quot;,[1021,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;缩减阶段：事务只能解锁，不能加锁。&quot;]],536884276]],[&quot;^1A&quot;,[1021,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1021,&quot;^?&quot;,&quot;~uf61b96d4-1153-4713-9b38-ee9fc814b4f6&quot;,536884276]],[&quot;^1A&quot;,[1022,&quot;^S&quot;,[],536884364]],[&quot;^1A&quot;,[1022,&quot;^[&quot;,&quot;#饿死现象 指由于不断有读锁被授予，排队中的写锁一直无法获取的现象。&quot;,536884364]],[&quot;^1A&quot;,[1022,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1022,&quot;^K&quot;,1019,536884276]],[&quot;^1A&quot;,[1022,&quot;^X&quot;,1,536884364]],[&quot;^1A&quot;,[1022,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1022,&quot;^13&quot;,1017,536884276]],[&quot;^1A&quot;,[1022,&quot;^12&quot;,732,536884364]],[&quot;^1A&quot;,[1022,&quot;^12&quot;,747,536884364]],[&quot;^1A&quot;,[1022,&quot;^12&quot;,997,536884364]],[&quot;^1A&quot;,[1022,&quot;^D&quot;,[&quot;^ &quot;],536884364]],[&quot;^1A&quot;,[1022,&quot;^L&quot;,747,536884364]],[&quot;^1A&quot;,[1022,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;饿死现象&quot;]]],[&quot;Plain&quot;,&quot; 指由于不断有读锁被授予，排队中的写锁一直无法获取的现象。&quot;]],536884364]],[&quot;^1A&quot;,[1022,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1022,&quot;^?&quot;,&quot;~u78198ccf-fcb8-49cb-93e6-b52dda274b58&quot;,536884276]],[&quot;^1A&quot;,[1023,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1633686088663_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1633686088663_0.png){:height 727, :width 638}&quot;,&quot;^1X&quot;,&quot;{:height 727, :width 638}&quot;]],[&quot;Break_Line&quot;]]]]],536884276]],[&quot;^1A&quot;,[1023,&quot;^[&quot;,&quot;#锁表 \\n![image.png](../assets/image_1633686088663_0.png){:height 727, :width 638}&quot;,536884276]],[&quot;^1A&quot;,[1023,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1023,&quot;^K&quot;,1022,536884276]],[&quot;^1A&quot;,[1023,&quot;^X&quot;,3,536884276]],[&quot;^1A&quot;,[1023,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1023,&quot;^13&quot;,1017,536884276]],[&quot;^1A&quot;,[1023,&quot;^12&quot;,732,536884276]],[&quot;^1A&quot;,[1023,&quot;^12&quot;,753,536884276]],[&quot;^1A&quot;,[1023,&quot;^12&quot;,997,536884276]],[&quot;^1A&quot;,[1023,&quot;^L&quot;,753,536884276]],[&quot;^1A&quot;,[1023,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;锁表&quot;]]],[&quot;Plain&quot;,&quot; &quot;]],536884276]],[&quot;^1A&quot;,[1023,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1023,&quot;^?&quot;,&quot;~u8cd64dd5-2098-40ea-acc9-4372221c77e2&quot;,536884276]],[&quot;^1A&quot;,[1024,&quot;^S&quot;,[],536884276]],[&quot;^1A&quot;,[1024,&quot;^[&quot;,&quot;#多粒度&quot;,536884276]],[&quot;^1A&quot;,[1024,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1024,&quot;^K&quot;,1023,536884276]],[&quot;^1A&quot;,[1024,&quot;^X&quot;,3,536884276]],[&quot;^1A&quot;,[1024,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1024,&quot;^13&quot;,1017,536884276]],[&quot;^1A&quot;,[1024,&quot;^12&quot;,732,536884276]],[&quot;^1A&quot;,[1024,&quot;^12&quot;,754,536884276]],[&quot;^1A&quot;,[1024,&quot;^12&quot;,997,536884276]],[&quot;^1A&quot;,[1024,&quot;^L&quot;,754,536884276]],[&quot;^1A&quot;,[1024,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;多粒度&quot;]]]],536884276]],[&quot;^1A&quot;,[1024,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1024,&quot;^?&quot;,&quot;~u15f2f445-1039-4be3-8ffd-f4f82a547a05&quot;,536884276]],[&quot;^1A&quot;,[1025,&quot;^S&quot;,[],536884367]],[&quot;^1A&quot;,[1025,&quot;^[&quot;,&quot;某些情况下，需要将多个元组聚为一组。例如，如果事务T1需要访问整个数据库，那事务T1对数据库中每个数据项加锁显然是很费时的。如果T1能发出单个封锁整个数据库的加锁请求，会更好。反之亦然。因此，需要一种允许系统定义多级粒度的机制。&quot;,536884367]],[&quot;^1A&quot;,[1025,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1025,&quot;^K&quot;,1024,536884276]],[&quot;^1A&quot;,[1025,&quot;^X&quot;,1,536884367]],[&quot;^1A&quot;,[1025,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1025,&quot;^13&quot;,1024,536884276]],[&quot;^1A&quot;,[1025,&quot;^12&quot;,732,536884367]],[&quot;^1A&quot;,[1025,&quot;^12&quot;,754,536884367]],[&quot;^1A&quot;,[1025,&quot;^12&quot;,997,536884367]],[&quot;^1A&quot;,[1025,&quot;^D&quot;,[&quot;^ &quot;],536884367]],[&quot;^1A&quot;,[1025,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;某些情况下，需要将多个元组聚为一组。例如，如果事务T1需要访问整个数据库，那事务T1对数据库中每个数据项加锁显然是很费时的。如果T1能发出单个封锁整个数据库的加锁请求，会更好。反之亦然。因此，需要一种允许系统定义多级粒度的机制。&quot;]],536884367]],[&quot;^1A&quot;,[1025,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1025,&quot;^?&quot;,&quot;~ua195c04a-43ee-44dc-bf5f-f42692f18b67&quot;,536884276]],[&quot;^1A&quot;,[1026,&quot;^S&quot;,[],536884280]],[&quot;^1A&quot;,[1026,&quot;^[&quot;,&quot;#多版本&quot;,536884276]],[&quot;^1A&quot;,[1026,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1026,&quot;^K&quot;,1017,536884280]],[&quot;^1A&quot;,[1026,&quot;^X&quot;,2,536884280]],[&quot;^1A&quot;,[1026,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1026,&quot;^13&quot;,997,536884280]],[&quot;^1A&quot;,[1026,&quot;^12&quot;,732,536884280]],[&quot;^1A&quot;,[1026,&quot;^12&quot;,734,536884280]],[&quot;^1A&quot;,[1026,&quot;^12&quot;,997,536884280]],[&quot;^1A&quot;,[1026,&quot;^L&quot;,734,536884280]],[&quot;^1A&quot;,[1026,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;多版本&quot;]]]],536884280]],[&quot;^1A&quot;,[1026,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1026,&quot;^?&quot;,&quot;~u67a4e2fe-862f-45c2-9d85-4266391e2fc6&quot;,536884276]],[&quot;^1A&quot;,[1027,&quot;^S&quot;,[],536884388]],[&quot;^1A&quot;,[1027,&quot;^[&quot;,&quot;简单来说，在多版本并发控制中，每个write(Q)操作会创建Q的一个新版本。当事务发出read(Q)操作时，并发控制管理器选择Q的一个版本(一般是事务开始时获得的版本)进行读取。&quot;,536884388]],[&quot;^1A&quot;,[1027,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1027,&quot;^K&quot;,1026,536884280]],[&quot;^1A&quot;,[1027,&quot;^X&quot;,1,536884388]],[&quot;^1A&quot;,[1027,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1027,&quot;^13&quot;,1026,536884280]],[&quot;^1A&quot;,[1027,&quot;^12&quot;,732,536884388]],[&quot;^1A&quot;,[1027,&quot;^12&quot;,734,536884388]],[&quot;^1A&quot;,[1027,&quot;^12&quot;,997,536884388]],[&quot;^1A&quot;,[1027,&quot;^D&quot;,[&quot;^ &quot;],536884388]],[&quot;^1A&quot;,[1027,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;简单来说，在多版本并发控制中，每个write(Q)操作会创建Q的一个新版本。当事务发出read(Q)操作时，并发控制管理器选择Q的一个版本(一般是事务开始时获得的版本)进行读取。&quot;]],536884388]],[&quot;^1A&quot;,[1027,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1027,&quot;^?&quot;,&quot;~ua8b3d470-74cd-4675-8ad8-1fb1b699c4a0&quot;,536884276]],[&quot;^1A&quot;,[1028,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1633748800672_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1633748800672_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536884283]],[&quot;^1A&quot;,[1028,&quot;^[&quot;,&quot;#多版本两阶段封锁\\n![image.png](../assets/image_1633748800672_0.png)&quot;,536884276]],[&quot;^1A&quot;,[1028,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1028,&quot;^K&quot;,1026,536884283]],[&quot;^1A&quot;,[1028,&quot;^X&quot;,2,536884283]],[&quot;^1A&quot;,[1028,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1028,&quot;^13&quot;,997,536884283]],[&quot;^1A&quot;,[1028,&quot;^12&quot;,732,536884283]],[&quot;^1A&quot;,[1028,&quot;^12&quot;,750,536884283]],[&quot;^1A&quot;,[1028,&quot;^12&quot;,997,536884283]],[&quot;^1A&quot;,[1028,&quot;^L&quot;,750,536884283]],[&quot;^1A&quot;,[1028,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;多版本两阶段封锁&quot;]]]],536884283]],[&quot;^1A&quot;,[1028,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1028,&quot;^?&quot;,&quot;~u687f4e36-ae2c-4501-bc9d-3de5724e4699&quot;,536884276]],[&quot;^1A&quot;,[1029,&quot;^S&quot;,[],536884286]],[&quot;^1A&quot;,[1029,&quot;^[&quot;,&quot;#快照隔离&quot;,536884276]],[&quot;^1A&quot;,[1029,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1029,&quot;^K&quot;,1028,536884283]],[&quot;^1A&quot;,[1029,&quot;^X&quot;,2,536884286]],[&quot;^1A&quot;,[1029,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1029,&quot;^13&quot;,997,536884286]],[&quot;^1A&quot;,[1029,&quot;^12&quot;,732,536884286]],[&quot;^1A&quot;,[1029,&quot;^12&quot;,737,536884286]],[&quot;^1A&quot;,[1029,&quot;^12&quot;,997,536884286]],[&quot;^1A&quot;,[1029,&quot;^L&quot;,737,536884286]],[&quot;^1A&quot;,[1029,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;快照隔离&quot;]]]],536884286]],[&quot;^1A&quot;,[1029,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1029,&quot;^?&quot;,&quot;~u95d0eff6-199e-4099-921d-0ed758405f0c&quot;,536884276]],[&quot;^1A&quot;,[1030,&quot;^S&quot;,[],536884286]],[&quot;^1A&quot;,[1030,&quot;^[&quot;,&quot;快照隔离是一种特殊的并发控制机制。&quot;,536884276]],[&quot;^1A&quot;,[1030,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1030,&quot;^K&quot;,1029,536884286]],[&quot;^1A&quot;,[1030,&quot;^X&quot;,3,536884286]],[&quot;^1A&quot;,[1030,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1030,&quot;^13&quot;,1029,536884286]],[&quot;^1A&quot;,[1030,&quot;^12&quot;,732,536884286]],[&quot;^1A&quot;,[1030,&quot;^12&quot;,737,536884286]],[&quot;^1A&quot;,[1030,&quot;^12&quot;,997,536884286]],[&quot;^1A&quot;,[1030,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;快照隔离是一种特殊的并发控制机制。&quot;]],536884286]],[&quot;^1A&quot;,[1030,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1030,&quot;^?&quot;,&quot;~u14d3a5b5-aa18-401d-9a91-6fe52d0e33ae&quot;,536884276]],[&quot;^1A&quot;,[1031,&quot;^S&quot;,[],536884286]],[&quot;^1A&quot;,[1031,&quot;^[&quot;,&quot;一个事务对中的每一个都读取对方写的数据，但不存在两者同时写的数据，这种情况称为 **写倾斜** 。&quot;,536884276]],[&quot;^1A&quot;,[1031,&quot;^W&quot;,&quot;^1H&quot;,536884276]],[&quot;^1A&quot;,[1031,&quot;^K&quot;,1030,536884276]],[&quot;^1A&quot;,[1031,&quot;^X&quot;,3,536884286]],[&quot;^1A&quot;,[1031,&quot;^17&quot;,997,536884276]],[&quot;^1A&quot;,[1031,&quot;^13&quot;,1029,536884286]],[&quot;^1A&quot;,[1031,&quot;^12&quot;,732,536884286]],[&quot;^1A&quot;,[1031,&quot;^12&quot;,737,536884286]],[&quot;^1A&quot;,[1031,&quot;^12&quot;,997,536884286]],[&quot;^1A&quot;,[1031,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;一个事务对中的每一个都读取对方写的数据，但不存在两者同时写的数据，这种情况称为 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;写倾斜&quot;]]]],[&quot;Plain&quot;,&quot; 。&quot;]],536884286]],[&quot;^1A&quot;,[1031,&quot;^1D&quot;,true,536884276]],[&quot;^1A&quot;,[1031,&quot;^?&quot;,&quot;~uc44d6b9b-3fa2-4899-babc-ce1b336e437e&quot;,536884276]],[&quot;^1A&quot;,[1032,&quot;^Q&quot;,1634022239402,536884303]],[&quot;^1A&quot;,[1032,&quot;^E&quot;,false,536884298]],[&quot;^1A&quot;,[1032,&quot;^19&quot;,&quot;存储和文件结构&quot;,536884298]],[&quot;^1A&quot;,[1032,&quot;^1=&quot;,&quot;存储和文件结构&quot;,536884298]],[&quot;^1A&quot;,[1032,&quot;^G&quot;,1634022247715,536884312]],[&quot;^1A&quot;,[1032,&quot;^?&quot;,&quot;~u6165335d-9379-429d-9546-dc8302d53717&quot;,536884298]],[&quot;^1A&quot;,[1035,&quot;^S&quot;,[],536884312]],[&quot;^1A&quot;,[1035,&quot;^[&quot;,&quot;文件组织&quot;,536884304]],[&quot;^1A&quot;,[1035,&quot;^W&quot;,&quot;^1H&quot;,536884304]],[&quot;^1A&quot;,[1035,&quot;^K&quot;,1032,536884312]],[&quot;^1A&quot;,[1035,&quot;^X&quot;,2,536884312]],[&quot;^1A&quot;,[1035,&quot;^17&quot;,1032,536884304]],[&quot;^1A&quot;,[1035,&quot;^13&quot;,1032,536884309]],[&quot;^1A&quot;,[1035,&quot;^12&quot;,1032,536884312]],[&quot;^1A&quot;,[1035,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;文件组织&quot;]],536884312]],[&quot;^1A&quot;,[1035,&quot;^1D&quot;,true,536884304]],[&quot;^1A&quot;,[1035,&quot;^?&quot;,&quot;~u3980923c-1f6a-4a0c-9ce4-39bac49ab227&quot;,536884304]],[&quot;^1A&quot;,[1036,&quot;^S&quot;,[],536884304]],[&quot;^1A&quot;,[1036,&quot;^[&quot;,&quot;#空闲列表 在文件的开始处，我们分配一定数量的字节作为 **文件头** 。文件头中会存储内容被删除的记录地址，此地址将作为下次插入记录的目标地址。由于会有多个被删除记录，它们形成了一条链表，称为 **空闲列表** 。&quot;,536884304]],[&quot;^1A&quot;,[1036,&quot;^W&quot;,&quot;^1H&quot;,536884304]],[&quot;^1A&quot;,[1036,&quot;^K&quot;,1035,536884304]],[&quot;^1A&quot;,[1036,&quot;^X&quot;,3,536884304]],[&quot;^1A&quot;,[1036,&quot;^17&quot;,1032,536884304]],[&quot;^1A&quot;,[1036,&quot;^13&quot;,1035,536884304]],[&quot;^1A&quot;,[1036,&quot;^12&quot;,765,536884304]],[&quot;^1A&quot;,[1036,&quot;^12&quot;,1032,536884304]],[&quot;^1A&quot;,[1036,&quot;^L&quot;,765,536884304]],[&quot;^1A&quot;,[1036,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;空闲列表&quot;]]],[&quot;Plain&quot;,&quot; 在文件的开始处，我们分配一定数量的字节作为 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;文件头&quot;]]]],[&quot;Plain&quot;,&quot; 。文件头中会存储内容被删除的记录地址，此地址将作为下次插入记录的目标地址。由于会有多个被删除记录，它们形成了一条链表，称为 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;空闲列表&quot;]]]],[&quot;Plain&quot;,&quot; 。&quot;]],536884304]],[&quot;^1A&quot;,[1036,&quot;^1D&quot;,true,536884304]],[&quot;^1A&quot;,[1036,&quot;^?&quot;,&quot;~ufb31cc76-868b-4327-b61d-aa802e7e9317&quot;,536884304]],[&quot;^1A&quot;,[1037,&quot;^S&quot;,[[&quot;Paragraph&quot;,[&quot;^1@&quot;,[[&quot;Plain&quot;,&quot;&quot;],[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Search&quot;,&quot;../assets/image_1633935509270_0.png&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;image.png&quot;]],&quot;^1W&quot;,&quot;![image.png](../assets/image_1633935509270_0.png)&quot;,&quot;^1X&quot;,&quot;&quot;]],[&quot;Break_Line&quot;]]]]],536884304]],[&quot;^1A&quot;,[1037,&quot;^[&quot;,&quot;分槽页结构。用来处理在块中存储变长记录的问题，结构如图。 **块头** 中会存储实际记录的偏移量和大小。当记录插入/删除时，块头中的值会做对应修改，插入/删除的记录之前的记录都将被移动。由于块的大小有限制：典型的值为4-8KB，在块中移动记录的代价并不高。\\n![image.png](../assets/image_1633935509270_0.png)&quot;,536884304]],[&quot;^1A&quot;,[1037,&quot;^W&quot;,&quot;^1H&quot;,536884304]],[&quot;^1A&quot;,[1037,&quot;^K&quot;,1036,536884304]],[&quot;^1A&quot;,[1037,&quot;^X&quot;,3,536884304]],[&quot;^1A&quot;,[1037,&quot;^17&quot;,1032,536884304]],[&quot;^1A&quot;,[1037,&quot;^13&quot;,1035,536884304]],[&quot;^1A&quot;,[1037,&quot;^12&quot;,1032,536884304]],[&quot;^1A&quot;,[1037,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;分槽页结构。用来处理在块中存储变长记录的问题，结构如图。 &quot;],[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Plain&quot;,&quot;块头&quot;]]]],[&quot;Plain&quot;,&quot; 中会存储实际记录的偏移量和大小。当记录插入/删除时，块头中的值会做对应修改，插入/删除的记录之前的记录都将被移动。由于块的大小有限制：典型的值为4-8KB，在块中移动记录的代价并不高。&quot;]],536884304]],[&quot;^1A&quot;,[1037,&quot;^1D&quot;,true,536884304]],[&quot;^1A&quot;,[1037,&quot;^?&quot;,&quot;~ub84bc1f1-e5d6-4412-86be-c6521eb76a00&quot;,536884304]],[&quot;^1A&quot;,[1038,&quot;^S&quot;,[],536884309]],[&quot;^1A&quot;,[1038,&quot;^[&quot;,&quot;&quot;,536884304]],[&quot;^1A&quot;,[1038,&quot;^W&quot;,&quot;^1H&quot;,536884304]],[&quot;^1A&quot;,[1038,&quot;^K&quot;,1037,536884309]],[&quot;^1A&quot;,[1038,&quot;^X&quot;,2,536884309]],[&quot;^1A&quot;,[1038,&quot;^17&quot;,1032,536884304]],[&quot;^1A&quot;,[1038,&quot;^13&quot;,1035,536884309]],[&quot;^1A&quot;,[1038,&quot;^12&quot;,1032,536884309]],[&quot;^1A&quot;,[1038,&quot;^Z&quot;,[],536884309]],[&quot;^1A&quot;,[1038,&quot;^1D&quot;,true,536884304]],[&quot;^1A&quot;,[1038,&quot;^?&quot;,&quot;~u4c0c5d2f-7c82-4891-ad9c-310dc9bb03dd&quot;,536884304]],[&quot;^1A&quot;,[1040,&quot;^Q&quot;,1634022279232,536884329]],[&quot;^1A&quot;,[1040,&quot;^E&quot;,false,536884324]],[&quot;^1A&quot;,[1040,&quot;^19&quot;,&quot;查询处理&quot;,536884324]],[&quot;^1A&quot;,[1040,&quot;^1=&quot;,&quot;查询处理&quot;,536884324]],[&quot;^1A&quot;,[1040,&quot;^G&quot;,1634022287432,536884341]],[&quot;^1A&quot;,[1040,&quot;^?&quot;,&quot;~u6165337f-2a34-4200-90a9-78e357232665&quot;,536884324]],[&quot;^1A&quot;,[1043,&quot;^S&quot;,[],536884341]],[&quot;^1A&quot;,[1043,&quot;^[&quot;,&quot;选择 *select*&quot;,536884330]],[&quot;^1A&quot;,[1043,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1043,&quot;^K&quot;,1040,536884341]],[&quot;^1A&quot;,[1043,&quot;^X&quot;,2,536884341]],[&quot;^1A&quot;,[1043,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1043,&quot;^13&quot;,1040,536884338]],[&quot;^1A&quot;,[1043,&quot;^12&quot;,1040,536884341]],[&quot;^1A&quot;,[1043,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;选择 &quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;select&quot;]]]]],536884341]],[&quot;^1A&quot;,[1043,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1043,&quot;^?&quot;,&quot;~ubb85e2e2-de83-4a3c-824b-05737868cea6&quot;,536884330]],[&quot;^1A&quot;,[1044,&quot;^S&quot;,[],536884330]],[&quot;^1A&quot;,[1044,&quot;^[&quot;,&quot;**`线性扫描`** 扫描每一个文件块并测试等值条件。&quot;,536884330]],[&quot;^1A&quot;,[1044,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1044,&quot;^K&quot;,1043,536884330]],[&quot;^1A&quot;,[1044,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1044,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1044,&quot;^13&quot;,1043,536884330]],[&quot;^1A&quot;,[1044,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1044,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;线性扫描&quot;]]]],[&quot;Plain&quot;,&quot; 扫描每一个文件块并测试等值条件。&quot;]],536884330]],[&quot;^1A&quot;,[1044,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1044,&quot;^?&quot;,&quot;~u3332a48d-f359-4cd1-af75-f12fa53892be&quot;,536884330]],[&quot;^1A&quot;,[1045,&quot;^S&quot;,[],536884330]],[&quot;^1A&quot;,[1045,&quot;^[&quot;,&quot;**`主索引码属性等值比较`** 利用主索引找到满足等值条件的 ^^唯一一条记录^^ 。&quot;,536884330]],[&quot;^1A&quot;,[1045,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1045,&quot;^K&quot;,1044,536884330]],[&quot;^1A&quot;,[1045,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1045,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1045,&quot;^13&quot;,1043,536884330]],[&quot;^1A&quot;,[1045,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1045,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;主索引码属性等值比较&quot;]]]],[&quot;Plain&quot;,&quot; 利用主索引找到满足等值条件的 &quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;唯一一条记录&quot;]]]],[&quot;Plain&quot;,&quot; 。&quot;]],536884330]],[&quot;^1A&quot;,[1045,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1045,&quot;^?&quot;,&quot;~ue3ad1802-6bd4-4e68-b9ed-950f23a1e7e0&quot;,536884330]],[&quot;^1A&quot;,[1046,&quot;^S&quot;,[],536884330]],[&quot;^1A&quot;,[1046,&quot;^[&quot;,&quot;**`主索引非码属性等值比较`** 利用主索引找到满足等值条件的 ^^多条记录^^ 。&quot;,536884330]],[&quot;^1A&quot;,[1046,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1046,&quot;^K&quot;,1045,536884330]],[&quot;^1A&quot;,[1046,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1046,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1046,&quot;^13&quot;,1043,536884330]],[&quot;^1A&quot;,[1046,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1046,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;主索引非码属性等值比较&quot;]]]],[&quot;Plain&quot;,&quot; 利用主索引找到满足等值条件的 &quot;],[&quot;Emphasis&quot;,[[&quot;Highlight&quot;],[[&quot;Plain&quot;,&quot;多条记录&quot;]]]],[&quot;Plain&quot;,&quot; 。&quot;]],536884330]],[&quot;^1A&quot;,[1046,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1046,&quot;^?&quot;,&quot;~u2ff04e20-8733-4f33-b7b5-b6b109ce3e98&quot;,536884330]],[&quot;^1A&quot;,[1047,&quot;^S&quot;,[],536884330]],[&quot;^1A&quot;,[1047,&quot;^[&quot;,&quot;**`辅助索引等值比较`** 利用辅助索引找到满足等值条件的一条或多条记录。&quot;,536884330]],[&quot;^1A&quot;,[1047,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1047,&quot;^K&quot;,1046,536884330]],[&quot;^1A&quot;,[1047,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1047,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1047,&quot;^13&quot;,1043,536884330]],[&quot;^1A&quot;,[1047,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1047,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;辅助索引等值比较&quot;]]]],[&quot;Plain&quot;,&quot; 利用辅助索引找到满足等值条件的一条或多条记录。&quot;]],536884330]],[&quot;^1A&quot;,[1047,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1047,&quot;^?&quot;,&quot;~u24a1c954-dbbc-476b-80e8-a72a5ed6e41c&quot;,536884330]],[&quot;^1A&quot;,[1048,&quot;^S&quot;,[],536884338]],[&quot;^1A&quot;,[1048,&quot;^[&quot;,&quot;排序 *sort*&quot;,536884330]],[&quot;^1A&quot;,[1048,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1048,&quot;^K&quot;,1043,536884330]],[&quot;^1A&quot;,[1048,&quot;^X&quot;,2,536884338]],[&quot;^1A&quot;,[1048,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1048,&quot;^13&quot;,1040,536884338]],[&quot;^1A&quot;,[1048,&quot;^12&quot;,1040,536884338]],[&quot;^1A&quot;,[1048,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;排序 &quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;sort&quot;]]]]],536884338]],[&quot;^1A&quot;,[1048,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1048,&quot;^?&quot;,&quot;~ufeaf89e4-1e35-4e17-ae8b-75d02c99c321&quot;,536884330]],[&quot;^1A&quot;,[1049,&quot;^S&quot;,[],536884330]],[&quot;^1A&quot;,[1049,&quot;^[&quot;,&quot;[[多路归并排序]]&quot;,536884330]],[&quot;^1A&quot;,[1049,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1049,&quot;^K&quot;,1048,536884330]],[&quot;^1A&quot;,[1049,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1049,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1049,&quot;^13&quot;,1048,536884330]],[&quot;^1A&quot;,[1049,&quot;^12&quot;,861,536884330]],[&quot;^1A&quot;,[1049,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1049,&quot;^L&quot;,861,536884330]],[&quot;^1A&quot;,[1049,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;多路归并排序&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[多路归并排序]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536884330]],[&quot;^1A&quot;,[1049,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1049,&quot;^?&quot;,&quot;~ud276c41a-6205-432f-93f6-6122d010fa98&quot;,536884330]],[&quot;^1A&quot;,[1050,&quot;^S&quot;,[],536884338]],[&quot;^1A&quot;,[1050,&quot;^[&quot;,&quot;连接 *join*&quot;,536884330]],[&quot;^1A&quot;,[1050,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1050,&quot;^K&quot;,1048,536884330]],[&quot;^1A&quot;,[1050,&quot;^X&quot;,2,536884338]],[&quot;^1A&quot;,[1050,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1050,&quot;^13&quot;,1040,536884338]],[&quot;^1A&quot;,[1050,&quot;^12&quot;,1040,536884338]],[&quot;^1A&quot;,[1050,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;连接 &quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;join&quot;]]]]],536884338]],[&quot;^1A&quot;,[1050,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1050,&quot;^?&quot;,&quot;~u5111cedb-edd4-4059-995c-81b3dc6d8889&quot;,536884330]],[&quot;^1A&quot;,[1051,&quot;^S&quot;,[[&quot;Src&quot;,[&quot;^ &quot;,&quot;^1O&quot;,[&quot;for each 元组r in 关系R do&quot;,&quot;\\n&quot;,&quot;    for each 元组s in 关系S do&quot;,&quot;\\n&quot;,&quot;        测试元组对 (r, s) 是否满足连接条件&quot;,&quot;\\n&quot;,&quot;        如果满足，将 (r, s) 加入结果&quot;,&quot;\\n&quot;,&quot;    end&quot;,&quot;\\n&quot;,&quot;end&quot;,&quot;\\n&quot;],&quot;^1Q&quot;,[&quot;^ &quot;,&quot;^1R&quot;,550,&quot;^1S&quot;,759],&quot;^1T&quot;,&quot;~```\\nfor each 元组r in 关系R do\\n    for each 元组s in 关系S do\\n        测试元组对 (r, s) 是否满足连接条件\\n        如果满足，将 (r, s) 加入结果\\n    end\\nend\\n```&quot;]]],536884330]],[&quot;^1A&quot;,[1051,&quot;^[&quot;,&quot;**`嵌套循环连接`** 简单暴力匹配。\\n```\\nfor each 元组r in 关系R do\\n    for each 元组s in 关系S do\\n        测试元组对 (r, s) 是否满足连接条件\\n        如果满足，将 (r, s) 加入结果\\n    end\\nend\\n```&quot;,536884330]],[&quot;^1A&quot;,[1051,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1051,&quot;^K&quot;,1050,536884330]],[&quot;^1A&quot;,[1051,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1051,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1051,&quot;^13&quot;,1050,536884330]],[&quot;^1A&quot;,[1051,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1051,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;嵌套循环连接&quot;]]]],[&quot;Plain&quot;,&quot; 简单暴力匹配。&quot;]],536884330]],[&quot;^1A&quot;,[1051,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1051,&quot;^?&quot;,&quot;~ue8fd144c-36be-4d96-aaf3-199e29aedd2a&quot;,536884330]],[&quot;^1A&quot;,[1052,&quot;^S&quot;,[],536884330]],[&quot;^1A&quot;,[1052,&quot;^[&quot;,&quot;**`归并连接`** 将关系元组排序后进行归并连接。&quot;,536884330]],[&quot;^1A&quot;,[1052,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1052,&quot;^K&quot;,1051,536884330]],[&quot;^1A&quot;,[1052,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1052,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1052,&quot;^13&quot;,1050,536884330]],[&quot;^1A&quot;,[1052,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1052,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;归并连接&quot;]]]],[&quot;Plain&quot;,&quot; 将关系元组排序后进行归并连接。&quot;]],536884330]],[&quot;^1A&quot;,[1052,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1052,&quot;^?&quot;,&quot;~u83faae27-3692-43ea-ba80-3076e1ae9b06&quot;,536884330]],[&quot;^1A&quot;,[1053,&quot;^S&quot;,[[&quot;Quote&quot;,[[&quot;Paragraph&quot;,[[&quot;Plain&quot;,&quot;将元组按照连接属性的映射值进行分桶&quot;],[&quot;Break_Line&quot;]]]]]],536884330]],[&quot;^1A&quot;,[1053,&quot;^[&quot;,&quot;**`散列连接`** 将两个关系的元组划分成连接属性上具有相同值的元组集合。\\n&gt; 将元组按照连接属性的映射值进行分桶&quot;,536884330]],[&quot;^1A&quot;,[1053,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1053,&quot;^K&quot;,1052,536884330]],[&quot;^1A&quot;,[1053,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1053,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1053,&quot;^13&quot;,1050,536884330]],[&quot;^1A&quot;,[1053,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1053,&quot;^Z&quot;,[[&quot;Emphasis&quot;,[[&quot;Bold&quot;],[[&quot;Code&quot;,&quot;散列连接&quot;]]]],[&quot;Plain&quot;,&quot; 将两个关系的元组划分成连接属性上具有相同值的元组集合。&quot;]],536884330]],[&quot;^1A&quot;,[1053,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1053,&quot;^?&quot;,&quot;~uc2f654d6-5586-421f-83a8-5b5fd01a81ce&quot;,536884330]],[&quot;^1A&quot;,[1054,&quot;^S&quot;,[],536884338]],[&quot;^1A&quot;,[1054,&quot;^[&quot;,&quot;去重 *distinct*&quot;,536884330]],[&quot;^1A&quot;,[1054,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1054,&quot;^K&quot;,1050,536884330]],[&quot;^1A&quot;,[1054,&quot;^X&quot;,2,536884338]],[&quot;^1A&quot;,[1054,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1054,&quot;^13&quot;,1040,536884338]],[&quot;^1A&quot;,[1054,&quot;^12&quot;,1040,536884338]],[&quot;^1A&quot;,[1054,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;去重 &quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;distinct&quot;]]]]],536884338]],[&quot;^1A&quot;,[1054,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1054,&quot;^?&quot;,&quot;~ue2a67dcc-cd90-489e-b7d5-5b45fc103063&quot;,536884330]],[&quot;^1A&quot;,[1055,&quot;^S&quot;,[],536884330]],[&quot;^1A&quot;,[1055,&quot;^[&quot;,&quot;排序或散列&quot;,536884330]],[&quot;^1A&quot;,[1055,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1055,&quot;^K&quot;,1054,536884330]],[&quot;^1A&quot;,[1055,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1055,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1055,&quot;^13&quot;,1054,536884330]],[&quot;^1A&quot;,[1055,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1055,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;排序或散列&quot;]],536884330]],[&quot;^1A&quot;,[1055,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1055,&quot;^?&quot;,&quot;~uf128936c-6260-4c1e-84d9-3722bf8b8b32&quot;,536884330]],[&quot;^1A&quot;,[1056,&quot;^S&quot;,[],536884338]],[&quot;^1A&quot;,[1056,&quot;^[&quot;,&quot;聚集 *group, min, max, sum*&quot;,536884330]],[&quot;^1A&quot;,[1056,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1056,&quot;^K&quot;,1054,536884330]],[&quot;^1A&quot;,[1056,&quot;^X&quot;,2,536884338]],[&quot;^1A&quot;,[1056,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1056,&quot;^13&quot;,1040,536884338]],[&quot;^1A&quot;,[1056,&quot;^12&quot;,1040,536884338]],[&quot;^1A&quot;,[1056,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;聚集 &quot;],[&quot;Emphasis&quot;,[[&quot;Italic&quot;],[[&quot;Plain&quot;,&quot;group, min, max, sum&quot;]]]]],536884338]],[&quot;^1A&quot;,[1056,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1056,&quot;^?&quot;,&quot;~ua8d9e026-702a-4028-86c5-da2821864ee2&quot;,536884330]],[&quot;^1A&quot;,[1057,&quot;^S&quot;,[],536884330]],[&quot;^1A&quot;,[1057,&quot;^[&quot;,&quot;排序或散列&quot;,536884330]],[&quot;^1A&quot;,[1057,&quot;^W&quot;,&quot;^1H&quot;,536884330]],[&quot;^1A&quot;,[1057,&quot;^K&quot;,1056,536884330]],[&quot;^1A&quot;,[1057,&quot;^X&quot;,3,536884330]],[&quot;^1A&quot;,[1057,&quot;^17&quot;,1040,536884330]],[&quot;^1A&quot;,[1057,&quot;^13&quot;,1056,536884330]],[&quot;^1A&quot;,[1057,&quot;^12&quot;,1040,536884330]],[&quot;^1A&quot;,[1057,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;排序或散列&quot;]],536884330]],[&quot;^1A&quot;,[1057,&quot;^1D&quot;,true,536884330]],[&quot;^1A&quot;,[1057,&quot;^?&quot;,&quot;~ub5a68f84-1929-49e6-867e-c1e84d5d7a45&quot;,536884330]],[&quot;^1A&quot;,[1059,&quot;^S&quot;,[],536884468]],[&quot;^1A&quot;,[1059,&quot;^[&quot;,&quot;## [[*高级话题]]&quot;,536884468]],[&quot;^1A&quot;,[1059,&quot;^W&quot;,&quot;^1H&quot;,536884461]],[&quot;^1A&quot;,[1059,&quot;^14&quot;,2,536884468]],[&quot;^1A&quot;,[1059,&quot;^K&quot;,857,536884461]],[&quot;^1A&quot;,[1059,&quot;^X&quot;,1,536884468]],[&quot;^1A&quot;,[1059,&quot;^17&quot;,54,536884461]],[&quot;^1A&quot;,[1059,&quot;^13&quot;,54,536884461]],[&quot;^1A&quot;,[1059,&quot;^12&quot;,54,536884468]],[&quot;^1A&quot;,[1059,&quot;^12&quot;,1060,536884468]],[&quot;^1A&quot;,[1059,&quot;^D&quot;,[&quot;^ &quot;],536884468]],[&quot;^1A&quot;,[1059,&quot;^L&quot;,1060,536884468]],[&quot;^1A&quot;,[1059,&quot;^1M&quot;,2,536884468]],[&quot;^1A&quot;,[1059,&quot;^Z&quot;,[[&quot;Link&quot;,[&quot;^ &quot;,&quot;^1U&quot;,[&quot;Page_ref&quot;,&quot;*高级话题&quot;],&quot;^1V&quot;,[[&quot;Plain&quot;,&quot;&quot;]],&quot;^1W&quot;,&quot;[[*高级话题]]&quot;,&quot;^1X&quot;,&quot;&quot;]]],536884468]],[&quot;^1A&quot;,[1059,&quot;^15&quot;,&quot;^1N&quot;,536884468]],[&quot;^1A&quot;,[1059,&quot;^1D&quot;,false,536884468]],[&quot;^1A&quot;,[1059,&quot;^?&quot;,&quot;~u61653648-fc5c-4323-bc6e-45ca2780feb2&quot;,536884461]],[&quot;^1A&quot;,[1060,&quot;^Q&quot;,1634023282823,536884473]],[&quot;^1A&quot;,[1060,&quot;^E&quot;,false,536884468]],[&quot;^1A&quot;,[1060,&quot;^19&quot;,&quot;*高级话题&quot;,536884468]],[&quot;^1A&quot;,[1060,&quot;^1=&quot;,&quot;*高级话题&quot;,536884468]],[&quot;^1A&quot;,[1060,&quot;^G&quot;,1634024279992,536884615]],[&quot;^1A&quot;,[1060,&quot;^?&quot;,&quot;~u6165375b-57ab-4c4f-bb48-c83ec1f0fc03&quot;,536884468]],[&quot;^1A&quot;,[1061,&quot;^S&quot;,[],536884484]],[&quot;^1A&quot;,[1061,&quot;^[&quot;,&quot;#TOPK问题&quot;,536884484]],[&quot;^1A&quot;,[1061,&quot;^W&quot;,&quot;^1H&quot;,536884471]],[&quot;^1A&quot;,[1061,&quot;^E&quot;,false,536884471]],[&quot;^1A&quot;,[1061,&quot;^K&quot;,1060,536884471]],[&quot;^1A&quot;,[1061,&quot;^X&quot;,1,536884484]],[&quot;^1A&quot;,[1061,&quot;^17&quot;,1060,536884471]],[&quot;^1A&quot;,[1061,&quot;^13&quot;,1060,536884471]],[&quot;^1A&quot;,[1061,&quot;^12&quot;,1060,536884484]],[&quot;^1A&quot;,[1061,&quot;^12&quot;,1066,536884484]],[&quot;^1A&quot;,[1061,&quot;^D&quot;,[&quot;^ &quot;],536884484]],[&quot;^1A&quot;,[1061,&quot;^L&quot;,1066,536884484]],[&quot;^1A&quot;,[1061,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;TOPK问题&quot;]]]],536884484]],[&quot;^1A&quot;,[1061,&quot;^1D&quot;,true,536884471]],[&quot;^1A&quot;,[1061,&quot;^?&quot;,&quot;~u6165375d-5e56-442b-a0c5-98cd1724f479&quot;,536884471]],[&quot;^1A&quot;,[1062,&quot;^E&quot;,false,536884473]],[&quot;^1A&quot;,[1062,&quot;^19&quot;,&quot;topk&quot;,536884473]],[&quot;^1A&quot;,[1062,&quot;^1=&quot;,&quot;topK&quot;,536884473]],[&quot;^1A&quot;,[1062,&quot;^?&quot;,&quot;~u61653772-9321-4c0f-a612-7c8e18913909&quot;,536884473]],[&quot;^1A&quot;,[1063,&quot;^S&quot;,[],536884539]],[&quot;^1A&quot;,[1063,&quot;^[&quot;,&quot;#堆 利用堆序，舍弃不符合要求的数据。例如求前100得分时，利用小根堆舍弃较小的分值，保留较大的分值。&quot;,536884538]],[&quot;^1A&quot;,[1063,&quot;^W&quot;,&quot;^1H&quot;,536884474]],[&quot;^1A&quot;,[1063,&quot;^E&quot;,false,536884474]],[&quot;^1A&quot;,[1063,&quot;^K&quot;,1061,536884474]],[&quot;^1A&quot;,[1063,&quot;^X&quot;,1,536884539]],[&quot;^1A&quot;,[1063,&quot;^17&quot;,1060,536884474]],[&quot;^1A&quot;,[1063,&quot;^13&quot;,1061,536884478]],[&quot;^1A&quot;,[1063,&quot;^12&quot;,1060,536884539]],[&quot;^1A&quot;,[1063,&quot;^12&quot;,1066,536884539]],[&quot;^1A&quot;,[1063,&quot;^12&quot;,1067,536884539]],[&quot;^1A&quot;,[1063,&quot;^D&quot;,[&quot;^ &quot;],536884539]],[&quot;^1A&quot;,[1063,&quot;^L&quot;,1067,536884539]],[&quot;^1A&quot;,[1063,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;堆&quot;]]],[&quot;Plain&quot;,&quot; 利用堆序，舍弃不符合要求的数据。例如求前100得分时，利用小根堆舍弃较小的分值，保留较大的分值。&quot;]],536884539]],[&quot;^1A&quot;,[1063,&quot;^1D&quot;,true,536884474]],[&quot;^1A&quot;,[1063,&quot;^?&quot;,&quot;~u61653772-f547-4ebd-b162-b4e5c3bcf888&quot;,536884474]],[&quot;^1A&quot;,[1065,&quot;^E&quot;,false,536884481]],[&quot;^1A&quot;,[1065,&quot;^19&quot;,&quot;top-k问题&quot;,536884481]],[&quot;^1A&quot;,[1065,&quot;^1=&quot;,&quot;TOP-K问题&quot;,536884481]],[&quot;^1A&quot;,[1065,&quot;^?&quot;,&quot;~u6165377c-c985-4cfb-8056-d179ed80c7ba&quot;,536884481]],[&quot;^1A&quot;,[1066,&quot;^E&quot;,false,536884484]],[&quot;^1A&quot;,[1066,&quot;^19&quot;,&quot;topk问题&quot;,536884484]],[&quot;^1A&quot;,[1066,&quot;^1=&quot;,&quot;TOPK问题&quot;,536884484]],[&quot;^1A&quot;,[1066,&quot;^?&quot;,&quot;~u61653780-c670-4191-b83c-416a1d92c2ee&quot;,536884484]],[&quot;^1A&quot;,[1067,&quot;^E&quot;,false,536884487]],[&quot;^1A&quot;,[1067,&quot;^19&quot;,&quot;堆&quot;,536884487]],[&quot;^1A&quot;,[1067,&quot;^1=&quot;,&quot;堆&quot;,536884487]],[&quot;^1A&quot;,[1067,&quot;^?&quot;,&quot;~u616537aa-db9b-4718-af74-d860fd51cc25&quot;,536884487]],[&quot;^1A&quot;,[1068,&quot;^S&quot;,[],536884547]],[&quot;^1A&quot;,[1068,&quot;^[&quot;,&quot;连接极小化&quot;,536884544]],[&quot;^1A&quot;,[1068,&quot;^W&quot;,&quot;^1H&quot;,536884540]],[&quot;^1A&quot;,[1068,&quot;^E&quot;,false,536884540]],[&quot;^1A&quot;,[1068,&quot;^K&quot;,1061,536884541]],[&quot;^1A&quot;,[1068,&quot;^X&quot;,1,536884547]],[&quot;^1A&quot;,[1068,&quot;^17&quot;,1060,536884540]],[&quot;^1A&quot;,[1068,&quot;^13&quot;,1060,536884541]],[&quot;^1A&quot;,[1068,&quot;^12&quot;,1060,536884547]],[&quot;^1A&quot;,[1068,&quot;^D&quot;,[&quot;^ &quot;],536884547]],[&quot;^1A&quot;,[1068,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;连接极小化&quot;]],536884547]],[&quot;^1A&quot;,[1068,&quot;^1D&quot;,true,536884540]],[&quot;^1A&quot;,[1068,&quot;^?&quot;,&quot;~u616537fc-b311-446d-8c67-fc4a72ff770e&quot;,536884540]],[&quot;^1A&quot;,[1069,&quot;^S&quot;,[],536884595]],[&quot;^1A&quot;,[1069,&quot;^[&quot;,&quot;指消除不必要的连接关系，比如当查询时连接的关系数比实际用到的关系数少，可以考虑删除连接关系。&quot;,536884592]],[&quot;^1A&quot;,[1069,&quot;^W&quot;,&quot;^1H&quot;,536884548]],[&quot;^1A&quot;,[1069,&quot;^E&quot;,false,536884548]],[&quot;^1A&quot;,[1069,&quot;^K&quot;,1068,536884548]],[&quot;^1A&quot;,[1069,&quot;^X&quot;,1,536884595]],[&quot;^1A&quot;,[1069,&quot;^17&quot;,1060,536884548]],[&quot;^1A&quot;,[1069,&quot;^13&quot;,1068,536884549]],[&quot;^1A&quot;,[1069,&quot;^12&quot;,1060,536884595]],[&quot;^1A&quot;,[1069,&quot;^D&quot;,[&quot;^ &quot;],536884595]],[&quot;^1A&quot;,[1069,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;指消除不必要的连接关系，比如当查询时连接的关系数比实际用到的关系数少，可以考虑删除连接关系。&quot;]],536884595]],[&quot;^1A&quot;,[1069,&quot;^1D&quot;,true,536884548]],[&quot;^1A&quot;,[1069,&quot;^?&quot;,&quot;~u6165384e-e664-46c4-9ed2-dffc3b0190ca&quot;,536884548]],[&quot;^1A&quot;,[1070,&quot;^S&quot;,[],536884604]],[&quot;^1A&quot;,[1070,&quot;^[&quot;,&quot;#万圣节问题&quot;,536884604]],[&quot;^1A&quot;,[1070,&quot;^W&quot;,&quot;^1H&quot;,536884596]],[&quot;^1A&quot;,[1070,&quot;^E&quot;,false,536884596]],[&quot;^1A&quot;,[1070,&quot;^K&quot;,1068,536884603]],[&quot;^1A&quot;,[1070,&quot;^X&quot;,1,536884604]],[&quot;^1A&quot;,[1070,&quot;^17&quot;,1060,536884596]],[&quot;^1A&quot;,[1070,&quot;^13&quot;,1060,536884603]],[&quot;^1A&quot;,[1070,&quot;^12&quot;,1060,536884604]],[&quot;^1A&quot;,[1070,&quot;^12&quot;,1071,536884604]],[&quot;^1A&quot;,[1070,&quot;^D&quot;,[&quot;^ &quot;],536884604]],[&quot;^1A&quot;,[1070,&quot;^L&quot;,1071,536884604]],[&quot;^1A&quot;,[1070,&quot;^Z&quot;,[[&quot;Tag&quot;,[[&quot;Plain&quot;,&quot;万圣节问题&quot;]]]],536884604]],[&quot;^1A&quot;,[1070,&quot;^1D&quot;,true,536884596]],[&quot;^1A&quot;,[1070,&quot;^?&quot;,&quot;~u61653946-8e42-4e2c-9a70-759947c5919c&quot;,536884596]],[&quot;^1A&quot;,[1071,&quot;^E&quot;,false,536884604]],[&quot;^1A&quot;,[1071,&quot;^19&quot;,&quot;万圣节问题&quot;,536884604]],[&quot;^1A&quot;,[1071,&quot;^1=&quot;,&quot;万圣节问题&quot;,536884604]],[&quot;^1A&quot;,[1071,&quot;^?&quot;,&quot;~u6165394f-8707-4d06-b51e-8f80b8454d98&quot;,536884604]],[&quot;^1A&quot;,[1072,&quot;^S&quot;,[],536884611]],[&quot;^1A&quot;,[1072,&quot;^[&quot;,&quot;更新操作本身可能影响自己执行的问题称为万圣节问题，例如给所有薪水大于10000的员工提薪10%：可能出现员工薪资被多次甚至是无限次的更新，或者是索引在更新前后被插入多次。&quot;,536884611]],[&quot;^1A&quot;,[1072,&quot;^W&quot;,&quot;^1H&quot;,536884605]],[&quot;^1A&quot;,[1072,&quot;^E&quot;,false,536884605]],[&quot;^1A&quot;,[1072,&quot;^K&quot;,1070,536884605]],[&quot;^1A&quot;,[1072,&quot;^X&quot;,1,536884611]],[&quot;^1A&quot;,[1072,&quot;^17&quot;,1060,536884605]],[&quot;^1A&quot;,[1072,&quot;^13&quot;,1070,536884608]],[&quot;^1A&quot;,[1072,&quot;^12&quot;,1060,536884611]],[&quot;^1A&quot;,[1072,&quot;^12&quot;,1071,536884611]],[&quot;^1A&quot;,[1072,&quot;^D&quot;,[&quot;^ &quot;],536884611]],[&quot;^1A&quot;,[1072,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;更新操作本身可能影响自己执行的问题称为万圣节问题，例如给所有薪水大于10000的员工提薪10%：可能出现员工薪资被多次甚至是无限次的更新，或者是索引在更新前后被插入多次。&quot;]],536884611]],[&quot;^1A&quot;,[1072,&quot;^1D&quot;,true,536884605]],[&quot;^1A&quot;,[1072,&quot;^?&quot;,&quot;~u6165394f-ef63-4b8b-b799-701d35e1cfcc&quot;,536884605]],[&quot;^1A&quot;,[1073,&quot;^S&quot;,[],536884615]],[&quot;^1A&quot;,[1073,&quot;^[&quot;,&quot;可以将查询与更新分离以避免此问题，虽然这样做有一定的性能代价。查询后可以按需对数据进行分批，然后并行地执行更新。&quot;,536884615]],[&quot;^1A&quot;,[1073,&quot;^W&quot;,&quot;^1H&quot;,536884612]],[&quot;^1A&quot;,[1073,&quot;^E&quot;,false,536884612]],[&quot;^1A&quot;,[1073,&quot;^K&quot;,1072,536884612]],[&quot;^1A&quot;,[1073,&quot;^X&quot;,1,536884615]],[&quot;^1A&quot;,[1073,&quot;^17&quot;,1060,536884612]],[&quot;^1A&quot;,[1073,&quot;^13&quot;,1070,536884612]],[&quot;^1A&quot;,[1073,&quot;^12&quot;,1060,536884615]],[&quot;^1A&quot;,[1073,&quot;^12&quot;,1071,536884615]],[&quot;^1A&quot;,[1073,&quot;^D&quot;,[&quot;^ &quot;],536884615]],[&quot;^1A&quot;,[1073,&quot;^Z&quot;,[[&quot;Plain&quot;,&quot;可以将查询与更新分离以避免此问题，虽然这样做有一定的性能代价。查询后可以按需对数据进行分批，然后并行地执行更新。&quot;]],536884615]],[&quot;^1A&quot;,[1073,&quot;^1D&quot;,true,536884612]],[&quot;^1A&quot;,[1073,&quot;^?&quot;,&quot;~u616539e9-c38b-48a2-8149-7c938ec8c785&quot;,536884612]]]]]]"</script><script>window.logseq_state="{:ui/theme \"white\", :ui/cycle-collapse :show-all, :ui/sidebar-collapsed-blocks {}, :ui/show-recent? false, :config {\"local\" {:shortcuts {:editor/new-block \"shift+enter\", :editor/new-line \"enter\", :editor/collapse-block-children \"meta+dash\", :editor/expand-block-children \"meta+equals\"}, :git-pull-secs 60, :default-templates {:journals \"\"}, :feature/enable-journals? false, :macros {}, :favorites [\"rdbms\" \"博客格式定义\"], :markdown/version 2, :preferred-workflow :now, :publishing/all-pages-public? true, :ui/show-brackets? false, :ref/default-open-blocks-level 2, :commands [], :hidden [], :default-queries {:journals [{:title \"🔨 NOW\", :query [:find (pull ?h [*]) :in $ ?start ?today :where [?h :block/marker ?marker] [(contains? #{\"NOW\" \"DOING\"} ?marker)] [?h :block/page ?p] [?p :block/journal? true] [?p :block/journal-day ?d] [(>= ?d ?start)] [(<= ?d ?today)]], :inputs [:14d :today], :result-transform (fn [result] (sort-by (fn [h] (get h :block/priority \"Z\")) result)), :collapsed? false} {:title \"📅 NEXT\", :query [:find (pull ?h [*]) :in $ ?start ?next :where [?h :block/marker ?marker] [(contains? #{\"NOW\" \"LATER\" \"TODO\"} ?marker)] [?h :block/ref-pages ?p] [?p :block/journal? true] [?p :block/journal-day ?d] [(> ?d ?start)] [(< ?d ?next)]], :inputs [:today :7d-after], :collapsed? false}]}, :git-push-secs 10, :git-auto-push false, :editor/logical-outdenting? false, :ui/enable-tooltip? true, :graph/settings {:journal? false, :builtin-pages? false, :orphan-pages? true}, :ui/show-command-doc? true, :default-home {:page \"Nicky\"}}}}"</script><script type="text/javascript">// Single Page Apps for GitHub Pages
      // https://github.com/rafgraph/spa-github-pages
      // Copyright (c) 2016 Rafael Pedicini, licensed under the MIT License
      // ----------------------------------------------------------------------
      // This script checks to see if a redirect is present in the query string
      // and converts it back into the correct url and adds it to the
      // browser's history using window.history.replaceState(...),
      // which won't cause the browser to attempt to load the new url.
      // When the single page app is loaded further down in this file,
      // the correct url will be waiting in the browser's history for
      // the single page app to route accordingly.
      (function(l) {
        if (l.search) {
          var q = {};
          l.search.slice(1).split('&').forEach(function(v) {
            var a = v.split('=');
            q[a[0]] = a.slice(1).join('=').replace(/~and~/g, '&');
          });
          if (q.p !== undefined) {
            window.history.replaceState(null, null,
              l.pathname.slice(0, -1) + (q.p || '') +
              (q.q ? ('?' + q.q) : '') +
              l.hash
            );
          }
        }
      }(window.location))</script><script src="static/js/highlight.min.js"></script><script src="static/js/interact.min.js"></script><script src="static/js/main.js"></script></body>