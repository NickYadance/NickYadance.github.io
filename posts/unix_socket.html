<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="The blog of a programmer who enjoys learning and building things."/><meta property="og:image" content="https://og-image.vercel.app/WuYi&#x27;s%20Blog.png?theme=light&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta name="og:title" content="WuYi&#x27;s Blog"/><meta name="twitter:card" content="summary_large_image"/><title>Unix Socket</title><meta name="next-head-count" content="8"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/f5bbdd045156ccce.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/f5bbdd045156ccce.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/327bdfcd3e98582f.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/327bdfcd3e98582f.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-445a5fe7cadeec28.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-bbecb7d54330d002.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-6e8ee6ae7cc0a14c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-25345a12794bca3a.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/996-5abd08ae305d436b.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/284-919fb0c78b7b87bc.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-30a9d36a22da8e83.js" defer="" crossorigin=""></script><script src="/_next/static/tBDcWIf9tU2_6gXjzKBx-/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/tBDcWIf9tU2_6gXjzKBx-/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="layout_container__FUycR"><header class="layout_header__SFlEE"></header><main><article><h1 class="utils_headingXl__zlq1q">Unix Socket</h1><div class="utils_lightText__B_gv3"><time dateTime="2023-12-21">December 21, 2023</time></div><div><h2>Socket Domain and Type</h2>
<p>socket domain包括<code>unix domain socket</code>和<code>internet domain socket</code>。
<img src="/images/unix_socket/domain.png" alt="domain"></p>
<p>unix domain socket数据通过内核传输，通过套接字文件寻址，不经过网络协议栈(如TCP/IP)。
<img src="/images/unix_socket/unix_domain_socket_io.png" alt="unix_domain_socket_io"></p>
<p>internet domain socket数据通过网络传输，通过网络层寻址(Ipv4/Ipv6)，常见的传输方式基于TCP协议。
<img src="/images/unix_socket/internet_domain_socket_io.png" alt="internet_domain_socket_io.png"></p>
<p>socket类型包括<code>stream</code>和<code>datagram</code>，<code>stream</code> socket的主要特性为：</p>
<ul>
<li>可靠性：发包方和收包方内容完全一致，不乱序、丢包</li>
<li>双向：发包方和收包方可双向传输数据</li>
<li>无界：包数据无边界</li>
</ul>
<p><img src="/images/unix_socket/type.png" alt="type"></p>
<h2>unix domain socket的使用场景</h2>
<p>适用于同一个unix操作系统上的进程间通信，由于不经过网络栈，传输效率比通过loopback的单机网络传输要高。</p>
<h2>internet domain socket是基于TCP/IP协议的吗？</h2>
<p>可能是。internet domain socket可以基于Ipv4/Ipv6进行网络寻址，TCP协议簇进行网络传输，但是也可以基于其他协议。socket
对内核的网络栈操作进行了抽象，方便开发者的使用，开发者可以自行选择合适的协议簇。</p>
<h2>与Http/Websocket协议的关系</h2>
<p>没有关系。Http是常见的应用层协议，基于TCP/IP连接做<strong>单向</strong>数据传输，同时多数Http连接只会进行一次数据收发，随后便断开连接，这种方式称为<code>短连接</code>。
相对的，可以设置Keep Alive参数进行单个Http(TCP)连接上的多次数据收发，称为<code>长连接</code>。</p>
<p>由于单向传输，Server端只负责收包，Client端只负责发包。Server/Client端可以利用socket与内核交互操作TCP/IP连接，但也可以通过其他方式，针对场景获得更好的网络性能。</p>
<p>Websocket是Http连接的升级版，与stream socket类似，可以进行双向无界字节流传输。</p>
<h2>与grpc的关系</h2>
<p>grpc也是跨平台的应用层协议，不同的是grpc以二进制数据进行数据传输，同时原生支持stream，grpc也支持直接通过socket套接字进行数据传输。</p>
<blockquote>
<ul>
<li><a href="https://sciencesoftcode.files.wordpress.com/2018/12/the-linux-programming-interface-michael-kerrisk-1.pdf">the-linux-programming-interface-michael-kerrisk-1</a></li>
</ul>
</blockquote>
</div></article></main><div class="layout_backToHome__D9QFr"><a href="/">← Back</a></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"postData":{"id":"unix_socket","contentHtml":"\u003ch2\u003eSocket Domain and Type\u003c/h2\u003e\n\u003cp\u003esocket domain包括\u003ccode\u003eunix domain socket\u003c/code\u003e和\u003ccode\u003einternet domain socket\u003c/code\u003e。\n\u003cimg src=\"/images/unix_socket/domain.png\" alt=\"domain\"\u003e\u003c/p\u003e\n\u003cp\u003eunix domain socket数据通过内核传输，通过套接字文件寻址，不经过网络协议栈(如TCP/IP)。\n\u003cimg src=\"/images/unix_socket/unix_domain_socket_io.png\" alt=\"unix_domain_socket_io\"\u003e\u003c/p\u003e\n\u003cp\u003einternet domain socket数据通过网络传输，通过网络层寻址(Ipv4/Ipv6)，常见的传输方式基于TCP协议。\n\u003cimg src=\"/images/unix_socket/internet_domain_socket_io.png\" alt=\"internet_domain_socket_io.png\"\u003e\u003c/p\u003e\n\u003cp\u003esocket类型包括\u003ccode\u003estream\u003c/code\u003e和\u003ccode\u003edatagram\u003c/code\u003e，\u003ccode\u003estream\u003c/code\u003e socket的主要特性为：\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e可靠性：发包方和收包方内容完全一致，不乱序、丢包\u003c/li\u003e\n\u003cli\u003e双向：发包方和收包方可双向传输数据\u003c/li\u003e\n\u003cli\u003e无界：包数据无边界\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\u003cimg src=\"/images/unix_socket/type.png\" alt=\"type\"\u003e\u003c/p\u003e\n\u003ch2\u003eunix domain socket的使用场景\u003c/h2\u003e\n\u003cp\u003e适用于同一个unix操作系统上的进程间通信，由于不经过网络栈，传输效率比通过loopback的单机网络传输要高。\u003c/p\u003e\n\u003ch2\u003einternet domain socket是基于TCP/IP协议的吗？\u003c/h2\u003e\n\u003cp\u003e可能是。internet domain socket可以基于Ipv4/Ipv6进行网络寻址，TCP协议簇进行网络传输，但是也可以基于其他协议。socket\n对内核的网络栈操作进行了抽象，方便开发者的使用，开发者可以自行选择合适的协议簇。\u003c/p\u003e\n\u003ch2\u003e与Http/Websocket协议的关系\u003c/h2\u003e\n\u003cp\u003e没有关系。Http是常见的应用层协议，基于TCP/IP连接做\u003cstrong\u003e单向\u003c/strong\u003e数据传输，同时多数Http连接只会进行一次数据收发，随后便断开连接，这种方式称为\u003ccode\u003e短连接\u003c/code\u003e。\n相对的，可以设置Keep Alive参数进行单个Http(TCP)连接上的多次数据收发，称为\u003ccode\u003e长连接\u003c/code\u003e。\u003c/p\u003e\n\u003cp\u003e由于单向传输，Server端只负责收包，Client端只负责发包。Server/Client端可以利用socket与内核交互操作TCP/IP连接，但也可以通过其他方式，针对场景获得更好的网络性能。\u003c/p\u003e\n\u003cp\u003eWebsocket是Http连接的升级版，与stream socket类似，可以进行双向无界字节流传输。\u003c/p\u003e\n\u003ch2\u003e与grpc的关系\u003c/h2\u003e\n\u003cp\u003egrpc也是跨平台的应用层协议，不同的是grpc以二进制数据进行数据传输，同时原生支持stream，grpc也支持直接通过socket套接字进行数据传输。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://sciencesoftcode.files.wordpress.com/2018/12/the-linux-programming-interface-michael-kerrisk-1.pdf\"\u003ethe-linux-programming-interface-michael-kerrisk-1\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n","title":"Unix Socket","date":"2023-12-21","description":"Unix Socket"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"unix_socket"},"buildId":"tBDcWIf9tU2_6gXjzKBx-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>