<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="The blog of a programmer who enjoys learning and building things."/><meta property="og:image" content="https://og-image.vercel.app/WuYi&#x27;s%20Blog.png?theme=light&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta name="og:title" content="WuYi&#x27;s Blog"/><meta name="twitter:card" content="summary_large_image"/><title>彻底理解快速排序的分治问题</title><meta name="next-head-count" content="8"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/11f0b3113f1fffe8.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/11f0b3113f1fffe8.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/327bdfcd3e98582f.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/327bdfcd3e98582f.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-445a5fe7cadeec28.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-bbecb7d54330d002.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-6e8ee6ae7cc0a14c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-25345a12794bca3a.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/640-f96c14577142176a.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-d0d85adcca54aa92.js" defer="" crossorigin=""></script><script src="/_next/static/LKXWr1c9pXyy9a8cV4Fr_/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/LKXWr1c9pXyy9a8cV4Fr_/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="layout_container__FUycR"><header class="layout_header__SFlEE"></header><main><article><h1 class="utils_headingXl__zlq1q">彻底理解快速排序的分治问题</h1><div class="utils_lightText__B_gv3"><time dateTime="2023-11-11">November 11, 2023</time></div><div><p>快速排序是一个分治算法，基本思路是在每次分治中，对数组<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">A[l, r)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mclose">)</span></span></span></span>找到一个分治点<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span></span></span></span>，<strong>满足<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span></span></span></span>左边的元素都小于等于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>p</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">A[p]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mclose">]</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit">p</span></span></span></span>右边的元素都大于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>p</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">A[p]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit">p</span><span class="mclose">]</span></span></span></span></strong>。</p>
<pre><code class="hljs"><span class="hljs-function"><span class="hljs-title">QuickSort</span><span class="hljs-params">(A, l, r)</span></span>:
     <span class="hljs-keyword">if</span> l &lt; r :
         <span class="hljs-selector-tag">p</span> = <span class="hljs-built_in">Partition</span>(A, l, r)
         <span class="hljs-built_in">QuickSort</span>(A, l, <span class="hljs-selector-tag">p</span> - <span class="hljs-number">1</span>)
         <span class="hljs-built_in">QuickSort</span>(A, <span class="hljs-selector-tag">p</span> + <span class="hljs-number">1</span>, r)
</code></pre>
<p>至于为什么这样分治能对数组排序我们不作分析，只介绍Partition的实现。为了彻底理解Partition的过程并能写出BugFree的代码，
我们以<a href="https://en.wikipedia.org/wiki/Quicksort">Lomuto</a>的实现为例，使用循环不变量描述算法过程。</p>
<blockquote>
<p>注意：此实现下的快速排序性能并不是最优的。</p>
</blockquote>
<p>首先，我们将数组划分为四个部分<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>l</mi><mo separator="true">,</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo separator="true">,</mo><mi>r</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">A[l, i, j, r)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mclose">)</span></span></span></span>，每个部分和目标值<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>的大小关系不同，其中：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">{</mo><mtable><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mi>k</mi><mo>∈</mo><mo>[</mo><mi>l</mi><mo separator="true">,</mo><mi>i</mi><mo>)</mo><mo separator="true">,</mo><mi>A</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>&lt;</mo><mo>=</mo><mi>x</mi></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mi>k</mi><mo>∈</mo><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>)</mo><mo separator="true">,</mo><mi>A</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>&gt;</mo><mi>x</mi></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mi>k</mi><mo>∈</mo><mo>[</mo><mi>j</mi><mo separator="true">,</mo><mi>r</mi><mo>)</mo><mo separator="true">,</mo><mi>A</mi><mo>[</mo><mi>k</mi><mo>]</mo><mtext> </mtext><mo>?</mo><mtext> </mtext><mi>x</mi></mrow></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">\begin{cases}
&amp;k \in [l, i), A[k] &lt;= x \\\\ &amp;k \in [i, j), A[k] &gt; x \\\\ &amp;k \in [j, r), A[k] \ ? \ x 
\end{cases}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:3.8500199999999998em;"></span><span class="strut bottom" style="height:7.2000399999999996em;vertical-align:-3.3500199999999998em;"></span><span class="base displaystyle textstyle uncramped"><span class="minner displaystyle textstyle uncramped"><span class="style-wrap reset-textstyle textstyle uncramped"><span class="delimsizing mult"><span class="vlist"><span style="top:2.45001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎩</span></span></span><span style="top:2.45001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:2.15001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:1.85001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:1.5500099999999999em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:1.2500099999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:0.9500099999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-0.000010000000000287557em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎨</span></span></span><span style="top:-1.1500100000000002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-1.4500100000000002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-1.7500100000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-2.0500100000000003em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-2.35001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-2.65001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎪</span></span></span><span style="top:-2.95002em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="delimsizinginner delim-size4"><span>⎧</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist"><span style="top:-2.8420000000000005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:-1.4020000000000006em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:0.03799999999999926em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:1.4779999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span style="top:2.918em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-l"><span class="vlist"><span style="top:-2.8420000000000005em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">∈</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mord mathit">i</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mrel">&lt;</span><span class="mrel">=</span><span class="mord mathit">x</span></span></span><span style="top:0.0379999999999997em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">∈</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mrel">&gt;</span><span class="mord mathit">x</span></span></span><span style="top:2.918em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="mord displaystyle textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">∈</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mord mspace"> </span><span class="mclose">?</span><span class="mord mspace"> </span><span class="mord mathit">x</span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p>
<p><img src="/images/quicksort_partition.png" alt="quicksort_partition.png"></p>
<p>初始条件为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>=</mo><mi>j</mi><mo>=</mo><mi>l</mi><mo separator="true">,</mo><mi>x</mi><mo>=</mo><mi>A</mi><mo>[</mo><mi>r</mi><mo>−</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding="application/x-tex">i=j=l, x=A[r-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mord mathit">x</span><span class="mrel">=</span><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mbin">−</span><span class="mord mathrm">1</span><span class="mclose">]</span></span></span></span>，此时<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>[</mo><mi>l</mi><mo separator="true">,</mo><mi>i</mi><mo>)</mo><mo separator="true">,</mo><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>)</mo></mrow><annotation encoding="application/x-tex">[l,i),[i,j)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mord mathit">i</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">)</span></span></span></span>都为空，循环不变量成立。</p>
<p>终结条件为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi><mo>=</mo><mi>r</mi></mrow><annotation encoding="application/x-tex">j=r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span>，此时<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.65952em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span></span></span></span>即为我们要寻找的分治点。</p>
<p>当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi><mo>=</mo><mi>j</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">j=j+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mrel">=</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span>时，有两种情况：</p>
<ol>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>j</mi><mo>]</mo><mo>&gt;</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">A[j]&gt;x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">&gt;</span><span class="mord mathit">x</span></span></span></span>，此时对 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mo>∈</mo><mo>[</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo separator="true">,</mo><mi>A</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>&gt;</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">k \in [i, j+1), A[k] &gt; x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mrel">∈</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mpunct">,</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mbin">+</span><span class="mord mathrm">1</span><span class="mclose">)</span><span class="mpunct">,</span><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.03148em;">k</span><span class="mclose">]</span><span class="mrel">&gt;</span><span class="mord mathit">x</span></span></span></span> ，不变量成立</li>
<li><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>j</mi><mo>]</mo><mo>&lt;</mo><mo>=</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">A[j]&lt;=x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span><span class="mrel">&lt;</span><span class="mrel">=</span><span class="mord mathit">x</span></span></span></span>，此时交换<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo separator="true">,</mo><mi>A</mi><mo>[</mo><mi>j</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">A[i], A[j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit">i</span><span class="mclose">]</span><span class="mpunct">,</span><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>=</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i=i+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.65952em;"></span><span class="strut bottom" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathit">i</span><span class="mrel">=</span><span class="mord mathit">i</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span>。即把<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>j</mi><mo>]</mo></mrow><annotation encoding="application/x-tex">A[j]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.75em;"></span><span class="strut bottom" style="height:1em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mord mathit">A</span><span class="mopen">[</span><span class="mord mathit" style="margin-right:0.05724em;">j</span><span class="mclose">]</span></span></span></span>放到小于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit">x</span></span></span></span>的区间末尾，并将此区间右移一位，保持循环不变量成立
<img src="/images/quicksort_loop.png" alt="quicksort_loop.png"></li>
</ol>
<p>按照四要素对Partition编码并实现快排。</p>
<blockquote>
<p>注意：对下标的处理</p>
</blockquote>
<pre><code class="hljs language-go"><span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">swap</span><span class="hljs-params">(A []<span class="hljs-type">int</span>, i, j <span class="hljs-type">int</span>)</span></span> {
	tmp := A[i]
	A[i] = A[j]
	A[j] = tmp
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">Partition</span><span class="hljs-params">(A []<span class="hljs-type">int</span>, l, r <span class="hljs-type">int</span>)</span></span> (pivot <span class="hljs-type">int</span>) {
	i := l
	j := l
	x := A[r<span class="hljs-number">-1</span>]
	<span class="hljs-keyword">for</span> j &lt; r {
		<span class="hljs-keyword">if</span> A[j] &lt;= x {
			swap(A, i, j)
			i = i + <span class="hljs-number">1</span>
		}
		j = j + <span class="hljs-number">1</span>
	}
	<span class="hljs-keyword">return</span> i - <span class="hljs-number">1</span>
}

<span class="hljs-function"><span class="hljs-keyword">func</span> <span class="hljs-title">QSort</span><span class="hljs-params">(A []<span class="hljs-type">int</span>, l, r <span class="hljs-type">int</span>)</span></span> {
	<span class="hljs-keyword">if</span> l &lt; r {
		pivot := Partition(A, l, r)
		QSort(A, l, pivot)
		QSort(A, pivot+<span class="hljs-number">1</span>, r)
	}
}
</code></pre>
<blockquote>
<p><a href="https://jingyuexing.github.io/Ebook/Algorithm/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA.pdf">算法导论</a></p>
</blockquote>
</div></article></main><div class="layout_backToHome__D9QFr"><a href="/">← Back</a></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"postData":{"id":"qsort","contentHtml":"\u003cp\u003e快速排序是一个分治算法，基本思路是在每次分治中，对数组\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA[l, r)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e找到一个分治点\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ep\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ep\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:0.625em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003ep\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e，\u003cstrong\u003e满足\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ep\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ep\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:0.625em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003ep\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e左边的元素都小于等于\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA[p]\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ep\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e，\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ep\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ep\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:0.625em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003ep\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e右边的元素都大于\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ep\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA[p]\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ep\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/strong\u003e。\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-title\"\u003eQuickSort\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(A, l, r)\u003c/span\u003e\u003c/span\u003e:\n     \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e l \u0026lt; r :\n         \u003cspan class=\"hljs-selector-tag\"\u003ep\u003c/span\u003e = \u003cspan class=\"hljs-built_in\"\u003ePartition\u003c/span\u003e(A, l, r)\n         \u003cspan class=\"hljs-built_in\"\u003eQuickSort\u003c/span\u003e(A, l, \u003cspan class=\"hljs-selector-tag\"\u003ep\u003c/span\u003e - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e)\n         \u003cspan class=\"hljs-built_in\"\u003eQuickSort\u003c/span\u003e(A, \u003cspan class=\"hljs-selector-tag\"\u003ep\u003c/span\u003e + \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, r)\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e至于为什么这样分治能对数组排序我们不作分析，只介绍Partition的实现。为了彻底理解Partition的过程并能写出BugFree的代码，\n我们以\u003ca href=\"https://en.wikipedia.org/wiki/Quicksort\"\u003eLomuto\u003c/a\u003e的实现为例，使用循环不变量描述算法过程。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e注意：此实现下的快速排序性能并不是最优的。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e首先，我们将数组划分为四个部分\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA[l, i, j, r)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e，每个部分和目标值\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ex\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e的大小关系不同，其中：\u003c/p\u003e\n\u003cp\u003e\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmrow\u003e\u003cmo fence=\"true\"\u003e{\u003c/mo\u003e\u003cmtable\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmrow\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmrow\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e∈\u003c/mo\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e)\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003cmo\u003e\u0026lt;\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmrow\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmrow\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmrow\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e∈\u003c/mo\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e)\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003cmo\u003e\u0026gt;\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmrow\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003cmtr\u003e\u003cmtd\u003e\u003cmrow\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003cmtd\u003e\u003cmrow\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e∈\u003c/mo\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo\u003e)\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmo\u003e?\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003c/mtd\u003e\u003c/mtr\u003e\u003c/mtable\u003e\u003c/mrow\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\begin{cases}\n\u0026amp;k \\in [l, i), A[k] \u0026lt;= x \\\\\\\\ \u0026amp;k \\in [i, j), A[k] \u0026gt; x \\\\\\\\ \u0026amp;k \\in [j, r), A[k] \\ ? \\ x \n\\end{cases}\n\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:3.8500199999999998em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:7.2000399999999996em;vertical-align:-3.3500199999999998em;\"\u003e\u003c/span\u003e\u003cspan class=\"base displaystyle textstyle uncramped\"\u003e\u003cspan class=\"minner displaystyle textstyle uncramped\"\u003e\u003cspan class=\"style-wrap reset-textstyle textstyle uncramped\"\u003e\u003cspan class=\"delimsizing mult\"\u003e\u003cspan class=\"vlist\"\u003e\u003cspan style=\"top:2.45001em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎩\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:2.45001em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:2.15001em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:1.85001em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:1.5500099999999999em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:1.2500099999999998em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:0.9500099999999998em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-0.000010000000000287557em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎨\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-1.1500100000000002em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-1.4500100000000002em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-1.7500100000000003em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-2.0500100000000003em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-2.35001em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-2.65001em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎪\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-2.95002em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"delimsizinginner delim-size4\"\u003e\u003cspan\u003e⎧\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"baseline-fix\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e​\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mtable\"\u003e\u003cspan class=\"col-align-l\"\u003e\u003cspan class=\"vlist\"\u003e\u003cspan style=\"top:-2.8420000000000005em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord displaystyle textstyle uncramped\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-1.4020000000000006em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord displaystyle textstyle uncramped\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:0.03799999999999926em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord displaystyle textstyle uncramped\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:1.4779999999999998em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord displaystyle textstyle uncramped\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:2.918em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord displaystyle textstyle uncramped\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"baseline-fix\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e​\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"arraycolsep\" style=\"width:1em;\"\u003e\u003c/span\u003e\u003cspan class=\"col-align-l\"\u003e\u003cspan class=\"vlist\"\u003e\u003cspan style=\"top:-2.8420000000000005em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord displaystyle textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mrel\"\u003e∈\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:0.0379999999999997em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord displaystyle textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mrel\"\u003e∈\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:2.918em;\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord displaystyle textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mrel\"\u003e∈\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003cspan class=\"mord mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mclose\"\u003e?\u003c/span\u003e\u003cspan class=\"mord mspace\"\u003e \u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"baseline-fix\"\u003e\u003cspan class=\"fontsize-ensurer reset-size5 size5\"\u003e\u003cspan style=\"font-size:0em;\"\u003e​\u003c/span\u003e\u003c/span\u003e​\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/p\u003e\n\u003cp\u003e\u003cimg src=\"/images/quicksort_partition.png\" alt=\"quicksort_partition.png\"\u003e\u003c/p\u003e\n\u003cp\u003e初始条件为\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e]\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ei=j=l, x=A[r-1]\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ex\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mord mathrm\"\u003e1\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e，此时\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003el\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e)\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e[l,i),[i,j)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.01968em;\"\u003el\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e都为空，循环不变量成立。\u003c/p\u003e\n\u003cp\u003e终结条件为\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003er\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ej=r\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.65952em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:0.85396em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.02778em;\"\u003er\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e，此时\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ei\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.65952em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:0.65952em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e即为我们要寻找的分治点。\u003c/p\u003e\n\u003cp\u003e当\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ej=j+1\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.65952em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:0.85396em;vertical-align:-0.19444em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mord mathrm\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e时，有两种情况：\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003cmo\u003e\u0026gt;\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA[j]\u0026gt;x\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e，此时对 \u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e∈\u003c/mo\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003cmo\u003e)\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ek\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003cmo\u003e\u0026gt;\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ek \\in [i, j+1), A[k] \u0026gt; x\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mrel\"\u003e∈\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mord mathrm\"\u003e1\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.03148em;\"\u003ek\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u0026gt;\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e ，不变量成立\u003c/li\u003e\n\u003cli\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003cmo\u003e\u0026lt;\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA[j]\u0026lt;=x\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003cspan class=\"mrel\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e，此时交换\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003cmo separator=\"true\"\u003e,\u003c/mo\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA[i], A[j]\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003cspan class=\"mpunct\"\u003e,\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e，\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003ei\u003c/mi\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmn\u003e1\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ei=i+1\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.65952em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:0.74285em;vertical-align:-0.08333em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mord mathit\"\u003ei\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mord mathrm\"\u003e1\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e。即把\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eA\u003c/mi\u003e\u003cmo\u003e[\u003c/mo\u003e\u003cmi\u003ej\u003c/mi\u003e\u003cmo\u003e]\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eA[j]\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.75em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003eA\u003c/span\u003e\u003cspan class=\"mopen\"\u003e[\u003c/span\u003e\u003cspan class=\"mord mathit\" style=\"margin-right:0.05724em;\"\u003ej\u003c/span\u003e\u003cspan class=\"mclose\"\u003e]\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e放到小于\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ex\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ex\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"strut\" style=\"height:0.43056em;\"\u003e\u003c/span\u003e\u003cspan class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"\u003e\u003c/span\u003e\u003cspan class=\"base textstyle uncramped\"\u003e\u003cspan class=\"mord mathit\"\u003ex\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e的区间末尾，并将此区间右移一位，保持循环不变量成立\n\u003cimg src=\"/images/quicksort_loop.png\" alt=\"quicksort_loop.png\"\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003e按照四要素对Partition编码并实现快排。\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e注意：对下标的处理\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-go\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eswap\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(A []\u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e, i, j \u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e)\u003c/span\u003e\u003c/span\u003e {\n\ttmp := A[i]\n\tA[i] = A[j]\n\tA[j] = tmp\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003ePartition\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(A []\u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e, l, r \u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e)\u003c/span\u003e\u003c/span\u003e (pivot \u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e) {\n\ti := l\n\tj := l\n\tx := A[r\u003cspan class=\"hljs-number\"\u003e-1\u003c/span\u003e]\n\t\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e j \u0026lt; r {\n\t\t\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e A[j] \u0026lt;= x {\n\t\t\tswap(A, i, j)\n\t\t\ti = i + \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\t\t}\n\t\tj = j + \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n\t}\n\t\u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e i - \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e\n}\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eQSort\u003c/span\u003e\u003cspan class=\"hljs-params\"\u003e(A []\u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e, l, r \u003cspan class=\"hljs-type\"\u003eint\u003c/span\u003e)\u003c/span\u003e\u003c/span\u003e {\n\t\u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e l \u0026lt; r {\n\t\tpivot := Partition(A, l, r)\n\t\tQSort(A, l, pivot)\n\t\tQSort(A, pivot+\u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e, r)\n\t}\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cblockquote\u003e\n\u003cp\u003e\u003ca href=\"https://jingyuexing.github.io/Ebook/Algorithm/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA.pdf\"\u003e算法导论\u003c/a\u003e\u003c/p\u003e\n\u003c/blockquote\u003e\n","title":"彻底理解快速排序的分治问题","date":"2023-11-11","description":""}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"qsort"},"buildId":"LKXWr1c9pXyy9a8cV4Fr_","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>