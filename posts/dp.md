---
title: '理解动态规划：从切钢管开始'
date: '2023-11-13'
description: ''
---

动态规划(dynamic programming)是一种分治算法，可以解决一类拥有特定性质的问题，针对这些问题，动态规划提供 一种高效的解决思路。特定性质包括两点：

1. 重复子问题
2. 最优子结构

两种性质按字面意义理解都不难，1，会重复处理相同规模的子问题；2，当父问题的解是最优时，子问题也是最优。
但具体问题可不会把子问题的关系 明着告诉我们，实际上动态规划的编码往往是单一、有迹可循的，对子问题的分析才是解决此类问题的难点。
本文的目标是以切钢管问题为例子，重在理清 动态规划的两种性质，同时给出动态规划的编码模板。

钢管问题：已知长度为$i$的钢管的的售价为$p(i)$，现在可将长度为$n$的钢管切成任意段，求所有片段的售价总和最大值。

直观的看，对于长度为$n$的钢管，我们可以分别尝试在长度1,2,...,n的位置“砍一刀”得到一个切分方案，得到一个递归式。
$$
P(n)=Max(p(i) + P(n-i)), i \in [1,n]
$$

画出$P(4)$的递归树，树中有多个重复的子节点$P(1),P(2),P(0)$，说明问题满足动态规划的性质之一：**重复子问题**。

![dp_cutting_recursive_tree.png](/images/dp_cutting_recursive_tree.png)

对于切钢管问题，我们很容易能注意到问题具有**最优子结构**。对于一般的动态规划问题，可以通过名为**cut-paste**
的反证法证明：假设$P(n)=p(i)+P(n-i)$为最优解， 而$P(n-i)$不是最优解，那么存在另外一个$P1(n-i)$，使得$P1(n)=p(i)+P1(n-i)
$为最优解，这与$P(n)$为最优解矛盾。

