<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="The blog of a programmer who enjoys learning and building things."/><meta property="og:image" content="https://og-image.vercel.app/WuYi&#x27;s%20Blog.png?theme=light&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta name="og:title" content="WuYi&#x27;s Blog"/><meta name="twitter:card" content="summary_large_image"/><title>Mysql事务隔离级别(无废话版)</title><meta name="next-head-count" content="8"/><link data-next-font="" rel="preconnect" href="/" crossorigin="anonymous"/><link rel="preload" href="/_next/static/css/f5bbdd045156ccce.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/f5bbdd045156ccce.css" crossorigin="" data-n-g=""/><link rel="preload" href="/_next/static/css/327bdfcd3e98582f.css" as="style" crossorigin=""/><link rel="stylesheet" href="/_next/static/css/327bdfcd3e98582f.css" crossorigin="" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" crossorigin="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-445a5fe7cadeec28.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/framework-bbecb7d54330d002.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/main-6e8ee6ae7cc0a14c.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/_app-25345a12794bca3a.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/996-5abd08ae305d436b.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/284-919fb0c78b7b87bc.js" defer="" crossorigin=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-30a9d36a22da8e83.js" defer="" crossorigin=""></script><script src="/_next/static/tBDcWIf9tU2_6gXjzKBx-/_buildManifest.js" defer="" crossorigin=""></script><script src="/_next/static/tBDcWIf9tU2_6gXjzKBx-/_ssgManifest.js" defer="" crossorigin=""></script></head><body><div id="__next"><div class="layout_container__FUycR"><header class="layout_header__SFlEE"></header><main><article><h1 class="utils_headingXl__zlq1q">Mysql事务隔离级别(无废话版)</h1><div class="utils_lightText__B_gv3"><time dateTime="2023-12-18">December 18, 2023</time></div><div><p>测试数据</p>
<pre><code class="hljs language-nsql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> IsolationTests;
<span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> IsolationTests
(
    Col1 <span class="hljs-type">INT</span>,
    Col2 <span class="hljs-type">INT</span>,
    Col3 <span class="hljs-type">INT</span>
);

<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> IsolationTests(Col1,Col2,Col3)
<span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>
<span class="hljs-keyword">UNION</span> <span class="hljs-keyword">ALL</span> <span class="hljs-keyword">SELECT</span> <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>;
</code></pre>
<h2>读未提交(READ UNCOMMITTED)</h2>
<pre><code class="hljs language-nsql"><span class="hljs-comment">-- T1                                              - T2</span>
<span class="hljs-keyword">SET</span> TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;  <span class="hljs-keyword">SET</span> TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;
<span class="hljs-keyword">BEGIN</span>;                                             <span class="hljs-keyword">BEGIN</span>;
<span class="hljs-keyword">UPDATE</span> IsolationTests <span class="hljs-keyword">SET</span> Col1 <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;                
                                                   <span class="hljs-comment">-- Col1=2, dirty read </span>
                                                   <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests;    
<span class="hljs-keyword">ROLLBACK</span>;                                          
                                                   <span class="hljs-comment">-- Col1=1</span>
                                                   <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests;  
                                                   <span class="hljs-keyword">COMMIT</span>; 
</code></pre>
<h2>读已提交(READ COMMITTED)</h2>
<pre><code class="hljs language-nsql"><span class="hljs-comment">-- T1                                             -- T2                                            </span>
<span class="hljs-keyword">SET</span> TRANSACTION ISOLATION LEVEL READ COMMITTED;   <span class="hljs-keyword">SET</span> TRANSACTION ISOLATION LEVEL READ COMMITTED;  
<span class="hljs-keyword">BEGIN</span>;                                            <span class="hljs-keyword">BEGIN</span>;                                           
                                                  <span class="hljs-comment">-- Col1 = 1                   </span>
                                                  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests;    
<span class="hljs-keyword">UPDATE</span> IsolationTests <span class="hljs-keyword">SET</span> Col1 <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;               
                                                  <span class="hljs-comment">-- Col1 = 1, T1 uncommitted </span>
                                                  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests;    
<span class="hljs-keyword">COMMIT</span>;
                                                  <span class="hljs-comment">-- Col1 = 2, T1 committed </span>
                                                  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests;    
												  <span class="hljs-keyword">COMMIT</span>;                                          
</code></pre>
<h2>可重复读(REPEATABLE READ)</h2>
<pre><code class="hljs language-nsql"><span class="hljs-comment">-- T1                                             -- T2                                            </span>
<span class="hljs-keyword">SET</span> TRANSACTION ISOLATION LEVEL REPEATABLE READ;  <span class="hljs-keyword">SET</span> TRANSACTION ISOLATION LEVEL REPEATABLE READ;  
<span class="hljs-keyword">BEGIN</span>;                                            <span class="hljs-keyword">BEGIN</span>;                                           
                                                  <span class="hljs-comment">-- Col1 = 1                   </span>
                                                  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests;    
<span class="hljs-keyword">UPDATE</span> IsolationTests <span class="hljs-keyword">SET</span> Col1 <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;               
                                                  <span class="hljs-comment">-- Col1 = 1, T1 uncommitted</span>
                                                  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests;    
<span class="hljs-keyword">COMMIT</span>;
                                                  <span class="hljs-comment">-- Col1 = 1, T1 committed</span>
                                                  <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests;    
                                                  <span class="hljs-keyword">COMMIT</span>;
</code></pre>
<h2>幻读(REPEATABLE READ)</h2>
<pre><code class="hljs language-nsql"><span class="hljs-comment">-- T1                                              -- T2                                            </span>
<span class="hljs-keyword">SET</span> TRANSACTION ISOLATION LEVEL REPEATABLE READ ;  <span class="hljs-keyword">SET</span> TRANSACTION ISOLATION LEVEL REPEATABLE READ ;
<span class="hljs-keyword">BEGIN</span>;                                             <span class="hljs-keyword">BEGIN</span>;                                           
                                                   <span class="hljs-comment">-- empty </span>
                                                   <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests <span class="hljs-keyword">where</span> Col1<span class="hljs-operator">=</span><span class="hljs-number">2</span>;  
<span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> IsolationTests <span class="hljs-keyword">values</span> (<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>);                                 
<span class="hljs-keyword">COMMIT</span>;                                            
                                                   <span class="hljs-comment">-- empty      </span>
                                                   <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests <span class="hljs-keyword">where</span> Col1<span class="hljs-operator">=</span><span class="hljs-number">2</span>;   
                                                   <span class="hljs-comment">-- Update with forced latest snapshot </span>
                                                   <span class="hljs-keyword">UPDATE</span> IsolationTests <span class="hljs-keyword">SET</span> Col2<span class="hljs-operator">=</span><span class="hljs-number">3</span>, Col3<span class="hljs-operator">=</span><span class="hljs-number">4</span> <span class="hljs-keyword">where</span> Col1<span class="hljs-operator">=</span><span class="hljs-number">2</span>;
                                                   <span class="hljs-comment">-- Phantom Read : Col (2, 3, 4)</span>
                                                   <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> IsolationTests <span class="hljs-keyword">where</span> Col1<span class="hljs-operator">=</span><span class="hljs-number">2</span>;
                                                   <span class="hljs-keyword">COMMIT</span>; 
</code></pre>
<blockquote>
<ul>
<li><a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-consistent-read.html">innodb-consistent-read</a></li>
<li><a href="https://gavindraper.com/2012/02/18/sql-server-isolation-levels-by-example/">sql-server-isolation-levels-by-example</a></li>
</ul>
</blockquote>
</div></article></main><div class="layout_backToHome__D9QFr"><a href="/">← Back</a></div></div></div><script id="__NEXT_DATA__" type="application/json" crossorigin="">{"props":{"pageProps":{"postData":{"id":"mysql_isolation","contentHtml":"\u003cp\u003e测试数据\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-nsql\"\u003e\u003cspan class=\"hljs-keyword\"\u003eDROP\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e IF \u003cspan class=\"hljs-keyword\"\u003eEXISTS\u003c/span\u003e IsolationTests;\n\u003cspan class=\"hljs-keyword\"\u003eCREATE\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eTABLE\u003c/span\u003e IsolationTests\n(\n    Col1 \u003cspan class=\"hljs-type\"\u003eINT\u003c/span\u003e,\n    Col2 \u003cspan class=\"hljs-type\"\u003eINT\u003c/span\u003e,\n    Col3 \u003cspan class=\"hljs-type\"\u003eINT\u003c/span\u003e\n);\n\n\u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e IsolationTests(Col1,Col2,Col3)\n\u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eUNION\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eALL\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e1\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e读未提交(READ UNCOMMITTED)\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-nsql\"\u003e\u003cspan class=\"hljs-comment\"\u003e-- T1                                              - T2\u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;  \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e TRANSACTION ISOLATION LEVEL READ UNCOMMITTED;\n\u003cspan class=\"hljs-keyword\"\u003eBEGIN\u003c/span\u003e;                                             \u003cspan class=\"hljs-keyword\"\u003eBEGIN\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eUPDATE\u003c/span\u003e IsolationTests \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e Col1 \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;                \n                                                   \u003cspan class=\"hljs-comment\"\u003e-- Col1=2, dirty read \u003c/span\u003e\n                                                   \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests;    \n\u003cspan class=\"hljs-keyword\"\u003eROLLBACK\u003c/span\u003e;                                          \n                                                   \u003cspan class=\"hljs-comment\"\u003e-- Col1=1\u003c/span\u003e\n                                                   \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests;  \n                                                   \u003cspan class=\"hljs-keyword\"\u003eCOMMIT\u003c/span\u003e; \n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e读已提交(READ COMMITTED)\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-nsql\"\u003e\u003cspan class=\"hljs-comment\"\u003e-- T1                                             -- T2                                            \u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e TRANSACTION ISOLATION LEVEL READ COMMITTED;   \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e TRANSACTION ISOLATION LEVEL READ COMMITTED;  \n\u003cspan class=\"hljs-keyword\"\u003eBEGIN\u003c/span\u003e;                                            \u003cspan class=\"hljs-keyword\"\u003eBEGIN\u003c/span\u003e;                                           \n                                                  \u003cspan class=\"hljs-comment\"\u003e-- Col1 = 1                   \u003c/span\u003e\n                                                  \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests;    \n\u003cspan class=\"hljs-keyword\"\u003eUPDATE\u003c/span\u003e IsolationTests \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e Col1 \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;               \n                                                  \u003cspan class=\"hljs-comment\"\u003e-- Col1 = 1, T1 uncommitted \u003c/span\u003e\n                                                  \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests;    \n\u003cspan class=\"hljs-keyword\"\u003eCOMMIT\u003c/span\u003e;\n                                                  \u003cspan class=\"hljs-comment\"\u003e-- Col1 = 2, T1 committed \u003c/span\u003e\n                                                  \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests;    \n\t\t\t\t\t\t\t\t\t\t\t\t  \u003cspan class=\"hljs-keyword\"\u003eCOMMIT\u003c/span\u003e;                                          \n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e可重复读(REPEATABLE READ)\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-nsql\"\u003e\u003cspan class=\"hljs-comment\"\u003e-- T1                                             -- T2                                            \u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e TRANSACTION ISOLATION LEVEL REPEATABLE READ;  \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e TRANSACTION ISOLATION LEVEL REPEATABLE READ;  \n\u003cspan class=\"hljs-keyword\"\u003eBEGIN\u003c/span\u003e;                                            \u003cspan class=\"hljs-keyword\"\u003eBEGIN\u003c/span\u003e;                                           \n                                                  \u003cspan class=\"hljs-comment\"\u003e-- Col1 = 1                   \u003c/span\u003e\n                                                  \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests;    \n\u003cspan class=\"hljs-keyword\"\u003eUPDATE\u003c/span\u003e IsolationTests \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e Col1 \u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e \u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;               \n                                                  \u003cspan class=\"hljs-comment\"\u003e-- Col1 = 1, T1 uncommitted\u003c/span\u003e\n                                                  \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests;    \n\u003cspan class=\"hljs-keyword\"\u003eCOMMIT\u003c/span\u003e;\n                                                  \u003cspan class=\"hljs-comment\"\u003e-- Col1 = 1, T1 committed\u003c/span\u003e\n                                                  \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests;    \n                                                  \u003cspan class=\"hljs-keyword\"\u003eCOMMIT\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e幻读(REPEATABLE READ)\u003c/h2\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-nsql\"\u003e\u003cspan class=\"hljs-comment\"\u003e-- T1                                              -- T2                                            \u003c/span\u003e\n\u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e TRANSACTION ISOLATION LEVEL REPEATABLE READ ;  \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e TRANSACTION ISOLATION LEVEL REPEATABLE READ ;\n\u003cspan class=\"hljs-keyword\"\u003eBEGIN\u003c/span\u003e;                                             \u003cspan class=\"hljs-keyword\"\u003eBEGIN\u003c/span\u003e;                                           \n                                                   \u003cspan class=\"hljs-comment\"\u003e-- empty \u003c/span\u003e\n                                                   \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e Col1\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;  \n\u003cspan class=\"hljs-keyword\"\u003eINSERT\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eINTO\u003c/span\u003e IsolationTests \u003cspan class=\"hljs-keyword\"\u003evalues\u003c/span\u003e (\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e,\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e);                                 \n\u003cspan class=\"hljs-keyword\"\u003eCOMMIT\u003c/span\u003e;                                            \n                                                   \u003cspan class=\"hljs-comment\"\u003e-- empty      \u003c/span\u003e\n                                                   \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e Col1\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;   \n                                                   \u003cspan class=\"hljs-comment\"\u003e-- Update with forced latest snapshot \u003c/span\u003e\n                                                   \u003cspan class=\"hljs-keyword\"\u003eUPDATE\u003c/span\u003e IsolationTests \u003cspan class=\"hljs-keyword\"\u003eSET\u003c/span\u003e Col2\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e3\u003c/span\u003e, Col3\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e4\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e Col1\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;\n                                                   \u003cspan class=\"hljs-comment\"\u003e-- Phantom Read : Col (2, 3, 4)\u003c/span\u003e\n                                                   \u003cspan class=\"hljs-keyword\"\u003eSELECT\u003c/span\u003e \u003cspan class=\"hljs-operator\"\u003e*\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eFROM\u003c/span\u003e IsolationTests \u003cspan class=\"hljs-keyword\"\u003ewhere\u003c/span\u003e Col1\u003cspan class=\"hljs-operator\"\u003e=\u003c/span\u003e\u003cspan class=\"hljs-number\"\u003e2\u003c/span\u003e;\n                                                   \u003cspan class=\"hljs-keyword\"\u003eCOMMIT\u003c/span\u003e; \n\u003c/code\u003e\u003c/pre\u003e\n\u003cblockquote\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"https://dev.mysql.com/doc/refman/5.7/en/innodb-consistent-read.html\"\u003einnodb-consistent-read\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://gavindraper.com/2012/02/18/sql-server-isolation-levels-by-example/\"\u003esql-server-isolation-levels-by-example\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/blockquote\u003e\n","title":"Mysql事务隔离级别(无废话版)","date":"2023-12-18","description":"Mysql事务隔离级别(无废话版)"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"mysql_isolation"},"buildId":"tBDcWIf9tU2_6gXjzKBx-","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>