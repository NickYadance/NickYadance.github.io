{"pageProps":{"postData":{"id":"qsort","contentHtml":"<p>快速排序是一个分治算法，基本思路是在每次分治中对数组<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>r</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">A[l, r)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mord mathit\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">)</span></span></span></span>找到一个分治点<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">p</span></span></span></span>，<strong>使得<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">p</span></span></span></span>左边的元素都小于等于<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>p</mi><mo>]</mo></mrow><annotation encoding=\"application/x-tex\">A[p]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\">p</span><span class=\"mclose\">]</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">p</span></span></span></span>右边的元素都大于<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>p</mi><mo>]</mo></mrow><annotation encoding=\"application/x-tex\">A[p]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\">p</span><span class=\"mclose\">]</span></span></span></span></strong>。注意这里与二分的不同之处在于分治算法除了要找到分治点外，还需要对数组重组。</p>\n<pre><code class=\"hljs\"><span class=\"hljs-function\"><span class=\"hljs-title\">QuickSort</span><span class=\"hljs-params\">(A, l, r)</span></span>:\n     <span class=\"hljs-keyword\">if</span> l &lt; r :\n         <span class=\"hljs-selector-tag\">p</span> = <span class=\"hljs-built_in\">Partition</span>(A, l, r)\n         <span class=\"hljs-built_in\">QuickSort</span>(A, l, <span class=\"hljs-selector-tag\">p</span> - <span class=\"hljs-number\">1</span>)\n         <span class=\"hljs-built_in\">QuickSort</span>(A, <span class=\"hljs-selector-tag\">p</span> + <span class=\"hljs-number\">1</span>, r)\n</code></pre>\n<p><a href=\"https://en.wikipedia.org/wiki/Quicksort\">Lomuto Partition</a>切分算法描述如下。</p>\n<blockquote>\n<p>注意: Lomuto Partition并不是最优的实现</p>\n</blockquote>\n<p>将数组划分为四个部分<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi><mo separator=\"true\">,</mo><mi>r</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">A[l, i, j, r)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mord mathit\">i</span><span class=\"mpunct\">,</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mpunct\">,</span><span class=\"mord mathit\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">)</span></span></span></span>，每个部分和目标值<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">x</span></span></span></span>的大小关系不同，其中：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mrow><mo fence=\"true\">{</mo><mtable><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mi>k</mi><mo>∈</mo><mo>[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>i</mi><mo>)</mo><mo separator=\"true\">,</mo><mi>A</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>&lt;</mo><mo>=</mo><mi>x</mi></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mi>k</mi><mo>∈</mo><mo>[</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi><mo>)</mo><mo separator=\"true\">,</mo><mi>A</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>&gt;</mo><mi>x</mi></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd></mtr><mtr><mtd><mrow></mrow></mtd><mtd><mrow><mi>k</mi><mo>∈</mo><mo>[</mo><mi>j</mi><mo separator=\"true\">,</mo><mi>r</mi><mo>)</mo><mo separator=\"true\">,</mo><mi>A</mi><mo>[</mo><mi>k</mi><mo>]</mo><mtext> </mtext><mo>?</mo><mtext> </mtext><mi>x</mi></mrow></mtd></mtr></mtable></mrow></mrow><annotation encoding=\"application/x-tex\">\\begin{cases}\n&amp;k \\in [l, i), A[k] &lt;= x \\\\\\\\ &amp;k \\in [i, j), A[k] &gt; x \\\\\\\\ &amp;k \\in [j, r), A[k] \\ ? \\ x \n\\end{cases}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:3.8500199999999998em;\"></span><span class=\"strut bottom\" style=\"height:7.2000399999999996em;vertical-align:-3.3500199999999998em;\"></span><span class=\"base displaystyle textstyle uncramped\"><span class=\"minner displaystyle textstyle uncramped\"><span class=\"style-wrap reset-textstyle textstyle uncramped\"><span class=\"delimsizing mult\"><span class=\"vlist\"><span style=\"top:2.45001em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎩</span></span></span><span style=\"top:2.45001em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:2.15001em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:1.85001em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:1.5500099999999999em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:1.2500099999999998em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:0.9500099999999998em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-0.000010000000000287557em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎨</span></span></span><span style=\"top:-1.1500100000000002em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-1.4500100000000002em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-1.7500100000000003em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.0500100000000003em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.35001em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.65001em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎪</span></span></span><span style=\"top:-2.95002em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"delimsizinginner delim-size4\"><span>⎧</span></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span>​</span></span></span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-l\"><span class=\"vlist\"><span style=\"top:-2.8420000000000005em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"></span></span><span style=\"top:-1.4020000000000006em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"></span></span><span style=\"top:0.03799999999999926em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"></span></span><span style=\"top:1.4779999999999998em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"></span></span><span style=\"top:2.918em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span>​</span></span></span><span class=\"arraycolsep\" style=\"width:1em;\"></span><span class=\"col-align-l\"><span class=\"vlist\"><span style=\"top:-2.8420000000000005em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel\">∈</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mord mathit\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span><span class=\"mrel\">&lt;</span><span class=\"mrel\">=</span><span class=\"mord mathit\">x</span></span></span><span style=\"top:0.0379999999999997em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel\">∈</span><span class=\"mopen\">[</span><span class=\"mord mathit\">i</span><span class=\"mpunct\">,</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span><span class=\"mrel\">&gt;</span><span class=\"mord mathit\">x</span></span></span><span style=\"top:2.918em;\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span><span class=\"mord displaystyle textstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel\">∈</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mpunct\">,</span><span class=\"mord mathit\" style=\"margin-right:0.02778em;\">r</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span><span class=\"mord mspace\"> </span><span class=\"mclose\">?</span><span class=\"mord mspace\"> </span><span class=\"mord mathit\">x</span></span></span><span class=\"baseline-fix\"><span class=\"fontsize-ensurer reset-size5 size5\"><span style=\"font-size:0em;\">​</span></span>​</span></span></span></span></span><span class=\"sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter\"></span></span></span></span></span></span></p>\n<p><img src=\"/images/quicksort_partition.png\" alt=\"quicksort_partition.png\"></p>\n<p>初始条件为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi><mo>=</mo><mi>j</mi><mo>=</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>x</mi><mo>=</mo><mi>A</mi><mo>[</mo><mi>r</mi><mo>−</mo><mn>1</mn><mo>]</mo></mrow><annotation encoding=\"application/x-tex\">i=j=l, x=A[r-1]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">i</span><span class=\"mrel\">=</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel\">=</span><span class=\"mord mathit\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mord mathit\">x</span><span class=\"mrel\">=</span><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.02778em;\">r</span><span class=\"mbin\">−</span><span class=\"mord mathrm\">1</span><span class=\"mclose\">]</span></span></span></span>，此时<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>[</mo><mi>l</mi><mo separator=\"true\">,</mo><mi>i</mi><mo>)</mo><mo separator=\"true\">,</mo><mo>[</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi><mo>)</mo></mrow><annotation encoding=\"application/x-tex\">[l,i),[i,j)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.01968em;\">l</span><span class=\"mpunct\">,</span><span class=\"mord mathit\">i</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mopen\">[</span><span class=\"mord mathit\">i</span><span class=\"mpunct\">,</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">)</span></span></span></span>都为空，循环不变量成立。</p>\n<p>终结条件为<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>j</mi><mo>=</mo><mi>r</mi></mrow><annotation encoding=\"application/x-tex\">j=r</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.65952em;\"></span><span class=\"strut bottom\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel\">=</span><span class=\"mord mathit\" style=\"margin-right:0.02778em;\">r</span></span></span></span>，此时<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.65952em;\"></span><span class=\"strut bottom\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">i</span></span></span></span>即为我们要寻找的分治点。</p>\n<p>当<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>j</mi><mo>=</mo><mi>j</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">j=j+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.65952em;\"></span><span class=\"strut bottom\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel\">=</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mbin\">+</span><span class=\"mord mathrm\">1</span></span></span></span>时，有两种情况：</p>\n<ol>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>j</mi><mo>]</mo><mo>&gt;</mo><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">A[j]&gt;x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mrel\">&gt;</span><span class=\"mord mathit\">x</span></span></span></span>，此时对 <span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>k</mi><mo>∈</mo><mo>[</mo><mi>i</mi><mo separator=\"true\">,</mo><mi>j</mi><mo>+</mo><mn>1</mn><mo>)</mo><mo separator=\"true\">,</mo><mi>A</mi><mo>[</mo><mi>k</mi><mo>]</mo><mo>&gt;</mo><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">k \\in [i, j+1), A[k] &gt; x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel\">∈</span><span class=\"mopen\">[</span><span class=\"mord mathit\">i</span><span class=\"mpunct\">,</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mbin\">+</span><span class=\"mord mathrm\">1</span><span class=\"mclose\">)</span><span class=\"mpunct\">,</span><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">]</span><span class=\"mrel\">&gt;</span><span class=\"mord mathit\">x</span></span></span></span> ，不变量成立</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>j</mi><mo>]</mo><mo>&lt;</mo><mo>=</mo><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">A[j]&lt;=x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span><span class=\"mrel\">&lt;</span><span class=\"mrel\">=</span><span class=\"mord mathit\">x</span></span></span></span>，此时交换<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>i</mi><mo>]</mo><mo separator=\"true\">,</mo><mi>A</mi><mo>[</mo><mi>j</mi><mo>]</mo></mrow><annotation encoding=\"application/x-tex\">A[i], A[j]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\">i</span><span class=\"mclose\">]</span><span class=\"mpunct\">,</span><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>i</mi><mo>=</mo><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">i=i+1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.65952em;\"></span><span class=\"strut bottom\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">i</span><span class=\"mrel\">=</span><span class=\"mord mathit\">i</span><span class=\"mbin\">+</span><span class=\"mord mathrm\">1</span></span></span></span>。即把<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>A</mi><mo>[</mo><mi>j</mi><mo>]</mo></mrow><annotation encoding=\"application/x-tex\">A[j]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.75em;\"></span><span class=\"strut bottom\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">A</span><span class=\"mopen\">[</span><span class=\"mord mathit\" style=\"margin-right:0.05724em;\">j</span><span class=\"mclose\">]</span></span></span></span>放到小于<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">x</span></span></span></span>的区间末尾，并将此区间右移一位，保持循环不变量成立\n<img src=\"/images/quicksort_loop.png\" alt=\"quicksort_loop.png\"></li>\n</ol>\n<p>按照四要素对Partition编码并实现快排。</p>\n<blockquote>\n<p>注意：对下标的处理</p>\n</blockquote>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">swap</span><span class=\"hljs-params\">(A []<span class=\"hljs-type\">int</span>, i, j <span class=\"hljs-type\">int</span>)</span></span> {\n\ttmp := A[i]\n\tA[i] = A[j]\n\tA[j] = tmp\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">Partition</span><span class=\"hljs-params\">(A []<span class=\"hljs-type\">int</span>, l, r <span class=\"hljs-type\">int</span>)</span></span> (pivot <span class=\"hljs-type\">int</span>) {\n\ti := l\n\tj := l\n\tx := A[r<span class=\"hljs-number\">-1</span>]\n\t<span class=\"hljs-keyword\">for</span> j &lt; r {\n\t\t<span class=\"hljs-keyword\">if</span> A[j] &lt;= x {\n\t\t\tswap(A, i, j)\n\t\t\ti = i + <span class=\"hljs-number\">1</span>\n\t\t}\n\t\tj = j + <span class=\"hljs-number\">1</span>\n\t}\n\t<span class=\"hljs-keyword\">return</span> i - <span class=\"hljs-number\">1</span>\n}\n\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">QSort</span><span class=\"hljs-params\">(A []<span class=\"hljs-type\">int</span>, l, r <span class=\"hljs-type\">int</span>)</span></span> {\n\t<span class=\"hljs-keyword\">if</span> l &lt; r {\n\t\tpivot := Partition(A, l, r)\n\t\tQSort(A, l, pivot)\n\t\tQSort(A, pivot+<span class=\"hljs-number\">1</span>, r)\n\t}\n}\n</code></pre>\n<p>分治点<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding=\"application/x-tex\">p</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"strut\" style=\"height:0.43056em;\"></span><span class=\"strut bottom\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"base textstyle uncramped\"><span class=\"mord mathit\">p</span></span></span></span>是一个有用的元素，由于它“中间点”的性质，也可以用来找第k大(小)的元素。</p>\n<pre><code class=\"hljs language-go\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">func</span> <span class=\"hljs-title\">KthElement</span><span class=\"hljs-params\">(A []<span class=\"hljs-type\">int</span>, l, r, k <span class=\"hljs-type\">int</span>)</span></span> <span class=\"hljs-type\">int</span> {\n\t<span class=\"hljs-keyword\">if</span> l &lt; r {\n\t\tpivot := Partition(A, l, r)\n\t\tki := k - <span class=\"hljs-number\">1</span>\n\t\t<span class=\"hljs-keyword\">if</span> ki == pivot {\n\t\t\t<span class=\"hljs-keyword\">return</span> A[pivot]\n\t\t} <span class=\"hljs-keyword\">else</span> <span class=\"hljs-keyword\">if</span> ki &lt; pivot {\n\t\t\t<span class=\"hljs-keyword\">return</span> KthElement(A, l, pivot, k)\n\t\t} <span class=\"hljs-keyword\">else</span> {\n\t\t\t<span class=\"hljs-keyword\">return</span> KthElement(A, pivot+<span class=\"hljs-number\">1</span>, r, k)\n\t\t}\n\t}\n\n\t<span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">-1</span>\n}\n</code></pre>\n<blockquote>\n<p><a href=\"https://jingyuexing.github.io/Ebook/Algorithm/%E7%AE%97%E6%B3%95%E5%AF%BC%E8%AE%BA.pdf\">算法导论</a></p>\n</blockquote>\n","title":"理解快速排序的分治问题","date":"2023-11-11","description":""}},"__N_SSG":true}